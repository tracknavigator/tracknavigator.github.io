(self.webpackChunkmap_bag_osm_pois=self.webpackChunkmap_bag_osm_pois||[]).push([[555],{3540:function(It,et,G){"use strict";var x=G(9344).default,J=this&&this.__importDefault||function($){return $&&$.__esModule?$:{default:$}};Object.defineProperty(et,"__esModule",{value:!0}),et.getHelp=et.getZoneMapFeatures=et.getArea=void 0;const V=J(G(7362)),c=G(6703),j=G(8857),St=G(2671);function dt($){return at.apply(this,arguments)}function at(){return(at=x(function*($){try{console.log(`Take data from: ${c.NOMINATIM_OSM_API}${$}`);const Y=yield V.default.get(`${c.NOMINATIM_OSM_API}${$}`);return console.log("OK"),yn(Y.data[0].boundingbox)}catch{return console.error("ERROR",`${c.NOMINATIM_OSM_API}${$} data not take correctly. Try again later please`),"data not take correctly. Try again later please"}})).apply(this,arguments)}function Zt(){return(Zt=x(function*($=c.Values.EMPTY){if(!$||!$.length)throw new Error("Need search term!!");return yield dt($)})).apply(this,arguments)}function pt($){return ge.apply(this,arguments)}function ge(){return(ge=x(function*($,Y=[],se=!1){const un=(0,j.createQueryInfo)({bbox:$||c.Values.EMPTY,outputFormat:c.OUTPUT_FORMAT.JSON,timeOutInSeconds:50,filters:Y});se&&console.log(`Query:\n ${un}`);try{const ce=yield V.default.post(c.OVERPASS_API,un);return se&&console.log("OK",$),ce.data}catch{return console.log("ERROR",$),null}})).apply(this,arguments)}function Oe(){return(Oe=x(function*($){console.log(`Input data : ${$}`);const Y=$.filters||[];return!$.search||$.bbox&&$.bbox.length?yield pt($.bbox||c.Values.EMPTY,Y):yield pt((yield dt($.search))||c.Values.EMPTY,Y)})).apply(this,arguments)}function yn($){return Wt.apply(this,arguments)}function Wt(){return(Wt=x(function*($){const Y=$[1];return $[1]=$[2],$[2]=Y,$.join(",")})).apply(this,arguments)}et.getArea=function Jt(){return Zt.apply(this,arguments)},et.getZoneMapFeatures=function Ue($){return Oe.apply(this,arguments)},et.getHelp=function ze($=c.Values.SPANISH_CODE){return St.FEATURES.map(Y=>({type:Y.key,filterValues:[...Y.values.map(se=>se!==c.Values.EMPTY?se:c.Values.EMPTY)],description:$===c.Values.SPANISH_CODE?Y.description.es:Y.description.en,url:Y.info}))}},6703:(It,et)=>{"use strict";var x;Object.defineProperty(et,"__esModule",{value:!0}),et.Values=et.INSTRUCTIONS_HELP=et.OUTPUT_FORMAT=et.NOMINATIM_OSM_API=et.OVERPASS_API=void 0,et.OVERPASS_API="https://overpass-api.de/api/interpreter",et.NOMINATIM_OSM_API="https://nominatim.openstreetmap.org/search?X-Requested-With=overpass-ide&format=json&q=",et.OUTPUT_FORMAT={JSON:"json",XML:"xml"},et.INSTRUCTIONS_HELP={intro:"Instrucciones de ",find:{byArea:"",byBoundaryBox:""}},(x=et.Values||(et.Values={})).EMPTY="",x.SPANISH_CODE="es"},5299:function(It,et,G){"use strict";var x=this&&this.__createBinding||(Object.create?function(V,c,j,St){void 0===St&&(St=j);var dt=Object.getOwnPropertyDescriptor(c,j);(!dt||("get"in dt?!c.__esModule:dt.writable||dt.configurable))&&(dt={enumerable:!0,get:function(){return c[j]}}),Object.defineProperty(V,St,dt)}:function(V,c,j,St){void 0===St&&(St=j),V[St]=c[j]}),J=this&&this.__exportStar||function(V,c){for(var j in V)"default"!==j&&!Object.prototype.hasOwnProperty.call(c,j)&&x(c,V,j)};Object.defineProperty(et,"__esModule",{value:!0}),J(G(6703),et),J(G(2671),et)},2671:(It,et,G)=>{"use strict";Object.defineProperty(et,"__esModule",{value:!0}),et.FEATURES=et.AMENITY=void 0;const x=G(6703),J="amenity";et.AMENITY={bank:`"${J}"="bank"`,bar:`"${J}"="bar"`,college:`${J}=college`,ice_cream:`"${J}"="ice_cream"`};const c="https://wiki.openstreetmap.org/wiki/";et.FEATURES=[{key:"atm",values:["atm=yes","amenity=atm"],category:J,description:{es:x.Values.EMPTY,en:x.Values.EMPTY},info:`${c}Tag:amenity%3Datm`},{key:"bank",values:[et.AMENITY.bank],category:J,description:{es:x.Values.EMPTY,en:x.Values.EMPTY},info:`${c}Tag:amenity%3Dbank`},{key:"bar",values:[et.AMENITY.bar],category:J,description:{es:x.Values.EMPTY,en:x.Values.EMPTY},info:`${c}Tag:amenity%3Dbar`},{key:"biergarten",values:["amenity=biertgarten","biertgarten=yes"],category:J,description:{es:x.Values.EMPTY,en:x.Values.EMPTY},info:`${c}Tag:amenity%3Dbiergarten`},{key:"cafe",values:["amenity=cafe"],category:J,description:{es:x.Values.EMPTY,en:x.Values.EMPTY},info:`${c}Tag:amenity%3Dcafe`},{key:"fast_food",values:["amenity=fast_food"],category:J,description:{es:x.Values.EMPTY,en:x.Values.EMPTY},info:`${c}Eo:Tag:amenity%3Dfast_food`},{key:"ice_cream",values:[et.AMENITY.ice_cream],category:J,description:{es:x.Values.EMPTY,en:x.Values.EMPTY},info:`${c}Tag:amenity%3Dice_cream`},{key:"pub",values:["amenity=pub"],category:J,description:{es:x.Values.EMPTY,en:x.Values.EMPTY},info:`${c}Tag:amenity%3Dpub`},{key:"restaurant",values:["amenity=restaurant"],category:J,description:{es:x.Values.EMPTY,en:x.Values.EMPTY},info:`${c}Tag:amenity%3Drestaurant`},{key:"college",values:["amenity=college"],category:J,description:{es:"Campus o edificios de un instituto de educaci\xf3n superior",en:"Campus or buildings of an institute of Further Education (aka continuing education)"},info:`${c}Tag:amenity%3Dcollege`},{key:"driving_school",values:["amenity=driving_school"],category:J,description:{es:"Autoescuela para poder sacar licencia de diferentes veh\xedculos motorizados",en:"Driving School which offers motor vehicle driving lessons"},info:`${c}Tag:amenity%3Ddriving_school`},{key:"library",values:["amenity=library"],category:J,description:{es:"Una biblioteca p\xfablica (municipal, universitaria,\u2026) para sacar libros en pr\xe9stamo.",en:"A public library (municipal, university, \u2026) to borrow books from."},info:x.Values.EMPTY},{key:"school",values:["amenity=school"],category:J,description:{es:x.Values.EMPTY,en:x.Values.EMPTY},info:`${c}Tag:amenity%3Dschool`},{key:"university",values:["amenity=university"],category:J,description:{es:x.Values.EMPTY,en:x.Values.EMPTY},info:x.Values.EMPTY},{key:"education",values:["amenity=university","amenity=school","amenity=college","amenity=music_school","amenity=language_school"],category:J,description:{es:x.Values.EMPTY,en:x.Values.EMPTY},info:x.Values.EMPTY},{key:"language",values:["amenity=language_school"],category:J,description:{es:x.Values.EMPTY,en:x.Values.EMPTY},info:`${c}Tag:amenity%3Dlanguage_school`},{key:"bus",values:["amenity=bus_station","public_transport=station"],category:J,description:{es:x.Values.EMPTY,en:x.Values.EMPTY},info:x.Values.EMPTY},{key:"car_wash",values:["amenity=car_wash"],category:J,description:{es:x.Values.EMPTY,en:x.Values.EMPTY},info:`${c}Tag:amenity%3Dcar_wash`},{key:"gasoline",values:["amenity=fuel"],category:J,description:{es:x.Values.EMPTY,en:x.Values.EMPTY},info:x.Values.EMPTY},{key:"parking",values:["amenity=parking","highway=service","service=parking_aisle"],category:J,description:{es:x.Values.EMPTY,en:x.Values.EMPTY},info:x.Values.EMPTY}]},8857:(It,et,G)=>{"use strict";Object.defineProperty(et,"__esModule",{value:!0}),et.createQueryInfo=void 0;const x=G(6703);et.createQueryInfo=V=>{if(!V.bbox)throw new Error("\n        \xa1\xa1\xa1\xa1 NEED PASS BOUNDARY BOX LIMITS IF YOU WANT USE QUERY WITH BOUNDARIES BOX !!!!\n        ==============================================================================\n        Pass value with next format: \n        <latitude_south_west>,<longitude_south_west>,<latitude_north_east>,<longitude_north_east>\n\n        For Example:\n        43.16540434728322,-2.4239873886108403,43.18261784109349,-2.401371002197266\n        ");const St=`\n    [bbox:${V.bbox}][out:${V.outputFormat||x.OUTPUT_FORMAT.JSON}][timeout:${V.timeOutInSeconds}];\n    (`;let dt="";return V.filters&&V.filters.length?(dt="\n      ",V.filters.map(Jt=>{dt+=`node[${Jt}]; `}),dt+="\n      "):dt='\n      node["amenity"="drinking_water"];\n      node["natural"="spring"];\n      node["drinking_water"="yes"];\n      ',`\n    ${St}${dt}\n    );\n    out body;\n    \n    `}},4788:function(It,et,G){"use strict";var x=this&&this.__createBinding||(Object.create?function(V,c,j,St){void 0===St&&(St=j);var dt=Object.getOwnPropertyDescriptor(c,j);(!dt||("get"in dt?!c.__esModule:dt.writable||dt.configurable))&&(dt={enumerable:!0,get:function(){return c[j]}}),Object.defineProperty(V,St,dt)}:function(V,c,j,St){void 0===St&&(St=j),V[St]=c[j]}),J=this&&this.__exportStar||function(V,c){for(var j in V)"default"!==j&&!Object.prototype.hasOwnProperty.call(c,j)&&x(c,V,j)};Object.defineProperty(et,"__esModule",{value:!0}),J(G(3540),et),J(G(8857),et),J(G(5299),et),J(G(3654),et)},5250:(It,et)=>{"use strict";Object.defineProperty(et,"__esModule",{value:!0})},3654:function(It,et,G){"use strict";var x=this&&this.__createBinding||(Object.create?function(V,c,j,St){void 0===St&&(St=j);var dt=Object.getOwnPropertyDescriptor(c,j);(!dt||("get"in dt?!c.__esModule:dt.writable||dt.configurable))&&(dt={enumerable:!0,get:function(){return c[j]}}),Object.defineProperty(V,St,dt)}:function(V,c,j,St){void 0===St&&(St=j),V[St]=c[j]}),J=this&&this.__exportStar||function(V,c){for(var j in V)"default"!==j&&!Object.prototype.hasOwnProperty.call(c,j)&&x(c,V,j)};Object.defineProperty(et,"__esModule",{value:!0}),J(G(5250),et),J(G(7227),et)},7227:(It,et)=>{"use strict";Object.defineProperty(et,"__esModule",{value:!0})},9555:(It,et,G)=>{"use strict";G.r(et),G.d(et,{AppModule:()=>iu,HttpLoaderFactory:()=>da});var x=G(6895),J=G(6167),V=G(9671),c=G(4650);function St(i,a){if(i===a)return!0;if(null==i||null==a||"object"!=typeof i||"object"!=typeof a)return!1;const u=Object.keys(i),l=Object.keys(a);if(u.length!==l.length)return!1;for(let f of u)if(!l.includes(f)||!St(i[f],a[f]))return!1;return!0}function dt(i,a){i.some(l=>St(l,a))||i.push(a)}var pt=G(3033);G(891);const yn="https://www.google.com/maps/",Wt=i=>`${yn}@?api=1&map_action=pano&viewpoint=${i.lat},${i.lng}`,ze=i=>`${yn}dir/?api=1&destination=${i.lat},${i.lng}`;var Y=G(7094),w=G(3228),Tt=(()=>{return(i=Tt||(Tt={})).AMENITY="amenity",i.BUILDING="building",i.BUS="bus",i.HIGHWAY="highway",i.HISTORIC="historic",i.LEISURE="leisure",i.MAN_MADE="man_made",i.NATURAL="natural",i.RAILWAY="railway",i.SHOP="shop",i.TOURISM="tourism",i.TRAIN="train",Tt;var i})(),wt=(()=>{return(i=wt||(wt={})).ATTRACTION="attraction",i.BAKERY="bakery",i.BAR="bar",i.BUS_STOP="bus_stop",i.CAVE_ENTRANCE="cave_entrance",i.CAMP_PITCH="camp_pitch",i.COFFEE="cafe",i.DRINKING_WATER="drinking_water",i.FAST_FOOD="fast_food",i.FITNESS_CENTRE="fitness_centre",i.FITNESS_STATION="fitness_station",i.FUEL="fuel",i.HOTEL="hotel",i.HOSTEL="hostel",i.ICE_CREAM="ice_cream",i.MUSEUM="museum",i.PEAK="peak",i.PARKING="parking",i.PARKING_SPACE="parking_space",i.PASTRY="pastry",i.PLAYGROUND="playground",i.PUB="pub",i.PICNIC_TABLE="picnic_table",i.RESTAURANT="restaurant",i.SPORTS_CENTRE="sports_centre",i.SPRING="spring",i.SUPERMARKET="supermarket",i.STOP="stop",i.TOILETS="toilets",i.TRACK="track",i.YES="yes",i.WATER_TAP="water_tap",wt;var i})();const Tn=[{check:i=>i[Tt.NATURAL]===wt.PEAK,value:w.NQ.PEAK},{check:i=>i[Tt.TOURISM]===wt.HOSTEL,value:w.NQ.HOSTEL},{check:i=>i[Tt.TOURISM]===wt.HOTEL,value:w.NQ.HOTEL},{check:i=>i[Tt.TOURISM]===wt.MUSEUM,value:w.NQ.MUSEUM},{check:i=>i[Tt.NATURAL]===wt.CAVE_ENTRANCE,value:w.NQ.CAVES},{check:i=>i[Tt.TOURISM]===w.NQ.VIEWPOINT,value:w.NQ.VIEWPOINT},{check:i=>i[Tt.TOURISM]===w.NQ.PICNIC_SITE||i[Tt.LEISURE]===wt.PICNIC_TABLE,value:w.NQ.PICNIC_SITE},{check:i=>i[Tt.AMENITY]===wt.FUEL,value:w.NQ.FUEL},{check:i=>i[Tt.AMENITY]===wt.DRINKING_WATER||i[Tt.MAN_MADE]===wt.WATER_TAP||i[Tt.NATURAL]===wt.SPRING,value:w.NQ.WATER},{check:i=>i[Tt.TOURISM]===wt.ATTRACTION,value:w.NQ.ATTRACTION},{check:i=>i[Tt.SHOP]===wt.SUPERMARKET||i[Tt.BUILDING]===wt.SUPERMARKET,value:w.NQ.SUPERMARKET},{check:i=>i[Tt.TRAIN]===wt.YES||i[Tt.RAILWAY]===wt.STOP,value:w.NQ.TRAIN},{check:i=>i[Tt.BUS]===wt.YES||i[Tt.HIGHWAY]===wt.BUS_STOP,value:w.NQ.BUS},{check:i=>i[Tt.LEISURE]===wt.SPORTS_CENTRE||i[Tt.BUILDING]===wt.SPORTS_CENTRE||i[Tt.LEISURE]===wt.FITNESS_CENTRE||i[Tt.LEISURE]===wt.FITNESS_STATION||i[Tt.LEISURE]===wt.TRACK,value:w.NQ.SPORTS},{check:i=>i[Tt.SHOP]===wt.BAKERY,value:w.NQ.BAKERY},{check:i=>i[Tt.AMENITY]===wt.COFFEE,value:w.NQ.CAFE},{check:i=>i[Tt.AMENITY]===wt.ICE_CREAM,value:w.NQ.ICE_CREAM},{check:i=>i[Tt.AMENITY]===wt.FAST_FOOD,value:w.NQ.FAST_FOOD},{check:i=>i[Tt.AMENITY]===wt.PUB,value:w.NQ.PUB},{check:i=>i[Tt.AMENITY]===wt.RESTAURANT,value:w.NQ.RESTAURANT},{check:i=>i[Tt.AMENITY]===wt.BAR,value:w.NQ.BAR},{check:i=>i[Tt.AMENITY]===wt.PARKING,value:w.NQ.PARKING},{check:i=>i[Tt.AMENITY]===wt.PARKING_SPACE,value:w.NQ.PARKING_SPACE},{check:i=>i[Tt.SHOP]===wt.PASTRY,value:w.NQ.PASTRY},{check:i=>i[Tt.AMENITY]===wt.TOILETS,value:w.NQ.TOILETS},{check:i=>i[Tt.LEISURE]===wt.PLAYGROUND,value:w.NQ.PLAYGROUND},{check:i=>i[Tt.TOURISM]===wt.CAMP_PITCH,value:w.NQ.CAMPING},{check:i=>i[Tt.HISTORIC],value:w.NQ.HISTORICAL},{check:i=>i[Tt.AMENITY]===w.NQ.ATM,value:w.NQ.ATM}],sr=i=>i.filter(a=>a.checked).map(a=>a.tags).flat();function Qn(i=0,a=1,u=!1){return Math.floor(Math.random()*(a-i+(u?1:0))+i)}function or(i){return Y.Po.values.find(a=>a.id===i)?.color||"#deaf30"}function Xn(){let a="#";for(let u=0;u<6;u++)a+="0123456789ABCDEF"[Qn(0,16,!1)];return a}G(9529);const Te=[{id:"drinking_water",label:"Cazador de Fuentes de Agua Potable",i18n:"profiles.waterPointsHunter",pois:[w.NQ.WATER]},{id:"peak_collector",label:"Coleccionista de Cimas",i18n:"profiles.peakCollector",pois:[w.NQ.WATER,w.NQ.PEAK,w.NQ.VIEWPOINT,w.NQ.HISTORICAL,w.NQ.CAVES]},{id:"runner",label:"Corredor de asfalto",i18n:"profiles.roadRunner",pois:[w.NQ.BUS,w.NQ.TRAIN,w.NQ.WATER,w.NQ.TOILETS,w.NQ.SPORTS,w.NQ.VIEWPOINT]},{id:"walking_santiago",label:"Peregrino Camino de Santiago",i18n:"profiles.walkingSantiago",pois:[w.NQ.BUS,w.NQ.TRAIN,w.NQ.WATER,w.NQ.TOILETS,w.NQ.SUPERMARKET,w.NQ.BAKERY,w.NQ.CAFE,w.NQ.BAR,w.NQ.RESTAURANT,w.NQ.FAST_FOOD,w.NQ.PASTRY,w.NQ.VIEWPOINT,w.NQ.PICNIC_SITE,w.NQ.HISTORICAL,w.NQ.MUSEUM,w.NQ.ATTRACTION,w.NQ.HOTEL,w.NQ.HOSTEL]},{id:"trail_runner",label:"Corredor Trail Running",i18n:"profiles.trailRunner",pois:[w.NQ.BUS,w.NQ.TRAIN,w.NQ.WATER,w.NQ.PEAK,w.NQ.PARKING,w.NQ.CAVES,w.NQ.VIEWPOINT,w.NQ.HISTORICAL,w.NQ.ATTRACTION]},{id:"walking_mountains",label:"Senderismo",i18n:"profiles.walkingMountains",pois:[w.NQ.BUS,w.NQ.TRAIN,w.NQ.BAR,w.NQ.RESTAURANT,w.NQ.WATER,w.NQ.PEAK,w.NQ.PARKING,w.NQ.CAVES,w.NQ.VIEWPOINT,w.NQ.ATTRACTION]},{id:"city_tourism",label:"Turismo de Ciudad",i18n:"profiles.cityTourist",pois:[w.NQ.BAKERY,w.NQ.TOILETS,w.NQ.PARKING,w.NQ.PARKING_SPACE,w.NQ.PASTRY,w.NQ.HISTORICAL,w.NQ.BAR,w.NQ.PUB,w.NQ.RESTAURANT,w.NQ.CAFE,w.NQ.FAST_FOOD,w.NQ.ICE_CREAM,w.NQ.ATM,w.NQ.BUS,w.NQ.TRAIN,w.NQ.WATER,w.NQ.VIEWPOINT,w.NQ.PICNIC_SITE,w.NQ.MUSEUM,w.NQ.ATTRACTION,w.NQ.HOTEL,w.NQ.HOSTEL]},{id:"rural_tourism",label:"Turismo Rural",i18n:"profiles.ruralTourist",pois:[w.NQ.PEAK,w.NQ.HISTORICAL,w.NQ.WATER,w.NQ.BAR,w.NQ.CAFE,w.NQ.RESTAURANT,w.NQ.ICE_CREAM,w.NQ.PUB,w.NQ.PARKING,w.NQ.PARKING_SPACE,w.NQ.VIEWPOINT,w.NQ.PICNIC_SITE]},{id:"road_cycling",label:"Ciclismo de carretera",i18n:"profiles.roadCycling",pois:[w.NQ.BUS,w.NQ.TRAIN,w.NQ.WATER,w.NQ.TOILETS,w.NQ.CAFE,w.NQ.RESTAURANT,w.NQ.FAST_FOOD,w.NQ.PUB,w.NQ.SPORTS,w.NQ.PARKING,w.NQ.PARKING_SPACE,w.NQ.VIEWPOINT,w.NQ.PICNIC_SITE]},{id:"btt_gravel",label:"BTT / Gravel",i18n:"profiles.bttGravel",pois:[w.NQ.BUS,w.NQ.TRAIN,w.NQ.WATER,w.NQ.PEAK,w.NQ.TOILETS,w.NQ.CAFE,w.NQ.RESTAURANT,w.NQ.FAST_FOOD,w.NQ.PUB,w.NQ.SPORTS,w.NQ.PARKING,w.NQ.PARKING_SPACE,w.NQ.VIEWPOINT,w.NQ.PICNIC_SITE]},{id:"birdwatcher",label:"Observador de Aves",i18n:"profiles.birdwatcher",pois:[w.NQ.VIEWPOINT,w.NQ.WATER,w.NQ.PARKING,w.NQ.PICNIC_SITE,w.NQ.HISTORICAL,w.NQ.CAVES]},{id:"photography_hunter",label:"Cazador de Fotos",i18n:"profiles.photographyHunter",pois:[w.NQ.VIEWPOINT,w.NQ.PEAK,w.NQ.HISTORICAL,w.NQ.ATTRACTION,w.NQ.MUSEUM,w.NQ.CAVES,w.NQ.WATER]},{id:"climber",label:"Escalador",i18n:"profiles.climber",pois:[w.NQ.PEAK,w.NQ.CAVES,w.NQ.WATER,w.NQ.PARKING,w.NQ.VIEWPOINT]},{id:"gastronomic_tourist",label:"Turista Gastron\xf3mico",i18n:"profiles.gastronomicTourist",pois:[w.NQ.RESTAURANT,w.NQ.BAR,w.NQ.CAFE,w.NQ.BAKERY,w.NQ.PASTRY,w.NQ.ICE_CREAM,w.NQ.PUB,w.NQ.WATER]},{id:"history_buff",label:"Amante de la Historia",i18n:"profiles.historyBuff",pois:[w.NQ.HISTORICAL,w.NQ.MUSEUM,w.NQ.ATTRACTION,w.NQ.CAFE,w.NQ.RESTAURANT,w.NQ.WATER]},{id:"family_trip_nature",label:"Excursi\xf3n Familiar (Naturaleza)",i18n:"profiles.familyTripNature",pois:[w.NQ.WATER,w.NQ.PEAK,w.NQ.CAVES,w.NQ.VIEWPOINT,w.NQ.PICNIC_SITE,w.NQ.PARKING,w.NQ.RESTAURANT,w.NQ.ICE_CREAM,w.NQ.HISTORICAL]},{id:"family_trip_city",label:"Excursi\xf3n Familiar (Ciudad)",i18n:"profiles.familyTripCity",pois:[w.NQ.WATER,w.NQ.MUSEUM,w.NQ.ATTRACTION,w.NQ.HISTORICAL,w.NQ.ICE_CREAM,w.NQ.RESTAURANT,w.NQ.CAFE,w.NQ.HOTEL,w.NQ.HOSTEL,w.NQ.PARKING,w.NQ.TOILETS]},{id:"pet_friendly",label:"Con tu Mascota",i18n:"profiles.petFriendly",pois:[w.NQ.PARKING,w.NQ.WATER,w.NQ.PICNIC_SITE,w.NQ.VIEWPOINT,w.NQ.RESTAURANT,w.NQ.CAFE]}];var Hn=G(4128),bt=G(2722),Er=G(4004),lr=G(5324),Xt=G(8407),D=G(4788);const li=Xt.Control.extend({options:{mapId:Y.LA,position:"topleft",exitText:"Salir pantalla completa",entryText:"Ver en pantalla completa"},initialize:function(i){Xt.Util.setOptions(this,i)},onAdd:function(){const i=Xt.DomUtil.create("input","leaflet-control-zoom leaflet-bar leaflet-control"),a=this.options;function u(){document.fullscreenElement&&setTimeout(()=>document.exitFullscreen(),520),i.style.backgroundImage="url(https://cdn-icons-png.flaticon.com/512/2089/2089670.png)",i.title=a.entryText}function l(){document.fullscreenElement||u()}return i.type="button",i.title=a.entryText,i.style.backgroundImage="url(https://cdn-icons-png.flaticon.com/512/2089/2089670.png)",i.style.backgroundSize="15px 15px",i.style.backgroundRepeat="no-repeat",i.style.backgroundPosition="50% 50%",i.style.width="32px",i.style.height="32px",i.style.padding="12px",i.style.lineHeight="30px",i.style.fontSize="22px",i.style.fontWeight="bold",i.style.cursor="pointer",document.addEventListener("fullscreenchange",l),document.addEventListener("webkitfullscreenchange",l),document.addEventListener("mozfullscreenchange",l),document.addEventListener("MSFullscreenChange",l),i.onclick=()=>{document.fullscreenElement?u():(document.getElementById(a.mapId)?.requestFullscreen(),i.title=a.exitText,i.style.backgroundImage="url(https://cdn-icons-png.flaticon.com/512/483/483332.png)")},i}}),lt=Xt.Control.extend({options:{position:"bottomleft",mapId:Y.LA,componentFactory:null},_div:Xt.DomUtil.create("div","info-control"),_compRef:null,initialize:function(i){Xt.Util.setOptions(this,i)},onAdd:function(){const i=Xt.DomUtil.create("div","info-control");return this._div=i,this.options.componentFactory&&(this._compRef=this.options.componentFactory(),i.appendChild(this._compRef.location.nativeElement)),this.hide(),i},show:function(){Xt.DomUtil.addClass(this._div,"visible")},hide:function(){Xt.DomUtil.removeClass(this._div,"visible")},updateInput:function(i,a){this._compRef&&this._compRef.instance&&(this._compRef.instance[i]=a)}}),$e=Xt.Control.extend({initialize:function(i){Xt.Util.setOptions(this,i)},_div:Xt.DomUtil.create("div","info legend"),options:{position:"bottomleft",title:"Earthquakes",activeTags:[],tagNames:[]},onAdd:function(){const i=Xt.DomUtil.create("div","info legend");return this._div=i,this.update(),i.style.backgroundColor="white",i.style.textAlign="center",i.style.padding="3px",i.style.borderRadius="6px",i.style.border="1px solid #333",i.style.marginBottom="5px",i.style.width="100%",i},update:function(){this._div.innerHTML+=`<h3>${this.options.title}</h3>`,this.options.activeTags.forEach(i=>{const a=or(i),u=this.options.tagNames.find(f=>f.tag&&f.tag===i);this._div.innerHTML+=`<div><i style="background: ${a}"></i>${u&&u.i18n||"Waypoint"}</div>`}),this.show()},show:function(){Xt.DomUtil.addClass(this._div,"visible")}}),ln=Xt.Control.extend({options:{position:"bottomleft",img:"https://raw.githubusercontent.com/leaflet-maps-course/resources/main/logotypes/am.png",border:!0},initialize:function(i){Xt.Util.setOptions(this,i)},onAdd:function(){const i=Xt.DomUtil.create("img");return i.src=this.options.img,i.style.width="50px",this.options.border&&(i.style.borderBottom="3px solid #506bff"),i}}),kr=`Map data: &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, <a href="http://viewfinderpanoramas.org">SRTM</a> | Map style: &copy; <a href="https://opentopomap.org">OpenTopoMap</a> (<a href="https://creativecommons.org/licenses/by-sa/3.0/">CC-BY-SA</a>) &copy; <a href="${Y.oH.website}" target="_blank">${Y.oH.name}</a> ${(new Date).getFullYear()}`,$r={CartoDB:`&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors &copy; <a href="https://carto.com/attributions">CARTO</a> - <a href="${Y.oH.website}" target="_blank">${Y.oH.name}</a> ${(new Date).getFullYear()}`,CyclOSM:'<a href="https://github.com/cyclosm/cyclosm-cartocss-style/releases" title="CyclOSM - Open Bicycle render">CyclOSM</a> | Map data: &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',EsriWorldImagery:"Tiles &copy; Esri &mdash; Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community",EsriWorldTopoMap:"Tiles &copy; Esri &mdash; Esri, DeLorme, NAVTEQ, TomTom, Intermap, iPC, USGS, FAO, NPS, NRCAN, GeoBase, Kadaster NL, Ordnance Survey, Esri Japan, METI, Esri China (Hong Kong), and the GIS User Community",OSM:`&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors - <a href="${Y.oH.website}" target="_blank">${Y.oH.name}</a> ${(new Date).getFullYear()}`,OSMHot:`&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, Tiles style by <a href="https://www.hotosm.org/" target="_blank">Humanitarian OpenStreetMap Team</a> hosted by <a href="https://openstreetmap.fr/" target="_blank">OpenStreetMap France</a> - <a href="${Y.oH.website}" target="_blank">${Y.oH.name}</a> ${(new Date).getFullYear()}`,OpenTopo:'Map data: &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, <a href="http://viewfinderpanoramas.org">SRTM</a> | Map style: &copy; <a href="https://opentopomap.org">OpenTopoMap</a> (<a href="https://creativecommons.org/licenses/by-sa/3.0/">CC-BY-SA</a>)',Stadia:'&copy; <a href="https://stadiamaps.com/">Stadia Maps</a>, &copy; <a href="https://openmaptiles.org/">OpenMapTiles</a> &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors',ThunderForest:'&copy; <a href="http://www.thunderforest.com/">Thunderforest</a>, &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'},hr_baseLayers_default="https://{s}.tile.osm.org/{z}/{x}/{y}.png",hr_baseLayers_osmManik="https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png";var _n=G(6684),En=G(2340);function cn(i,a,u){if(null!==i)for(var l,f,d,_,N,T,L,O,C=0,b=0,U=i.type,F="FeatureCollection"===U,X="Feature"===U,rt=F?i.features.length:1,st=0;st<rt;st++){N=(O=!!(L=F?i.features[st].geometry:X?i.geometry:i)&&"GeometryCollection"===L.type)?L.geometries.length:1;for(var ut=0;ut<N;ut++){var Z=0,Nt=0;if(null!==(_=O?L.geometries[ut]:L)){T=_.coordinates;var Bt=_.type;switch(C=!u||"Polygon"!==Bt&&"MultiPolygon"!==Bt?0:1,Bt){case null:break;case"Point":if(!1===a(T,b,st,Z,Nt))return!1;b++,Z++;break;case"LineString":case"MultiPoint":for(l=0;l<T.length;l++){if(!1===a(T[l],b,st,Z,Nt))return!1;b++,"MultiPoint"===Bt&&Z++}"LineString"===Bt&&Z++;break;case"Polygon":case"MultiLineString":for(l=0;l<T.length;l++){for(f=0;f<T[l].length-C;f++){if(!1===a(T[l][f],b,st,Z,Nt))return!1;b++}"MultiLineString"===Bt&&Z++,"Polygon"===Bt&&Nt++}"Polygon"===Bt&&Z++;break;case"MultiPolygon":for(l=0;l<T.length;l++){for(Nt=0,f=0;f<T[l].length;f++){for(d=0;d<T[l][f].length-C;d++){if(!1===a(T[l][f][d],b,st,Z,Nt))return!1;b++}Nt++}Z++}break;case"GeometryCollection":for(l=0;l<_.geometries.length;l++)if(!1===cn(_.geometries[l],a,u))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function yt(i,a){if("Feature"===i.type)a(i,0);else if("FeatureCollection"===i.type)for(var u=0;u<i.features.length&&!1!==a(i.features[u],u);u++);}function kt(i,a){var u,l,f,d,_,N,T,L,C,b,O=0,U="FeatureCollection"===i.type,F="Feature"===i.type,X=U?i.features.length:1;for(u=0;u<X;u++){for(L=U?i.features[u].properties:F?i.properties:{},C=U?i.features[u].bbox:F?i.bbox:void 0,b=U?i.features[u].id:F?i.id:void 0,_=(T=!!(N=U?i.features[u].geometry:F?i.geometry:i)&&"GeometryCollection"===N.type)?N.geometries.length:1,f=0;f<_;f++)if(null!==(d=T?N.geometries[f]:N))switch(d.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===a(d,O,L,C,b))return!1;break;case"GeometryCollection":for(l=0;l<d.geometries.length;l++)if(!1===a(d.geometries[l],O,L,C,b))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===a(null,O,L,C,b))return!1;O++}}function Ir(i,a={}){if(null!=i.bbox&&!0!==a.recompute)return i.bbox;const u=[1/0,1/0,-1/0,-1/0];return cn(i,l=>{u[0]>l[0]&&(u[0]=l[0]),u[1]>l[1]&&(u[1]=l[1]),u[2]<l[0]&&(u[2]=l[0]),u[3]<l[1]&&(u[3]=l[1])}),u}var ae=6371008.8,W={centimeters:100*ae,centimetres:100*ae,degrees:360/(2*Math.PI),feet:3.28084*ae,inches:39.37*ae,kilometers:ae/1e3,kilometres:ae/1e3,meters:ae,metres:ae,miles:ae/1609.344,millimeters:1e3*ae,millimetres:1e3*ae,nauticalmiles:ae/1852,radians:1,yards:1.0936*ae};function Qe(i,a,u={}){const l={type:"Feature"};return(0===u.id||u.id)&&(l.id=u.id),u.bbox&&(l.bbox=u.bbox),l.properties=a||{},l.geometry=i,l}function An(i,a={}){const u={type:"FeatureCollection"};return a.id&&(u.id=a.id),a.bbox&&(u.bbox=a.bbox),u.features=i,u}function Xe(i){return!isNaN(i)&&null!==i&&!Array.isArray(i)}var bn=G(7016);function Me(){return new he}function he(){this.reset()}he.prototype={constructor:he,reset:function(){this.s=this.t=0},add:function(i){Ar(fn,i,this.t),Ar(this,fn.s,this.s),this.s?this.t+=fn.t:this.s=fn.t},valueOf:function(){return this.s}};var fn=new he;function Ar(i,a,u){var l=i.s=a+u,f=l-a;i.t=a-(l-f)+(u-f)}var Pt=1e-6,Yt=Math.PI,xe=Yt/2,kn=Yt/4,ee=2*Yt,de=180/Yt,Ft=Yt/180,$t=Math.abs,Kn=Math.atan,Ke=Math.atan2,xt=Math.cos,Et=(Math,Math,Math,Math,Math,Math.sin),we=(Math,Math.sqrt);Math;function nn(i){return i>1?0:i<-1?Yt:Math.acos(i)}function Ye(i){return i>1?xe:i<-1?-xe:Math.asin(i)}function Lt(){}function Ne(i,a){i&&mr.hasOwnProperty(i.type)&&mr[i.type](i,a)}var Ln={Feature:function(i,a){Ne(i.geometry,a)},FeatureCollection:function(i,a){for(var u=i.features,l=-1,f=u.length;++l<f;)Ne(u[l].geometry,a)}},mr={Sphere:function(i,a){a.sphere()},Point:function(i,a){a.point((i=i.coordinates)[0],i[1],i[2])},MultiPoint:function(i,a){for(var u=i.coordinates,l=-1,f=u.length;++l<f;)a.point((i=u[l])[0],i[1],i[2])},LineString:function(i,a){Dn(i.coordinates,a,0)},MultiLineString:function(i,a){for(var u=i.coordinates,l=-1,f=u.length;++l<f;)Dn(u[l],a,0)},Polygon:function(i,a){Lr(i.coordinates,a)},MultiPolygon:function(i,a){for(var u=i.coordinates,l=-1,f=u.length;++l<f;)Lr(u[l],a)},GeometryCollection:function(i,a){for(var u=i.geometries,l=-1,f=u.length;++l<f;)Ne(u[l],a)}};function Dn(i,a,u){var d,l=-1,f=i.length-u;for(a.lineStart();++l<f;)a.point((d=i[l])[0],d[1],d[2]);a.lineEnd()}function Lr(i,a){var u=-1,l=i.length;for(a.polygonStart();++u<l;)Dn(i[u],a,1);a.polygonEnd()}function Nn(i){return[Ke(i[1],i[0]),Ye(i[2])]}function Ve(i){var a=i[0],u=i[1],l=xt(u);return[l*xt(a),l*Et(a),Et(u)]}function Ce(i,a){return i[0]*a[0]+i[1]*a[1]+i[2]*a[2]}function rn(i,a){return[i[1]*a[2]-i[2]*a[1],i[2]*a[0]-i[0]*a[2],i[0]*a[1]-i[1]*a[0]]}function Ur(i,a){i[0]+=a[0],i[1]+=a[1],i[2]+=a[2]}function Ie(i,a){return[i[0]*a,i[1]*a,i[2]*a]}function Ze(i){var a=we(i[0]*i[0]+i[1]*i[1]+i[2]*i[2]);i[0]/=a,i[1]/=a,i[2]/=a}function vi(i,a){function u(l,f){return l=i(l,f),a(l[0],l[1])}return i.invert&&a.invert&&(u.invert=function(l,f){return(l=a.invert(l,f))&&i.invert(l[0],l[1])}),u}function ei(i,a){return[i>Yt?i-ee:i<-Yt?i+ee:i,a]}function _i(i){return function(a,u){return[(a+=i)>Yt?a-ee:a<-Yt?a+ee:a,u]}}function ni(i){var a=_i(i);return a.invert=_i(-i),a}function Bi(i,a){var u=xt(i),l=Et(i),f=xt(a),d=Et(a);function _(N,T){var L=xt(T),C=xt(N)*L,b=Et(N)*L,O=Et(T),U=O*u+C*l;return[Ke(b*f-U*d,C*u-O*l),Ye(U*f+b*d)]}return _.invert=function(N,T){var L=xt(T),C=xt(N)*L,b=Et(N)*L,O=Et(T),U=O*f-b*d;return[Ke(b*f+O*d,C*u+U*l),Ye(U*u-C*l)]},_}function Gi(i,a){(a=Ve(a))[0]-=i,Ze(a);var u=nn(-a[1]);return((-a[2]<0?-u:u)+ee-Pt)%ee}function er(){var a,i=[];return{point:function(u,l){a.push([u,l])},lineStart:function(){i.push(a=[])},lineEnd:Lt,rejoin:function(){i.length>1&&i.push(i.pop().concat(i.shift()))},result:function(){var u=i;return i=[],a=null,u}}}function zr(i,a){return $t(i[0]-a[0])<Pt&&$t(i[1]-a[1])<Pt}function Fe(i,a,u,l){this.x=i,this.z=a,this.o=u,this.e=l,this.v=!1,this.n=this.p=null}function on(i,a,u,l,f){var N,T,d=[],_=[];if(i.forEach(function(F){if(!((X=F.length-1)<=0)){var X,ut,rt=F[0],st=F[X];if(zr(rt,st)){for(f.lineStart(),N=0;N<X;++N)f.point((rt=F[N])[0],rt[1]);return void f.lineEnd()}d.push(ut=new Fe(rt,F,null,!0)),_.push(ut.o=new Fe(rt,null,ut,!1)),d.push(ut=new Fe(st,F,null,!1)),_.push(ut.o=new Fe(st,null,ut,!0))}}),d.length){for(_.sort(a),r(d),r(_),N=0,T=_.length;N<T;++N)_[N].e=u=!u;for(var C,b,L=d[0];;){for(var O=L,U=!0;O.v;)if((O=O.n)===L)return;C=O.z,f.lineStart();do{if(O.v=O.o.v=!0,O.e){if(U)for(N=0,T=C.length;N<T;++N)f.point((b=C[N])[0],b[1]);else l(O.x,O.n.x,1,f);O=O.n}else{if(U)for(N=(C=O.p.z).length-1;N>=0;--N)f.point((b=C[N])[0],b[1]);else l(O.x,O.p.x,-1,f);O=O.p}C=(O=O.o).z,U=!U}while(!O.v);f.lineEnd()}}}function r(i){if(a=i.length){for(var a,f,u=0,l=i[0];++u<a;)l.n=f=i[u],f.p=l,l=f;l.n=f=i[0],f.p=l}}function t(i,a){return i<a?-1:i>a?1:i>=a?0:NaN}function ke(i){for(var u,d,_,a=i.length,l=-1,f=0;++l<a;)f+=i[l].length;for(d=new Array(f);--a>=0;)for(u=(_=i[a]).length;--u>=0;)d[--f]=_[u];return d}Me(),Me(),Me(),ei.invert=ei,function e(i){1===i.length&&(i=function n(i){return function(a,u){return t(i(a),u)}}(i))}(t),Math.sqrt(50),Math.sqrt(10),Math.sqrt(2);var me=1e9,pn=-me;function vr(i,a,u,l){function f(L,C){return i<=L&&L<=u&&a<=C&&C<=l}function d(L,C,b,O){var U=0,F=0;if(null==L||(U=_(L,b))!==(F=_(C,b))||T(L,C)<0^b>0)do{O.point(0===U||3===U?i:u,U>1?l:a)}while((U=(U+b+4)%4)!==F);else O.point(C[0],C[1])}function _(L,C){return $t(L[0]-i)<Pt?C>0?0:3:$t(L[0]-u)<Pt?C>0?2:1:$t(L[1]-a)<Pt?C>0?1:0:C>0?3:2}function N(L,C){return T(L.x,C.x)}function T(L,C){var b=_(L,1),O=_(C,1);return b!==O?b-O:0===b?C[1]-L[1]:1===b?L[0]-C[0]:2===b?L[1]-C[1]:C[0]-L[0]}return function(L){var O,U,F,X,rt,st,ut,Z,Nt,Bt,vt,C=L,b=er(),At={point:Ut,lineStart:function _e(){At.point=it,U&&U.push(F=[]),Bt=!0,Nt=!1,ut=Z=NaN},lineEnd:function We(){O&&(it(X,rt),st&&Nt&&b.rejoin(),O.push(b.result())),At.point=Ut,Nt&&C.lineEnd()},polygonStart:function ve(){C=b,O=[],U=[],vt=!0},polygonEnd:function ue(){var Vt=function Mt(){for(var Vt=0,le=0,Re=U.length;le<Re;++le)for(var Vr,ir,Je=U[le],mn=1,Ci=Je.length,rr=Je[0],ji=rr[0],ui=rr[1];mn<Ci;++mn)Vr=ji,ir=ui,ji=(rr=Je[mn])[0],ui=rr[1],ir<=l?ui>l&&(ji-Vr)*(l-ir)>(ui-ir)*(i-Vr)&&++Vt:ui<=l&&(ji-Vr)*(l-ir)<(ui-ir)*(i-Vr)&&--Vt;return Vt}(),le=vt&&Vt,Re=(O=ke(O)).length;(le||Re)&&(L.polygonStart(),le&&(L.lineStart(),d(null,null,1,L),L.lineEnd()),Re&&on(O,N,Vt,d,L),L.polygonEnd()),C=L,O=U=F=null}};function Ut(Vt,le){f(Vt,le)&&C.point(Vt,le)}function it(Vt,le){var Re=f(Vt,le);if(U&&F.push([Vt,le]),Bt)X=Vt,rt=le,st=Re,Bt=!1,Re&&(C.lineStart(),C.point(Vt,le));else if(Re&&Nt)C.point(Vt,le);else{var Je=[ut=Math.max(pn,Math.min(me,ut)),Z=Math.max(pn,Math.min(me,Z))],mn=[Vt=Math.max(pn,Math.min(me,Vt)),le=Math.max(pn,Math.min(me,le))];!function os(i,a,u,l,f,d){var F,_=i[0],N=i[1],C=0,b=1,O=a[0]-_,U=a[1]-N;if(F=u-_,O||!(F>0)){if(F/=O,O<0){if(F<C)return;F<b&&(b=F)}else if(O>0){if(F>b)return;F>C&&(C=F)}if(F=f-_,O||!(F<0)){if(F/=O,O<0){if(F>b)return;F>C&&(C=F)}else if(O>0){if(F<C)return;F<b&&(b=F)}if(F=l-N,U||!(F>0)){if(F/=U,U<0){if(F<C)return;F<b&&(b=F)}else if(U>0){if(F>b)return;F>C&&(C=F)}if(F=d-N,U||!(F<0)){if(F/=U,U<0){if(F>b)return;F>C&&(C=F)}else if(U>0){if(F<C)return;F<b&&(b=F)}return C>0&&(i[0]=_+C*O,i[1]=N+C*U),b<1&&(a[0]=_+b*O,a[1]=N+b*U),!0}}}}}(Je,mn,i,a,u,l)?Re&&(C.lineStart(),C.point(Vt,le),vt=!1):(Nt||(C.lineStart(),C.point(Je[0],Je[1])),C.point(mn[0],mn[1]),Re||C.lineEnd(),vt=!1)}ut=Vt,Z=le,Nt=Re}return At}}var ri=Me();Me(),Me(),Me();var ai=1/0,zi=ai,xi=-ai,Qi=xi;const Bs={point:function wa(i,a){i<ai&&(ai=i),i>xi&&(xi=i),a<zi&&(zi=a),a>Qi&&(Qi=a)},lineStart:Lt,lineEnd:Lt,polygonStart:Lt,polygonEnd:Lt,result:function(){var i=[[ai,zi],[xi,Qi]];return xi=Qi=-(zi=ai=1/0),i}};function Ws(i,a,u,l){return function(f,d){var b,O,U,_=a(d),N=f.invert(l[0],l[1]),T=er(),L=a(T),C=!1,F={point:X,lineStart:st,lineEnd:ut,polygonStart:function(){F.point=Z,F.lineStart=Nt,F.lineEnd=Bt,O=[],b=[]},polygonEnd:function(){F.point=X,F.lineStart=st,F.lineEnd=ut,O=ke(O);var vt=function ki(i,a){var u=a[0],l=a[1],f=[Et(u),-xt(u),0],d=0,_=0;ri.reset();for(var N=0,T=i.length;N<T;++N)if(C=(L=i[N]).length)for(var L,C,b=L[C-1],O=b[0],U=b[1]/2+kn,F=Et(U),X=xt(U),rt=0;rt<C;++rt,O=ut,F=Nt,X=Bt,b=st){var st=L[rt],ut=st[0],Z=st[1]/2+kn,Nt=Et(Z),Bt=xt(Z),vt=ut-O,At=vt>=0?1:-1,Ut=At*vt,Mt=Ut>Yt,ve=F*Nt;if(ri.add(Ke(ve*At*Et(Ut),X*Bt+ve*xt(Ut))),d+=Mt?vt+At*ee:vt,Mt^O>=u^ut>=u){var ue=rn(Ve(b),Ve(st));Ze(ue);var _e=rn(f,ue);Ze(_e);var We=(Mt^vt>=0?-1:1)*Ye(_e[2]);(l>We||l===We&&(ue[0]||ue[1]))&&(_+=Mt^vt>=0?1:-1)}}return(d<-Pt||d<Pt&&ri<-Pt)^1&_}(b,N);O.length?(C||(d.polygonStart(),C=!0),on(O,Fa,vt,u,d)):vt&&(C||(d.polygonStart(),C=!0),d.lineStart(),u(null,null,1,d),d.lineEnd()),C&&(d.polygonEnd(),C=!1),O=b=null},sphere:function(){d.polygonStart(),d.lineStart(),u(null,null,1,d),d.lineEnd(),d.polygonEnd()}};function X(vt,At){var Ut=f(vt,At);i(vt=Ut[0],At=Ut[1])&&d.point(vt,At)}function rt(vt,At){var Ut=f(vt,At);_.point(Ut[0],Ut[1])}function st(){F.point=rt,_.lineStart()}function ut(){F.point=X,_.lineEnd()}function Z(vt,At){U.push([vt,At]);var Ut=f(vt,At);L.point(Ut[0],Ut[1])}function Nt(){L.lineStart(),U=[]}function Bt(){Z(U[0][0],U[0][1]),L.lineEnd();var Ut,ve,ue,_e,vt=L.clean(),At=T.result(),Mt=At.length;if(U.pop(),b.push(U),U=null,Mt){if(1&vt){if((ve=(ue=At[0]).length-1)>0){for(C||(d.polygonStart(),C=!0),d.lineStart(),Ut=0;Ut<ve;++Ut)d.point((_e=ue[Ut])[0],_e[1]);d.lineEnd()}return}Mt>1&&2&vt&&At.push(At.pop().concat(At.shift())),O.push(At.filter(Da))}}return F}}function Da(i){return i.length>1}function Fa(i,a){return((i=i.x)[0]<0?i[1]-xe-Pt:xe-i[1])-((a=a.x)[0]<0?a[1]-xe-Pt:xe-a[1])}Me(),function Zs(i){return"m0,"+i+"a"+i+","+i+" 0 1,1 0,"+-2*i+"a"+i+","+i+" 0 1,1 0,"+2*i+"z"}(4.5);const $s=Ws(function(){return!0},function Ua(i){var f,a=NaN,u=NaN,l=NaN;return{lineStart:function(){i.lineStart(),f=1},point:function(d,_){var N=d>0?Yt:-Yt,T=$t(d-a);$t(T-Yt)<Pt?(i.point(a,u=(u+_)/2>0?xe:-xe),i.point(l,u),i.lineEnd(),i.lineStart(),i.point(N,u),i.point(d,u),f=0):l!==N&&T>=Yt&&($t(a-l)<Pt&&(a-=l*Pt),$t(d-N)<Pt&&(d-=N*Pt),u=function Ba(i,a,u,l){var f,d,_=Et(i-u);return $t(_)>Pt?Kn((Et(a)*(d=xt(l))*Et(u)-Et(l)*(f=xt(a))*Et(i))/(f*d*_)):(a+l)/2}(a,u,d,_),i.point(l,u),i.lineEnd(),i.lineStart(),i.point(N,u),f=0),i.point(a=d,u=_),l=N},lineEnd:function(){i.lineEnd(),a=u=NaN},clean:function(){return 2-f}}},function Ga(i,a,u,l){var f;if(null==i)l.point(-Yt,f=u*xe),l.point(0,f),l.point(Yt,f),l.point(Yt,0),l.point(Yt,-f),l.point(0,-f),l.point(-Yt,-f),l.point(-Yt,0),l.point(-Yt,f);else if($t(i[0]-a[0])>Pt){var d=i[0]<a[0]?Yt:-Yt;l.point(-d,f=u*d/2),l.point(0,f),l.point(d,f)}else l.point(a[0],a[1])},[-Yt,-xe]);function Ya(i,a){var u=xt(i),l=u>0,f=$t(u)>Pt;function _(C,b){return xt(C)*xt(b)>u}function T(C,b,O){var X=[1,0,0],rt=rn(Ve(C),Ve(b)),st=Ce(rt,rt),ut=rt[0],Z=st-ut*ut;if(!Z)return!O&&C;var Nt=u*st/Z,Bt=-u*ut/Z,vt=rn(X,rt),At=Ie(X,Nt);Ur(At,Ie(rt,Bt));var Mt=vt,ve=Ce(At,Mt),ue=Ce(Mt,Mt),_e=ve*ve-ue*(Ce(At,At)-1);if(!(_e<0)){var We=we(_e),it=Ie(Mt,(-ve-We)/ue);if(Ur(it,At),it=Nn(it),!O)return it;var mn,Vt=C[0],le=b[0],Re=C[1],Je=b[1];le<Vt&&(mn=Vt,Vt=le,le=mn);var Ci=le-Vt,rr=$t(Ci-Yt)<Pt;if(!rr&&Je<Re&&(mn=Re,Re=Je,Je=mn),rr||Ci<Pt?rr?Re+Je>0^it[1]<($t(it[0]-Vt)<Pt?Re:Je):Re<=it[1]&&it[1]<=Je:Ci>Yt^(Vt<=it[0]&&it[0]<=le)){var ir=Ie(Mt,(-ve+We)/ue);return Ur(ir,At),[it,Nn(ir)]}}}function L(C,b){var O=l?i:Yt-i,U=0;return C<-O?U|=1:C>O&&(U|=2),b<-O?U|=4:b>O&&(U|=8),U}return Ws(_,function N(C){var b,O,U,F,X;return{lineStart:function(){F=U=!1,X=1},point:function(rt,st){var Z,ut=[rt,st],Nt=_(rt,st),Bt=l?Nt?0:L(rt,st):Nt?L(rt+(rt<0?Yt:-Yt),st):0;if(!b&&(F=U=Nt)&&C.lineStart(),Nt!==U&&(!(Z=T(b,ut))||zr(b,Z)||zr(ut,Z))&&(ut[0]+=Pt,ut[1]+=Pt,Nt=_(ut[0],ut[1])),Nt!==U)X=0,Nt?(C.lineStart(),Z=T(ut,b),C.point(Z[0],Z[1])):(Z=T(b,ut),C.point(Z[0],Z[1]),C.lineEnd()),b=Z;else if(f&&b&&l^Nt){var vt;!(Bt&O)&&(vt=T(ut,b,!0))&&(X=0,l?(C.lineStart(),C.point(vt[0][0],vt[0][1]),C.point(vt[1][0],vt[1][1]),C.lineEnd()):(C.point(vt[1][0],vt[1][1]),C.lineEnd(),C.lineStart(),C.point(vt[0][0],vt[0][1])))}Nt&&(!b||!zr(b,ut))&&C.point(ut[0],ut[1]),b=ut,U=Nt,O=Bt},lineEnd:function(){U&&C.lineEnd(),b=null},clean:function(){return X|(F&&U)<<1}}},function d(C,b,O,U){!function Ei(i,a,u,l,f,d){if(u){var _=xt(a),N=Et(a),T=l*u;null==f?(f=a+l*ee,d=a-T/2):(f=Gi(_,f),d=Gi(_,d),(l>0?f<d:f>d)&&(f+=l*ee));for(var L,C=f;l>0?C>d:C<d;C-=T)L=Nn([_,-N*xt(C),-N*Et(C)]),i.point(L[0],L[1])}}(U,i,a,O,C,b)},l?[0,-i]:[-Yt,i-Yt])}function js(i){return i}function ks(i){return function(a){var u=new xs;for(var l in i)u[l]=i[l];return u.stream=a,u}}function xs(){}function Ks(i,a,u){var l=a[1][0]-a[0][0],f=a[1][1]-a[0][1],d=i.clipExtent&&i.clipExtent();i.scale(150).translate([0,0]),null!=d&&i.clipExtent(null),function Jn(i,a){i&&Ln.hasOwnProperty(i.type)?Ln[i.type](i,a):Ne(i,a)}(u,i.stream(Bs));var _=Bs.result(),N=Math.min(l/(_[1][0]-_[0][0]),f/(_[1][1]-_[0][1])),T=+a[0][0]+(l-N*(_[1][0]+_[0][0]))/2,L=+a[0][1]+(f-N*(_[1][1]+_[0][1]))/2;return null!=d&&i.clipExtent(d),i.scale(150*N).translate([T,L])}xs.prototype={constructor:xs,point:function(i,a){this.stream.point(i,a)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var za=xt(30*Ft);function ta(i,a){return+a?function Xa(i,a){function u(l,f,d,_,N,T,L,C,b,O,U,F,X,rt){var st=L-l,ut=C-f,Z=st*st+ut*ut;if(Z>4*a&&X--){var Nt=_+O,Bt=N+U,vt=T+F,At=we(Nt*Nt+Bt*Bt+vt*vt),Ut=Ye(vt/=At),Mt=$t($t(vt)-1)<Pt||$t(d-b)<Pt?(d+b)/2:Ke(Bt,Nt),ve=i(Mt,Ut),ue=ve[0],_e=ve[1],We=ue-l,it=_e-f,Vt=ut*We-st*it;(Vt*Vt/Z>a||$t((st*We+ut*it)/Z-.5)>.3||_*O+N*U+T*F<za)&&(u(l,f,d,_,N,T,ue,_e,Mt,Nt/=At,Bt/=At,vt,X,rt),rt.point(ue,_e),u(ue,_e,Mt,Nt,Bt,vt,L,C,b,O,U,F,X,rt))}}return function(l){var f,d,_,N,T,L,C,b,O,U,F,X,rt={point:st,lineStart:ut,lineEnd:Nt,polygonStart:function(){l.polygonStart(),rt.lineStart=Bt},polygonEnd:function(){l.polygonEnd(),rt.lineStart=ut}};function st(Ut,Mt){Ut=i(Ut,Mt),l.point(Ut[0],Ut[1])}function ut(){b=NaN,rt.point=Z,l.lineStart()}function Z(Ut,Mt){var ve=Ve([Ut,Mt]),ue=i(Ut,Mt);u(b,O,C,U,F,X,b=ue[0],O=ue[1],C=Ut,U=ve[0],F=ve[1],X=ve[2],16,l),l.point(b,O)}function Nt(){rt.point=st,l.lineEnd()}function Bt(){ut(),rt.point=vt,rt.lineEnd=At}function vt(Ut,Mt){Z(f=Ut,Mt),d=b,_=O,N=U,T=F,L=X,rt.point=Z}function At(){u(b,O,C,U,F,X,d,_,f,N,T,L,16,l),rt.lineEnd=Nt,Nt()}return rt}}(i,a):function Qa(i){return ks({point:function(a,u){a=i(a,u),this.stream.point(a[0],a[1])}})}(i)}var Ha=ks({point:function(i,a){this.stream.point(i*Ft,a*Ft)}});function Va(i){return function Za(i){var a,d,_,O,U,st,ut,Z,At,Ut,u=150,l=480,f=250,N=0,T=0,L=0,C=0,b=0,F=null,X=$s,rt=null,Nt=js,Bt=.5,vt=ta(ue,Bt);function Mt(it){return[(it=U(it[0]*Ft,it[1]*Ft))[0]*u+d,_-it[1]*u]}function ve(it){return(it=U.invert((it[0]-d)/u,(_-it[1])/u))&&[it[0]*de,it[1]*de]}function ue(it,Vt){return[(it=a(it,Vt))[0]*u+d,_-it[1]*u]}function _e(){U=vi(O=function Ui(i,a,u){return(i%=ee)?a||u?vi(ni(i),Bi(a,u)):ni(i):a||u?Bi(a,u):ei}(L,C,b),a);var it=a(N,T);return d=l-it[0]*u,_=f+it[1]*u,We()}function We(){return At=Ut=null,Mt}return Mt.stream=function(it){return At&&Ut===it?At:At=Ha(X(O,vt(Nt(Ut=it))))},Mt.clipAngle=function(it){return arguments.length?(X=+it?Ya(F=it*Ft,6*Ft):(F=null,$s),We()):F*de},Mt.clipExtent=function(it){return arguments.length?(Nt=null==it?(rt=st=ut=Z=null,js):vr(rt=+it[0][0],st=+it[0][1],ut=+it[1][0],Z=+it[1][1]),We()):null==rt?null:[[rt,st],[ut,Z]]},Mt.scale=function(it){return arguments.length?(u=+it,_e()):u},Mt.translate=function(it){return arguments.length?(l=+it[0],f=+it[1],_e()):[l,f]},Mt.center=function(it){return arguments.length?(N=it[0]%360*Ft,T=it[1]%360*Ft,_e()):[N*de,T*de]},Mt.rotate=function(it){return arguments.length?(L=it[0]%360*Ft,C=it[1]%360*Ft,b=it.length>2?it[2]%360*Ft:0,_e()):[L*de,C*de,b*de]},Mt.precision=function(it){return arguments.length?(vt=ta(ue,Bt=it*it),We()):we(Bt)},Mt.fitExtent=function(it,Vt){return Ks(Mt,it,Vt)},Mt.fitSize=function(it,Vt){return function qa(i,a,u){return Ks(i,[[0,0],a],u)}(Mt,it,Vt)},function(){return a=i.apply(this,arguments),Mt.invert=a.invert&&ve,_e()}}(function(){return i})()}function ea(i){return function(a,u){var l=xt(a),f=xt(u),d=i(l*f);return[d*f*Et(a),d*Et(u)]}}function wi(i){return function(a,u){var l=we(a*a+u*u),f=i(l),d=Et(f),_=xt(f);return[Ke(a*d,l*_),Ye(l&&u*d/l)]}}ea(function(i){return we(2/(1+i))}).invert=wi(function(i){return 2*Ye(i/2)});var ra=ea(function(i){return(i=nn(i))&&i/Et(i)});function Is(i,a){return[i,a]}ra.invert=wi(function(i){return i}),Is.invert=Is,wi(Kn),wi(Ye),wi(function(i){return 2*Kn(i)});var{BufferOp:eo,GeoJSONReader:no,GeoJSONWriter:ro}=bn;function Wi(i,a,u,l){var f=i.properties||{},d="Feature"===i.type?i.geometry:i;if("GeometryCollection"===d.type){var _=[];return kt(i,function(X){var rt=Wi(X,a,u,l);rt&&_.push(rt)}),An(_)}var N=function so(i){var a=function Or(i,a={}){const u=Ir(i);return function Wn(i,a,u={}){if(!i)throw new Error("coordinates is required");if(!Array.isArray(i))throw new Error("coordinates must be an Array");if(i.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!Xe(i[0])||!Xe(i[1]))throw new Error("coordinates must contain numbers");return Qe({type:"Point",coordinates:i},a,u)}([(u[0]+u[2])/2,(u[1]+u[3])/2],a.properties,a)}(i).geometry.coordinates,u=[-a[0],-a[1]];return function ja(){return Va(ra).scale(79.4188).clipAngle(179.999)}().rotate(u).scale(ae)}(d),T={type:d.type,coordinates:ca(d.coordinates,N)},C=(new no).read(T),b=function hn(i,a="kilometers"){const u=W[a];if(!u)throw new Error(a+" units is invalid");return i*u}(function en(i,a="kilometers"){const u=W[a];if(!u)throw new Error(a+" units is invalid");return i/u}(a,u),"meters"),O=eo.bufferOp(C,b,l);if(!la((O=(new ro).write(O)).coordinates))return Qe({type:O.type,coordinates:ha(O.coordinates,N)},f)}function la(i){return Array.isArray(i[0])?la(i[0]):isNaN(i[0])}function ca(i,a){return"object"!=typeof i[0]?a(i):i.map(function(u){return ca(u,a)})}function ha(i,a){return"object"!=typeof i[0]?a.invert(i):i.map(function(u){return ha(u,a)})}const fa=i=>`${i.getSouthWest().lat},${i.getSouthWest().lng},${i.getNorthEast().lat},${i.getNorthEast().lng}`,Ss=i=>i*Math.PI/180;function oo(i,a){const u=Ss(i.lat),l=Ss(a.lat),f=Ss(a.lng-i.lng),d=Math.sin(f)*Math.cos(l),_=Math.cos(u)*Math.sin(l)-Math.sin(u)*Math.cos(l)*Math.cos(f);return((i=>180*i/Math.PI)(Math.atan2(d,_))+360)%360}function uo(i,a=18,u=Y.xW){const l=(0,Y.vb)({angleDeg:i,size:a,color:u});return(0,Xt.divIcon)({className:"",html:l,iconSize:[a,a],iconAnchor:[a/2,a/2]})}var nr=G(4032);function co(i,a){if(1&i){const u=c.EpF();c.TgZ(0,"button",1),c.NdJ("click",function(){c.CHM(u);const f=c.oxw();return c.KtG(f.modal())}),c._UZ(1,"img",2),c._uU(2),c.ALo(3,"translate"),c.qZA()}2&i&&(c.xp6(2),c.hij("\xa0\xa0 ",c.lcZ(3,1,"downloadTrackWithWaypoints"),"\n"))}let ho=(()=>{class i extends lr.H{constructor(){super(...arguments),this.hasRouteAndWaypoints=!1}modal(u=!0){return(0,V.Z)(function*(){const l=document.getElementById("downloadModal");u?l.showModal():l.close()})()}}return i.\u0275fac=function(){let a;return function(l){return(a||(a=c.n5z(i)))(l||i)}}(),i.\u0275cmp=c.Xpm({type:i,selectors:[["app-download-content-btn"]],inputs:{hasRouteAndWaypoints:"hasRouteAndWaypoints"},features:[c.qOj],decls:1,vars:1,consts:[[3,"click",4,"ngIf"],[3,"click"],["src","/assets/img/download-pdf.svg","width","30px","height","30px"]],template:function(u,l){1&u&&c.YNc(0,co,4,3,"button",0),2&u&&c.Q6J("ngIf",l.hasRouteAndWaypoints)},dependencies:[x.O5,nr.X$],styles:["button[_ngcontent-%COMP%]{padding:10px!important;text-align:center}"]}),i})();class fo{constructor(a,u=Y.LA){this.coordinates=[],this.distances=[],this.circles=[],this.filters=[],this.rangePoiInMetres=Y.Y5,this.pois=[],this.bounds="0,0",this.trackOk=!1,this.tagNames=[],this.activeTags=[],this.removeIfMapExist=()=>this.get()&&this.get().remove(),this.get=()=>this.map,this.getLayers=()=>({track:Y.qr,trackNearCircles:Y.Nz,markers:Y.Hc,boundsTrack:Y.k2}),this.addDownLoadButtonControl=(l,f)=>{for(var d=document.getElementsByClassName("info-control");d[0];)d[0].parentNode.removeChild(d[0]);const _=new lt({mapId:Y.LA,position:"bottomright",componentFactory:()=>l.createComponent(ho,{injector:f})});_.addTo(this.get()),_.updateInput("hasRouteAndWaypoints",!0),_.show()},this.addPOIsSelectInMap=(l=[])=>{const f=[];return l.map(d=>{const _=+this.distances[d.pointIndex].toFixed(2),N=d.position[0],T=d.position[1],L=this.addMarkerItem(d.tagName||"",[N,T]),{streetView:C,direction:b}={direction:ze(i={lat:N,lng:T}),streetView:Wt(i)};var i;f.push({tag:d.tagName,i18nText:d.tags&&d.tags.name?d.tags.name:L,lat:N,lng:T,ele:d.tags&&d.tags.ele?d.tags.ele:d.popup.ele||0,distance:_,streetView:C,direction:b,symbol:d.symbol||"",tags:d.tags})}),f},this.id=u,this.tagNames=a}init(){this.removeIfMapExist(),this.map=new Xt.Map(this.id,{center:[0,0],zoom:3,maxZoom:19}),((i=hr_baseLayers_default,a={attribution:kr,maxZoom:20})=>(0,Xt.tileLayer)(i,a))(hr_baseLayers_osmManik,{attribution:$r.OSM}).addTo(this.get()),this.addControls({fullscreen:!0,legend:!1,watermark:!0}),this.addLayers()}addLayers(){Y.qr.addTo(this.get()),Y.Nz.addTo(this.get()),Y.Hc.addTo(this.get()),Y.k2.addTo(this.get())}removeLayers(){Y.Nz.clearLayers(),Y.Hc.clearLayers()}removeLegendControl(){for(var a=document.getElementsByClassName("legend");a[0];)a[0].parentNode.removeChild(a[0])}resetAll(){this.reset(),this.resetTrack()}reset(){this.coordinates.length=0,this.circles.length=0,this.resetLayersMarkersCirclesNear()}resetLayersMarkersCirclesNear(){this.removeLayers(),this.removeLegendControl(),this.pois.length=0}resetTrack(){Y.qr.clearLayers(),this.addLayers()}addControls(a){const{fullscreen:u,watermark:l}=a;u&&new li(undefined).addTo(this.get()),l&&new ln({position:"topright"}).addTo(this.get())}addMarkerItem(a,u){const l=this.tagNames.find(d=>d.tag&&d.tag===a),f=`${l&&l.i18n||"Waypoint"}`;return(0,Xt.marker)(u,{icon:(i=a||"",(0,Xt.divIcon)({className:"custom-icon-marker",iconSize:(0,Xt.point)(40,40),html:`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32" class="marker"><path fill-opacity="0.25" d="M16 32s1.427-9.585 3.761-12.025c4.595-4.805 8.685-.99 8.685-.99s4.044 3.964-.526 8.743C25.514 30.245 16 32 16 32z"/><path stroke="#fff" fill="${or(i)}" d="M15.938 32S6 17.938 6 11.938C6 .125 15.938 0 15.938 0S26 .125 26 11.875C26 18.062 15.938 32 15.938 32zM16 6a4 4 0 100 8 4 4 0 000-8z"/></svg>`,iconAnchor:[12,24],popupAnchor:[9,-26]}))}).addTo(this.getLayers().markers).bindTooltip(f,{direction:"top",offset:[8,-15],sticky:!1}),f;var i}drawTrack(a,u){var l=this;return(0,V.Z)(function*(){l.init();let f=0;return l.distances=[],l.resetAll(),a.forEach((d,_)=>{l.coordinates.push([+d.lat.toFixed(5),+d.lon.toFixed(5)]);const{lat:N,lon:T}=_>0?a[_-1]:a[_],{lat:L,lon:C}=a[_];f+=function Zt(i,a,u,l){const f=O=>O*Math.PI/180,_=f(u-i),N=f(l-a),T=f(i),L=f(u),C=Math.sin(_/2)*Math.sin(_/2)+Math.sin(N/2)*Math.sin(N/2)*Math.cos(T)*Math.cos(L);return 2*Math.atan2(Math.sqrt(C),Math.sqrt(1-C))*6371}(N,T,L,C),l.distances.push(f)}),u?.length&&(u.forEach(d=>{l.addMarkerItem(d.name||"",[+d.lat,+d.lon]),console.log(d.name,d,l.activeTags),(!l.activeTags.length||!l.activeTags.includes(d.name||""))&&l.activeTags.push(d.name||"")}),l.addLegendControl(l.activeTags)),l.addRoutePolyLine(),l.addStartFinishPoints(),l.saveTemporalyInLocalStorage(a),Y.rX.OK})()}addRoutePolyLine(){this.trackPolyLine=(0,Xt.polyline)(this.coordinates,{weight:5,color:Y.xW,lineJoin:"round"}).addTo(this.getLayers().track),function lo(i,a,u={},l=!0){const d=u.size??18,_=u.color??Y.xW;if(!i||i.length<2)return;const N=Math.max(1,Math.floor((u.everyPercent??5)/100*(i.length-1)));for(let T=N;T<i.length-1-N;T+=N){const L=i[T],U=uo(oo(L,i[T+1])+(l?90:270),d,_);(0,Xt.marker)(L,{icon:U,interactive:!1}).addTo(a)}}(this.coordinates.map(([a,u])=>(0,Xt.latLng)(a,u)),this.get(),{everyPercent:5,size:45,color:Y.xW}),this.trackPolyLine&&(this.trackOk=!0),this.centerTrackCameraAndZoom()}centerCameraInTrack(){var a=this;return(0,V.Z)(function*(){a.get().fitBounds(a.trackPolyLine.getBounds(),{padding:[50,50]})})()}centerTrackCameraAndZoom(){var a=this;return(0,V.Z)(function*(){a.centerCameraInTrack(),a.takeSearchBounds()})()}calculateExpandedArea(){var a=this;return(0,V.Z)(function*(){const u=function io(i,a,u){var l=(u=u||{}).units||"kilometers",f=u.steps||8;if(!i)throw new Error("geojson is required");if("object"!=typeof u)throw new Error("options must be an object");if("number"!=typeof f)throw new Error("steps must be an number");if(void 0===a)throw new Error("radius is required");if(f<=0)throw new Error("steps must be greater than 0");var d=[];switch(i.type){case"GeometryCollection":return kt(i,function(_){var N=Wi(_,a,l,f);N&&d.push(N)}),An(d);case"FeatureCollection":return yt(i,function(_){var N=Wi(_,a,l,f);N&&yt(N,function(T){T&&d.push(T)})}),An(d)}return Wi(i,a,l,f)}(a.trackPolyLine.toGeoJSON(),a.rangePoiInMetres,{units:"meters"});if(u){const l=Ir(u);(0,c.X6Q)()&&console.log("L\xedmites expandidos (formato bbox):",l);const f=(0,Xt.latLngBounds)([l[1],l[0]],[l[3],l[2]]);return En.N.logRadius&&(Y.k2.clearLayers(),(0,Xt.rectangle)(f,{color:Xn(),weight:4,fill:!1,opacity:.5}).addTo(a.getLayers().boundsTrack)),fa(f)}return console.error("No se pudo crear el \xe1rea de expansi\xf3n. La polil\xednea puede ser inv\xe1lida."),fa(a.get().getBounds())})()}takeSearchBounds(){var a=this;return(0,V.Z)(function*(){localStorage.setItem(Y.iL.BOUNDS,yield a.calculateExpandedArea())})()}addStartFinishPoints(){if(this.coordinates.length>2){const u=this.coordinates[this.coordinates.length-1];this.addCircle(this.coordinates[0],"green"),this.addCircle(u,"red")}}addCircle(a,u){(0,Xt.circle)([+a[0].toFixed(5),+a[1].toFixed(5)],{radius:15,color:"white",opacity:100,fillColor:u,fillOpacity:1}).addTo(this.getLayers().track)}drawPOIs(a,u,l,f=150){var d=this;return(0,V.Z)(function*(){if(d.resetLayersMarkersCirclesNear(),d.rangePoiInMetres=f,d.filters=a,yield d.downloadSelectAreaPOIs(),d.pois.length){d.defineTrackLinePointsAndTrackNearZone();let _=[];_=d.getUsePOIs(_);const N=d.addPOIsSelectInMap(_),T=[...new Set(N.map(u=>u.tag))];return T.length&&(d.addLegendControl(T),d.addDownLoadButtonControl(u,l)),En.N.logRadius&&setTimeout(()=>d.get().removeLayer(d.getLayers().trackNearCircles),2e3),localStorage.setItem(Y.iL.REPORT_POIS,JSON.stringify(((i,a,u="ASC")=>i.sort("ASC"===u?(l,f)=>l[a]-f[a]:(l,f)=>f[a]-l[a]))(N,"distance"))),{ok:!0,message:T.length?Y.rX.OK:Y.rX.NO_DATA_FOUND}}return{ok:!1,message:Y.rX.NO_DATA_FOUND}})()}addLegendControl(a=[]){for(var u=document.getElementsByClassName("legend");u[0];)u[0].parentNode.removeChild(u[0]);const l=new $e({title:"Puntos de inter\xe9s",position:"bottomleft",activeTags:a,tagNames:this.tagNames});this.get().addControl(l)}downloadSelectAreaPOIs(){var a=this;return(0,V.Z)(function*(){const u=yield a.getPOIsFromSelectFilters();return a.pois=[],!!(u&&u.elements||!u.elements.length)&&(u.elements.map(l=>{const f=l.tags,d=(i=>{const a=Tn.find(u=>u.check(i));return a?a.value:Y.NQ.WAYPOINT})(f);a.pois.push({position:[l.lat,l.lon],popup:f,tagName:d,photo:Y.Po.values.find(_=>_.id===d)?.photo||"",symbol:(0,_n.sS)(d),pointIndex:-1,tags:f})}),!0)})()}getUsePOIs(a=[]){for(let u=0;u<this.pois.length;u++){const l=this.pois[u].position;for(let f=0;f<this.circles.length;f++)if(this.circles[f].getLatLng().distanceTo(l)<=this.rangePoiInMetres){this.pois[u].pointIndex=f,dt(a,this.pois[u]);break}}return a}defineTrackLinePointsAndTrackNearZone(){this.circles=[],this.coordinates.map(a=>{const u=(0,Xt.circle)([+a[0],+a[1]],{radius:this.rangePoiInMetres,fillOpacity:0,opacity:Y.Yh?100:0});this.circles.push(u),u.addTo(this.getLayers().trackNearCircles),En.N.logRadius&&this.getLayers().trackNearCircles.addTo(this.get())})}saveTemporalyInLocalStorage(a){a.length&&localStorage.setItem(Y.iL.TRACK_POINTS,JSON.stringify(a))}getPOIsFromSelectFilters(){var a=this;return(0,V.Z)(function*(){return yield(0,D.getZoneMapFeatures)({bbox:localStorage.getItem(Y.iL.BOUNDS)||"",filters:a.filters}).then(u=>u).catch(u=>(console.log("error",u),{}))})()}}var go=G(4626),Ts=G(8011),po=G(2324);let mo=(()=>{class i{constructor(){this.select={value:50,range:[0,100]},this.title="",this.selectValue=new c.vpe}onInput(u){document.getElementById("rangeValue").innerText=u+` ${this.select.extra}`}changeValue(u){this.selectValue.emit(+u.target.value||Y.Y5),this.onInput(+u.target.value||Y.Y5)}}return i.\u0275fac=function(u){return new(u||i)},i.\u0275cmp=c.Xpm({type:i,selectors:[["app-slider"]],inputs:{select:"select",title:"title"},outputs:{selectValue:"selectValue"},decls:9,vars:5,consts:[[1,"row"],[1,"column"],["type","range",1,"slider",3,"min","max","value","change"],[1,"column-10"],["id","rangeValue"]],template:function(u,l){1&u&&(c.TgZ(0,"div",0),c._UZ(1,"br"),c.TgZ(2,"div",1),c._uU(3),c.qZA(),c.TgZ(4,"div",1)(5,"input",2),c.NdJ("change",function(d){return l.changeValue(d)}),c.qZA()(),c.TgZ(6,"div",3)(7,"p",4),c._uU(8),c.qZA()()()),2&u&&(c.xp6(3),c.Oqu(l.title),c.xp6(2),c.Q6J("min",l.select.range[0])("max",l.select.range[1])("value",l.select.value),c.xp6(3),c.hij("",l.select.value," m"))},styles:[".slidecontainer[_ngcontent-%COMP%]{width:100%;margin:1rem}.slider[_ngcontent-%COMP%]{appearance:none;width:100%;height:25px;background:#d3d3d3;outline:none;opacity:.7;transition:opacity .2s}.slider[_ngcontent-%COMP%]:hover{opacity:1}.slider[_ngcontent-%COMP%]::-webkit-slider-thumb{appearance:none;width:25px;height:25px;background:#3f51b5;cursor:pointer}.slider[_ngcontent-%COMP%]::-moz-range-thumb{width:25px;height:25px;background:#3f51b5;cursor:pointer}"]}),i})();function yo(i,a){1&i&&(c.TgZ(0,"span"),c._uU(1),c.ALo(2,"translate"),c.qZA()),2&i&&(c.xp6(1),c.Oqu(c.lcZ(2,1,"multiSelect.label.noFilters")))}function vo(i,a){if(1&i){const u=c.EpF();c.TgZ(0,"span",9),c.NdJ("click",function(){c.CHM(u);const f=c.oxw().$implicit,d=c.oxw(2);return c.KtG(d.manage(f,!1))}),c.TgZ(1,"span",10),c._uU(2,"X"),c.qZA(),c._uU(3),c.ALo(4,"translate"),c.qZA()}if(2&i){const u=c.oxw().$implicit;c.xp6(3),c.hij("\xa0",c.lcZ(4,1,u.i18n),"")}}function _o(i,a){if(1&i&&(c.ynx(0),c.YNc(1,vo,5,3,"span",8),c.BQk()),2&i){const u=a.$implicit;c.xp6(1),c.Q6J("ngIf",u.checked)}}function Eo(i,a){if(1&i&&(c.ynx(0),c.YNc(1,_o,2,1,"ng-container",7),c.BQk()),2&i){const u=c.oxw();c.xp6(1),c.Q6J("ngForOf",u.filters)}}let ko=(()=>{class i{constructor(){this.filters=[],this.noFilters=!1,this.translateService=(0,c.f3M)(nr.sK),this.activeValues=new c.vpe}ngOnInit(){document.getElementById("selected-options").addEventListener("click",()=>{this.close()}),this.dropdown=document.getElementById("dropdown"),this.startOptionsList()}startOptionsList(){this.optionsList=document.getElementById("options-list"),this.removeAllListItems(),this.expandableCheckedOptions(),document.addEventListener("click",u=>{u.target.closest(".multiselect-container")||(this.dropdown.style.display="none")})}expandableCheckedOptions(){this.filters.forEach(u=>{const l=document.createElement("li");l.style.padding="5px",l.innerHTML=`<label class="checkbox-label">\n      <input style="accent-color:#3f51b5;" type="checkbox" ${u.checked?"checked":""} data-id="${u.id}">&nbsp;${this.translateService.instant(u.i18n)}\n      </label>`,this.optionsList.appendChild(l)}),this.optionsList.addEventListener("change",u=>{const l=u.target.getAttribute("data-id"),f=this.filters.find(d=>d.id===l);f.checked=u.target.checked,this.manage(f,f.checked)}),this.setSelectTags()}removeAllListItems(){if(this.optionsList)for(;this.optionsList.firstChild;)this.optionsList.removeChild(this.optionsList.firstChild);else console.error('No se encontr\xf3 la lista con el id "options-list".')}ngOnChanges(u){u.filters&&this.optionsList&&(this.filters=u.filters.currentValue,this.startOptionsList())}setSelectTags(){const u=sr(this.filters);this.noFilters=!u.length,(0,c.X6Q)()&&console.log(u),this.activeValues.emit(u)}manage(u,l){const f=this.filters.findIndex(({text:d})=>u.text===d);if(this.filters[f].checked=l,this.setSelectTags(),!l){const d=document.querySelector(`#options-list input[data-id="${u.id}"]`);d&&(d.checked=!1)}}close(){this.dropdown.style.display="block"===this.dropdown.style.display?"none":"block"}}return i.\u0275fac=function(u){return new(u||i)},i.\u0275cmp=c.Xpm({type:i,selectors:[["app-multi-select"]],inputs:{filters:"filters"},outputs:{activeValues:"activeValues"},features:[c.TTD],decls:12,vars:5,consts:[[1,"multiselect-container"],["id","selected-options",1,"selected-options"],[4,"ngIf"],[1,"filter-item-select","more-btn"],["id","dropdown",1,"dropdown"],["id","options-list",1,"options-list"],[3,"click"],[4,"ngFor","ngForOf"],["class","filter-item-select",3,"click",4,"ngIf"],[1,"filter-item-select",3,"click"],[1,"remove-item"]],template:function(u,l){1&u&&(c.TgZ(0,"div",0)(1,"div",1),c.YNc(2,yo,3,3,"span",2),c.YNc(3,Eo,2,1,"ng-container",2),c.TgZ(4,"div",3),c._uU(5),c.ALo(6,"translate"),c.qZA()(),c.TgZ(7,"div",4),c._UZ(8,"ul",5),c.TgZ(9,"div")(10,"button",6),c.NdJ("click",function(){return l.close()}),c._uU(11,"OK"),c.qZA()()()()),2&u&&(c.xp6(2),c.Q6J("ngIf",l.noFilters),c.xp6(1),c.Q6J("ngIf",!l.noFilters),c.xp6(2),c.hij(" ",c.lcZ(6,3,"multiSelect.moreButton")," "))},dependencies:[x.sg,x.O5,nr.X$],styles:["body[_ngcontent-%COMP%]{font-family:Arial,sans-serif}.multiselect-container[_ngcontent-%COMP%]{position:relative;min-width:200px;width:100%;margin-top:1rem}.selected-options[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;border:1px solid #ccc;padding:5px;cursor:pointer;min-height:16px;margin-top:-12px}.selected-options[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:flex;align-items:center;background-color:#e2e2e2;margin:2px;padding:2px 5px;border-radius:3px}.selected-options[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-right:5px}.remove-item[_ngcontent-%COMP%]{color:#999;cursor:pointer;display:inline-block;font-weight:700;margin-right:2px}.filter-item-select[_ngcontent-%COMP%]{background-color:#e4e4e4;border:1px solid #aaa;margin:3px;padding:10px!important;border-radius:4px!important;display:block;font-size:small}.selected-options[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   .remove-option[_ngcontent-%COMP%]{cursor:pointer}.dropdown[_ngcontent-%COMP%]{position:absolute;top:100%;left:0;right:0;background:#fff;border:1px solid #ccc;display:none;max-height:300px;overflow-y:auto;z-index:3000}.dropdown[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:calc(100% - 10px);padding:5px;border:none;border-bottom:1px solid #ccc}.options-list[_ngcontent-%COMP%]{list-style-type:none;margin:0;padding:0}.options-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:5px!important;cursor:pointer;display:flex;align-items:center}.options-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{background-color:#f0f0f0}.options-list[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin-right:10px}.more-btn[_ngcontent-%COMP%], button[_ngcontent-%COMP%]{background-color:var(--principal-color)!important;color:#fff;padding:10px 20px!important;border-radius:4px!important}button[_ngcontent-%COMP%]{height:40px;width:100px;margin:10px -50px;position:relative;top:50%;left:50%;display:block;transition:background-color .3s ease}button[_ngcontent-%COMP%]:hover, .more-btn[_ngcontent-%COMP%]:hover{cursor:pointer!important;background-color:var(--principal-color-hover)!important}  .checkbox-label{display:flex;align-items:center;padding:5px 0;width:100%;cursor:pointer}  .checkbox-label:hover{background-color:#e2e2e2}.checkbox-label[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{margin-right:10px}"]}),i})();function xo(i,a){if(1&i&&(c.TgZ(0,"option",3),c._uU(1),c.ALo(2,"translate"),c.qZA()),2&i){const u=a.$implicit,l=c.oxw();c.Q6J("value",u[l.objectSelectProperty.value]),c.xp6(1),c.hij(" ",c.lcZ(2,2,u[l.objectSelectProperty.label])," ")}}let No=(()=>{class i{constructor(){this.options=[],this.objectSelectProperty={value:"id",label:"label"},this.selectOption=new c.vpe,this.translate=(0,c.f3M)(nr.sK)}ngOnInit(){this.translate.setDefaultLang("es"),this.translate.use("es")}onSelectOption(u){this.selectOption.emit(u.target.value)}}return i.\u0275fac=function(u){return new(u||i)},i.\u0275cmp=c.Xpm({type:i,selectors:[["app-custom-select"]],inputs:{options:"options",objectSelectProperty:"objectSelectProperty"},outputs:{selectOption:"selectOption"},decls:9,vars:5,consts:[[1,"custom-select-container"],[1,"custom-select-wrapper"],["id","custom-select",3,"change"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],[1,"material-icons"],["src","/assets/img/expand_more.svg"]],template:function(u,l){1&u&&(c.TgZ(0,"div",0)(1,"div",1)(2,"select",2),c.NdJ("change",function(d){return l.onSelectOption(d)}),c.TgZ(3,"option",3),c._uU(4),c.ALo(5,"translate"),c.qZA(),c.YNc(6,xo,3,4,"option",4),c.qZA(),c.TgZ(7,"span",5),c._UZ(8,"img",6),c.qZA()()()),2&u&&(c.xp6(3),c.Q6J("value",null),c.xp6(1),c.Oqu(c.lcZ(5,3,"profiles.selectOption")),c.xp6(2),c.Q6J("ngForOf",l.options))},dependencies:[x.sg,nr.X$],styles:[".custom-select-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-bottom:16px;position:relative}label[_ngcontent-%COMP%]{margin-bottom:8px;font-size:16px;color:#757575}.custom-select-wrapper[_ngcontent-%COMP%]{position:relative}select[_ngcontent-%COMP%]{width:100%;padding:8px 12px;font-size:16px;border:1px solid #ccc;border-radius:4px;appearance:none;outline:none;font-family:Roboto,sans-serif}select[_ngcontent-%COMP%]:focus{border-color:#3f51b5}.custom-select-wrapper[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{position:absolute;top:50%;right:12px;transform:translateY(-50%);pointer-events:none;color:#757575}"]}),i})();function Io(i,a){1&i&&(c.TgZ(0,"p"),c._uU(1," Arrastra y suelta tus archivos aqu\xed / Click para seleccionar "),c.qZA())}function So(i,a){if(1&i&&(c.TgZ(0,"p"),c._uU(1),c.qZA()),2&i){const u=c.oxw();c.xp6(1),c.hij("Archivo seleccionado: ",u.selectedFile.name,"")}}const To=function(i){return{"drag-over":i}};let wo=(()=>{class i{constructor(){this.isDragOver=!1,this.selectedFile=null,this.fileContent=null,this.includeWaypointsIfExists=!1,this.isReading=!1,this.isReadingStatus=new c.vpe,this.sendFileContent=new c.vpe,this.isReadingStatusEvent=u=>{this.isReading=u,this.isReadingStatus.emit(u)}}onDragOver(u){u.preventDefault(),this.isDragOver=!0}onDragLeave(u){u.preventDefault(),this.isDragOver=!1}onDrop(u){u.preventDefault(),this.isDragOver=!1,u.dataTransfer?.files.length&&this.handleFile(u.dataTransfer.files[0])}onFileSelect(u){const l=u.target;l.files?.length&&this.handleFile(l.files[0])}handleFile(u){const l=[`.${Y.Do.GPX}`],f=u.name.split(".").pop();this.isReadingStatusEvent(!0),f&&l.includes(`.${f}`)?(this.selectedFile=u,this.readFileContent(u)):(alert("Tipo de archivo no soportado. Por favor, selecciona un archivo .gpx"),this.fileContent=null,this.sendFileContent.emit({data:"---",includeWaypoints:this.includeWaypointsIfExists,fileName:""}),this.isReadingStatusEvent(!1))}readFileContent(u){const l=new FileReader;l.onload=()=>{this.fileContent=l.result,this.sendFileContent.emit({data:this.fileContent,includeWaypoints:this.includeWaypointsIfExists,fileName:u.name.split(".")[0]}),this.isReadingStatusEvent(!1)},l.onerror=f=>{console.error("Error al leer el archivo",f),this.fileContent=null,this.sendFileContent.emit({data:"---",includeWaypoints:this.includeWaypointsIfExists,fileName:""}),this.isReadingStatusEvent(!1)},l.readAsText(u)}}return i.\u0275fac=function(u){return new(u||i)},i.\u0275cmp=c.Xpm({type:i,selectors:[["app-gpx-file-charger"]],outputs:{isReadingStatus:"isReadingStatus",sendFileContent:"sendFileContent"},decls:5,vars:5,consts:[[1,"drag-drop-container",3,"ngClass","dragover","dragleave","drop","click"],[4,"ngIf"],["type","file","hidden","","accept",".gpx,application/gpx+xml,text/xml,application/xml",3,"change"],["fileInput",""]],template:function(u,l){if(1&u){const f=c.EpF();c.TgZ(0,"div",0),c.NdJ("dragover",function(_){return l.onDragOver(_)})("dragleave",function(_){return l.onDragLeave(_)})("drop",function(_){return l.onDrop(_)})("click",function(){c.CHM(f);const _=c.MAs(4);return c.KtG(_.click())}),c.YNc(1,Io,2,0,"p",1),c.YNc(2,So,2,1,"p",1),c.TgZ(3,"input",2,3),c.NdJ("change",function(_){return l.onFileSelect(_)}),c.qZA()()}2&u&&(c.Q6J("ngClass",c.VKq(3,To,l.isDragOver)),c.xp6(1),c.Q6J("ngIf",!l.selectedFile),c.xp6(1),c.Q6J("ngIf",l.selectedFile))},dependencies:[x.mk,x.O5],styles:[".drag-drop-container[_ngcontent-%COMP%]{border:2px dashed #ccc;padding:20px;text-align:center;cursor:pointer;transition:background-color .3s,border-color .3s;border-radius:10px;position:relative;overflow:hidden;margin-bottom:1rem}.drag-drop-container.drag-over[_ngcontent-%COMP%]{border-color:#3f51b5;background-color:#3f51b51a}.drag-drop-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-top:10px}.file-content[_ngcontent-%COMP%]{margin-top:20px;text-align:left;background:#f9f9f9;padding:10px;border:1px solid #ccc;border-radius:5px;max-height:300px;overflow-y:auto}"]}),i})(),Co=(()=>{class i{downloadTrackWithWaypoints(u,l=!0){var f=this;return(0,V.Z)(function*(){const d=yield f.generateGpxWaypoints(u||"TrackNavigator Track",l),_=l?Y.vH.GPX:Y.vH.KML,N=d.map(({content:T,fileName:L,type:C})=>({content:T,fileName:`${L}_track_navigator.${(0,pt.AH)(_)}`,folder:"waypoint"===C?"waypoints":void 0}));yield(0,pt.RZ)(N,u||"track_files")})()}generateGpxWaypoints(u,l=!0){return(0,V.Z)(function*(){const f=JSON.parse(localStorage.getItem(Y.iL.TRACK_POINTS)||""),d=JSON.parse(localStorage.getItem(Y.iL.REPORT_POIS)||"");if(l){const _=function un(i,a,u,l={name:Y.oH.name,email:Y.oH.email,website:Y.oH.website},f=Y.EO){const d=u.name.replace(/\s+/g,"_"),_=[],N=new Set;a.forEach(O=>{const U=`${O.lat},${O.lng}`;N.has(U)||(N.add(U),_.push(O))});const T=(O,U=[])=>{let F='<?xml version="1.0" encoding="UTF-8" standalone="no" ?>\n';return F+=`<gpx xmlns="http://www.topografix.com/GPX/1/1" version="1.1" creator="${l.name} - ${l.website}">\n`,F+=`<metadata>\n<name>${u.name}</name>\n`,u.description&&(F+=`<desc>${u.description}</desc>\n`),F+=`<author>\n<name>${l.name}</name>\n<email>${l.email}</email>\n`,F+=`<link href="${l.website}">\n<text>${l.name}'s Website</text>\n</link>\n</author>\n`,F+="</metadata>\n",U.forEach(X=>{F+=`<wpt lat="${X.lat}" lon="${X.lng}">\n`,void 0!==X.ele&&(F+=`<ele>${X.ele}</ele>\n`),F+=`<name>${X.i18nText||"Waypoint"}</name>\n`,X.symbol&&(F+=`<sym>${X.symbol}</sym>\n`),void 0!==X.distance&&(F+=`<cmt>km ${X.distance}</cmt>\n`),F+="</wpt>\n"}),O&&(F+="<trk>\n<trkseg>\n",i.forEach(X=>{F+=`<trkpt lat="${X.lat}" lon="${X.lon}">\n`,void 0!==X.ele&&(F+=`<ele>${X.ele}</ele>\n`),F+="</trkpt>\n"}),F+="</trkseg>\n</trk>\n"),F+="</gpx>",F},L={fileName:`${d}_track_with_waypoints`,content:T(!0,a),type:"track"},C={fileName:`${d}_track_only`,content:T(!0,[]),type:"track-waypoint"},b=[];for(let O=0;O<a.length;O+=f){const U=a.slice(O,O+f);b.push({fileName:`${d}_waypoints_${O/25+1}`,content:T(!1,U),type:"waypoint"})}return{trackWithWaypoints:L,trackOnly:C,waypointPacks:b}}(f,d,{name:u,description:"Ruta completa con waypoints"});return console.log(JSON.stringify(_)),[_.trackOnly,_.trackWithWaypoints,..._.waypointPacks]}return function ce(i,a,u={name:Y.oH.name,email:Y.oH.email,website:Y.oH.website},l={name:Y.dg.name,description:Y.dg.description}){const f=new Map;a.forEach(_=>{const N=`${_.lat},${_.lng}`;f.has(N)||f.set(N,_)});let d=`<?xml version="1.0" encoding="UTF-8"?>\n<kml xmlns="http://earth.google.com/kml/2.0">\n  <Document>\n    <name>${l.name}</name>\n    <description>${l.description}</description>\n\n    <Atom:author>\n      <Atom:name>${u.name}</Atom:name>\n      <Atom:email>${u.email}</Atom:email>\n    </Atom:author>\n    <Atom:link href="${u.website}"/>\n    \n    <Style id="trackStyle"><LineStyle><color>FF00A5FF</color><width>6</width></LineStyle></Style>`;return f.forEach(_=>{d+=`\n  <Placemark>\n    <name>${_.i18nText}</name>\n    <description><![CDATA[\n      <a href="${_.streetView}">Street View</a><br/>\n      <a href="${_.direction}">Directions</a>\n    ]]></description>\n    <Point>\n      <coordinates>${_.lng},${_.lat},${_.ele}</coordinates>\n    </Point>\n  </Placemark>`}),d+="\n  <Placemark>\n    <name>Track</name>\n    <styleUrl>#trackStyle</styleUrl>\n    <LineString>\n      <extrude>1</extrude>\n      <tessellate>1</tessellate>\n      <coordinates>",i.forEach(_=>{d+=`\n        ${_.lon},${_.lat},${_.ele}`}),d+="\n      </coordinates>\n    </LineString>\n  </Placemark>",d+="\n</Document>\n</kml>",[{fileName:l.name,content:d}]}(f,d,Y.oH,{...Y.dg,name:u})})()}}return i.\u0275fac=function(u){return new(u||i)},i.\u0275prov=c.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),Ro=(()=>{class i{constructor(){this.fileName="",this.outputDataService=(0,c.f3M)(Co)}createFile(u){var l=this;return(0,V.Z)(function*(){yield l.outputDataService.downloadTrackWithWaypoints(l.fileName||"",u),l.modal(!1)})()}modal(u=!0){return(0,V.Z)(function*(){const l=document.getElementById("downloadModal");u?l.showModal():l.close()})()}}return i.\u0275fac=function(u){return new(u||i)},i.\u0275cmp=c.Xpm({type:i,selectors:[["app-download-modal"]],inputs:{fileName:"fileName"},decls:14,vars:0,consts:[["id","downloadModal"],[1,"modal-header"],["id","closeModalBtn",1,"close-btn",3,"click"],[1,"modal-body"],[1,"modal-buttons"],[1,"download-btn",3,"click"]],template:function(u,l){1&u&&(c.TgZ(0,"dialog",0)(1,"div",1)(2,"span"),c._uU(3,"Descarga"),c.qZA(),c.TgZ(4,"button",2),c.NdJ("click",function(){return l.modal(!1)}),c._uU(5," \xd7 "),c.qZA()(),c.TgZ(6,"div",3)(7,"p"),c._uU(8," Seleccione una de las dos opciones para descargar nuestro fichero con los Puntos de Inter\xe9s (POIs) "),c.qZA(),c.TgZ(9,"div",4)(10,"button",5),c.NdJ("click",function(){return l.createFile(!0)}),c._uU(11,"GPX"),c.qZA(),c.TgZ(12,"button",5),c.NdJ("click",function(){return l.createFile(!1)}),c._uU(13," Google Earth (KML) "),c.qZA()()()())},styles:["button[_ngcontent-%COMP%]{cursor:pointer}#openModalBtn[_ngcontent-%COMP%]{padding:10px 20px;background-color:#4caf50;color:#fff;border:none;border-radius:5px;margin:20px}dialog[_ngcontent-%COMP%]{border:none;border-radius:8px;padding:20px;max-width:400px;width:100%;box-shadow:0 2px 10px #0000001a}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:15px}.modal-header[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:20px;font-weight:700}.close-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:18px;font-weight:700;color:#333;cursor:pointer}.close-btn[_ngcontent-%COMP%]:hover{background-color:#c2c7c7}.modal-body[_ngcontent-%COMP%]{text-align:center}.modal-buttons[_ngcontent-%COMP%]{display:flex;justify-content:space-around;margin-top:20px}.download-btn[_ngcontent-%COMP%]{background-color:var(--principal-color)!important;padding:10px 20px;color:#fff;border:none;border-radius:5px;transition:background-color .3s}.download-btn[_ngcontent-%COMP%]:hover{cursor:pointer!important;background-color:var(--principal-color-hover)!important}"]}),i})();function Oo(i,a){1&i&&c._UZ(0,"app-dialog")}function Ao(i,a){1&i&&(c._UZ(0,"div",7),c.ALo(1,"translate")),2&i&&c.s9C("innerHTML",c.lcZ(1,1,"sections.two.dataOSMInfo"),c.oJD)}function Mo(i,a){1&i&&(c.TgZ(0,"div",24),c._uU(1),c.ALo(2,"translate"),c.qZA()),2&i&&(c.xp6(1),c.hij(" ",c.lcZ(2,1,"sections.one.okMessage")," "))}function bo(i,a){1&i&&(c.TgZ(0,"div",25),c._uU(1),c.ALo(2,"translate"),c.qZA()),2&i&&(c.xp6(1),c.hij(" ",c.lcZ(2,1,"sections.one.processAndReadFileStatus")," "))}function Po(i,a){1&i&&(c.TgZ(0,"div",25),c._uU(1),c.ALo(2,"translate"),c.qZA()),2&i&&(c.xp6(1),c.hij(" ",c.lcZ(2,1,"sections.one.infoMessage")," "))}function Lo(i,a){1&i&&(c.TgZ(0,"div",26),c._uU(1),c.ALo(2,"translate"),c.qZA()),2&i&&(c.xp6(1),c.hij(" ",c.lcZ(2,1,"sections.one.errorMessage")," "))}function Do(i,a){1&i&&(c._UZ(0,"div",7),c.ALo(1,"translate")),2&i&&c.s9C("innerHTML",c.lcZ(1,1,"sections.two.notFoundData"),c.oJD)}function Fo(i,a){1&i&&(c.TgZ(0,"div",25),c._uU(1),c.ALo(2,"translate"),c.qZA()),2&i&&(c.xp6(1),c.hij(" ",c.lcZ(2,1,"sections.two.infoMessage")," "))}function Uo(i,a){1&i&&(c.TgZ(0,"div",26),c._uU(1),c.ALo(2,"translate"),c.qZA()),2&i&&(c.xp6(1),c.hij(" ",c.lcZ(2,1,"sections.two.errorMessage")," "))}const Bo=function(){return{value:"id",label:"i18n"}},Go=function(){return[50,400]},Yo=function(i,a){return{value:i,range:a,extra:"m"}};function qo(i,a){if(1&i){const u=c.EpF();c.TgZ(0,"div",8)(1,"div",9)(2,"div",10)(3,"div",11),c._uU(4),c.ALo(5,"translate"),c.qZA(),c.TgZ(6,"app-gpx-file-charger",12),c.NdJ("sendFileContent",function(f){c.CHM(u);const d=c.oxw();return c.KtG(d.loadTrack(f))})("isReadingStatus",function(f){c.CHM(u);const d=c.oxw();return c.KtG(d.isReading(f))}),c.qZA(),c.YNc(7,Mo,3,3,"div",13),c.YNc(8,bo,3,3,"div",14),c.YNc(9,Po,3,3,"div",14),c.YNc(10,Lo,3,3,"div",15),c.qZA()(),c.TgZ(11,"div",16)(12,"div",11),c._uU(13),c.ALo(14,"translate"),c.qZA(),c.TgZ(15,"div")(16,"label",17),c._uU(17),c.ALo(18,"translate"),c.qZA(),c.TgZ(19,"app-custom-select",18),c.NdJ("selectOption",function(f){c.CHM(u);const d=c.oxw();return c.KtG(d.onSelectProfile(f))}),c.qZA()(),c.TgZ(20,"div")(21,"label",19),c._uU(22),c.ALo(23,"translate"),c.qZA(),c.TgZ(24,"app-multi-select",20),c.NdJ("activeValues",function(f){c.CHM(u);const d=c.oxw();return c.KtG(d.setMultiFilters(f))}),c.qZA()(),c.TgZ(25,"div",21)(26,"app-slider",22),c.NdJ("selectValue",function(f){c.CHM(u);const d=c.oxw();return c.KtG(d.changeMetersAround(f))}),c.ALo(27,"translate"),c.qZA()(),c.YNc(28,Do,2,3,"div",3),c.YNc(29,Fo,3,3,"div",14),c.YNc(30,Uo,3,3,"div",15),c.TgZ(31,"button",23),c.NdJ("click",function(){c.CHM(u);const f=c.oxw();return c.KtG(f.findPois())}),c._uU(32),c.ALo(33,"translate"),c.qZA()()()}if(2&i){const u=c.oxw();c.xp6(4),c.Oqu(c.lcZ(5,17,"sections.one.title")),c.xp6(3),c.Q6J("ngIf",u.trackLoadOk===u.FileChargeStatus.OK),c.xp6(1),c.Q6J("ngIf",u.trackLoadOk===u.FileChargeStatus.READING),c.xp6(1),c.Q6J("ngIf",u.trackLoadOk===u.FileChargeStatus.EXIST_FILE),c.xp6(1),c.Q6J("ngIf",u.trackLoadOk===u.FileChargeStatus.ERROR),c.xp6(3),c.Oqu(c.lcZ(14,19,"sections.two.title")),c.xp6(4),c.Oqu(c.lcZ(18,21,"sections.two.selectProfile")),c.xp6(2),c.Q6J("options",u.profiles)("objectSelectProperty",c.DdM(29,Bo)),c.xp6(3),c.Oqu(c.lcZ(23,23,"sections.two.pois")),c.xp6(2),c.Q6J("filters",u.filtersSelect),c.xp6(2),c.s9C("title",c.lcZ(27,25,"sections.two.radiusInfo")),c.Q6J("select",c.WLB(31,Yo,u.rangePoiInMetres,c.DdM(30,Go))),c.xp6(2),c.Q6J("ngIf",u.searchStatus===u.FileChargeStatus.NO_DATA_FOUND),c.xp6(1),c.Q6J("ngIf",u.searchStatus===u.FileChargeStatus.START_SEARCH),c.xp6(1),c.Q6J("ngIf",u.searchStatus===u.FileChargeStatus.ERROR),c.xp6(2),c.hij(" ",c.lcZ(33,27,"sections.two.searchButton")," ")}}const zo=function(i){return{block:i}},Ho=[{path:"",component:(()=>{class i extends lr.H{constructor(){super(...arguments),this.title="map-bag-osm-pois",this.vcr=(0,c.f3M)(c.s_b),this.injector=(0,c.f3M)(c.zs3),this.isLoading=!1,this.filters=Y.Po,this.filtersSelect=Y.Po.values,this.rangePoiInMetres=Y.Y5,this.profiles=Te,this.FileChargeStatus=Y.rX,this.trackLoadOk=Y.rX.INIT,this.searchStatus=Y.rX.INIT,this.readyToLoad=Y.rX.INIT,this.fileName="",this.isReading=u=>{this.trackLoadOk=u?Y.rX.READING:Y.rX.INIT},this.scrollToBottom=()=>(0,go.g)(Y.LA)}ngOnInit(){super.ngOnInit(),this.isLoading=!0,(0,Hn.D)(this.filters.values.map(u=>this.translate.get(u.i18n))).pipe((0,bt.R)(this.unsubscribe$)).pipe((0,Er.U)(u=>u.map((l,f)=>({tag:this.filters.values[f].id,i18n:l})))).subscribe(u=>{this.mapService=new fo(u),this.mapService.init(),setTimeout(()=>this.isLoading=!1,200)}),(0,Ts._)([Y.iL.TRACK_POINTS,Y.iL.REPORT_POIS,Y.iL.BOUNDS])}loadTrack({data:u,includeWaypoints:l,fileName:f}){var d=this;return(0,V.Z)(function*(){if(d.readyToLoad=Y.rX.INIT,"---"===u)return void(d.trackLoadOk=d.trackLoadOk===Y.rX.OK?Y.rX.EXIST_FILE:Y.rX.ERROR);d.fileName=f;const _=new pt.nM(u),{ok:N,points:T}=_.getTracks();if(N)return d.trackLoadOk=yield d.mapService.drawTrack(T,l?_.getWayPoints():[]),d.searchStatus=Y.rX.INIT,void(l&&d.scrollToBottom());d.trackLoadOk=Y.rX.ERROR})()}modal(u=!0){return(0,V.Z)(function*(){const l=document.getElementById("downloadModal");u?l.showModal():l.close()})()}setMultiFilters(u){this.filters.select=u}onSelectProfile(u){this.selectedProfileId=u;const l=this.profiles.find(f=>f.id===this.selectedProfileId)?.pois;this.filtersSelect=this.filtersSelect.map(f=>(f.checked=l?.includes(f.id)||!1,f)),this.filters.select=sr(this.filtersSelect)}changeMetersAround(u){var l=this;return(0,V.Z)(function*(){l.rangePoiInMetres=u,l.mapService.rangePoiInMetres=u,yield l.reCalculateBoundsAfterChangeMetersAround()})()}reCalculateBoundsAfterChangeMetersAround(){var u=this;return(0,V.Z)(function*(){const l=yield u.mapService.calculateExpandedArea();localStorage.setItem(Y.iL.BOUNDS,l)})()}findPois(){var u=this;return(0,V.Z)(function*(){if((0,Ts._)([Y.iL.BOUNDS]),u.readyToLoad=Y.rX.INIT,u.trackLoadOk===Y.rX.ERROR||u.trackLoadOk===Y.rX.INIT)return void(u.searchStatus=Y.rX.ERROR);(u.trackLoadOk===Y.rX.EXIST_FILE||u.trackLoadOk===Y.rX.OK)&&(u.searchStatus=Y.rX.START_SEARCH);const l=yield u.mapService.calculateExpandedArea();localStorage.setItem(Y.iL.BOUNDS,l);const{ok:f,message:d}=yield u.mapService.drawPOIs(u.filters.select,u.vcr,u.injector,u.rangePoiInMetres);u.searchStatus=d,u.readyToLoad=Y.rX.READY_TO_LOAD,f&&(u.mapService.centerTrackCameraAndZoom(),u.scrollToBottom())})()}ngOnDestroy(){super.ngOnDestroy(),this.mapService.resetAll(),this.filters.select=Y.Po.select,this.filtersSelect=Y.Po.values.map(u=>(u.checked=Y.MJ.includes(u.id),u)),(0,Ts._)([Y.iL.TRACK_POINTS,Y.iL.REPORT_POIS,Y.iL.BOUNDS])}}return i.\u0275fac=function(){let a;return function(l){return(a||(a=c.n5z(i)))(l||i)}}(),i.\u0275cmp=c.Xpm({type:i,selectors:[["app-app"]],features:[c.qOj],decls:7,vars:7,consts:[[4,"ngIf"],[1,"container","container-center",3,"ngClass"],["id","map-element",1,"main-content"],["class","alert info",3,"innerHTML",4,"ngIf"],["id","map"],["class","filters",4,"ngIf"],[3,"fileName"],[1,"alert","info",3,"innerHTML"],[1,"filters"],["id","first-load-gpx"],[1,"section"],[1,"section-title"],[3,"sendFileContent","isReadingStatus"],["class","alert success",4,"ngIf"],["class","alert info",4,"ngIf"],["class","alert error",4,"ngIf"],["id","second-adventure-profile",1,"section"],["for","adventureProfile"],[3,"options","objectSelectProperty","selectOption"],["for","pointsOfInterest","id","three-pois-selection"],[3,"filters","activeValues"],["id","four-pois-found-range-in-metres"],[3,"select","title","selectValue"],["id","searchButton","id","five-found-pois",3,"click"],[1,"alert","success"],[1,"alert","info"],[1,"alert","error"]],template:function(u,l){1&u&&(c.YNc(0,Oo,1,0,"app-dialog",0),c.TgZ(1,"div",1)(2,"div",2),c.YNc(3,Ao,2,3,"div",3),c._UZ(4,"div",4),c.qZA(),c.YNc(5,qo,34,34,"div",5),c.qZA(),c._UZ(6,"app-download-modal",6)),2&u&&(c.Q6J("ngIf",l.isLoading),c.xp6(1),c.Q6J("ngClass",c.VKq(5,zo,l.isLoading)),c.xp6(2),c.Q6J("ngIf",!l.isLoading),c.xp6(2),c.Q6J("ngIf",!l.isLoading),c.xp6(1),c.Q6J("fileName",l.fileName))},dependencies:[x.mk,x.O5,po.a,mo,ko,No,wo,Ro,nr.X$],styles:[".block[_ngcontent-%COMP%]{cursor:none}#report[_ngcontent-%COMP%]{position:fixed;top:1rem;left:1rem;height:60px;cursor:pointer;z-index:2501;color:#fff;border-radius:6px;display:none}#report[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px;height:20px}code[_ngcontent-%COMP%]{color:#f0f}.leaflet-popup-content[_ngcontent-%COMP%]   .btn__popup[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%], .leaflet-tooltip-pane[_ngcontent-%COMP%]   .btn__popup[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]{display:inline-block;padding:10px 20px;text-align:center;text-decoration:none;color:#fff;background-color:#3c5d6e!important;border-radius:6px;outline:none;transition:.3s;border:2px solid transparent}.leaflet-popup-content[_ngcontent-%COMP%]   .btn__popup[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]:hover, .leaflet-popup-content[_ngcontent-%COMP%]   .btn__popup[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]:focus{background-color:#c2c7c7;border-color:#7aa8b7}select[_ngcontent-%COMP%]{position:relative;min-width:200px;width:100%}.file-upload-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;margin:20px}.file-upload-label[_ngcontent-%COMP%]{display:flex;align-items:center;cursor:pointer;color:var(--principal-color);font-size:16px}input[type=file][_ngcontent-%COMP%]{display:none}.material-icons[_ngcontent-%COMP%]{margin-right:8px}.file-upload-info[_ngcontent-%COMP%]{margin-top:10px;font-size:14px;color:#757575}.section[_ngcontent-%COMP%]{border:2px solid #ccc;padding:20px;margin-bottom:20px}.section-title[_ngcontent-%COMP%]{font-weight:700;margin-bottom:10px}#searchButton[_ngcontent-%COMP%]{margin-top:1rem}.alert[_ngcontent-%COMP%]{padding:15px;margin-bottom:1rem;border-radius:5px}.success[_ngcontent-%COMP%]{background-color:#4caf50}.error[_ngcontent-%COMP%]{background-color:#f44336}.success[_ngcontent-%COMP%], .error[_ngcontent-%COMP%]{color:#fff}.info[_ngcontent-%COMP%]{background-color:#cfe2ff;color:#052c65}  .important-url{text-decoration:underline;font-size:var(--content-font-size)}  .important-url:hover{-webkit-text-decoration:dotted;text-decoration:dotted;font-size:var(--content-font-size)}"]}),i})(),data:{seo:G(3391).S.app}}];let Vo=(()=>{class i{}return i.\u0275fac=function(u){return new(u||i)},i.\u0275mod=c.oAB({type:i}),i.\u0275inj=c.cJS({imports:[J.Bz.forChild(Ho),J.Bz]}),i})();var Zo=G(9250),Wo=G(753),$o=G(5444),jo=G(5010),Ko=G(9746),Jo=G(7105),tu=G(6922);let eu=(()=>{class i{}return i.\u0275fac=function(u){return new(u||i)},i.\u0275mod=c.oAB({type:i}),i.\u0275inj=c.cJS({imports:[x.ez,nr.aw]}),i})();var nu=G(529),ru=G(9148),ga=G(6081);function da(i){return new ru.z(i,[ga.R2.app,ga.R2.buttons])}let iu=(()=>{class i{}return i.\u0275fac=function(u){return new(u||i)},i.\u0275mod=c.oAB({type:i}),i.\u0275inj=c.cJS({imports:[x.ez,Vo,Zo.S,Wo.K,$o.J,jo.q,nr.aw.forChild({loader:{provide:nr.Zw,useFactory:da,deps:[nu.eN]},isolate:!0}),Ko._,Jo.y,tu.b,eu]}),i})()},7016:function(It){It.exports=function(){"use strict";function et(r,t){(null==t||t>r.length)&&(t=r.length);for(var e=0,n=Array(t);e<t;e++)n[e]=r[e];return n}function G(r,t,e){return t=dt(t),function(n,s){if(s&&("object"==typeof s||"function"==typeof s))return s;if(void 0!==s)throw new TypeError("Derived constructors may only return object or undefined");return function(o){if(void 0===o)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o}(n)}(r,Jt()?Reflect.construct(t,e||[],dt(r).constructor):t.apply(r,e))}function x(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function J(r,t,e){if(Jt())return Reflect.construct.apply(null,arguments);var n=[null];n.push.apply(n,t);var s=new(r.bind.apply(r,n));return e&&Zt(s,e.prototype),s}function V(r,t){for(var e=0;e<t.length;e++){var n=t[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,Ue(n.key),n)}}function c(r,t,e){return t&&V(r.prototype,t),e&&V(r,e),Object.defineProperty(r,"prototype",{writable:!1}),r}function j(r,t){var e=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(!e){if(Array.isArray(r)||(e=Oe(r))||t){e&&(r=e);var n=0,s=function(){};return{s,n:function(){return n>=r.length?{done:!0}:{done:!1,value:r[n++]}},e:function(y){throw y},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,h=!0,g=!1;return{s:function(){e=e.call(r)},n:function(){var y=e.next();return h=y.done,y},e:function(y){g=!0,o=y},f:function(){try{h||null==e.return||e.return()}finally{if(g)throw o}}}}function St(){return St=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(r,t,e){var n=function(o,h){for(;!{}.hasOwnProperty.call(o,h)&&null!==(o=dt(o)););return o}(r,t);if(n){var s=Object.getOwnPropertyDescriptor(n,t);return s.get?s.get.call(arguments.length<3?r:e):s.value}},St.apply(null,arguments)}function dt(r){return(dt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(r)}function at(r,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(t&&t.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),t&&Zt(r,t)}function Jt(){try{var r=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Jt=function(){return!!r})()}function Zt(r,t){return(Zt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,n){return e.__proto__=n,e})(r,t)}function pt(r,t,e,n){var s=St(dt(1&n?r.prototype:r),t,e);return 2&n&&"function"==typeof s?function(o){return s.apply(e,o)}:s}function ge(r){return function(t){if(Array.isArray(t))return et(t)}(r)||function(t){if(typeof Symbol<"u"&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(r)||Oe(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ue(r){var t=function(e,n){if("object"!=typeof e||!e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var o=s.call(e,"string");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r);return"symbol"==typeof t?t:t+""}function Oe(r,t){if(r){if("string"==typeof r)return et(r,t);var e={}.toString.call(r).slice(8,-1);return"Object"===e&&r.constructor&&(e=r.constructor.name),"Map"===e||"Set"===e?Array.from(r):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?et(r,t):void 0}}function yn(r){var t="function"==typeof Map?new Map:void 0;return yn=function(e){if(null===e||!function(s){try{return-1!==Function.toString.call(s).indexOf("[native code]")}catch{return"function"==typeof s}}(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return J(e,arguments,dt(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),Zt(n,e)},yn(r)}var Wt=function(){function r(){x(this,r),r.constructor_.apply(this,arguments)}return c(r,[{key:"getEndCapStyle",value:function(){return this._endCapStyle}},{key:"isSingleSided",value:function(){return this._isSingleSided}},{key:"setQuadrantSegments",value:function(t){this._quadrantSegments=t,0===this._quadrantSegments&&(this._joinStyle=r.JOIN_BEVEL),this._quadrantSegments<0&&(this._joinStyle=r.JOIN_MITRE,this._mitreLimit=Math.abs(this._quadrantSegments)),t<=0&&(this._quadrantSegments=1),this._joinStyle!==r.JOIN_ROUND&&(this._quadrantSegments=r.DEFAULT_QUADRANT_SEGMENTS)}},{key:"getJoinStyle",value:function(){return this._joinStyle}},{key:"setJoinStyle",value:function(t){this._joinStyle=t}},{key:"setSimplifyFactor",value:function(t){this._simplifyFactor=t<0?0:t}},{key:"getSimplifyFactor",value:function(){return this._simplifyFactor}},{key:"getQuadrantSegments",value:function(){return this._quadrantSegments}},{key:"setEndCapStyle",value:function(t){this._endCapStyle=t}},{key:"getMitreLimit",value:function(){return this._mitreLimit}},{key:"setMitreLimit",value:function(t){this._mitreLimit=t}},{key:"setSingleSided",value:function(t){this._isSingleSided=t}}],[{key:"constructor_",value:function(){if(this._quadrantSegments=r.DEFAULT_QUADRANT_SEGMENTS,this._endCapStyle=r.CAP_ROUND,this._joinStyle=r.JOIN_ROUND,this._mitreLimit=r.DEFAULT_MITRE_LIMIT,this._isSingleSided=!1,this._simplifyFactor=r.DEFAULT_SIMPLIFY_FACTOR,0!==arguments.length)if(1===arguments.length)this.setQuadrantSegments(arguments[0]);else if(2===arguments.length){var n=arguments[1];this.setQuadrantSegments(arguments[0]),this.setEndCapStyle(n)}else if(4===arguments.length){var o=arguments[1],h=arguments[2],g=arguments[3];this.setQuadrantSegments(arguments[0]),this.setEndCapStyle(o),this.setJoinStyle(h),this.setMitreLimit(g)}}},{key:"bufferDistanceError",value:function(t){var e=Math.PI/2/t;return 1-Math.cos(e/2)}}])}();Wt.CAP_ROUND=1,Wt.CAP_FLAT=2,Wt.CAP_SQUARE=3,Wt.JOIN_ROUND=1,Wt.JOIN_MITRE=2,Wt.JOIN_BEVEL=3,Wt.DEFAULT_QUADRANT_SEGMENTS=8,Wt.DEFAULT_MITRE_LIMIT=5,Wt.DEFAULT_SIMPLIFY_FACTOR=.01;var ze=function(r){function t(e){var n;return x(this,t),(n=G(this,t,[e])).name=Object.keys({Exception:t})[0],n}return at(t,r),c(t,[{key:"toString",value:function(){return this.message}}])}(yn(Error)),$=function(r){function t(e){var n;return x(this,t),(n=G(this,t,[e])).name=Object.keys({IllegalArgumentException:t})[0],n}return at(t,r),c(t)}(ze),Y=c(function r(){x(this,r)},[{key:"filter",value:function(r){}}]);function se(){}function un(){}function ce(){}var Tt,wt,Tn,Zr,sr,Qn,ar,or=c(function r(){x(this,r)},null,[{key:"equalsWithTolerance",value:function(r,t,e){return Math.abs(r-t)<=e}}]),Xn=c(function r(t,e){x(this,r),this.low=e||0,this.high=t||0},null,[{key:"toBinaryString",value:function(r){var t,e="";for(t=2147483648;t>0;t>>>=1)e+=(r.high&t)===t?"1":"0";for(t=2147483648;t>0;t>>>=1)e+=(r.low&t)===t?"1":"0";return e}}]);function ht(){}function ur(){}ht.NaN=NaN,ht.isNaN=function(r){return Number.isNaN(r)},ht.isInfinite=function(r){return!Number.isFinite(r)},ht.MAX_VALUE=Number.MAX_VALUE,ht.POSITIVE_INFINITY=Number.POSITIVE_INFINITY,ht.NEGATIVE_INFINITY=Number.NEGATIVE_INFINITY,"function"==typeof Float64Array&&"function"==typeof Int32Array?(sr=2146435072,Qn=new Float64Array(1),ar=new Int32Array(Qn.buffer),ht.doubleToLongBits=function(r){Qn[0]=r;var t=0|ar[0],e=0|ar[1];return(e&sr)===sr&&1048575&e&&0!==t&&(t=0,e=2146959360),new Xn(e,t)},ht.longBitsToDouble=function(r){return ar[0]=r.low,ar[1]=r.high,Qn[0]}):(1023,Tt=Math.log2,wt=Math.floor,Tn=Math.pow,Zr=function(){for(var r=53;r>0;r--){var t=Tn(2,r)-1;if(wt(Tt(t))+1===r)return t}return 0}(),ht.doubleToLongBits=function(r){var t,e,n,s,o,h,g,y,k;if(r<0||1/r===Number.NEGATIVE_INFINITY?(h=1<<31,r=-r):h=0,0===r)return new Xn(y=h,k=0);if(r===1/0)return new Xn(y=2146435072|h,k=0);if(r!=r)return new Xn(y=2146959360,k=0);if(s=0,k=0,(t=wt(r))>1)if(t<=Zr)(s=wt(Tt(t)))<=20?(k=0,y=t<<20-s&1048575):(k=t%(e=Tn(2,n=s-20))<<32-n,y=t/e&1048575);else for(n=t,k=0;0!==(n=wt(e=n/2));)s++,k>>>=1,k|=(1&y)<<31,y>>>=1,e!==n&&(y|=524288);if(g=s+1023,o=0===t,t=r-t,s<52&&0!==t)for(n=0;;){if((e=2*t)>=1?(t=e-1,o?(g--,o=!1):(n<<=1,n|=1,s++)):(t=e,o?0==--g&&(s++,o=!1):(n<<=1,s++)),20===s)y|=n,n=0;else if(52===s){k|=n;break}if(1===e){s<20?y|=n<<20-s:s<52&&(k|=n<<52-s);break}}return y|=g<<20,new Xn(y|=h,k)},ht.longBitsToDouble=function(r){var t,e,n,s,o=r.high,h=r.low,g=o&1<<31?-1:1;for(n=((2146435072&o)>>20)-1023,s=0,e=1<<19,t=1;t<=20;t++)o&e&&(s+=Tn(2,-t)),e>>>=1;for(e=1<<31,t=21;t<=52;t++)h&e&&(s+=Tn(2,-t)),e>>>=1;if(-1023===n){if(0===s)return 0*g;n=-1022}else{if(1024===n)return 0===s?g/0:NaN;s+=1}return g*s*Tn(2,n)});var Te=function(r){function t(e){var n;return x(this,t),(n=G(this,t,[e])).name=Object.keys({RuntimeException:t})[0],n}return at(t,r),c(t)}(ze),Hn=function(r){function t(){var e;return x(this,t),e=G(this,t),t.constructor_.apply(e,arguments),e}return at(t,r),c(t,null,[{key:"constructor_",value:function(){0===arguments.length?Te.constructor_.call(this):1===arguments.length&&Te.constructor_.call(this,arguments[0])}}])}(Te),bt=function(){function r(){x(this,r)}return c(r,null,[{key:"shouldNeverReachHere",value:function(){if(0===arguments.length)r.shouldNeverReachHere(null);else if(1===arguments.length){var t=arguments[0];throw new Hn("Should never reach here"+(null!==t?": "+t:""))}}},{key:"isTrue",value:function(){if(1===arguments.length)r.isTrue(arguments[0],null);else if(2===arguments.length){var e=arguments[1];if(!arguments[0])throw null===e?new Hn:new Hn(e)}}},{key:"equals",value:function(){if(2===arguments.length)r.equals(arguments[0],arguments[1],null);else if(3===arguments.length){var n=arguments[0],s=arguments[1],o=arguments[2];if(!s.equals(n))throw new Hn("Expected "+n+" but encountered "+s+(null!==o?": "+o:""))}}}])}(),Er=new ArrayBuffer(8),lr=new Float64Array(Er),Xt=new Int32Array(Er),D=function(){function r(){x(this,r),r.constructor_.apply(this,arguments)}return c(r,[{key:"getM",value:function(){return ht.NaN}},{key:"setOrdinate",value:function(t,e){switch(t){case r.X:this.x=e;break;case r.Y:this.y=e;break;case r.Z:this.setZ(e);break;default:throw new $("Invalid ordinate index: "+t)}}},{key:"equals2D",value:function(){if(1===arguments.length){var t=arguments[0];return this.x===t.x&&this.y===t.y}if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!or.equalsWithTolerance(this.x,e.x,n)&&!!or.equalsWithTolerance(this.y,e.y,n)}}},{key:"setM",value:function(t){throw new $("Invalid ordinate index: "+r.M)}},{key:"getZ",value:function(){return this.z}},{key:"getOrdinate",value:function(t){switch(t){case r.X:return this.x;case r.Y:return this.y;case r.Z:return this.getZ()}throw new $("Invalid ordinate index: "+t)}},{key:"equals3D",value:function(t){return this.x===t.x&&this.y===t.y&&(this.getZ()===t.getZ()||ht.isNaN(this.getZ())&&ht.isNaN(t.getZ()))}},{key:"equals",value:function(t){return t instanceof r&&this.equals2D(t)}},{key:"equalInZ",value:function(t,e){return or.equalsWithTolerance(this.getZ(),t.getZ(),e)}},{key:"setX",value:function(t){this.x=t}},{key:"compareTo",value:function(t){return this.x<t.x?-1:this.x>t.x?1:this.y<t.y?-1:this.y>t.y?1:0}},{key:"getX",value:function(){return this.x}},{key:"setZ",value:function(t){this.z=t}},{key:"clone",value:function(){try{return null}catch(t){if(t instanceof CloneNotSupportedException)return bt.shouldNeverReachHere("this shouldn't happen because this class is Cloneable"),null;throw t}}},{key:"copy",value:function(){return new r(this)}},{key:"toString",value:function(){return"("+this.x+", "+this.y+", "+this.getZ()+")"}},{key:"distance3D",value:function(t){var e=this.x-t.x,n=this.y-t.y,s=this.getZ()-t.getZ();return Math.sqrt(e*e+n*n+s*s)}},{key:"getY",value:function(){return this.y}},{key:"setY",value:function(t){this.y=t}},{key:"distance",value:function(t){var e=this.x-t.x,n=this.y-t.y;return Math.sqrt(e*e+n*n)}},{key:"hashCode",value:function(){var t=17;return 37*(t=37*t+r.hashCode(this.x))+r.hashCode(this.y)}},{key:"setCoordinate",value:function(t){this.x=t.x,this.y=t.y,this.z=t.getZ()}},{key:"interfaces_",get:function(){return[se,un,ce]}}],[{key:"constructor_",value:function(){if(this.x=null,this.y=null,this.z=null,0===arguments.length)r.constructor_.call(this,0,0);else if(1===arguments.length){var t=arguments[0];r.constructor_.call(this,t.x,t.y,t.getZ())}else if(2===arguments.length)r.constructor_.call(this,arguments[0],arguments[1],r.NULL_ORDINATE);else if(3===arguments.length){var o=arguments[1],h=arguments[2];this.x=arguments[0],this.y=o,this.z=h}}},{key:"hashCode",value:function(t){return lr[0]=t,Xt[0]^Xt[1]}}])}(),li=function(){function r(){x(this,r),r.constructor_.apply(this,arguments)}return c(r,[{key:"compare",value:function(t,e){var n=r.compare(t.x,e.x);if(0!==n)return n;var s=r.compare(t.y,e.y);return 0!==s?s:this._dimensionsToTest<=2?0:r.compare(t.getZ(),e.getZ())}},{key:"interfaces_",get:function(){return[ur]}}],[{key:"constructor_",value:function(){if(this._dimensionsToTest=2,0===arguments.length)r.constructor_.call(this,2);else if(1===arguments.length){var t=arguments[0];if(2!==t&&3!==t)throw new $("only 2 or 3 dimensions may be specified");this._dimensionsToTest=t}}},{key:"compare",value:function(t,e){return t<e?-1:t>e?1:ht.isNaN(t)?ht.isNaN(e)?0:-1:ht.isNaN(e)?1:0}}])}();D.DimensionalComparator=li,D.NULL_ORDINATE=ht.NaN,D.X=0,D.Y=1,D.Z=2,D.M=3;var te=function(){function r(){x(this,r),r.constructor_.apply(this,arguments)}return c(r,[{key:"getArea",value:function(){return this.getWidth()*this.getHeight()}},{key:"equals",value:function(t){if(!(t instanceof r))return!1;var e=t;return this.isNull()?e.isNull():this._maxx===e.getMaxX()&&this._maxy===e.getMaxY()&&this._minx===e.getMinX()&&this._miny===e.getMinY()}},{key:"intersection",value:function(t){return this.isNull()||t.isNull()||!this.intersects(t)?new r:new r(this._minx>t._minx?this._minx:t._minx,this._maxx<t._maxx?this._maxx:t._maxx,this._miny>t._miny?this._miny:t._miny,this._maxy<t._maxy?this._maxy:t._maxy)}},{key:"isNull",value:function(){return this._maxx<this._minx}},{key:"getMaxX",value:function(){return this._maxx}},{key:"covers",value:function(){if(1===arguments.length){if(arguments[0]instanceof D){var t=arguments[0];return this.covers(t.x,t.y)}if(arguments[0]instanceof r){var e=arguments[0];return!this.isNull()&&!e.isNull()&&e.getMinX()>=this._minx&&e.getMaxX()<=this._maxx&&e.getMinY()>=this._miny&&e.getMaxY()<=this._maxy}}else if(2===arguments.length){var n=arguments[0],s=arguments[1];return!this.isNull()&&n>=this._minx&&n<=this._maxx&&s>=this._miny&&s<=this._maxy}}},{key:"intersects",value:function(){if(1===arguments.length){if(arguments[0]instanceof r){var t=arguments[0];return!this.isNull()&&!t.isNull()&&!(t._minx>this._maxx||t._maxx<this._minx||t._miny>this._maxy||t._maxy<this._miny)}if(arguments[0]instanceof D){var e=arguments[0];return this.intersects(e.x,e.y)}}else if(2===arguments.length){if(arguments[0]instanceof D&&arguments[1]instanceof D){var n=arguments[0],s=arguments[1];return!(this.isNull()||(n.x<s.x?n.x:s.x)>this._maxx||(n.x>s.x?n.x:s.x)<this._minx||(n.y<s.y?n.y:s.y)>this._maxy||(n.y>s.y?n.y:s.y)<this._miny)}if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var o=arguments[0],h=arguments[1];return!this.isNull()&&!(o>this._maxx||o<this._minx||h>this._maxy||h<this._miny)}}}},{key:"getMinY",value:function(){return this._miny}},{key:"getDiameter",value:function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return Math.sqrt(t*t+e*e)}},{key:"getMinX",value:function(){return this._minx}},{key:"expandToInclude",value:function(){if(1===arguments.length){if(arguments[0]instanceof D){var t=arguments[0];this.expandToInclude(t.x,t.y)}else if(arguments[0]instanceof r){var e=arguments[0];if(e.isNull())return null;this.isNull()?(this._minx=e.getMinX(),this._maxx=e.getMaxX(),this._miny=e.getMinY(),this._maxy=e.getMaxY()):(e._minx<this._minx&&(this._minx=e._minx),e._maxx>this._maxx&&(this._maxx=e._maxx),e._miny<this._miny&&(this._miny=e._miny),e._maxy>this._maxy&&(this._maxy=e._maxy))}}else if(2===arguments.length){var n=arguments[0],s=arguments[1];this.isNull()?(this._minx=n,this._maxx=n,this._miny=s,this._maxy=s):(n<this._minx&&(this._minx=n),n>this._maxx&&(this._maxx=n),s<this._miny&&(this._miny=s),s>this._maxy&&(this._maxy=s))}}},{key:"minExtent",value:function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t<e?t:e}},{key:"getWidth",value:function(){return this.isNull()?0:this._maxx-this._minx}},{key:"compareTo",value:function(t){var e=t;return this.isNull()?e.isNull()?0:-1:e.isNull()?1:this._minx<e._minx?-1:this._minx>e._minx?1:this._miny<e._miny?-1:this._miny>e._miny?1:this._maxx<e._maxx?-1:this._maxx>e._maxx?1:this._maxy<e._maxy?-1:this._maxy>e._maxy?1:0}},{key:"translate",value:function(t,e){if(this.isNull())return null;this.init(this.getMinX()+t,this.getMaxX()+t,this.getMinY()+e,this.getMaxY()+e)}},{key:"copy",value:function(){return new r(this)}},{key:"toString",value:function(){return"Env["+this._minx+" : "+this._maxx+", "+this._miny+" : "+this._maxy+"]"}},{key:"setToNull",value:function(){this._minx=0,this._maxx=-1,this._miny=0,this._maxy=-1}},{key:"disjoint",value:function(t){return!(!this.isNull()&&!t.isNull())||t._minx>this._maxx||t._maxx<this._minx||t._miny>this._maxy||t._maxy<this._miny}},{key:"getHeight",value:function(){return this.isNull()?0:this._maxy-this._miny}},{key:"maxExtent",value:function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t>e?t:e}},{key:"expandBy",value:function(){if(1===arguments.length){var t=arguments[0];this.expandBy(t,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this.isNull())return null;this._minx-=e,this._maxx+=e,this._miny-=n,this._maxy+=n,(this._minx>this._maxx||this._miny>this._maxy)&&this.setToNull()}}},{key:"contains",value:function(){if(1===arguments.length){if(arguments[0]instanceof r)return this.covers(arguments[0]);if(arguments[0]instanceof D)return this.covers(arguments[0])}else if(2===arguments.length)return this.covers(arguments[0],arguments[1])}},{key:"centre",value:function(){return this.isNull()?null:new D((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)}},{key:"init",value:function(){if(0===arguments.length)this.setToNull();else if(1===arguments.length){if(arguments[0]instanceof D){var t=arguments[0];this.init(t.x,t.x,t.y,t.y)}else if(arguments[0]instanceof r){var e=arguments[0];this._minx=e._minx,this._maxx=e._maxx,this._miny=e._miny,this._maxy=e._maxy}}else if(2===arguments.length){var n=arguments[0],s=arguments[1];this.init(n.x,s.x,n.y,s.y)}else if(4===arguments.length){var o=arguments[0],h=arguments[1],g=arguments[2],y=arguments[3];o<h?(this._minx=o,this._maxx=h):(this._minx=h,this._maxx=o),g<y?(this._miny=g,this._maxy=y):(this._miny=y,this._maxy=g)}}},{key:"getMaxY",value:function(){return this._maxy}},{key:"distance",value:function(t){if(this.intersects(t))return 0;var e=0;this._maxx<t._minx?e=t._minx-this._maxx:this._minx>t._maxx&&(e=this._minx-t._maxx);var n=0;return this._maxy<t._miny?n=t._miny-this._maxy:this._miny>t._maxy&&(n=this._miny-t._maxy),0===e?n:0===n?e:Math.sqrt(e*e+n*n)}},{key:"hashCode",value:function(){var t=17;return 37*(t=37*(t=37*(t=37*t+D.hashCode(this._minx))+D.hashCode(this._maxx))+D.hashCode(this._miny))+D.hashCode(this._maxy)}},{key:"interfaces_",get:function(){return[se,ce]}}],[{key:"constructor_",value:function(){if(this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,0===arguments.length)this.init();else if(1===arguments.length)if(arguments[0]instanceof D){var t=arguments[0];this.init(t.x,t.x,t.y,t.y)}else arguments[0]instanceof r&&this.init(arguments[0]);else if(2===arguments.length){var n=arguments[0],s=arguments[1];this.init(n.x,s.x,n.y,s.y)}else 4===arguments.length&&this.init(arguments[0],arguments[1],arguments[2],arguments[3])}},{key:"intersects",value:function(){if(3===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2];return n.x>=(t.x<e.x?t.x:e.x)&&n.x<=(t.x>e.x?t.x:e.x)&&n.y>=(t.y<e.y?t.y:e.y)&&n.y<=(t.y>e.y?t.y:e.y)}if(4===arguments.length){var s=arguments[0],o=arguments[1],h=arguments[2],g=arguments[3],y=Math.min(h.x,g.x),k=Math.max(h.x,g.x),R=Math.min(s.x,o.x),P=Math.max(s.x,o.x);return!(R>k||P<y||(y=Math.min(h.y,g.y),k=Math.max(h.y,g.y),R=Math.min(s.y,o.y),P=Math.max(s.y,o.y),R>k||P<y))}}}])}(),lt=function(){function r(){x(this,r),r.constructor_.apply(this,arguments)}return c(r,[{key:"isGeometryCollection",value:function(){return this.getTypeCode()===r.TYPECODE_GEOMETRYCOLLECTION}},{key:"getFactory",value:function(){return this._factory}},{key:"getGeometryN",value:function(t){return this}},{key:"getArea",value:function(){return 0}},{key:"isRectangle",value:function(){return!1}},{key:"equalsExact",value:function(t){return this===t||this.equalsExact(t,0)}},{key:"geometryChanged",value:function(){this.apply(r.geometryChangedFilter)}},{key:"geometryChangedAction",value:function(){this._envelope=null}},{key:"equalsNorm",value:function(t){return null!==t&&this.norm().equalsExact(t.norm())}},{key:"getLength",value:function(){return 0}},{key:"getNumGeometries",value:function(){return 1}},{key:"compareTo",value:function(){var t;if(1===arguments.length){var e=arguments[0];return t=e,this.getTypeCode()!==t.getTypeCode()?this.getTypeCode()-t.getTypeCode():this.isEmpty()&&t.isEmpty()?0:this.isEmpty()?-1:t.isEmpty()?1:this.compareToSameClass(e)}if(2===arguments.length){var n=arguments[0],s=arguments[1];return t=n,this.getTypeCode()!==t.getTypeCode()?this.getTypeCode()-t.getTypeCode():this.isEmpty()&&t.isEmpty()?0:this.isEmpty()?-1:t.isEmpty()?1:this.compareToSameClass(n,s)}}},{key:"getUserData",value:function(){return this._userData}},{key:"getSRID",value:function(){return this._SRID}},{key:"getEnvelope",value:function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())}},{key:"checkNotGeometryCollection",value:function(t){if(t.getTypeCode()===r.TYPECODE_GEOMETRYCOLLECTION)throw new $("This method does not support GeometryCollection arguments")}},{key:"equal",value:function(t,e,n){return 0===n?t.equals(e):t.distance(e)<=n}},{key:"norm",value:function(){var t=this.copy();return t.normalize(),t}},{key:"reverse",value:function(){var t=this.reverseInternal();return null!=this.envelope&&(t.envelope=this.envelope.copy()),t.setSRID(this.getSRID()),t}},{key:"copy",value:function(){var t=this.copyInternal();return t.envelope=null==this._envelope?null:this._envelope.copy(),t._SRID=this._SRID,t._userData=this._userData,t}},{key:"getPrecisionModel",value:function(){return this._factory.getPrecisionModel()}},{key:"getEnvelopeInternal",value:function(){return null===this._envelope&&(this._envelope=this.computeEnvelopeInternal()),new te(this._envelope)}},{key:"setSRID",value:function(t){this._SRID=t}},{key:"setUserData",value:function(t){this._userData=t}},{key:"compare",value:function(t,e){for(var n=t.iterator(),s=e.iterator();n.hasNext()&&s.hasNext();){var o=n.next(),h=s.next(),g=o.compareTo(h);if(0!==g)return g}return n.hasNext()?1:s.hasNext()?-1:0}},{key:"hashCode",value:function(){return this.getEnvelopeInternal().hashCode()}},{key:"isEquivalentClass",value:function(t){return this.getClass()===t.getClass()}},{key:"isGeometryCollectionOrDerived",value:function(){return this.getTypeCode()===r.TYPECODE_GEOMETRYCOLLECTION||this.getTypeCode()===r.TYPECODE_MULTIPOINT||this.getTypeCode()===r.TYPECODE_MULTILINESTRING||this.getTypeCode()===r.TYPECODE_MULTIPOLYGON}},{key:"interfaces_",get:function(){return[un,se,ce]}},{key:"getClass",value:function(){return r}}],[{key:"hasNonEmptyElements",value:function(t){for(var e=0;e<t.length;e++)if(!t[e].isEmpty())return!0;return!1}},{key:"hasNullElements",value:function(t){for(var e=0;e<t.length;e++)if(null===t[e])return!0;return!1}}])}();lt.constructor_=function(r){r&&(this._envelope=null,this._userData=null,this._factory=r,this._SRID=r.getSRID())},lt.TYPECODE_POINT=0,lt.TYPECODE_MULTIPOINT=1,lt.TYPECODE_LINESTRING=2,lt.TYPECODE_LINEARRING=3,lt.TYPECODE_MULTILINESTRING=4,lt.TYPECODE_POLYGON=5,lt.TYPECODE_MULTIPOLYGON=6,lt.TYPECODE_GEOMETRYCOLLECTION=7,lt.TYPENAME_POINT="Point",lt.TYPENAME_MULTIPOINT="MultiPoint",lt.TYPENAME_LINESTRING="LineString",lt.TYPENAME_LINEARRING="LinearRing",lt.TYPENAME_MULTILINESTRING="MultiLineString",lt.TYPENAME_POLYGON="Polygon",lt.TYPENAME_MULTIPOLYGON="MultiPolygon",lt.TYPENAME_GEOMETRYCOLLECTION="GeometryCollection",lt.geometryChangedFilter={get interfaces_(){return[Y]},filter:function(r){r.geometryChangedAction()}};var S=function(){function r(){x(this,r)}return c(r,null,[{key:"toLocationSymbol",value:function(t){switch(t){case r.EXTERIOR:return"e";case r.BOUNDARY:return"b";case r.INTERIOR:return"i";case r.NONE:return"-"}throw new $("Unknown location value: "+t)}}])}();S.INTERIOR=0,S.BOUNDARY=1,S.EXTERIOR=2,S.NONE=-1;var $e=c(function r(){x(this,r)},[{key:"add",value:function(){}},{key:"addAll",value:function(){}},{key:"isEmpty",value:function(){}},{key:"iterator",value:function(){}},{key:"size",value:function(){}},{key:"toArray",value:function(){}},{key:"remove",value:function(){}}]),cr=function(r){function t(e){var n;return x(this,t),(n=G(this,t,[e])).name=Object.keys({NoSuchElementException:t})[0],n}return at(t,r),c(t)}(ze),ln=function(r){function t(e){var n;return x(this,t),(n=G(this,t,[e])).name=Object.keys({UnsupportedOperationException:t})[0],n}return at(t,r),c(t)}(ze),Wr=function(r){function t(){return x(this,t),G(this,t,arguments)}return at(t,r),c(t,[{key:"contains",value:function(){}}])}($e),kr=function(r){function t(e){var n;return x(this,t),(n=G(this,t)).map=new Map,e instanceof $e&&n.addAll(e),n}return at(t,r),c(t,[{key:"contains",value:function(e){var n=e.hashCode?e.hashCode():e;return!!this.map.has(n)}},{key:"add",value:function(e){var n=e.hashCode?e.hashCode():e;return!this.map.has(n)&&!!this.map.set(n,e)}},{key:"addAll",value:function(e){var n,s=j(e);try{for(s.s();!(n=s.n()).done;)this.add(n.value)}catch(h){s.e(h)}finally{s.f()}return!0}},{key:"remove",value:function(){throw new ln}},{key:"size",value:function(){return this.map.size}},{key:"isEmpty",value:function(){return 0===this.map.size}},{key:"toArray",value:function(){return Array.from(this.map.values())}},{key:"iterator",value:function(){return new $r(this.map)}},{key:Symbol.iterator,value:function(){return this.map}}])}(Wr),$r=c(function r(t){x(this,r),this.iterator=t.values();var e=this.iterator.next(),s=e.value;this.done=e.done,this.value=s},[{key:"next",value:function(){if(this.done)throw new cr;var r=this.value,t=this.iterator.next(),n=t.value;return this.done=t.done,this.value=n,r}},{key:"hasNext",value:function(){return!this.done}},{key:"remove",value:function(){throw new ln}}]),H=function(){function r(){x(this,r)}return c(r,null,[{key:"opposite",value:function(t){return t===r.LEFT?r.RIGHT:t===r.RIGHT?r.LEFT:t}}])}();H.ON=0,H.LEFT=1,H.RIGHT=2;var hr=function(r){function t(e){var n;return x(this,t),(n=G(this,t,[e])).name=Object.keys({EmptyStackException:t})[0],n}return at(t,r),c(t)}(ze),xr=function(r){function t(e){var n;return x(this,t),(n=G(this,t,[e])).name=Object.keys({IndexOutOfBoundsException:t})[0],n}return at(t,r),c(t)}(ze),vn=function(r){function t(){return x(this,t),G(this,t,arguments)}return at(t,r),c(t,[{key:"get",value:function(){}},{key:"set",value:function(){}},{key:"isEmpty",value:function(){}}])}($e),Ri=function(r){function t(){var e;return x(this,t),(e=G(this,t)).array=[],e}return at(t,r),c(t,[{key:"add",value:function(e){return this.array.push(e),!0}},{key:"get",value:function(e){if(e<0||e>=this.size())throw new xr;return this.array[e]}},{key:"push",value:function(e){return this.array.push(e),e}},{key:"pop",value:function(){if(0===this.array.length)throw new hr;return this.array.pop()}},{key:"peek",value:function(){if(0===this.array.length)throw new hr;return this.array[this.array.length-1]}},{key:"empty",value:function(){return 0===this.array.length}},{key:"isEmpty",value:function(){return this.empty()}},{key:"search",value:function(e){return this.array.indexOf(e)}},{key:"size",value:function(){return this.array.length}},{key:"toArray",value:function(){return this.array.slice()}}])}(vn);function Ct(r,t){return r.interfaces_&&r.interfaces_.indexOf(t)>-1}var _n=c(function r(t){x(this,r),this.str=t},[{key:"append",value:function(r){this.str+=r}},{key:"setCharAt",value:function(r,t){this.str=this.str.substr(0,r)+t+this.str.substr(r+1)}},{key:"toString",value:function(){return this.str}}]),En=function(){function r(t){x(this,r),this.value=t}return c(r,[{key:"intValue",value:function(){return this.value}},{key:"compareTo",value:function(t){return this.value<t?-1:this.value>t?1:0}}],[{key:"compare",value:function(t,e){return t<e?-1:t>e?1:0}},{key:"isNan",value:function(t){return Number.isNaN(t)}},{key:"valueOf",value:function(t){return new r(t)}}])}(),cn=c(function r(){x(this,r)},null,[{key:"isWhitespace",value:function(r){return r<=32&&r>=0||127===r}},{key:"toUpperCase",value:function(r){return r.toUpperCase()}}]),_t=function(){function r(){x(this,r),r.constructor_.apply(this,arguments)}return c(r,[{key:"le",value:function(t){return this._hi<t._hi||this._hi===t._hi&&this._lo<=t._lo}},{key:"extractSignificantDigits",value:function(t,e){var n=this.abs(),s=r.magnitude(n._hi),o=r.TEN.pow(s);(n=n.divide(o)).gt(r.TEN)?(n=n.divide(r.TEN),s+=1):n.lt(r.ONE)&&(n=n.multiply(r.TEN),s-=1);for(var h=s+1,g=new _n,y=r.MAX_PRINT_DIGITS-1,k=0;k<=y;k++){t&&k===h&&g.append(".");var R=Math.trunc(n._hi);if(R<0)break;var P=!1,z=0;R>9?(P=!0,z="9"):z="0"+R,g.append(z),n=n.subtract(r.valueOf(R)).multiply(r.TEN),P&&n.selfAdd(r.TEN);var K=!0,ot=r.magnitude(n._hi);if(ot<0&&Math.abs(ot)>=y-k&&(K=!1),!K)break}return e[0]=s,g.toString()}},{key:"sqr",value:function(){return this.multiply(this)}},{key:"doubleValue",value:function(){return this._hi+this._lo}},{key:"subtract",value:function(){return arguments[0]instanceof r?this.add(arguments[0].negate()):"number"==typeof arguments[0]?this.add(-arguments[0]):void 0}},{key:"equals",value:function(){if(1===arguments.length&&arguments[0]instanceof r){var t=arguments[0];return this._hi===t._hi&&this._lo===t._lo}}},{key:"isZero",value:function(){return 0===this._hi&&0===this._lo}},{key:"selfSubtract",value:function(){if(arguments[0]instanceof r){var t=arguments[0];return this.isNaN()?this:this.selfAdd(-t._hi,-t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.isNaN()?this:this.selfAdd(-e,0)}}},{key:"getSpecialNumberString",value:function(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null}},{key:"min",value:function(t){return this.le(t)?this:t}},{key:"selfDivide",value:function(){if(1===arguments.length){if(arguments[0]instanceof r){var t=arguments[0];return this.selfDivide(t._hi,t._lo)}if("number"==typeof arguments[0])return this.selfDivide(arguments[0],0)}else if(2===arguments.length){var n,s,o,h,g=arguments[0],k=null,R=null,P=null,z=null;return z=(k=(P=r.SPLIT*(o=this._hi/g))-(k=P-o))*(R=(z=r.SPLIT*g)-(R=z-g))-(h=o*g)+k*(s=g-R)+(n=o-k)*R+n*s,z=o+(P=(this._hi-h-z+this._lo-o*arguments[1])/g),this._hi=z,this._lo=o-z+P,this}}},{key:"dump",value:function(){return"DD<"+this._hi+", "+this._lo+">"}},{key:"divide",value:function(){if(arguments[0]instanceof r){var t,e,n,s,o=arguments[0],h=null,g=null,y=null,k=null;return t=(n=this._hi/o._hi)-(h=(y=r.SPLIT*n)-(h=y-n)),k=h*(g=(k=r.SPLIT*o._hi)-(g=k-o._hi))-(s=n*o._hi)+h*(e=o._hi-g)+t*g+t*e,new r(k=n+(y=(this._hi-s-k+this._lo-n*o._lo)/o._hi),n-k+y)}if("number"==typeof arguments[0]){var R=arguments[0];return ht.isNaN(R)?r.createNaN():r.copy(this).selfDivide(R,0)}}},{key:"ge",value:function(t){return this._hi>t._hi||this._hi===t._hi&&this._lo>=t._lo}},{key:"pow",value:function(t){if(0===t)return r.valueOf(1);var e=new r(this),n=r.valueOf(1),s=Math.abs(t);if(s>1)for(;s>0;)s%2==1&&n.selfMultiply(e),(s/=2)>0&&(e=e.sqr());else n=e;return t<0?n.reciprocal():n}},{key:"ceil",value:function(){if(this.isNaN())return r.NaN;var t=Math.ceil(this._hi),e=0;return t===this._hi&&(e=Math.ceil(this._lo)),new r(t,e)}},{key:"compareTo",value:function(t){return this._hi<t._hi?-1:this._hi>t._hi?1:this._lo<t._lo?-1:this._lo>t._lo?1:0}},{key:"rint",value:function(){return this.isNaN()?this:this.add(.5).floor()}},{key:"setValue",value:function(){return arguments[0]instanceof r||"number"==typeof arguments[0]?(this.init(arguments[0]),this):void 0}},{key:"max",value:function(t){return this.ge(t)?this:t}},{key:"sqrt",value:function(){if(this.isZero())return r.valueOf(0);if(this.isNegative())return r.NaN;var t=1/Math.sqrt(this._hi),n=r.valueOf(this._hi*t),s=this.subtract(n.sqr())._hi*(.5*t);return n.add(s)}},{key:"selfAdd",value:function(){if(1===arguments.length){if(arguments[0]instanceof r){var t=arguments[0];return this.selfAdd(t._hi,t._lo)}if("number"==typeof arguments[0]){var e,n,s,o,h,g=arguments[0],y=null;return y=(s=this._hi+g)-(o=s-this._hi),n=(h=(y=g-o+(this._hi-y))+this._lo)+(s-(e=s+h)),this._hi=e+n,this._lo=n+(e-this._hi),this}}else if(2===arguments.length){var k,R,P,z,K=arguments[0],ot=arguments[1],gt=null,Ht=null,Qt=null;Ht=(P=this._hi+K)-(Qt=P-this._hi),gt=(R=this._lo+ot)-(z=R-this._lo);var ne=(k=P+(Qt=(Ht=K-Qt+(this._hi-Ht))+R))+(Qt=(gt=ot-z+(this._lo-gt))+(Qt+(P-k))),ke=Qt+(k-ne);return this._hi=ne,this._lo=ke,this}}},{key:"selfMultiply",value:function(){if(1===arguments.length){if(arguments[0]instanceof r){var t=arguments[0];return this.selfMultiply(t._hi,t._lo)}if("number"==typeof arguments[0])return this.selfMultiply(arguments[0],0)}else if(2===arguments.length){var n,s,o=arguments[0],g=null,y=null,k=null,R=null;g=(k=r.SPLIT*this._hi)-this._hi,g=k-g;var P=(k=this._hi*o)+(R=g*(y=(R=r.SPLIT*o)-(y=R-o))-k+g*(s=o-y)+(n=this._hi-g)*y+n*s+(this._hi*arguments[1]+this._lo*o)),z=R+(g=k-P);return this._hi=P,this._lo=z,this}}},{key:"selfSqr",value:function(){return this.selfMultiply(this)}},{key:"floor",value:function(){if(this.isNaN())return r.NaN;var t=Math.floor(this._hi),e=0;return t===this._hi&&(e=Math.floor(this._lo)),new r(t,e)}},{key:"negate",value:function(){return this.isNaN()?this:new r(-this._hi,-this._lo)}},{key:"clone",value:function(){try{return null}catch(t){if(t instanceof CloneNotSupportedException)return null;throw t}}},{key:"multiply",value:function(){if(arguments[0]instanceof r){var t=arguments[0];return t.isNaN()?r.createNaN():r.copy(this).selfMultiply(t)}if("number"==typeof arguments[0]){var e=arguments[0];return ht.isNaN(e)?r.createNaN():r.copy(this).selfMultiply(e,0)}}},{key:"isNaN",value:function(){return ht.isNaN(this._hi)}},{key:"intValue",value:function(){return Math.trunc(this._hi)}},{key:"toString",value:function(){var t=r.magnitude(this._hi);return t>=-3&&t<=20?this.toStandardNotation():this.toSciNotation()}},{key:"toStandardNotation",value:function(){var t=this.getSpecialNumberString();if(null!==t)return t;var e=new Array(1).fill(null),n=this.extractSignificantDigits(!0,e),s=e[0]+1,o=n;return"."===n.charAt(0)?o="0"+n:s<0?o="0."+r.stringOfChar("0",-s)+n:-1===n.indexOf(".")&&(o=n+r.stringOfChar("0",s-n.length)+".0"),this.isNegative()?"-"+o:o}},{key:"reciprocal",value:function(){var t,e,n,s,o=null,h=null,g=null,y=null;t=(n=1/this._hi)-(o=(g=r.SPLIT*n)-(o=g-n)),h=(y=r.SPLIT*this._hi)-this._hi;var k=n+(g=(1-(s=n*this._hi)-(y=o*(h=y-h)-s+o*(e=this._hi-h)+t*h+t*e)-n*this._lo)/this._hi);return new r(k,n-k+g)}},{key:"toSciNotation",value:function(){if(this.isZero())return r.SCI_NOT_ZERO;var t=this.getSpecialNumberString();if(null!==t)return t;var e=new Array(1).fill(null),n=this.extractSignificantDigits(!1,e),s=r.SCI_NOT_EXPONENT_CHAR+e[0];if("0"===n.charAt(0))throw new IllegalStateException("Found leading zero: "+n);var o="";n.length>1&&(o=n.substring(1));var h=n.charAt(0)+"."+o;return this.isNegative()?"-"+h+s:h+s}},{key:"abs",value:function(){return this.isNaN()?r.NaN:this.isNegative()?this.negate():new r(this)}},{key:"isPositive",value:function(){return this._hi>0||0===this._hi&&this._lo>0}},{key:"lt",value:function(t){return this._hi<t._hi||this._hi===t._hi&&this._lo<t._lo}},{key:"add",value:function(){if(arguments[0]instanceof r){var t=arguments[0];return r.copy(this).selfAdd(t)}if("number"==typeof arguments[0]){var e=arguments[0];return r.copy(this).selfAdd(e)}}},{key:"init",value:function(){if(1===arguments.length){if("number"==typeof arguments[0])this._hi=arguments[0],this._lo=0;else if(arguments[0]instanceof r){var e=arguments[0];this._hi=e._hi,this._lo=e._lo}}else if(2===arguments.length){var s=arguments[1];this._hi=arguments[0],this._lo=s}}},{key:"gt",value:function(t){return this._hi>t._hi||this._hi===t._hi&&this._lo>t._lo}},{key:"isNegative",value:function(){return this._hi<0||0===this._hi&&this._lo<0}},{key:"trunc",value:function(){return this.isNaN()?r.NaN:this.isPositive()?this.floor():this.ceil()}},{key:"signum",value:function(){return this._hi>0?1:this._hi<0?-1:this._lo>0?1:this._lo<0?-1:0}},{key:"interfaces_",get:function(){return[ce,se,un]}}],[{key:"constructor_",value:function(){this._hi=0,this._lo=0,0===arguments.length?this.init(0):1===arguments.length?"number"==typeof arguments[0]||arguments[0]instanceof r?this.init(arguments[0]):"string"==typeof arguments[0]&&r.constructor_.call(this,r.parse(arguments[0])):2===arguments.length&&this.init(arguments[0],arguments[1])}},{key:"determinant",value:function(){if("number"==typeof arguments[3]&&"number"==typeof arguments[2]&&"number"==typeof arguments[0]&&"number"==typeof arguments[1]){var e=arguments[1],n=arguments[2],s=arguments[3];return r.determinant(r.valueOf(arguments[0]),r.valueOf(e),r.valueOf(n),r.valueOf(s))}if(arguments[3]instanceof r&&arguments[2]instanceof r&&arguments[0]instanceof r&&arguments[1]instanceof r){var o=arguments[1],h=arguments[2];return arguments[0].multiply(arguments[3]).selfSubtract(o.multiply(h))}}},{key:"sqr",value:function(t){return r.valueOf(t).selfMultiply(t)}},{key:"valueOf",value:function(){return"string"==typeof arguments[0]?r.parse(arguments[0]):"number"==typeof arguments[0]?new r(arguments[0]):void 0}},{key:"sqrt",value:function(t){return r.valueOf(t).sqrt()}},{key:"parse",value:function(t){for(var e=0,n=t.length;cn.isWhitespace(t.charAt(e));)e++;var s=!1;if(e<n){var o=t.charAt(e);"-"!==o&&"+"!==o||(e++,"-"===o&&(s=!0))}for(var h=new r,g=0,y=0,k=0,R=!1;!(e>=n);){var P=t.charAt(e);if(e++,cn.isDigit(P)){var z=P-"0";h.selfMultiply(r.TEN),h.selfAdd(z),g++}else{if("."!==P){if("e"===P||"E"===P){var K=t.substring(e);try{k=En.parseInt(K)}catch(ne){throw ne instanceof NumberFormatException?new NumberFormatException("Invalid exponent "+K+" in string "+t):ne}break}throw new NumberFormatException("Unexpected character '"+P+"' at position "+e+" in string "+t)}y=g,R=!0}}var ot=h;R||(y=g);var gt=g-y-k;if(0===gt)ot=h;else if(gt>0){var Ht=r.TEN.pow(gt);ot=h.divide(Ht)}else if(gt<0){var Qt=r.TEN.pow(-gt);ot=h.multiply(Qt)}return s?ot.negate():ot}},{key:"createNaN",value:function(){return new r(ht.NaN,ht.NaN)}},{key:"copy",value:function(t){return new r(t)}},{key:"magnitude",value:function(t){var e=Math.abs(t),n=Math.log(e)/Math.log(10),s=Math.trunc(Math.floor(n));return 10*Math.pow(10,s)<=e&&(s+=1),s}},{key:"stringOfChar",value:function(t,e){for(var n=new _n,s=0;s<e;s++)n.append(t);return n.toString()}}])}();_t.PI=new _t(3.141592653589793,12246467991473532e-32),_t.TWO_PI=new _t(6.283185307179586,24492935982947064e-32),_t.PI_2=new _t(1.5707963267948966,6123233995736766e-32),_t.E=new _t(2.718281828459045,14456468917292502e-32),_t.NaN=new _t(ht.NaN,ht.NaN),_t.EPS=123259516440783e-46,_t.SPLIT=134217729,_t.MAX_PRINT_DIGITS=32,_t.TEN=_t.valueOf(10),_t.ONE=_t.valueOf(1),_t.SCI_NOT_EXPONENT_CHAR="E",_t.SCI_NOT_ZERO="0.0E0";var Nr=function(){function r(){x(this,r)}return c(r,null,[{key:"orientationIndex",value:function(t,e,n){var s=r.orientationIndexFilter(t,e,n);if(s<=1)return s;var o=_t.valueOf(e.x).selfAdd(-t.x),h=_t.valueOf(e.y).selfAdd(-t.y),g=_t.valueOf(n.x).selfAdd(-e.x),y=_t.valueOf(n.y).selfAdd(-e.y);return o.selfMultiply(y).selfSubtract(h.selfMultiply(g)).signum()}},{key:"signOfDet2x2",value:function(){if(arguments[3]instanceof _t&&arguments[2]instanceof _t&&arguments[0]instanceof _t&&arguments[1]instanceof _t){var t=arguments[1],e=arguments[2];return arguments[0].multiply(arguments[3]).selfSubtract(t.multiply(e)).signum()}if("number"==typeof arguments[3]&&"number"==typeof arguments[2]&&"number"==typeof arguments[0]&&"number"==typeof arguments[1]){var o=arguments[1],h=arguments[2],g=arguments[3],y=_t.valueOf(arguments[0]),k=_t.valueOf(o),R=_t.valueOf(h),P=_t.valueOf(g);return y.multiply(P).selfSubtract(k.multiply(R)).signum()}}},{key:"intersection",value:function(t,e,n,s){var o=new _t(t.y).selfSubtract(e.y),h=new _t(e.x).selfSubtract(t.x),g=new _t(t.x).selfMultiply(e.y).selfSubtract(new _t(e.x).selfMultiply(t.y)),y=new _t(n.y).selfSubtract(s.y),k=new _t(s.x).selfSubtract(n.x),R=new _t(n.x).selfMultiply(s.y).selfSubtract(new _t(s.x).selfMultiply(n.y)),P=h.multiply(R).selfSubtract(k.multiply(g)),z=y.multiply(g).selfSubtract(o.multiply(R)),K=o.multiply(k).selfSubtract(y.multiply(h)),ot=P.selfDivide(K).doubleValue(),gt=z.selfDivide(K).doubleValue();return ht.isNaN(ot)||ht.isInfinite(ot)||ht.isNaN(gt)||ht.isInfinite(gt)?null:new D(ot,gt)}},{key:"orientationIndexFilter",value:function(t,e,n){var s=null,o=(t.x-n.x)*(e.y-n.y),h=(t.y-n.y)*(e.x-n.x),g=o-h;if(o>0){if(h<=0)return r.signum(g);s=o+h}else{if(!(o<0)||h>=0)return r.signum(g);s=-o-h}var y=r.DP_SAFE_EPSILON*s;return g>=y||-g>=y?r.signum(g):2}},{key:"signum",value:function(t){return t>0?1:t<0?-1:0}}])}();Nr.DP_SAFE_EPSILON=1e-15;var Gt=c(function r(){x(this,r)},[{key:"getM",value:function(r){if(this.hasM()){var t=this.getDimension()-this.getMeasures();return this.getOrdinate(r,t)}return ht.NaN}},{key:"setOrdinate",value:function(r,t,e){}},{key:"getZ",value:function(r){return this.hasZ()?this.getOrdinate(r,2):ht.NaN}},{key:"size",value:function(){}},{key:"getOrdinate",value:function(r,t){}},{key:"getCoordinate",value:function(){}},{key:"getCoordinateCopy",value:function(r){}},{key:"createCoordinate",value:function(){}},{key:"getDimension",value:function(){}},{key:"hasM",value:function(){return this.getMeasures()>0}},{key:"getX",value:function(r){}},{key:"hasZ",value:function(){return this.getDimension()-this.getMeasures()>2}},{key:"getMeasures",value:function(){return 0}},{key:"expandEnvelope",value:function(r){}},{key:"copy",value:function(){}},{key:"getY",value:function(r){}},{key:"toCoordinateArray",value:function(){}},{key:"interfaces_",get:function(){return[un]}}]);Gt.X=0,Gt.Y=1,Gt.Z=2,Gt.M=3;var yt=function(){function r(){x(this,r)}return c(r,null,[{key:"index",value:function(t,e,n){return Nr.orientationIndex(t,e,n)}},{key:"isCCW",value:function(){if(arguments[0]instanceof Array){var t=arguments[0],e=t.length-1;if(e<3)throw new $("Ring has fewer than 4 points, so orientation cannot be determined");for(var n=t[0],s=0,o=1;o<=e;o++){var h=t[o];h.y>n.y&&(n=h,s=o)}var g=s;do{(g-=1)<0&&(g=e)}while(t[g].equals2D(n)&&g!==s);var y=s;do{y=(y+1)%e}while(t[y].equals2D(n)&&y!==s);var k=t[g],R=t[y];if(k.equals2D(n)||R.equals2D(n)||k.equals2D(R))return!1;var P=r.index(k,n,R);return 0===P?k.x>R.x:P>0}if(Ct(arguments[0],Gt)){var z=arguments[0],K=z.size()-1;if(K<3)throw new $("Ring has fewer than 4 points, so orientation cannot be determined");for(var ot=z.getCoordinate(0),gt=0,Ht=1;Ht<=K;Ht++){var Qt=z.getCoordinate(Ht);Qt.y>ot.y&&(ot=Qt,gt=Ht)}var ne=null,ke=gt;do{(ke-=1)<0&&(ke=K),ne=z.getCoordinate(ke)}while(ne.equals2D(ot)&&ke!==gt);var me=null,pn=gt;do{me=z.getCoordinate(pn=(pn+1)%K)}while(me.equals2D(ot)&&pn!==gt);if(ne.equals2D(ot)||me.equals2D(ot)||ne.equals2D(me))return!1;var vr=r.index(ne,ot,me);return 0===vr?ne.x>me.x:vr>0}}}])}();yt.CLOCKWISE=-1,yt.RIGHT=yt.CLOCKWISE,yt.COUNTERCLOCKWISE=1,yt.LEFT=yt.COUNTERCLOCKWISE,yt.COLLINEAR=0,yt.STRAIGHT=yt.COLLINEAR;var Ki=c(function r(){x(this,r),r.constructor_.apply(this,arguments)},[{key:"getCoordinate",value:function(){return this._minCoord}},{key:"getRightmostSide",value:function(r,t){var e=this.getRightmostSideOfSegment(r,t);return e<0&&(e=this.getRightmostSideOfSegment(r,t-1)),e<0&&(this._minCoord=null,this.checkForRightmostCoordinate(r)),e}},{key:"findRightmostEdgeAtVertex",value:function(){var r=this._minDe.getEdge().getCoordinates();bt.isTrue(this._minIndex>0&&this._minIndex<r.length,"rightmost point expected to be interior vertex of edge");var t=r[this._minIndex-1],e=r[this._minIndex+1],n=yt.index(this._minCoord,e,t),s=!1;(t.y<this._minCoord.y&&e.y<this._minCoord.y&&n===yt.COUNTERCLOCKWISE||t.y>this._minCoord.y&&e.y>this._minCoord.y&&n===yt.CLOCKWISE)&&(s=!0),s&&(this._minIndex=this._minIndex-1)}},{key:"getRightmostSideOfSegment",value:function(r,t){var e=r.getEdge().getCoordinates();if(t<0||t+1>=e.length||e[t].y===e[t+1].y)return-1;var n=H.LEFT;return e[t].y<e[t+1].y&&(n=H.RIGHT),n}},{key:"getEdge",value:function(){return this._orientedDe}},{key:"checkForRightmostCoordinate",value:function(r){for(var t=r.getEdge().getCoordinates(),e=0;e<t.length-1;e++)(null===this._minCoord||t[e].x>this._minCoord.x)&&(this._minDe=r,this._minIndex=e,this._minCoord=t[e])}},{key:"findRightmostEdgeAtNode",value:function(){var r=this._minDe.getNode().getEdges();this._minDe=r.getRightmostEdge(),this._minDe.isForward()||(this._minDe=this._minDe.getSym(),this._minIndex=this._minDe.getEdge().getCoordinates().length-1)}},{key:"findEdge",value:function(r){for(var t=r.iterator();t.hasNext();){var e=t.next();e.isForward()&&this.checkForRightmostCoordinate(e)}bt.isTrue(0!==this._minIndex||this._minCoord.equals(this._minDe.getCoordinate()),"inconsistency in rightmost processing"),0===this._minIndex?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this._orientedDe=this._minDe,this.getRightmostSide(this._minDe,this._minIndex)===H.LEFT&&(this._orientedDe=this._minDe.getSym())}}],[{key:"constructor_",value:function(){this._minIndex=-1,this._minCoord=null,this._minDe=null,this._orientedDe=null}}]),B=function(r){function t(e,n){var s;return x(this,t),(s=G(this,t,[n?e+" [ "+n+" ]":e])).pt=n?new D(n):void 0,s.name=Object.keys({TopologyException:t})[0],s}return at(t,r),c(t,[{key:"getCoordinate",value:function(){return this.pt}}])}(Te),kt=c(function r(){x(this,r),this.array=[]},[{key:"addLast",value:function(r){this.array.push(r)}},{key:"removeFirst",value:function(){return this.array.shift()}},{key:"isEmpty",value:function(){return 0===this.array.length}}]),mt=function(r){function t(e){var n;return x(this,t),(n=G(this,t)).array=[],e instanceof $e&&n.addAll(e),n}return at(t,r),c(t,[{key:"interfaces_",get:function(){return[vn,$e]}},{key:"ensureCapacity",value:function(){}},{key:"add",value:function(e){return 1===arguments.length?this.array.push(e):this.array.splice(arguments[0],0,arguments[1]),!0}},{key:"clear",value:function(){this.array=[]}},{key:"addAll",value:function(e){var n,s=j(e);try{for(s.s();!(n=s.n()).done;)this.array.push(n.value)}catch(h){s.e(h)}finally{s.f()}}},{key:"set",value:function(e,n){var s=this.array[e];return this.array[e]=n,s}},{key:"iterator",value:function(){return new fr(this)}},{key:"get",value:function(e){if(e<0||e>=this.size())throw new xr;return this.array[e]}},{key:"isEmpty",value:function(){return 0===this.array.length}},{key:"sort",value:function(e){e?this.array.sort(function(n,s){return e.compare(n,s)}):this.array.sort()}},{key:"size",value:function(){return this.array.length}},{key:"toArray",value:function(){return this.array.slice()}},{key:"remove",value:function(e){for(var n=0,s=this.array.length;n<s;n++)if(this.array[n]===e)return!!this.array.splice(n,1);return!1}},{key:Symbol.iterator,value:function(){return this.array.values()}}])}(vn),fr=c(function r(t){x(this,r),this.arrayList=t,this.position=0},[{key:"next",value:function(){if(this.position===this.arrayList.size())throw new cr;return this.arrayList.get(this.position++)}},{key:"hasNext",value:function(){return this.position<this.arrayList.size()}},{key:"set",value:function(r){return this.arrayList.set(this.position-1,r)}},{key:"remove",value:function(){this.arrayList.remove(this.arrayList.get(this.position))}}]),Oi=c(function r(){x(this,r),r.constructor_.apply(this,arguments)},[{key:"clearVisitedEdges",value:function(){for(var r=this._dirEdgeList.iterator();r.hasNext();)r.next().setVisited(!1)}},{key:"getRightmostCoordinate",value:function(){return this._rightMostCoord}},{key:"computeNodeDepth",value:function(r){for(var t=null,e=r.getEdges().iterator();e.hasNext();){var n=e.next();if(n.isVisited()||n.getSym().isVisited()){t=n;break}}if(null===t)throw new B("unable to find edge to compute depths at "+r.getCoordinate());r.getEdges().computeDepths(t);for(var s=r.getEdges().iterator();s.hasNext();){var o=s.next();o.setVisited(!0),this.copySymDepths(o)}}},{key:"computeDepth",value:function(r){this.clearVisitedEdges();var t=this._finder.getEdge();t.getNode(),t.getLabel(),t.setEdgeDepths(H.RIGHT,r),this.copySymDepths(t),this.computeDepths(t)}},{key:"create",value:function(r){this.addReachable(r),this._finder.findEdge(this._dirEdgeList),this._rightMostCoord=this._finder.getCoordinate()}},{key:"findResultEdges",value:function(){for(var r=this._dirEdgeList.iterator();r.hasNext();){var t=r.next();t.getDepth(H.RIGHT)>=1&&t.getDepth(H.LEFT)<=0&&!t.isInteriorAreaEdge()&&t.setInResult(!0)}}},{key:"computeDepths",value:function(r){var t=new kr,e=new kt,n=r.getNode();for(e.addLast(n),t.add(n),r.setVisited(!0);!e.isEmpty();){var s=e.removeFirst();t.add(s),this.computeNodeDepth(s);for(var o=s.getEdges().iterator();o.hasNext();){var h=o.next().getSym();if(!h.isVisited()){var g=h.getNode();t.contains(g)||(e.addLast(g),t.add(g))}}}}},{key:"compareTo",value:function(r){return this._rightMostCoord.x<r._rightMostCoord.x?-1:this._rightMostCoord.x>r._rightMostCoord.x?1:0}},{key:"getEnvelope",value:function(){if(null===this._env){for(var r=new te,t=this._dirEdgeList.iterator();t.hasNext();)for(var e=t.next().getEdge().getCoordinates(),n=0;n<e.length-1;n++)r.expandToInclude(e[n]);this._env=r}return this._env}},{key:"addReachable",value:function(r){var t=new Ri;for(t.add(r);!t.empty();){var e=t.pop();this.add(e,t)}}},{key:"copySymDepths",value:function(r){var t=r.getSym();t.setDepth(H.LEFT,r.getDepth(H.RIGHT)),t.setDepth(H.RIGHT,r.getDepth(H.LEFT))}},{key:"add",value:function(r,t){r.setVisited(!0),this._nodes.add(r);for(var e=r.getEdges().iterator();e.hasNext();){var n=e.next();this._dirEdgeList.add(n);var s=n.getSym().getNode();s.isVisited()||t.push(s)}}},{key:"getNodes",value:function(){return this._nodes}},{key:"getDirectedEdges",value:function(){return this._dirEdgeList}},{key:"interfaces_",get:function(){return[se]}}],[{key:"constructor_",value:function(){this._finder=null,this._dirEdgeList=new mt,this._nodes=new mt,this._rightMostCoord=null,this._env=null,this._finder=new Ki}}]),Vn=c(function r(){x(this,r)},null,[{key:"intersection",value:function(r,t,e,n){var s=r.x<t.x?r.x:t.x,o=r.y<t.y?r.y:t.y,h=r.x>t.x?r.x:t.x,g=r.y>t.y?r.y:t.y,y=e.x<n.x?e.x:n.x,k=e.y<n.y?e.y:n.y,R=e.x>n.x?e.x:n.x,P=e.y>n.y?e.y:n.y,z=((s>y?s:y)+(h<R?h:R))/2,K=((o>k?o:k)+(g<P?g:P))/2,ot=r.x-z,gt=r.y-K,Ht=t.x-z,Qt=t.y-K,ne=e.x-z,ke=e.y-K,me=n.x-z,pn=n.y-K,vr=gt-Qt,us=Ht-ot,ri=ot*Qt-Ht*gt,ki=ke-pn,ii=me-ne,si=ne*pn-me*ke,Qr=vr*ii-ki*us,_r=(us*si-ii*ri)/Qr,Gn=(ki*ri-vr*si)/Qr;return ht.isNaN(_r)||ht.isInfinite(_r)||ht.isNaN(Gn)||ht.isInfinite(Gn)?null:new D(_r+z,Gn+K)}}]),Be=c(function r(){x(this,r)},null,[{key:"arraycopy",value:function(r,t,e,n,s){for(var o=0,h=t;h<t+s;h++)e[n+o]=r[h],o++}},{key:"getProperty",value:function(r){return{"line.separator":"\n"}[r]}}]),wn=function(){function r(){x(this,r)}return c(r,null,[{key:"log10",value:function(t){var e=Math.log(t);return ht.isInfinite(e)||ht.isNaN(e)?e:e/r.LOG_10}},{key:"min",value:function(t,e,n,s){var o=t;return e<o&&(o=e),n<o&&(o=n),s<o&&(o=s),o}},{key:"clamp",value:function(){if("number"==typeof arguments[2]&&"number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1],n=arguments[2];return t<e?e:t>n?n:t}if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var s=arguments[0],o=arguments[1],h=arguments[2];return s<o?o:s>h?h:s}}},{key:"wrap",value:function(t,e){return t<0?e- -t%e:t%e}},{key:"max",value:function(){if(3===arguments.length){var t=arguments[1],e=arguments[2],n=arguments[0];return t>n&&(n=t),e>n&&(n=e),n}if(4===arguments.length){var s=arguments[1],o=arguments[2],h=arguments[3],g=arguments[0];return s>g&&(g=s),o>g&&(g=o),h>g&&(g=h),g}}},{key:"average",value:function(t,e){return(t+e)/2}}])}();wn.LOG_10=Math.log(10);var tn=function(){function r(){x(this,r)}return c(r,null,[{key:"segmentToSegment",value:function(t,e,n,s){if(t.equals(e))return r.pointToSegment(t,n,s);if(n.equals(s))return r.pointToSegment(s,t,e);var o=!1;if(te.intersects(t,e,n,s)){var h=(e.x-t.x)*(s.y-n.y)-(e.y-t.y)*(s.x-n.x);if(0===h)o=!0;else{var y=((t.y-n.y)*(e.x-t.x)-(t.x-n.x)*(e.y-t.y))/h,k=((t.y-n.y)*(s.x-n.x)-(t.x-n.x)*(s.y-n.y))/h;(k<0||k>1||y<0||y>1)&&(o=!0)}}else o=!0;return o?wn.min(r.pointToSegment(t,n,s),r.pointToSegment(e,n,s),r.pointToSegment(n,t,e),r.pointToSegment(s,t,e)):0}},{key:"pointToSegment",value:function(t,e,n){if(e.x===n.x&&e.y===n.y)return t.distance(e);var s=(n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y),o=((t.x-e.x)*(n.x-e.x)+(t.y-e.y)*(n.y-e.y))/s;return o<=0?t.distance(e):o>=1?t.distance(n):Math.abs(((e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y))/s)*Math.sqrt(s)}},{key:"pointToLinePerpendicular",value:function(t,e,n){var s=(n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y);return Math.abs(((e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y))/s)*Math.sqrt(s)}},{key:"pointToSegmentString",value:function(t,e){if(0===e.length)throw new $("Line array must contain at least one vertex");for(var n=t.distance(e[0]),s=0;s<e.length-1;s++){var o=r.pointToSegment(t,e[s],e[s+1]);o<n&&(n=o)}return n}}])}(),ci=c(function r(){x(this,r)},[{key:"create",value:function(){if(1===arguments.length)arguments[0]instanceof Array||Ct(arguments[0],Gt);else if(2!==arguments.length&&3===arguments.length)return this.create(arguments[0],arguments[1])}}]),Cn=c(function r(){x(this,r)},[{key:"filter",value:function(r){}}]),Ir=c(function r(){x(this,r)},null,[{key:"ofLine",value:function(r){var t=r.size();if(t<=1)return 0;var e=0,n=new D;r.getCoordinate(0,n);for(var s=n.x,o=n.y,h=1;h<t;h++){r.getCoordinate(h,n);var g=n.x,y=n.y,k=g-s,R=y-o;e+=Math.sqrt(k*k+R*R),s=g,o=y}return e}}]),Sr=c(function r(){x(this,r)}),ae=function(){function r(){x(this,r)}return c(r,null,[{key:"copyCoord",value:function(t,e,n,s){for(var o=Math.min(t.getDimension(),n.getDimension()),h=0;h<o;h++)n.setOrdinate(s,h,t.getOrdinate(e,h))}},{key:"isRing",value:function(t){var e=t.size();return 0===e||!(e<=3)&&t.getOrdinate(0,Gt.X)===t.getOrdinate(e-1,Gt.X)&&t.getOrdinate(0,Gt.Y)===t.getOrdinate(e-1,Gt.Y)}},{key:"scroll",value:function(){if(2===arguments.length){if(Ct(arguments[0],Gt)&&Number.isInteger(arguments[1])){var t=arguments[0];r.scroll(t,arguments[1],r.isRing(t))}else if(Ct(arguments[0],Gt)&&arguments[1]instanceof D){var n=arguments[0],o=r.indexOf(arguments[1],n);if(o<=0)return null;r.scroll(n,o)}}else if(3===arguments.length){var h=arguments[0],g=arguments[1],y=arguments[2];if(g<=0)return null;for(var k=h.copy(),R=y?h.size()-1:h.size(),P=0;P<R;P++)for(var z=0;z<h.getDimension();z++)h.setOrdinate(P,z,k.getOrdinate((g+P)%R,z));if(y)for(var K=0;K<h.getDimension();K++)h.setOrdinate(R,K,h.getOrdinate(0,K))}}},{key:"isEqual",value:function(t,e){var n=t.size();if(n!==e.size())return!1;for(var s=Math.min(t.getDimension(),e.getDimension()),o=0;o<n;o++)for(var h=0;h<s;h++){var g=t.getOrdinate(o,h),y=e.getOrdinate(o,h);if(!(t.getOrdinate(o,h)===e.getOrdinate(o,h)||ht.isNaN(g)&&ht.isNaN(y)))return!1}return!0}},{key:"minCoordinateIndex",value:function(){if(1===arguments.length){var t=arguments[0];return r.minCoordinateIndex(t,0,t.size()-1)}if(3===arguments.length){for(var e=arguments[0],n=arguments[2],s=-1,o=null,h=arguments[1];h<=n;h++){var g=e.getCoordinate(h);(null===o||o.compareTo(g)>0)&&(o=g,s=h)}return s}}},{key:"extend",value:function(t,e,n){var s=t.create(n,e.getDimension()),o=e.size();if(r.copy(e,0,s,0,o),o>0)for(var h=o;h<n;h++)r.copy(e,o-1,s,h,1);return s}},{key:"reverse",value:function(t){for(var e=t.size()-1,n=Math.trunc(e/2),s=0;s<=n;s++)r.swap(t,s,e-s)}},{key:"swap",value:function(t,e,n){if(e===n)return null;for(var s=0;s<t.getDimension();s++){var o=t.getOrdinate(e,s);t.setOrdinate(e,s,t.getOrdinate(n,s)),t.setOrdinate(n,s,o)}}},{key:"copy",value:function(t,e,n,s,o){for(var h=0;h<o;h++)r.copyCoord(t,e+h,n,s+h)}},{key:"ensureValidRing",value:function(t,e){var n=e.size();return 0===n?e:n<=3?r.createClosedRing(t,e,4):e.getOrdinate(0,Gt.X)===e.getOrdinate(n-1,Gt.X)&&e.getOrdinate(0,Gt.Y)===e.getOrdinate(n-1,Gt.Y)?e:r.createClosedRing(t,e,n+1)}},{key:"indexOf",value:function(t,e){for(var n=0;n<e.size();n++)if(t.x===e.getOrdinate(n,Gt.X)&&t.y===e.getOrdinate(n,Gt.Y))return n;return-1}},{key:"createClosedRing",value:function(t,e,n){var s=t.create(n,e.getDimension()),o=e.size();r.copy(e,0,s,0,o);for(var h=o;h<n;h++)r.copy(e,0,s,h,1);return s}},{key:"minCoordinate",value:function(t){for(var e=null,n=0;n<t.size();n++){var s=t.getCoordinate(n);(null===e||e.compareTo(s)>0)&&(e=s)}return e}}])}(),W=function(){function r(){x(this,r)}return c(r,null,[{key:"toDimensionSymbol",value:function(t){switch(t){case r.FALSE:return r.SYM_FALSE;case r.TRUE:return r.SYM_TRUE;case r.DONTCARE:return r.SYM_DONTCARE;case r.P:return r.SYM_P;case r.L:return r.SYM_L;case r.A:return r.SYM_A}throw new $("Unknown dimension value: "+t)}},{key:"toDimensionValue",value:function(t){switch(cn.toUpperCase(t)){case r.SYM_FALSE:return r.FALSE;case r.SYM_TRUE:return r.TRUE;case r.SYM_DONTCARE:return r.DONTCARE;case r.SYM_P:return r.P;case r.SYM_L:return r.L;case r.SYM_A:return r.A}throw new $("Unknown dimension symbol: "+t)}}])}();W.P=0,W.L=1,W.A=2,W.FALSE=-1,W.TRUE=-2,W.DONTCARE=-3,W.SYM_FALSE="F",W.SYM_TRUE="T",W.SYM_DONTCARE="*",W.SYM_P="0",W.SYM_L="1",W.SYM_A="2";var Rn=c(function r(){x(this,r)},[{key:"filter",value:function(r){}}]),Qe=c(function r(){x(this,r)},[{key:"filter",value:function(r,t){}},{key:"isDone",value:function(){}},{key:"isGeometryChanged",value:function(){}}]),Zn=function(r){function t(){var e;return x(this,t),e=G(this,t),t.constructor_.apply(e,arguments),e}return at(t,r),c(t,[{key:"computeEnvelopeInternal",value:function(){return this.isEmpty()?new te:this._points.expandEnvelope(new te)}},{key:"isRing",value:function(){return this.isClosed()&&this.isSimple()}},{key:"getCoordinates",value:function(){return this._points.toCoordinateArray()}},{key:"copyInternal",value:function(){return new t(this._points.copy(),this._factory)}},{key:"equalsExact",value:function(){if(2===arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof lt){var e=arguments[0],n=arguments[1];if(!this.isEquivalentClass(e))return!1;var s=e;if(this._points.size()!==s._points.size())return!1;for(var o=0;o<this._points.size();o++)if(!this.equal(this._points.getCoordinate(o),s._points.getCoordinate(o),n))return!1;return!0}return pt(t,"equalsExact",this,1).apply(this,arguments)}},{key:"normalize",value:function(){for(var e=0;e<Math.trunc(this._points.size()/2);e++){var n=this._points.size()-1-e;if(!this._points.getCoordinate(e).equals(this._points.getCoordinate(n))){if(this._points.getCoordinate(e).compareTo(this._points.getCoordinate(n))>0){var s=this._points.copy();ae.reverse(s),this._points=s}return null}}}},{key:"getCoordinate",value:function(){return this.isEmpty()?null:this._points.getCoordinate(0)}},{key:"getBoundaryDimension",value:function(){return this.isClosed()?W.FALSE:0}},{key:"isClosed",value:function(){return!this.isEmpty()&&this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))}},{key:"reverseInternal",value:function(){var e=this._points.copy();return ae.reverse(e),this.getFactory().createLineString(e)}},{key:"getEndPoint",value:function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)}},{key:"getTypeCode",value:function(){return lt.TYPECODE_LINESTRING}},{key:"getDimension",value:function(){return 1}},{key:"getLength",value:function(){return Ir.ofLine(this._points)}},{key:"getNumPoints",value:function(){return this._points.size()}},{key:"compareToSameClass",value:function(){if(1===arguments.length){for(var e=arguments[0],n=0,s=0;n<this._points.size()&&s<e._points.size();){var o=this._points.getCoordinate(n).compareTo(e._points.getCoordinate(s));if(0!==o)return o;n++,s++}return n<this._points.size()?1:s<e._points.size()?-1:0}if(2===arguments.length)return arguments[1].compare(this._points,arguments[0]._points)}},{key:"apply",value:function(){if(Ct(arguments[0],Cn))for(var e=arguments[0],n=0;n<this._points.size();n++)e.filter(this._points.getCoordinate(n));else if(Ct(arguments[0],Qe)){var s=arguments[0];if(0===this._points.size())return null;for(var o=0;o<this._points.size()&&(s.filter(this._points,o),!s.isDone());o++);s.isGeometryChanged()&&this.geometryChanged()}else(Ct(arguments[0],Rn)||Ct(arguments[0],Y))&&arguments[0].filter(this)}},{key:"getBoundary",value:function(){throw new ln}},{key:"isEquivalentClass",value:function(e){return e instanceof t}},{key:"getCoordinateN",value:function(e){return this._points.getCoordinate(e)}},{key:"getGeometryType",value:function(){return lt.TYPENAME_LINESTRING}},{key:"getCoordinateSequence",value:function(){return this._points}},{key:"isEmpty",value:function(){return 0===this._points.size()}},{key:"init",value:function(e){if(null===e&&(e=this.getFactory().getCoordinateSequenceFactory().create([])),1===e.size())throw new $("Invalid number of points in LineString (found "+e.size()+" - must be 0 or >= 2)");this._points=e}},{key:"isCoordinate",value:function(e){for(var n=0;n<this._points.size();n++)if(this._points.getCoordinate(n).equals(e))return!0;return!1}},{key:"getStartPoint",value:function(){return this.isEmpty()?null:this.getPointN(0)}},{key:"getPointN",value:function(e){return this.getFactory().createPoint(this._points.getCoordinate(e))}},{key:"interfaces_",get:function(){return[Sr]}}],[{key:"constructor_",value:function(){if(this._points=null,0!==arguments.length&&2===arguments.length){var e=arguments[0];lt.constructor_.call(this,arguments[1]),this.init(e)}}}])}(lt),Wn=c(function r(){x(this,r)}),jr=function(r){function t(){var e;return x(this,t),e=G(this,t),t.constructor_.apply(e,arguments),e}return at(t,r),c(t,[{key:"computeEnvelopeInternal",value:function(){if(this.isEmpty())return new te;var e=new te;return e.expandToInclude(this._coordinates.getX(0),this._coordinates.getY(0)),e}},{key:"getCoordinates",value:function(){return this.isEmpty()?[]:[this.getCoordinate()]}},{key:"copyInternal",value:function(){return new t(this._coordinates.copy(),this._factory)}},{key:"equalsExact",value:function(){if(2===arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof lt){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&(!(!this.isEmpty()||!e.isEmpty())||this.isEmpty()===e.isEmpty()&&this.equal(e.getCoordinate(),this.getCoordinate(),n))}return pt(t,"equalsExact",this,1).apply(this,arguments)}},{key:"normalize",value:function(){}},{key:"getCoordinate",value:function(){return 0!==this._coordinates.size()?this._coordinates.getCoordinate(0):null}},{key:"getBoundaryDimension",value:function(){return W.FALSE}},{key:"reverseInternal",value:function(){return this.getFactory().createPoint(this._coordinates.copy())}},{key:"getTypeCode",value:function(){return lt.TYPECODE_POINT}},{key:"getDimension",value:function(){return 0}},{key:"getNumPoints",value:function(){return this.isEmpty()?0:1}},{key:"getX",value:function(){if(null===this.getCoordinate())throw new IllegalStateException("getX called on empty Point");return this.getCoordinate().x}},{key:"compareToSameClass",value:function(){if(1===arguments.length){var e=arguments[0];return this.getCoordinate().compareTo(e.getCoordinate())}if(2===arguments.length)return arguments[1].compare(this._coordinates,arguments[0]._coordinates)}},{key:"apply",value:function(){if(Ct(arguments[0],Cn)){var e=arguments[0];if(this.isEmpty())return null;e.filter(this.getCoordinate())}else if(Ct(arguments[0],Qe)){var n=arguments[0];if(this.isEmpty())return null;n.filter(this._coordinates,0),n.isGeometryChanged()&&this.geometryChanged()}else(Ct(arguments[0],Rn)||Ct(arguments[0],Y))&&arguments[0].filter(this)}},{key:"getBoundary",value:function(){return this.getFactory().createGeometryCollection()}},{key:"getGeometryType",value:function(){return lt.TYPENAME_POINT}},{key:"getCoordinateSequence",value:function(){return this._coordinates}},{key:"getY",value:function(){if(null===this.getCoordinate())throw new IllegalStateException("getY called on empty Point");return this.getCoordinate().y}},{key:"isEmpty",value:function(){return 0===this._coordinates.size()}},{key:"init",value:function(e){null===e&&(e=this.getFactory().getCoordinateSequenceFactory().create([])),bt.isTrue(e.size()<=1),this._coordinates=e}},{key:"isSimple",value:function(){return!0}},{key:"interfaces_",get:function(){return[Wn]}}],[{key:"constructor_",value:function(){this._coordinates=null;var e=arguments[0];lt.constructor_.call(this,arguments[1]),this.init(e)}}])}(lt),Tr=function(){function r(){x(this,r)}return c(r,null,[{key:"ofRing",value:function(){return arguments[0]instanceof Array||Ct(arguments[0],Gt)?Math.abs(r.ofRingSigned(arguments[0])):void 0}},{key:"ofRingSigned",value:function(){if(arguments[0]instanceof Array){var t=arguments[0];if(t.length<3)return 0;for(var e=0,n=t[0].x,s=1;s<t.length-1;s++)e+=(t[s].x-n)*(t[s-1].y-t[s+1].y);return e/2}if(Ct(arguments[0],Gt)){var g=arguments[0],y=g.size();if(y<3)return 0;var k=new D,R=new D,P=new D;g.getCoordinate(0,R),g.getCoordinate(1,P);var z=R.x;P.x-=z;for(var K=0,ot=1;ot<y-1;ot++)k.y=R.y,R.x=P.x,R.y=P.y,g.getCoordinate(ot+1,P),P.x-=z,K+=R.x*(k.y-P.y);return K/2}}}])}(),On=c(function r(){x(this,r)},null,[{key:"sort",value:function(){var r=arguments,t=arguments[0];if(1===arguments.length)t.sort(function(z,K){return z.compareTo(K)});else if(2===arguments.length)t.sort(function(z,K){return r[1].compare(z,K)});else if(3===arguments.length){var e=t.slice(arguments[1],arguments[2]);e.sort();var n=t.slice(0,arguments[1]).concat(e,t.slice(arguments[2],t.length));t.splice(0,t.length);var s,o=j(n);try{for(o.s();!(s=o.n()).done;)t.push(s.value)}catch(z){o.e(z)}finally{o.f()}}else if(4===arguments.length){var g=t.slice(arguments[1],arguments[2]);g.sort(function(z,K){return r[3].compare(z,K)});var y=t.slice(0,arguments[1]).concat(g,t.slice(arguments[2],t.length));t.splice(0,t.length);var k,R=j(y);try{for(R.s();!(k=R.n()).done;)t.push(k.value)}catch(z){R.e(z)}finally{R.f()}}}},{key:"asList",value:function(r){var t,e=new mt,n=j(r);try{for(n.s();!(t=n.n()).done;)e.add(t.value)}catch(o){n.e(o)}finally{n.f()}return e}},{key:"copyOf",value:function(r,t){return r.slice(0,t)}}]),wr=c(function r(){x(this,r)}),$n=function(r){function t(){var e;return x(this,t),e=G(this,t),t.constructor_.apply(e,arguments),e}return at(t,r),c(t,[{key:"computeEnvelopeInternal",value:function(){return this._shell.getEnvelopeInternal()}},{key:"getCoordinates",value:function(){if(this.isEmpty())return[];for(var e=new Array(this.getNumPoints()).fill(null),n=-1,s=this._shell.getCoordinates(),o=0;o<s.length;o++)e[++n]=s[o];for(var h=0;h<this._holes.length;h++)for(var g=this._holes[h].getCoordinates(),y=0;y<g.length;y++)e[++n]=g[y];return e}},{key:"getArea",value:function(){var e=0;e+=Tr.ofRing(this._shell.getCoordinateSequence());for(var n=0;n<this._holes.length;n++)e-=Tr.ofRing(this._holes[n].getCoordinateSequence());return e}},{key:"copyInternal",value:function(){for(var e=this._shell.copy(),n=new Array(this._holes.length).fill(null),s=0;s<this._holes.length;s++)n[s]=this._holes[s].copy();return new t(e,n,this._factory)}},{key:"isRectangle",value:function(){if(0!==this.getNumInteriorRing()||null===this._shell||5!==this._shell.getNumPoints())return!1;for(var e=this._shell.getCoordinateSequence(),n=this.getEnvelopeInternal(),s=0;s<5;s++){var o=e.getX(s);if(o!==n.getMinX()&&o!==n.getMaxX())return!1;var h=e.getY(s);if(h!==n.getMinY()&&h!==n.getMaxY())return!1}for(var g=e.getX(0),y=e.getY(0),k=1;k<=4;k++){var R=e.getX(k),P=e.getY(k);if(R!==g==(P!==y))return!1;g=R,y=P}return!0}},{key:"equalsExact",value:function(){if(2===arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof lt){var e=arguments[0],n=arguments[1];if(!this.isEquivalentClass(e))return!1;var s=e;if(!this._shell.equalsExact(s._shell,n)||this._holes.length!==s._holes.length)return!1;for(var g=0;g<this._holes.length;g++)if(!this._holes[g].equalsExact(s._holes[g],n))return!1;return!0}return pt(t,"equalsExact",this,1).apply(this,arguments)}},{key:"normalize",value:function(){if(0===arguments.length){this._shell=this.normalized(this._shell,!0);for(var e=0;e<this._holes.length;e++)this._holes[e]=this.normalized(this._holes[e],!1);On.sort(this._holes)}else if(2===arguments.length){var n=arguments[0],s=arguments[1];if(n.isEmpty())return null;var o=n.getCoordinateSequence(),h=ae.minCoordinateIndex(o,0,o.size()-2);ae.scroll(o,h,!0),yt.isCCW(o)===s&&ae.reverse(o)}}},{key:"getCoordinate",value:function(){return this._shell.getCoordinate()}},{key:"getNumInteriorRing",value:function(){return this._holes.length}},{key:"getBoundaryDimension",value:function(){return 1}},{key:"reverseInternal",value:function(){for(var e=this.getExteriorRing().reverse(),n=new Array(this.getNumInteriorRing()).fill(null),s=0;s<n.length;s++)n[s]=this.getInteriorRingN(s).reverse();return this.getFactory().createPolygon(e,n)}},{key:"getTypeCode",value:function(){return lt.TYPECODE_POLYGON}},{key:"getDimension",value:function(){return 2}},{key:"getLength",value:function(){var e=0;e+=this._shell.getLength();for(var n=0;n<this._holes.length;n++)e+=this._holes[n].getLength();return e}},{key:"getNumPoints",value:function(){for(var e=this._shell.getNumPoints(),n=0;n<this._holes.length;n++)e+=this._holes[n].getNumPoints();return e}},{key:"convexHull",value:function(){return this.getExteriorRing().convexHull()}},{key:"normalized",value:function(e,n){var s=e.copy();return this.normalize(s,n),s}},{key:"compareToSameClass",value:function(){if(1===arguments.length)return this._shell.compareToSameClass(arguments[0]._shell);if(2===arguments.length){var o=arguments[1],h=arguments[0],k=this._shell.compareToSameClass(h._shell,o);if(0!==k)return k;for(var R=this.getNumInteriorRing(),P=h.getNumInteriorRing(),z=0;z<R&&z<P;){var K=this.getInteriorRingN(z),ot=h.getInteriorRingN(z),gt=K.compareToSameClass(ot,o);if(0!==gt)return gt;z++}return z<R?1:z<P?-1:0}}},{key:"apply",value:function(){if(Ct(arguments[0],Cn)){var e=arguments[0];this._shell.apply(e);for(var n=0;n<this._holes.length;n++)this._holes[n].apply(e)}else if(Ct(arguments[0],Qe)){var s=arguments[0];if(this._shell.apply(s),!s.isDone())for(var o=0;o<this._holes.length&&(this._holes[o].apply(s),!s.isDone());o++);s.isGeometryChanged()&&this.geometryChanged()}else if(Ct(arguments[0],Rn))arguments[0].filter(this);else if(Ct(arguments[0],Y)){var h=arguments[0];h.filter(this),this._shell.apply(h);for(var g=0;g<this._holes.length;g++)this._holes[g].apply(h)}}},{key:"getBoundary",value:function(){if(this.isEmpty())return this.getFactory().createMultiLineString();var e=new Array(this._holes.length+1).fill(null);e[0]=this._shell;for(var n=0;n<this._holes.length;n++)e[n+1]=this._holes[n];return e.length<=1?this.getFactory().createLinearRing(e[0].getCoordinateSequence()):this.getFactory().createMultiLineString(e)}},{key:"getGeometryType",value:function(){return lt.TYPENAME_POLYGON}},{key:"getExteriorRing",value:function(){return this._shell}},{key:"isEmpty",value:function(){return this._shell.isEmpty()}},{key:"getInteriorRingN",value:function(e){return this._holes[e]}},{key:"interfaces_",get:function(){return[wr]}}],[{key:"constructor_",value:function(){this._shell=null,this._holes=null;var e=arguments[0],n=arguments[1];if(lt.constructor_.call(this,arguments[2]),null===e&&(e=this.getFactory().createLinearRing()),null===n&&(n=[]),lt.hasNullElements(n))throw new $("holes must not contain null elements");if(e.isEmpty()&&lt.hasNonEmptyElements(n))throw new $("shell is empty but holes are not");this._shell=e,this._holes=n}}])}(lt),An=function(r){function t(){return x(this,t),G(this,t,arguments)}return at(t,r),c(t)}(Wr),Kr=function(r){function t(e){var n;return x(this,t),(n=G(this,t)).array=[],e instanceof $e&&n.addAll(e),n}return at(t,r),c(t,[{key:"contains",value:function(e){var n,s=j(this.array);try{for(s.s();!(n=s.n()).done;)if(0===n.value.compareTo(e))return!0}catch(o){s.e(o)}finally{s.f()}return!1}},{key:"add",value:function(e){if(this.contains(e))return!1;for(var n=0,s=this.array.length;n<s;n++)if(1===this.array[n].compareTo(e))return!!this.array.splice(n,0,e);return this.array.push(e),!0}},{key:"addAll",value:function(e){var n,s=j(e);try{for(s.s();!(n=s.n()).done;)this.add(n.value)}catch(h){s.e(h)}finally{s.f()}return!0}},{key:"remove",value:function(){throw new ln}},{key:"size",value:function(){return this.array.length}},{key:"isEmpty",value:function(){return 0===this.array.length}},{key:"toArray",value:function(){return this.array.slice()}},{key:"iterator",value:function(){return new hi(this.array)}}])}(An),hi=c(function r(t){x(this,r),this.array=t,this.position=0},[{key:"next",value:function(){if(this.position===this.array.length)throw new cr;return this.array[this.position++]}},{key:"hasNext",value:function(){return this.position<this.array.length}},{key:"remove",value:function(){throw new ln}}]),Ae=function(r){function t(){var e;return x(this,t),e=G(this,t),t.constructor_.apply(e,arguments),e}return at(t,r),c(t,[{key:"computeEnvelopeInternal",value:function(){for(var e=new te,n=0;n<this._geometries.length;n++)e.expandToInclude(this._geometries[n].getEnvelopeInternal());return e}},{key:"getGeometryN",value:function(e){return this._geometries[e]}},{key:"getCoordinates",value:function(){for(var e=new Array(this.getNumPoints()).fill(null),n=-1,s=0;s<this._geometries.length;s++)for(var o=this._geometries[s].getCoordinates(),h=0;h<o.length;h++)e[++n]=o[h];return e}},{key:"getArea",value:function(){for(var e=0,n=0;n<this._geometries.length;n++)e+=this._geometries[n].getArea();return e}},{key:"copyInternal",value:function(){for(var e=new Array(this._geometries.length).fill(null),n=0;n<e.length;n++)e[n]=this._geometries[n].copy();return new t(e,this._factory)}},{key:"equalsExact",value:function(){if(2===arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof lt){var e=arguments[0],n=arguments[1];if(!this.isEquivalentClass(e))return!1;var s=e;if(this._geometries.length!==s._geometries.length)return!1;for(var o=0;o<this._geometries.length;o++)if(!this._geometries[o].equalsExact(s._geometries[o],n))return!1;return!0}return pt(t,"equalsExact",this,1).apply(this,arguments)}},{key:"normalize",value:function(){for(var e=0;e<this._geometries.length;e++)this._geometries[e].normalize();On.sort(this._geometries)}},{key:"getCoordinate",value:function(){return this.isEmpty()?null:this._geometries[0].getCoordinate()}},{key:"getBoundaryDimension",value:function(){for(var e=W.FALSE,n=0;n<this._geometries.length;n++)e=Math.max(e,this._geometries[n].getBoundaryDimension());return e}},{key:"reverseInternal",value:function(){for(var e=this._geometries.length,n=new mt(e),s=0;s<e;s++)n.add(this._geometries[s].reverse());return this.getFactory().buildGeometry(n)}},{key:"getTypeCode",value:function(){return lt.TYPECODE_GEOMETRYCOLLECTION}},{key:"getDimension",value:function(){for(var e=W.FALSE,n=0;n<this._geometries.length;n++)e=Math.max(e,this._geometries[n].getDimension());return e}},{key:"getLength",value:function(){for(var e=0,n=0;n<this._geometries.length;n++)e+=this._geometries[n].getLength();return e}},{key:"getNumPoints",value:function(){for(var e=0,n=0;n<this._geometries.length;n++)e+=this._geometries[n].getNumPoints();return e}},{key:"getNumGeometries",value:function(){return this._geometries.length}},{key:"compareToSameClass",value:function(){if(1===arguments.length){var e=arguments[0],n=new Kr(On.asList(this._geometries)),s=new Kr(On.asList(e._geometries));return this.compare(n,s)}if(2===arguments.length){for(var o=arguments[1],h=arguments[0],g=this.getNumGeometries(),y=h.getNumGeometries(),k=0;k<g&&k<y;){var R=this.getGeometryN(k),P=h.getGeometryN(k),z=R.compareToSameClass(P,o);if(0!==z)return z;k++}return k<g?1:k<y?-1:0}}},{key:"apply",value:function(){if(Ct(arguments[0],Cn))for(var e=arguments[0],n=0;n<this._geometries.length;n++)this._geometries[n].apply(e);else if(Ct(arguments[0],Qe)){var s=arguments[0];if(0===this._geometries.length)return null;for(var o=0;o<this._geometries.length&&(this._geometries[o].apply(s),!s.isDone());o++);s.isGeometryChanged()&&this.geometryChanged()}else if(Ct(arguments[0],Rn)){var h=arguments[0];h.filter(this);for(var g=0;g<this._geometries.length;g++)this._geometries[g].apply(h)}else if(Ct(arguments[0],Y)){var y=arguments[0];y.filter(this);for(var k=0;k<this._geometries.length;k++)this._geometries[k].apply(y)}}},{key:"getBoundary",value:function(){return lt.checkNotGeometryCollection(this),bt.shouldNeverReachHere(),null}},{key:"getGeometryType",value:function(){return lt.TYPENAME_GEOMETRYCOLLECTION}},{key:"isEmpty",value:function(){for(var e=0;e<this._geometries.length;e++)if(!this._geometries[e].isEmpty())return!1;return!0}}],[{key:"constructor_",value:function(){if(this._geometries=null,0!==arguments.length&&2===arguments.length){var e=arguments[0];if(lt.constructor_.call(this,arguments[1]),null===e&&(e=[]),lt.hasNullElements(e))throw new $("geometries must not contain null elements");this._geometries=e}}}])}(lt),Ge=function(r){function t(){var e;return x(this,t),e=G(this,t),t.constructor_.apply(e,arguments),e}return at(t,r),c(t,[{key:"copyInternal",value:function(){for(var e=new Array(this._geometries.length).fill(null),n=0;n<e.length;n++)e[n]=this._geometries[n].copy();return new t(e,this._factory)}},{key:"isValid",value:function(){return!0}},{key:"equalsExact",value:function(){if(2===arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof lt){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&pt(t,"equalsExact",this,1).call(this,e,n)}return pt(t,"equalsExact",this,1).apply(this,arguments)}},{key:"getCoordinate",value:function(){return 1===arguments.length&&Number.isInteger(arguments[0])?this._geometries[arguments[0]].getCoordinate():pt(t,"getCoordinate",this,1).apply(this,arguments)}},{key:"getBoundaryDimension",value:function(){return W.FALSE}},{key:"getTypeCode",value:function(){return lt.TYPECODE_MULTIPOINT}},{key:"getDimension",value:function(){return 0}},{key:"getBoundary",value:function(){return this.getFactory().createGeometryCollection()}},{key:"getGeometryType",value:function(){return lt.TYPENAME_MULTIPOINT}},{key:"interfaces_",get:function(){return[Wn]}}],[{key:"constructor_",value:function(){Ae.constructor_.call(this,arguments[0],arguments[1])}}])}(Ae),gr=function(r){function t(){var e;return x(this,t),e=G(this,t),t.constructor_.apply(e,arguments),e}return at(t,r),c(t,[{key:"copyInternal",value:function(){return new t(this._points.copy(),this._factory)}},{key:"getBoundaryDimension",value:function(){return W.FALSE}},{key:"isClosed",value:function(){return!!this.isEmpty()||pt(t,"isClosed",this,1).call(this)}},{key:"reverseInternal",value:function(){var e=this._points.copy();return ae.reverse(e),this.getFactory().createLinearRing(e)}},{key:"getTypeCode",value:function(){return lt.TYPECODE_LINEARRING}},{key:"validateConstruction",value:function(){if(!this.isEmpty()&&!pt(t,"isClosed",this,1).call(this))throw new $("Points of LinearRing do not form a closed linestring");if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<t.MINIMUM_VALID_SIZE)throw new $("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")}},{key:"getGeometryType",value:function(){return lt.TYPENAME_LINEARRING}}],[{key:"constructor_",value:function(){Zn.constructor_.call(this,arguments[0],arguments[1]),this.validateConstruction()}}])}(Zn);gr.MINIMUM_VALID_SIZE=4;var hn=function(r){function t(){var e;return x(this,t),e=G(this,t),t.constructor_.apply(e,arguments),e}return at(t,r),c(t,[{key:"setOrdinate",value:function(e,n){switch(e){case t.X:this.x=n;break;case t.Y:this.y=n;break;default:throw new $("Invalid ordinate index: "+e)}}},{key:"getZ",value:function(){return D.NULL_ORDINATE}},{key:"getOrdinate",value:function(e){switch(e){case t.X:return this.x;case t.Y:return this.y}throw new $("Invalid ordinate index: "+e)}},{key:"setZ",value:function(e){throw new $("CoordinateXY dimension 2 does not support z-ordinate")}},{key:"copy",value:function(){return new t(this)}},{key:"toString",value:function(){return"("+this.x+", "+this.y+")"}},{key:"setCoordinate",value:function(e){this.x=e.x,this.y=e.y,this.z=e.getZ()}}],[{key:"constructor_",value:function(){if(0===arguments.length)D.constructor_.call(this);else if(1===arguments.length){if(arguments[0]instanceof t){var e=arguments[0];D.constructor_.call(this,e.x,e.y)}else if(arguments[0]instanceof D){var n=arguments[0];D.constructor_.call(this,n.x,n.y)}}else 2===arguments.length&&D.constructor_.call(this,arguments[0],arguments[1],D.NULL_ORDINATE)}}])}(D);hn.X=0,hn.Y=1,hn.Z=-1,hn.M=-1;var en=function(r){function t(){var e;return x(this,t),e=G(this,t),t.constructor_.apply(e,arguments),e}return at(t,r),c(t,[{key:"getM",value:function(){return this._m}},{key:"setOrdinate",value:function(e,n){switch(e){case t.X:this.x=n;break;case t.Y:this.y=n;break;case t.M:this._m=n;break;default:throw new $("Invalid ordinate index: "+e)}}},{key:"setM",value:function(e){this._m=e}},{key:"getZ",value:function(){return D.NULL_ORDINATE}},{key:"getOrdinate",value:function(e){switch(e){case t.X:return this.x;case t.Y:return this.y;case t.M:return this._m}throw new $("Invalid ordinate index: "+e)}},{key:"setZ",value:function(e){throw new $("CoordinateXY dimension 2 does not support z-ordinate")}},{key:"copy",value:function(){return new t(this)}},{key:"toString",value:function(){return"("+this.x+", "+this.y+" m="+this.getM()+")"}},{key:"setCoordinate",value:function(e){this.x=e.x,this.y=e.y,this.z=e.getZ(),this._m=e.getM()}}],[{key:"constructor_",value:function(){if(this._m=null,0===arguments.length)D.constructor_.call(this),this._m=0;else if(1===arguments.length){if(arguments[0]instanceof t){var e=arguments[0];D.constructor_.call(this,e.x,e.y),this._m=e._m}else if(arguments[0]instanceof D){var n=arguments[0];D.constructor_.call(this,n.x,n.y),this._m=this.getM()}}else if(3===arguments.length){var h=arguments[2];D.constructor_.call(this,arguments[0],arguments[1],D.NULL_ORDINATE),this._m=h}}}])}(D);en.X=0,en.Y=1,en.Z=-1,en.M=2;var Cr=function(r){function t(){var e;return x(this,t),e=G(this,t),t.constructor_.apply(e,arguments),e}return at(t,r),c(t,[{key:"getM",value:function(){return this._m}},{key:"setOrdinate",value:function(e,n){switch(e){case D.X:this.x=n;break;case D.Y:this.y=n;break;case D.Z:this.z=n;break;case D.M:this._m=n;break;default:throw new $("Invalid ordinate index: "+e)}}},{key:"setM",value:function(e){this._m=e}},{key:"getOrdinate",value:function(e){switch(e){case D.X:return this.x;case D.Y:return this.y;case D.Z:return this.getZ();case D.M:return this.getM()}throw new $("Invalid ordinate index: "+e)}},{key:"copy",value:function(){return new t(this)}},{key:"toString",value:function(){return"("+this.x+", "+this.y+", "+this.getZ()+" m="+this.getM()+")"}},{key:"setCoordinate",value:function(e){this.x=e.x,this.y=e.y,this.z=e.getZ(),this._m=e.getM()}}],[{key:"constructor_",value:function(){if(this._m=null,0===arguments.length)D.constructor_.call(this),this._m=0;else if(1===arguments.length)if(arguments[0]instanceof t){var e=arguments[0];D.constructor_.call(this,e),this._m=e._m}else arguments[0]instanceof D&&(D.constructor_.call(this,arguments[0]),this._m=this.getM());else if(4===arguments.length){var g=arguments[3];D.constructor_.call(this,arguments[0],arguments[1],arguments[2]),this._m=g}}}])}(D),Rr=function(){function r(){x(this,r)}return c(r,null,[{key:"measures",value:function(t){return t instanceof hn?0:t instanceof en||t instanceof Cr?1:0}},{key:"dimension",value:function(t){return t instanceof hn?2:t instanceof en?3:t instanceof Cr?4:3}},{key:"create",value:function(){if(1===arguments.length)return r.create(arguments[0],0);if(2===arguments.length){var e=arguments[0],n=arguments[1];return 2===e?new hn:3===e&&0===n?new D:3===e&&1===n?new en:4===e&&1===n?new Cr:new D}}}])}(),Mn=function(r){function t(){var e;return x(this,t),e=G(this,t),t.constructor_.apply(e,arguments),e}return at(t,r),c(t,[{key:"getCoordinate",value:function(e){return this.get(e)}},{key:"addAll",value:function(){if(2===arguments.length&&"boolean"==typeof arguments[1]&&Ct(arguments[0],$e)){for(var e=arguments[1],n=!1,s=arguments[0].iterator();s.hasNext();)this.add(s.next(),e),n=!0;return n}return pt(t,"addAll",this,1).apply(this,arguments)}},{key:"clone",value:function(){for(var e=pt(t,"clone",this,1).call(this),n=0;n<this.size();n++)e.add(n,this.get(n).clone());return e}},{key:"toCoordinateArray",value:function(){if(0===arguments.length)return this.toArray(t.coordArrayType);if(1===arguments.length){if(arguments[0])return this.toArray(t.coordArrayType);for(var e=this.size(),n=new Array(e).fill(null),s=0;s<e;s++)n[s]=this.get(e-s-1);return n}}},{key:"add",value:function(){if(1===arguments.length){var e=arguments[0];return pt(t,"add",this,1).call(this,e)}if(2===arguments.length){if(arguments[0]instanceof Array&&"boolean"==typeof arguments[1])return this.add(arguments[0],arguments[1],!0),!0;if(arguments[0]instanceof D&&"boolean"==typeof arguments[1]){var o=arguments[0];if(!arguments[1]&&this.size()>=1&&this.get(this.size()-1).equals2D(o))return null;pt(t,"add",this,1).call(this,o)}else if(arguments[0]instanceof Object&&"boolean"==typeof arguments[1])return this.add(arguments[0],arguments[1]),!0}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var y=arguments[0],k=arguments[1];if(arguments[2])for(var R=0;R<y.length;R++)this.add(y[R],k);else for(var P=y.length-1;P>=0;P--)this.add(y[P],k);return!0}if("boolean"==typeof arguments[2]&&Number.isInteger(arguments[0])&&arguments[1]instanceof D){var z=arguments[0],K=arguments[1];if(!arguments[2]){var ot=this.size();if(ot>0&&(z>0&&this.get(z-1).equals2D(K)||z<ot&&this.get(z).equals2D(K)))return null}pt(t,"add",this,1).call(this,z,K)}}else if(4===arguments.length){var gt=arguments[0],Ht=arguments[1],Qt=arguments[2],ne=arguments[3],ke=1;Qt>ne&&(ke=-1);for(var me=Qt;me!==ne;me+=ke)this.add(gt[me],Ht);return!0}}},{key:"closeRing",value:function(){if(this.size()>0){var e=this.get(0).copy();this.add(e,!1)}}}],[{key:"constructor_",value:function(){if(0!==arguments.length)if(1===arguments.length){var e=arguments[0];this.ensureCapacity(e.length),this.add(e,!0)}else if(2===arguments.length){var n=arguments[0],s=arguments[1];this.ensureCapacity(n.length),this.add(n,s)}}}])}(mt);Mn.coordArrayType=new Array(0).fill(null);var oe=function(){function r(){x(this,r)}return c(r,null,[{key:"isRing",value:function(t){return!(t.length<4||!t[0].equals2D(t[t.length-1]))}},{key:"ptNotInList",value:function(t,e){for(var n=0;n<t.length;n++){var s=t[n];if(r.indexOf(s,e)<0)return s}return null}},{key:"scroll",value:function(t,e){var n=r.indexOf(e,t);if(n<0)return null;var s=new Array(t.length).fill(null);Be.arraycopy(t,n,s,0,t.length-n),Be.arraycopy(t,0,s,t.length-n,n),Be.arraycopy(s,0,t,0,t.length)}},{key:"equals",value:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(t===e)return!0;if(null===t||null===e||t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].equals(e[n]))return!1;return!0}if(3===arguments.length){var s=arguments[0],o=arguments[1],h=arguments[2];if(s===o)return!0;if(null===s||null===o||s.length!==o.length)return!1;for(var g=0;g<s.length;g++)if(0!==h.compare(s[g],o[g]))return!1;return!0}}},{key:"intersection",value:function(t,e){for(var n=new Mn,s=0;s<t.length;s++)e.intersects(t[s])&&n.add(t[s],!0);return n.toCoordinateArray()}},{key:"measures",value:function(t){if(null===t||0===t.length)return 0;var e,n=0,s=j(t);try{for(s.s();!(e=s.n()).done;)n=Math.max(n,Rr.measures(e.value))}catch(h){s.e(h)}finally{s.f()}return n}},{key:"hasRepeatedPoints",value:function(t){for(var e=1;e<t.length;e++)if(t[e-1].equals(t[e]))return!0;return!1}},{key:"removeRepeatedPoints",value:function(t){return r.hasRepeatedPoints(t)?new Mn(t,!1).toCoordinateArray():t}},{key:"reverse",value:function(t){for(var e=t.length-1,n=Math.trunc(e/2),s=0;s<=n;s++){var o=t[s];t[s]=t[e-s],t[e-s]=o}}},{key:"removeNull",value:function(t){for(var e=0,n=0;n<t.length;n++)null!==t[n]&&e++;var s=new Array(e).fill(null);if(0===e)return s;for(var o=0,h=0;h<t.length;h++)null!==t[h]&&(s[o++]=t[h]);return s}},{key:"copyDeep",value:function(){if(1===arguments.length){for(var t=arguments[0],e=new Array(t.length).fill(null),n=0;n<t.length;n++)e[n]=t[n].copy();return e}if(5===arguments.length)for(var s=arguments[0],o=arguments[1],h=arguments[2],g=arguments[3],y=arguments[4],k=0;k<y;k++)h[g+k]=s[o+k].copy()}},{key:"isEqualReversed",value:function(t,e){for(var n=0;n<t.length;n++)if(0!==t[n].compareTo(e[t.length-n-1]))return!1;return!0}},{key:"envelope",value:function(t){for(var e=new te,n=0;n<t.length;n++)e.expandToInclude(t[n]);return e}},{key:"toCoordinateArray",value:function(t){return t.toArray(r.coordArrayType)}},{key:"dimension",value:function(t){if(null===t||0===t.length)return 3;var e,n=0,s=j(t);try{for(s.s();!(e=s.n()).done;)n=Math.max(n,Rr.dimension(e.value))}catch(h){s.e(h)}finally{s.f()}return n}},{key:"atLeastNCoordinatesOrNothing",value:function(t,e){return e.length>=t?e:[]}},{key:"indexOf",value:function(t,e){for(var n=0;n<e.length;n++)if(t.equals(e[n]))return n;return-1}},{key:"increasingDirection",value:function(t){for(var e=0;e<Math.trunc(t.length/2);e++){var s=t[e].compareTo(t[t.length-1-e]);if(0!==s)return s}return 1}},{key:"compare",value:function(t,e){for(var n=0;n<t.length&&n<e.length;){var s=t[n].compareTo(e[n]);if(0!==s)return s;n++}return n<e.length?-1:n<t.length?1:0}},{key:"minCoordinate",value:function(t){for(var e=null,n=0;n<t.length;n++)(null===e||e.compareTo(t[n])>0)&&(e=t[n]);return e}},{key:"extract",value:function(t,e,n){e=wn.clamp(e,0,t.length);var s=(n=wn.clamp(n,-1,t.length))-e+1;n<0&&(s=0),e>=t.length&&(s=0),n<e&&(s=0);var o=new Array(s).fill(null);if(0===s)return o;for(var h=0,g=e;g<=n;g++)o[h++]=t[g];return o}}])}(),Ai=c(function r(){x(this,r)},[{key:"compare",value:function(r,t){return oe.compare(r,t)}},{key:"interfaces_",get:function(){return[ur]}}]),Mi=c(function r(){x(this,r)},[{key:"compare",value:function(r,t){var e=r,n=t;if(e.length<n.length)return-1;if(e.length>n.length)return 1;if(0===e.length)return 0;var s=oe.compare(e,n);return oe.isEqualReversed(e,n)?0:s}},{key:"OLDcompare",value:function(r,t){var e=r,n=t;if(e.length<n.length)return-1;if(e.length>n.length)return 1;if(0===e.length)return 0;for(var s=oe.increasingDirection(e),o=oe.increasingDirection(n),h=s>0?0:e.length-1,g=o>0?0:e.length-1,y=0;y<e.length;y++){var k=e[h].compareTo(n[g]);if(0!==k)return k;h+=s,g+=o}return 0}},{key:"interfaces_",get:function(){return[ur]}}]);oe.ForwardComparator=Ai,oe.BidirectionalComparator=Mi,oe.coordArrayType=new Array(0).fill(null);var dr=c(function r(t){x(this,r),this.str=t},[{key:"append",value:function(r){this.str+=r}},{key:"setCharAt",value:function(r,t){this.str=this.str.substr(0,r)+t+this.str.substr(r+1)}},{key:"toString",value:function(){return this.str}}]),Xe=function(){function r(){x(this,r),r.constructor_.apply(this,arguments)}return c(r,[{key:"getM",value:function(t){return this.hasM()?this._coordinates[t].getM():ht.NaN}},{key:"setOrdinate",value:function(t,e,n){switch(e){case Gt.X:this._coordinates[t].x=n;break;case Gt.Y:this._coordinates[t].y=n;break;default:this._coordinates[t].setOrdinate(e,n)}}},{key:"getZ",value:function(t){return this.hasZ()?this._coordinates[t].getZ():ht.NaN}},{key:"size",value:function(){return this._coordinates.length}},{key:"getOrdinate",value:function(t,e){switch(e){case Gt.X:return this._coordinates[t].x;case Gt.Y:return this._coordinates[t].y;default:return this._coordinates[t].getOrdinate(e)}}},{key:"getCoordinate",value:function(){if(1===arguments.length)return this._coordinates[arguments[0]];2===arguments.length&&arguments[1].setCoordinate(this._coordinates[arguments[0]])}},{key:"getCoordinateCopy",value:function(t){var e=this.createCoordinate();return e.setCoordinate(this._coordinates[t]),e}},{key:"createCoordinate",value:function(){return Rr.create(this.getDimension(),this.getMeasures())}},{key:"getDimension",value:function(){return this._dimension}},{key:"getX",value:function(t){return this._coordinates[t].x}},{key:"getMeasures",value:function(){return this._measures}},{key:"expandEnvelope",value:function(t){for(var e=0;e<this._coordinates.length;e++)t.expandToInclude(this._coordinates[e]);return t}},{key:"copy",value:function(){for(var t=new Array(this.size()).fill(null),e=0;e<this._coordinates.length;e++){var n=this.createCoordinate();n.setCoordinate(this._coordinates[e]),t[e]=n}return new r(t,this._dimension,this._measures)}},{key:"toString",value:function(){if(this._coordinates.length>0){var t=new dr(17*this._coordinates.length);t.append("("),t.append(this._coordinates[0]);for(var e=1;e<this._coordinates.length;e++)t.append(", "),t.append(this._coordinates[e]);return t.append(")"),t.toString()}return"()"}},{key:"getY",value:function(t){return this._coordinates[t].y}},{key:"toCoordinateArray",value:function(){return this._coordinates}},{key:"interfaces_",get:function(){return[Gt,ce]}}],[{key:"constructor_",value:function(){if(this._dimension=3,this._measures=0,this._coordinates=null,1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];r.constructor_.call(this,t,oe.dimension(t),oe.measures(t))}else if(Number.isInteger(arguments[0])){var e=arguments[0];this._coordinates=new Array(e).fill(null);for(var n=0;n<e;n++)this._coordinates[n]=new D}else if(Ct(arguments[0],Gt)){var s=arguments[0];if(null===s)return this._coordinates=new Array(0).fill(null),null;this._dimension=s.getDimension(),this._measures=s.getMeasures(),this._coordinates=new Array(s.size()).fill(null);for(var o=0;o<this._coordinates.length;o++)this._coordinates[o]=s.getCoordinateCopy(o)}}else if(2===arguments.length){if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var h=arguments[0];r.constructor_.call(this,h,arguments[1],oe.measures(h))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var y=arguments[0],k=arguments[1];this._coordinates=new Array(y).fill(null),this._dimension=k;for(var R=0;R<y;R++)this._coordinates[R]=Rr.create(k)}}else if(3===arguments.length)if(Number.isInteger(arguments[2])&&arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var P=arguments[0],K=arguments[2];this._dimension=arguments[1],this._measures=K,this._coordinates=null===P?new Array(0).fill(null):P}else if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var ot=arguments[0],gt=arguments[1],Ht=arguments[2];this._coordinates=new Array(ot).fill(null),this._dimension=gt,this._measures=Ht;for(var Qt=0;Qt<ot;Qt++)this._coordinates[Qt]=this.createCoordinate()}}}])}(),jn=function(){function r(){x(this,r)}return c(r,[{key:"readResolve",value:function(){return r.instance()}},{key:"create",value:function(){if(1===arguments.length){if(arguments[0]instanceof Array)return new Xe(arguments[0]);if(Ct(arguments[0],Gt))return new Xe(arguments[0])}else{if(2===arguments.length){var t=arguments[1];return t>3&&(t=3),t<2&&(t=2),new Xe(arguments[0],t)}if(3===arguments.length){var e=arguments[2],n=arguments[1]-e;return e>1&&(e=1),n>3&&(n=3),n<2&&(n=2),new Xe(arguments[0],n+e,e)}}}},{key:"interfaces_",get:function(){return[ci,ce]}}],[{key:"instance",value:function(){return r.instanceObject}}])}();jn.instanceObject=new jn;var Jr=function(r){function t(){var e;return x(this,t),e=G(this,t),t.constructor_.apply(e,arguments),e}return at(t,r),c(t,[{key:"copyInternal",value:function(){for(var e=new Array(this._geometries.length).fill(null),n=0;n<e.length;n++)e[n]=this._geometries[n].copy();return new t(e,this._factory)}},{key:"equalsExact",value:function(){if(2===arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof lt){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&pt(t,"equalsExact",this,1).call(this,e,n)}return pt(t,"equalsExact",this,1).apply(this,arguments)}},{key:"getBoundaryDimension",value:function(){return 1}},{key:"getTypeCode",value:function(){return lt.TYPECODE_MULTIPOLYGON}},{key:"getDimension",value:function(){return 2}},{key:"getBoundary",value:function(){if(this.isEmpty())return this.getFactory().createMultiLineString();for(var e=new mt,n=0;n<this._geometries.length;n++)for(var s=this._geometries[n].getBoundary(),o=0;o<s.getNumGeometries();o++)e.add(s.getGeometryN(o));var h=new Array(e.size()).fill(null);return this.getFactory().createMultiLineString(e.toArray(h))}},{key:"getGeometryType",value:function(){return lt.TYPENAME_MULTIPOLYGON}},{key:"interfaces_",get:function(){return[wr]}}],[{key:"constructor_",value:function(){Ae.constructor_.call(this,arguments[0],arguments[1])}}])}(Ae),fi=c(function r(){x(this,r)},[{key:"get",value:function(){}},{key:"put",value:function(){}},{key:"size",value:function(){}},{key:"values",value:function(){}},{key:"entrySet",value:function(){}}]),Or=function(r){function t(){var e;return x(this,t),(e=G(this,t)).map=new Map,e}return at(t,r),c(t,[{key:"get",value:function(e){return this.map.get(e)||null}},{key:"put",value:function(e,n){return this.map.set(e,n),n}},{key:"values",value:function(){for(var e=new mt,n=this.map.values(),s=n.next();!s.done;)e.add(s.value),s=n.next();return e}},{key:"entrySet",value:function(){var e=new kr;return this.map.entries().forEach(function(n){return e.add(n)}),e}},{key:"size",value:function(){return this.map.size()}}])}(fi),je=function(){function r(){x(this,r),r.constructor_.apply(this,arguments)}return c(r,[{key:"equals",value:function(t){return t instanceof r&&this._modelType===t._modelType&&this._scale===t._scale}},{key:"compareTo",value:function(t){var e=t,n=this.getMaximumSignificantDigits(),s=e.getMaximumSignificantDigits();return En.compare(n,s)}},{key:"getScale",value:function(){return this._scale}},{key:"isFloating",value:function(){return this._modelType===r.FLOATING||this._modelType===r.FLOATING_SINGLE}},{key:"getType",value:function(){return this._modelType}},{key:"toString",value:function(){var t="UNKNOWN";return this._modelType===r.FLOATING?t="Floating":this._modelType===r.FLOATING_SINGLE?t="Floating-Single":this._modelType===r.FIXED&&(t="Fixed (Scale="+this.getScale()+")"),t}},{key:"makePrecise",value:function(){if("number"==typeof arguments[0]){var t=arguments[0];return ht.isNaN(t)||this._modelType===r.FLOATING_SINGLE?t:this._modelType===r.FIXED?Math.round(t*this._scale)/this._scale:t}if(arguments[0]instanceof D){var e=arguments[0];if(this._modelType===r.FLOATING)return null;e.x=this.makePrecise(e.x),e.y=this.makePrecise(e.y)}}},{key:"getMaximumSignificantDigits",value:function(){var t=16;return this._modelType===r.FLOATING?t=16:this._modelType===r.FLOATING_SINGLE?t=6:this._modelType===r.FIXED&&(t=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),t}},{key:"setScale",value:function(t){this._scale=Math.abs(t)}},{key:"interfaces_",get:function(){return[ce,se]}}],[{key:"constructor_",value:function(){if(this._modelType=null,this._scale=null,0===arguments.length)this._modelType=r.FLOATING;else if(1===arguments.length)if(arguments[0]instanceof bn){var t=arguments[0];this._modelType=t,t===r.FIXED&&this.setScale(1)}else if("number"==typeof arguments[0]){var e=arguments[0];this._modelType=r.FIXED,this.setScale(e)}else if(arguments[0]instanceof r){var n=arguments[0];this._modelType=n._modelType,this._scale=n._scale}}},{key:"mostPrecise",value:function(t,e){return t.compareTo(e)>=0?t:e}}])}(),bn=function(){function r(){x(this,r),r.constructor_.apply(this,arguments)}return c(r,[{key:"readResolve",value:function(){return r.nameToTypeMap.get(this._name)}},{key:"toString",value:function(){return this._name}},{key:"interfaces_",get:function(){return[ce]}}],[{key:"constructor_",value:function(){this._name=null;var t=arguments[0];this._name=t,r.nameToTypeMap.put(t,this)}}])}();bn.nameToTypeMap=new Or,je.Type=bn,je.FIXED=new bn("FIXED"),je.FLOATING=new bn("FLOATING"),je.FLOATING_SINGLE=new bn("FLOATING SINGLE"),je.maximumPreciseValue=9007199254740992;var Me=function(r){function t(){var e;return x(this,t),e=G(this,t),t.constructor_.apply(e,arguments),e}return at(t,r),c(t,[{key:"copyInternal",value:function(){for(var e=new Array(this._geometries.length).fill(null),n=0;n<e.length;n++)e[n]=this._geometries[n].copy();return new t(e,this._factory)}},{key:"equalsExact",value:function(){if(2===arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof lt){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&pt(t,"equalsExact",this,1).call(this,e,n)}return pt(t,"equalsExact",this,1).apply(this,arguments)}},{key:"getBoundaryDimension",value:function(){return this.isClosed()?W.FALSE:0}},{key:"isClosed",value:function(){if(this.isEmpty())return!1;for(var e=0;e<this._geometries.length;e++)if(!this._geometries[e].isClosed())return!1;return!0}},{key:"getTypeCode",value:function(){return lt.TYPECODE_MULTILINESTRING}},{key:"getDimension",value:function(){return 1}},{key:"getBoundary",value:function(){throw new ln}},{key:"getGeometryType",value:function(){return lt.TYPENAME_MULTILINESTRING}},{key:"interfaces_",get:function(){return[Sr]}}],[{key:"constructor_",value:function(){Ae.constructor_.call(this,arguments[0],arguments[1])}}])}(Ae),he=function(){function r(){x(this,r),r.constructor_.apply(this,arguments)}return c(r,[{key:"createEmpty",value:function(t){switch(t){case-1:return this.createGeometryCollection();case 0:return this.createPoint();case 1:return this.createLineString();case 2:return this.createPolygon();default:throw new $("Invalid dimension: "+t)}}},{key:"toGeometry",value:function(t){return t.isNull()?this.createPoint():t.getMinX()===t.getMaxX()&&t.getMinY()===t.getMaxY()?this.createPoint(new D(t.getMinX(),t.getMinY())):t.getMinX()===t.getMaxX()||t.getMinY()===t.getMaxY()?this.createLineString([new D(t.getMinX(),t.getMinY()),new D(t.getMaxX(),t.getMaxY())]):this.createPolygon(this.createLinearRing([new D(t.getMinX(),t.getMinY()),new D(t.getMinX(),t.getMaxY()),new D(t.getMaxX(),t.getMaxY()),new D(t.getMaxX(),t.getMinY()),new D(t.getMinX(),t.getMinY())]),null)}},{key:"createLineString",value:function(){if(0===arguments.length)return this.createLineString(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return this.createLineString(null!==t?this.getCoordinateSequenceFactory().create(t):null)}if(Ct(arguments[0],Gt))return new Zn(arguments[0],this)}}},{key:"createMultiLineString",value:function(){return 0===arguments.length?new Me(null,this):1===arguments.length?new Me(arguments[0],this):void 0}},{key:"buildGeometry",value:function(t){for(var e=null,n=!1,s=!1,o=t.iterator();o.hasNext();){var h=o.next(),g=h.getTypeCode();null===e&&(e=g),g!==e&&(n=!0),h instanceof Ae&&(s=!0)}if(null===e)return this.createGeometryCollection();if(n||s)return this.createGeometryCollection(r.toGeometryArray(t));var y=t.iterator().next();if(t.size()>1){if(y instanceof $n)return this.createMultiPolygon(r.toPolygonArray(t));if(y instanceof Zn)return this.createMultiLineString(r.toLineStringArray(t));if(y instanceof jr)return this.createMultiPoint(r.toPointArray(t));bt.shouldNeverReachHere("Unhandled geometry type: "+y.getGeometryType())}return y}},{key:"createMultiPointFromCoords",value:function(t){return this.createMultiPoint(null!==t?this.getCoordinateSequenceFactory().create(t):null)}},{key:"createPoint",value:function(){if(0===arguments.length)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof D){var t=arguments[0];return this.createPoint(null!==t?this.getCoordinateSequenceFactory().create([t]):null)}if(Ct(arguments[0],Gt))return new jr(arguments[0],this)}}},{key:"getCoordinateSequenceFactory",value:function(){return this._coordinateSequenceFactory}},{key:"createPolygon",value:function(){if(0===arguments.length)return this.createPolygon(null,null);if(1===arguments.length){if(Ct(arguments[0],Gt))return this.createPolygon(this.createLinearRing(arguments[0]));if(arguments[0]instanceof Array)return this.createPolygon(this.createLinearRing(arguments[0]));if(arguments[0]instanceof gr)return this.createPolygon(arguments[0],null)}else if(2===arguments.length)return new $n(arguments[0],arguments[1],this)}},{key:"getSRID",value:function(){return this._SRID}},{key:"createGeometryCollection",value:function(){return 0===arguments.length?new Ae(null,this):1===arguments.length?new Ae(arguments[0],this):void 0}},{key:"getPrecisionModel",value:function(){return this._precisionModel}},{key:"createLinearRing",value:function(){if(0===arguments.length)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return this.createLinearRing(null!==t?this.getCoordinateSequenceFactory().create(t):null)}if(Ct(arguments[0],Gt))return new gr(arguments[0],this)}}},{key:"createMultiPolygon",value:function(){return 0===arguments.length?new Jr(null,this):1===arguments.length?new Jr(arguments[0],this):void 0}},{key:"createMultiPoint",value:function(){if(0===arguments.length)return new Ge(null,this);if(1===arguments.length){if(arguments[0]instanceof Array)return new Ge(arguments[0],this);if(Ct(arguments[0],Gt)){var t=arguments[0];if(null===t)return this.createMultiPoint(new Array(0).fill(null));for(var e=new Array(t.size()).fill(null),n=0;n<t.size();n++){var s=this.getCoordinateSequenceFactory().create(1,t.getDimension(),t.getMeasures());ae.copy(t,n,s,0,1),e[n]=this.createPoint(s)}return this.createMultiPoint(e)}}}},{key:"interfaces_",get:function(){return[ce]}}],[{key:"constructor_",value:function(){if(this._precisionModel=null,this._coordinateSequenceFactory=null,this._SRID=null,0===arguments.length)r.constructor_.call(this,new je,0);else if(1===arguments.length)if(Ct(arguments[0],ci)){var t=arguments[0];r.constructor_.call(this,new je,0,t)}else arguments[0]instanceof je&&r.constructor_.call(this,arguments[0],0,r.getDefaultCoordinateSequenceFactory());else if(2===arguments.length)r.constructor_.call(this,arguments[0],arguments[1],r.getDefaultCoordinateSequenceFactory());else if(3===arguments.length){var h=arguments[1],g=arguments[2];this._precisionModel=arguments[0],this._coordinateSequenceFactory=g,this._SRID=h}}},{key:"toMultiPolygonArray",value:function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)}},{key:"toGeometryArray",value:function(t){if(null===t)return null;var e=new Array(t.size()).fill(null);return t.toArray(e)}},{key:"getDefaultCoordinateSequenceFactory",value:function(){return jn.instance()}},{key:"toMultiLineStringArray",value:function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)}},{key:"toLineStringArray",value:function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)}},{key:"toMultiPointArray",value:function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)}},{key:"toLinearRingArray",value:function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)}},{key:"toPointArray",value:function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)}},{key:"toPolygonArray",value:function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)}},{key:"createPointFromInternalCoord",value:function(t,e){return e.getPrecisionModel().makePrecise(t),e.getFactory().createPoint(t)}}])}(),Yt={POINT:"Point",LINE_STRING:"LineString",LINEAR_RING:"LinearRing",POLYGON:"Polygon",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon",GEOMETRY_COLLECTION:"GeometryCollection",CIRCLE:"Circle"};for(var Ke in Yt)Yt[Ke].toUpperCase();var xt=c(function r(t){x(this,r),this.wkt=t,this.index_=-1},[{key:"isAlpha_",value:function(r){return r>="a"&&r<="z"||r>="A"&&r<="Z"}},{key:"isNumeric_",value:function(r,t){return r>="0"&&r<="9"||"."==r&&!(void 0!==t&&t)}},{key:"isWhiteSpace_",value:function(r){return" "==r||"\t"==r||"\r"==r||"\n"==r}},{key:"nextChar_",value:function(){return this.wkt.charAt(++this.index_)}},{key:"nextToken",value:function(){var r,t=this.nextChar_(),e=this.index_,n=t;if("("==t)r=2;else if(","==t)r=5;else if(")"==t)r=3;else if(this.isNumeric_(t)||"-"==t)r=4,n=this.readNumber_();else if(this.isAlpha_(t))r=1,n=this.readText_();else{if(this.isWhiteSpace_(t))return this.nextToken();if(""!==t)throw new Error("Unexpected character: "+t);r=6}return{position:e,value:n,type:r}}},{key:"readNumber_",value:function(){var r,t=this.index_,e=!1,n=!1;do{"."==r?e=!0:"e"!=r&&"E"!=r||(n=!0),r=this.nextChar_()}while(this.isNumeric_(r,e)||!n&&("e"==r||"E"==r)||n&&("-"==r||"+"==r));return parseFloat(this.wkt.substring(t,this.index_--))}},{key:"readText_",value:function(){var r,t=this.index_;do{r=this.nextChar_()}while(this.isAlpha_(r));return this.wkt.substring(t,this.index_--).toUpperCase()}}]),Pn=c(function r(t,e){x(this,r),this.lexer_=t,this.layout_="XY",this.factory=e},[{key:"consume_",value:function(){this.token_=this.lexer_.nextToken()}},{key:"isTokenType",value:function(r){return this.token_.type==r}},{key:"match",value:function(r){var t=this.isTokenType(r);return t&&this.consume_(),t}},{key:"parse",value:function(){return this.consume_(),this.parseGeometry_()}},{key:"parseGeometryLayout_",value:function(){var r="XY",t=this.token_;if(this.isTokenType(1)){var e=t.value;"Z"===e?r="XYZ":"M"===e?r="XYM":"ZM"===e&&(r="XYZM"),"XY"!==r&&this.consume_()}return r}},{key:"parseGeometryCollectionText_",value:function(){if(this.match(2)){var r=[];do{r.push(this.parseGeometry_())}while(this.match(5));if(this.match(3))return r}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parsePointText_",value:function(){if(this.match(2)){var r=this.parsePoint_();if(this.match(3))return r}else if(this.isEmptyGeometry_())return null;throw new Error(this.formatErrorMessage_())}},{key:"parseLineStringText_",value:function(){if(this.match(2)){var r=this.parsePointList_();if(this.match(3))return r}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parsePolygonText_",value:function(){if(this.match(2)){var r=this.parseLineStringTextList_();if(this.match(3))return r}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parseMultiPointText_",value:function(){var r;if(this.match(2)){if(r=2==this.token_.type?this.parsePointTextList_():this.parsePointList_(),this.match(3))return r}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parseMultiLineStringText_",value:function(){if(this.match(2)){var r=this.parseLineStringTextList_();if(this.match(3))return r}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parseMultiPolygonText_",value:function(){if(this.match(2)){var r=this.parsePolygonTextList_();if(this.match(3))return r}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parsePoint_",value:function(){for(var r=[],t=this.layout_.length,e=0;e<t;++e){var n=this.token_;if(!this.match(4))break;r.push(n.value)}if(r.length==t)return r;throw new Error(this.formatErrorMessage_())}},{key:"parsePointList_",value:function(){for(var r=[this.parsePoint_()];this.match(5);)r.push(this.parsePoint_());return r}},{key:"parsePointTextList_",value:function(){for(var r=[this.parsePointText_()];this.match(5);)r.push(this.parsePointText_());return r}},{key:"parseLineStringTextList_",value:function(){for(var r=[this.parseLineStringText_()];this.match(5);)r.push(this.parseLineStringText_());return r}},{key:"parsePolygonTextList_",value:function(){for(var r=[this.parsePolygonText_()];this.match(5);)r.push(this.parsePolygonText_());return r}},{key:"isEmptyGeometry_",value:function(){var r=this.isTokenType(1)&&"EMPTY"==this.token_.value;return r&&this.consume_(),r}},{key:"formatErrorMessage_",value:function(){return"Unexpected `"+this.token_.value+"` at position "+this.token_.position+" in `"+this.lexer_.wkt+"`"}},{key:"parseGeometry_",value:function(){var r=this.factory,t=function(gt){return J(D,ge(gt))},e=function(gt){var Ht=gt.map(function(Qt){return r.createLinearRing(Qt.map(t))});return Ht.length>1?r.createPolygon(Ht[0],Ht.slice(1)):r.createPolygon(Ht[0])},n=this.token_;if(this.match(1)){var s=n.value;if(this.layout_=this.parseGeometryLayout_(),"GEOMETRYCOLLECTION"==s){var o=this.parseGeometryCollectionText_();return r.createGeometryCollection(o)}switch(s){case"POINT":var h=this.parsePointText_();return h?r.createPoint(J(D,ge(h))):r.createPoint();case"LINESTRING":var g=this.parseLineStringText_().map(t);return r.createLineString(g);case"LINEARRING":var y=this.parseLineStringText_().map(t);return r.createLinearRing(y);case"POLYGON":var k=this.parsePolygonText_();return k&&0!==k.length?e(k):r.createPolygon();case"MULTIPOINT":var R=this.parseMultiPointText_();if(!R||0===R.length)return r.createMultiPoint();var P=R.map(t).map(function(gt){return r.createPoint(gt)});return r.createMultiPoint(P);case"MULTILINESTRING":var z=this.parseMultiLineStringText_().map(function(gt){return r.createLineString(gt.map(t))});return r.createMultiLineString(z);case"MULTIPOLYGON":var K=this.parseMultiPolygonText_();if(!K||0===K.length)return r.createMultiPolygon();var ot=K.map(e);return r.createMultiPolygon(ot);default:throw new Error("Invalid geometry type: "+s)}}throw new Error(this.formatErrorMessage_())}}]);function pr(r){if(r.isEmpty())return"";var t=r.getCoordinate(),e=[t.x,t.y];return void 0===t.z||Number.isNaN(t.z)||e.push(t.z),void 0===t.m||Number.isNaN(t.m)||e.push(t.m),e.join(" ")}function Mr(r){for(var t=r.getCoordinates().map(function(o){var h=[o.x,o.y];return void 0===o.z||Number.isNaN(o.z)||h.push(o.z),void 0===o.m||Number.isNaN(o.m)||h.push(o.m),h}),e=[],n=0,s=t.length;n<s;++n)e.push(t[n].join(" "));return e.join(", ")}function br(r){var t=[];t.push("("+Mr(r.getExteriorRing())+")");for(var e=0,n=r.getNumInteriorRing();e<n;++e)t.push("("+Mr(r.getInteriorRingN(e))+")");return t.join(", ")}var Ji={Point:pr,LineString:Mr,LinearRing:Mr,Polygon:br,MultiPoint:function(r){for(var t=[],e=0,n=r.getNumGeometries();e<n;++e)t.push("("+pr(r.getGeometryN(e))+")");return t.join(", ")},MultiLineString:function(r){for(var t=[],e=0,n=r.getNumGeometries();e<n;++e)t.push("("+Mr(r.getGeometryN(e))+")");return t.join(", ")},MultiPolygon:function(r){for(var t=[],e=0,n=r.getNumGeometries();e<n;++e)t.push("("+br(r.getGeometryN(e))+")");return t.join(", ")},GeometryCollection:function(r){for(var t=[],e=0,n=r.getNumGeometries();e<n;++e)t.push(Et(r.getGeometryN(e)));return t.join(", ")}};function Et(r){var t=r.getGeometryType(),e=Ji[t];t=t.toUpperCase();var n=function(s){var o="";if(s.isEmpty())return o;var h=s.getCoordinate();return void 0===h.z||Number.isNaN(h.z)||(o+="Z"),void 0===h.m||Number.isNaN(h.m)||(o+="M"),o}(r);return n.length>0&&(t+=" "+n),r.isEmpty()?t+" EMPTY":t+" ("+e(r)+")"}var bi=c(function r(t){x(this,r),this.geometryFactory=t||new he,this.precisionModel=this.geometryFactory.getPrecisionModel()},[{key:"read",value:function(r){var t=new xt(r);return new Pn(t,this.geometryFactory).parse()}},{key:"write",value:function(r){return Et(r)}}]),we=c(function r(t){x(this,r),this.parser=new bi(t)},[{key:"write",value:function(r){return this.parser.write(r)}}],[{key:"toLineString",value:function(r,t){if(2!==arguments.length)throw new Error("Not implemented");return"LINESTRING ( "+r.x+" "+r.y+", "+t.x+" "+t.y+" )"}}]),jt=function(){function r(){x(this,r),r.constructor_.apply(this,arguments)}return c(r,[{key:"getIndexAlongSegment",value:function(t,e){return this.computeIntLineIndex(),this._intLineIndex[t][e]}},{key:"getTopologySummary",value:function(){var t=new dr;return this.isEndPoint()&&t.append(" endpoint"),this._isProper&&t.append(" proper"),this.isCollinear()&&t.append(" collinear"),t.toString()}},{key:"computeIntersection",value:function(t,e,n,s){this._inputLines[0][0]=t,this._inputLines[0][1]=e,this._inputLines[1][0]=n,this._inputLines[1][1]=s,this._result=this.computeIntersect(t,e,n,s)}},{key:"getIntersectionNum",value:function(){return this._result}},{key:"computeIntLineIndex",value:function(){if(0===arguments.length)null===this._intLineIndex&&(this._intLineIndex=Array(2).fill().map(function(){return Array(2)}),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(1===arguments.length){var t=arguments[0];this.getEdgeDistance(t,0)>this.getEdgeDistance(t,1)?(this._intLineIndex[t][0]=0,this._intLineIndex[t][1]=1):(this._intLineIndex[t][0]=1,this._intLineIndex[t][1]=0)}}},{key:"isProper",value:function(){return this.hasIntersection()&&this._isProper}},{key:"setPrecisionModel",value:function(t){this._precisionModel=t}},{key:"isInteriorIntersection",value:function(){if(0===arguments.length)return!!this.isInteriorIntersection(0)||!!this.isInteriorIntersection(1);if(1===arguments.length){for(var t=arguments[0],e=0;e<this._result;e++)if(!this._intPt[e].equals2D(this._inputLines[t][0])&&!this._intPt[e].equals2D(this._inputLines[t][1]))return!0;return!1}}},{key:"getIntersection",value:function(t){return this._intPt[t]}},{key:"isEndPoint",value:function(){return this.hasIntersection()&&!this._isProper}},{key:"hasIntersection",value:function(){return this._result!==r.NO_INTERSECTION}},{key:"getEdgeDistance",value:function(t,e){return r.computeEdgeDistance(this._intPt[e],this._inputLines[t][0],this._inputLines[t][1])}},{key:"isCollinear",value:function(){return this._result===r.COLLINEAR_INTERSECTION}},{key:"toString",value:function(){return we.toLineString(this._inputLines[0][0],this._inputLines[0][1])+" - "+we.toLineString(this._inputLines[1][0],this._inputLines[1][1])+this.getTopologySummary()}},{key:"getEndpoint",value:function(t,e){return this._inputLines[t][e]}},{key:"isIntersection",value:function(t){for(var e=0;e<this._result;e++)if(this._intPt[e].equals2D(t))return!0;return!1}},{key:"getIntersectionAlongSegment",value:function(t,e){return this.computeIntLineIndex(),this._intPt[this._intLineIndex[t][e]]}}],[{key:"constructor_",value:function(){this._result=null,this._inputLines=Array(2).fill().map(function(){return Array(2)}),this._intPt=new Array(2).fill(null),this._intLineIndex=null,this._isProper=null,this._pa=null,this._pb=null,this._precisionModel=null,this._intPt[0]=new D,this._intPt[1]=new D,this._pa=this._intPt[0],this._pb=this._intPt[1],this._result=0}},{key:"computeEdgeDistance",value:function(t,e,n){var s=Math.abs(n.x-e.x),o=Math.abs(n.y-e.y),h=-1;if(t.equals(e))h=0;else if(t.equals(n))h=s>o?s:o;else{var g=Math.abs(t.x-e.x),y=Math.abs(t.y-e.y);0!==(h=s>o?g:y)||t.equals(e)||(h=Math.max(g,y))}return bt.isTrue(!(0===h&&!t.equals(e)),"Bad distance calculation"),h}},{key:"nonRobustComputeEdgeDistance",value:function(t,e,n){var s=t.x-e.x,o=t.y-e.y,h=Math.sqrt(s*s+o*o);return bt.isTrue(!(0===h&&!t.equals(e)),"Invalid distance calculation"),h}}])}();jt.DONT_INTERSECT=0,jt.DO_INTERSECT=1,jt.COLLINEAR=2,jt.NO_INTERSECTION=0,jt.POINT_INTERSECTION=1,jt.COLLINEAR_INTERSECTION=2;var nn=function(r){function t(){return x(this,t),G(this,t)}return at(t,r),c(t,[{key:"isInSegmentEnvelopes",value:function(e){var n=new te(this._inputLines[0][0],this._inputLines[0][1]),s=new te(this._inputLines[1][0],this._inputLines[1][1]);return n.contains(e)&&s.contains(e)}},{key:"computeIntersection",value:function(){if(3!==arguments.length)return pt(t,"computeIntersection",this,1).apply(this,arguments);var e=arguments[0],n=arguments[1],s=arguments[2];if(this._isProper=!1,te.intersects(n,s,e)&&0===yt.index(n,s,e)&&0===yt.index(s,n,e))return this._isProper=!0,(e.equals(n)||e.equals(s))&&(this._isProper=!1),this._result=jt.POINT_INTERSECTION,null;this._result=jt.NO_INTERSECTION}},{key:"intersection",value:function(e,n,s,o){var h=this.intersectionSafe(e,n,s,o);return this.isInSegmentEnvelopes(h)||(h=new D(t.nearestEndpoint(e,n,s,o))),null!==this._precisionModel&&this._precisionModel.makePrecise(h),h}},{key:"checkDD",value:function(e,n,s,o,h){var g=Nr.intersection(e,n,s,o),y=this.isInSegmentEnvelopes(g);Be.out.println("DD in env = "+y+"  --------------------- "+g),h.distance(g)>1e-4&&Be.out.println("Distance = "+h.distance(g))}},{key:"intersectionSafe",value:function(e,n,s,o){var h=Vn.intersection(e,n,s,o);return null===h&&(h=t.nearestEndpoint(e,n,s,o)),h}},{key:"computeCollinearIntersection",value:function(e,n,s,o){var h=te.intersects(e,n,s),g=te.intersects(e,n,o),y=te.intersects(s,o,e),k=te.intersects(s,o,n);return h&&g?(this._intPt[0]=s,this._intPt[1]=o,jt.COLLINEAR_INTERSECTION):y&&k?(this._intPt[0]=e,this._intPt[1]=n,jt.COLLINEAR_INTERSECTION):h&&y?(this._intPt[0]=s,this._intPt[1]=e,!s.equals(e)||g||k?jt.COLLINEAR_INTERSECTION:jt.POINT_INTERSECTION):h&&k?(this._intPt[0]=s,this._intPt[1]=n,!s.equals(n)||g||y?jt.COLLINEAR_INTERSECTION:jt.POINT_INTERSECTION):g&&y?(this._intPt[0]=o,this._intPt[1]=e,!o.equals(e)||h||k?jt.COLLINEAR_INTERSECTION:jt.POINT_INTERSECTION):g&&k?(this._intPt[0]=o,this._intPt[1]=n,!o.equals(n)||h||y?jt.COLLINEAR_INTERSECTION:jt.POINT_INTERSECTION):jt.NO_INTERSECTION}},{key:"computeIntersect",value:function(e,n,s,o){if(this._isProper=!1,!te.intersects(e,n,s,o))return jt.NO_INTERSECTION;var h=yt.index(e,n,s),g=yt.index(e,n,o);if(h>0&&g>0||h<0&&g<0)return jt.NO_INTERSECTION;var y=yt.index(s,o,e),k=yt.index(s,o,n);return y>0&&k>0||y<0&&k<0?jt.NO_INTERSECTION:0===h&&0===g&&0===y&&0===k?this.computeCollinearIntersection(e,n,s,o):(0===h||0===g||0===y||0===k?(this._isProper=!1,e.equals2D(s)||e.equals2D(o)?this._intPt[0]=e:n.equals2D(s)||n.equals2D(o)?this._intPt[0]=n:0===h?this._intPt[0]=new D(s):0===g?this._intPt[0]=new D(o):0===y?this._intPt[0]=new D(e):0===k&&(this._intPt[0]=new D(n))):(this._isProper=!0,this._intPt[0]=this.intersection(e,n,s,o)),jt.POINT_INTERSECTION)}}],[{key:"nearestEndpoint",value:function(e,n,s,o){var h=e,g=tn.pointToSegment(e,s,o),y=tn.pointToSegment(n,s,o);return y<g&&(g=y,h=n),(y=tn.pointToSegment(s,e,n))<g&&(g=y,h=s),(y=tn.pointToSegment(o,e,n))<g&&(g=y,h=o),h}}])}(jt),Ye=function(){function r(){x(this,r),r.constructor_.apply(this,arguments)}return c(r,[{key:"countSegment",value:function(t,e){if(t.x<this._p.x&&e.x<this._p.x)return null;if(this._p.x===e.x&&this._p.y===e.y)return this._isPointOnSegment=!0,null;if(t.y===this._p.y&&e.y===this._p.y){var n=t.x,s=e.x;return n>s&&(n=e.x,s=t.x),this._p.x>=n&&this._p.x<=s&&(this._isPointOnSegment=!0),null}if(t.y>this._p.y&&e.y<=this._p.y||e.y>this._p.y&&t.y<=this._p.y){var o=yt.index(t,e,this._p);if(o===yt.COLLINEAR)return this._isPointOnSegment=!0,null;e.y<t.y&&(o=-o),o===yt.LEFT&&this._crossingCount++}}},{key:"isPointInPolygon",value:function(){return this.getLocation()!==S.EXTERIOR}},{key:"getLocation",value:function(){return this._isPointOnSegment?S.BOUNDARY:this._crossingCount%2==1?S.INTERIOR:S.EXTERIOR}},{key:"isOnSegment",value:function(){return this._isPointOnSegment}}],[{key:"constructor_",value:function(){this._p=null,this._crossingCount=0,this._isPointOnSegment=!1,this._p=arguments[0]}},{key:"locatePointInRing",value:function(){if(arguments[0]instanceof D&&Ct(arguments[1],Gt)){for(var t=arguments[1],e=new r(arguments[0]),n=new D,s=new D,o=1;o<t.size();o++)if(t.getCoordinate(o,n),t.getCoordinate(o-1,s),e.countSegment(n,s),e.isOnSegment())return e.getLocation();return e.getLocation()}if(arguments[0]instanceof D&&arguments[1]instanceof Array){for(var h=arguments[1],g=new r(arguments[0]),y=1;y<h.length;y++)if(g.countSegment(h[y],h[y-1]),g.isOnSegment())return g.getLocation();return g.getLocation()}}}])}(),Pr=function(){function r(){x(this,r)}return c(r,null,[{key:"isOnLine",value:function(){if(arguments[0]instanceof D&&Ct(arguments[1],Gt)){for(var t=arguments[0],e=arguments[1],n=new nn,s=new D,o=new D,h=e.size(),g=1;g<h;g++)if(e.getCoordinate(g-1,s),e.getCoordinate(g,o),n.computeIntersection(t,s,o),n.hasIntersection())return!0;return!1}if(arguments[0]instanceof D&&arguments[1]instanceof Array){for(var y=arguments[0],k=arguments[1],R=new nn,P=1;P<k.length;P++)if(R.computeIntersection(y,k[P-1],k[P]),R.hasIntersection())return!0;return!1}}},{key:"locateInRing",value:function(t,e){return Ye.locatePointInRing(t,e)}},{key:"isInRing",value:function(t,e){return r.locateInRing(t,e)!==S.EXTERIOR}}])}(),Lt=function(){function r(){x(this,r),r.constructor_.apply(this,arguments)}return c(r,[{key:"setAllLocations",value:function(t){for(var e=0;e<this.location.length;e++)this.location[e]=t}},{key:"isNull",value:function(){for(var t=0;t<this.location.length;t++)if(this.location[t]!==S.NONE)return!1;return!0}},{key:"setAllLocationsIfNull",value:function(t){for(var e=0;e<this.location.length;e++)this.location[e]===S.NONE&&(this.location[e]=t)}},{key:"isLine",value:function(){return 1===this.location.length}},{key:"merge",value:function(t){if(t.location.length>this.location.length){var e=new Array(3).fill(null);e[H.ON]=this.location[H.ON],e[H.LEFT]=S.NONE,e[H.RIGHT]=S.NONE,this.location=e}for(var n=0;n<this.location.length;n++)this.location[n]===S.NONE&&n<t.location.length&&(this.location[n]=t.location[n])}},{key:"getLocations",value:function(){return this.location}},{key:"flip",value:function(){if(this.location.length<=1)return null;var t=this.location[H.LEFT];this.location[H.LEFT]=this.location[H.RIGHT],this.location[H.RIGHT]=t}},{key:"toString",value:function(){var t=new _n;return this.location.length>1&&t.append(S.toLocationSymbol(this.location[H.LEFT])),t.append(S.toLocationSymbol(this.location[H.ON])),this.location.length>1&&t.append(S.toLocationSymbol(this.location[H.RIGHT])),t.toString()}},{key:"setLocations",value:function(t,e,n){this.location[H.ON]=t,this.location[H.LEFT]=e,this.location[H.RIGHT]=n}},{key:"get",value:function(t){return t<this.location.length?this.location[t]:S.NONE}},{key:"isArea",value:function(){return this.location.length>1}},{key:"isAnyNull",value:function(){for(var t=0;t<this.location.length;t++)if(this.location[t]===S.NONE)return!0;return!1}},{key:"setLocation",value:function(){1===arguments.length?this.setLocation(H.ON,arguments[0]):2===arguments.length&&(this.location[arguments[0]]=arguments[1])}},{key:"init",value:function(t){this.location=new Array(t).fill(null),this.setAllLocations(S.NONE)}},{key:"isEqualOnSide",value:function(t,e){return this.location[e]===t.location[e]}},{key:"allPositionsEqual",value:function(t){for(var e=0;e<this.location.length;e++)if(this.location[e]!==t)return!1;return!0}}],[{key:"constructor_",value:function(){if(this.location=null,1===arguments.length){if(arguments[0]instanceof Array)this.init(arguments[0].length);else if(Number.isInteger(arguments[0])){var e=arguments[0];this.init(1),this.location[H.ON]=e}else if(arguments[0]instanceof r){var n=arguments[0];if(this.init(n.location.length),null!==n)for(var s=0;s<this.location.length;s++)this.location[s]=n.location[s]}}else if(3===arguments.length){var o=arguments[0],h=arguments[1],g=arguments[2];this.init(3),this.location[H.ON]=o,this.location[H.LEFT]=h,this.location[H.RIGHT]=g}}}])}(),Ne=function(){function r(){x(this,r),r.constructor_.apply(this,arguments)}return c(r,[{key:"getGeometryCount",value:function(){var t=0;return this.elt[0].isNull()||t++,this.elt[1].isNull()||t++,t}},{key:"setAllLocations",value:function(t,e){this.elt[t].setAllLocations(e)}},{key:"isNull",value:function(t){return this.elt[t].isNull()}},{key:"setAllLocationsIfNull",value:function(){if(1===arguments.length){var t=arguments[0];this.setAllLocationsIfNull(0,t),this.setAllLocationsIfNull(1,t)}else 2===arguments.length&&this.elt[arguments[0]].setAllLocationsIfNull(arguments[1])}},{key:"isLine",value:function(t){return this.elt[t].isLine()}},{key:"merge",value:function(t){for(var e=0;e<2;e++)null===this.elt[e]&&null!==t.elt[e]?this.elt[e]=new Lt(t.elt[e]):this.elt[e].merge(t.elt[e])}},{key:"flip",value:function(){this.elt[0].flip(),this.elt[1].flip()}},{key:"getLocation",value:function(){return 1===arguments.length?this.elt[arguments[0]].get(H.ON):2===arguments.length?this.elt[arguments[0]].get(arguments[1]):void 0}},{key:"toString",value:function(){var t=new _n;return null!==this.elt[0]&&(t.append("A:"),t.append(this.elt[0].toString())),null!==this.elt[1]&&(t.append(" B:"),t.append(this.elt[1].toString())),t.toString()}},{key:"isArea",value:function(){return 0===arguments.length?this.elt[0].isArea()||this.elt[1].isArea():1===arguments.length?this.elt[arguments[0]].isArea():void 0}},{key:"isAnyNull",value:function(t){return this.elt[t].isAnyNull()}},{key:"setLocation",value:function(){2===arguments.length?this.elt[arguments[0]].setLocation(H.ON,arguments[1]):3===arguments.length&&this.elt[arguments[0]].setLocation(arguments[1],arguments[2])}},{key:"isEqualOnSide",value:function(t,e){return this.elt[0].isEqualOnSide(t.elt[0],e)&&this.elt[1].isEqualOnSide(t.elt[1],e)}},{key:"allPositionsEqual",value:function(t,e){return this.elt[t].allPositionsEqual(e)}},{key:"toLine",value:function(t){this.elt[t].isArea()&&(this.elt[t]=new Lt(this.elt[t].location[0]))}}],[{key:"constructor_",value:function(){if(this.elt=new Array(2).fill(null),1===arguments.length){if(Number.isInteger(arguments[0])){var t=arguments[0];this.elt[0]=new Lt(t),this.elt[1]=new Lt(t)}else if(arguments[0]instanceof r){var e=arguments[0];this.elt[0]=new Lt(e.elt[0]),this.elt[1]=new Lt(e.elt[1])}}else if(2===arguments.length){var n=arguments[0],s=arguments[1];this.elt[0]=new Lt(S.NONE),this.elt[1]=new Lt(S.NONE),this.elt[n].setLocation(s)}else if(3===arguments.length){var o=arguments[0],h=arguments[1],g=arguments[2];this.elt[0]=new Lt(o,h,g),this.elt[1]=new Lt(o,h,g)}else if(4===arguments.length){var y=arguments[0],k=arguments[1],R=arguments[2],P=arguments[3];this.elt[0]=new Lt(S.NONE,S.NONE,S.NONE),this.elt[1]=new Lt(S.NONE,S.NONE,S.NONE),this.elt[y].setLocations(k,R,P)}}},{key:"toLineLabel",value:function(t){for(var e=new r(S.NONE),n=0;n<2;n++)e.setLocation(n,t.getLocation(n));return e}}])}(),Ln=c(function r(){x(this,r),r.constructor_.apply(this,arguments)},[{key:"computeRing",value:function(){if(null!==this._ring)return null;for(var r=new Array(this._pts.size()).fill(null),t=0;t<this._pts.size();t++)r[t]=this._pts.get(t);this._ring=this._geometryFactory.createLinearRing(r),this._isHole=yt.isCCW(this._ring.getCoordinates())}},{key:"isIsolated",value:function(){return 1===this._label.getGeometryCount()}},{key:"computePoints",value:function(r){this._startDe=r;var t=r,e=!0;do{if(null===t)throw new B("Found null DirectedEdge");if(t.getEdgeRing()===this)throw new B("Directed Edge visited twice during ring-building at "+t.getCoordinate());this._edges.add(t);var n=t.getLabel();bt.isTrue(n.isArea()),this.mergeLabel(n),this.addPoints(t.getEdge(),t.isForward(),e),e=!1,this.setEdgeRing(t,this),t=this.getNext(t)}while(t!==this._startDe)}},{key:"getLinearRing",value:function(){return this._ring}},{key:"getCoordinate",value:function(r){return this._pts.get(r)}},{key:"computeMaxNodeDegree",value:function(){this._maxNodeDegree=0;var r=this._startDe;do{var t=r.getNode().getEdges().getOutgoingDegree(this);t>this._maxNodeDegree&&(this._maxNodeDegree=t),r=this.getNext(r)}while(r!==this._startDe);this._maxNodeDegree*=2}},{key:"addPoints",value:function(r,t,e){var n=r.getCoordinates();if(t){var s=1;e&&(s=0);for(var o=s;o<n.length;o++)this._pts.add(n[o])}else{var h=n.length-2;e&&(h=n.length-1);for(var g=h;g>=0;g--)this._pts.add(n[g])}}},{key:"isHole",value:function(){return this._isHole}},{key:"setInResult",value:function(){var r=this._startDe;do{r.getEdge().setInResult(!0),r=r.getNext()}while(r!==this._startDe)}},{key:"containsPoint",value:function(r){var t=this.getLinearRing();if(!t.getEnvelopeInternal().contains(r)||!Pr.isInRing(r,t.getCoordinates()))return!1;for(var e=this._holes.iterator();e.hasNext();)if(e.next().containsPoint(r))return!1;return!0}},{key:"addHole",value:function(r){this._holes.add(r)}},{key:"isShell",value:function(){return null===this._shell}},{key:"getLabel",value:function(){return this._label}},{key:"getEdges",value:function(){return this._edges}},{key:"getMaxNodeDegree",value:function(){return this._maxNodeDegree<0&&this.computeMaxNodeDegree(),this._maxNodeDegree}},{key:"getShell",value:function(){return this._shell}},{key:"mergeLabel",value:function(){if(1===arguments.length){var r=arguments[0];this.mergeLabel(r,0),this.mergeLabel(r,1)}else if(2===arguments.length){var t=arguments[1],e=arguments[0].getLocation(t,H.RIGHT);if(e===S.NONE)return null;if(this._label.getLocation(t)===S.NONE)return this._label.setLocation(t,e),null}}},{key:"setShell",value:function(r){this._shell=r,null!==r&&r.addHole(this)}},{key:"toPolygon",value:function(r){for(var t=new Array(this._holes.size()).fill(null),e=0;e<this._holes.size();e++)t[e]=this._holes.get(e).getLinearRing();return r.createPolygon(this.getLinearRing(),t)}}],[{key:"constructor_",value:function(){if(this._startDe=null,this._maxNodeDegree=-1,this._edges=new mt,this._pts=new mt,this._label=new Ne(S.NONE),this._ring=null,this._isHole=null,this._shell=null,this._holes=new mt,this._geometryFactory=null,0!==arguments.length&&2===arguments.length){var r=arguments[0];this._geometryFactory=arguments[1],this.computePoints(r),this.computeRing()}}}]),mr=function(r){function t(){var e;return x(this,t),e=G(this,t),t.constructor_.apply(e,arguments),e}return at(t,r),c(t,[{key:"setEdgeRing",value:function(e,n){e.setMinEdgeRing(n)}},{key:"getNext",value:function(e){return e.getNextMin()}}],[{key:"constructor_",value:function(){Ln.constructor_.call(this,arguments[0],arguments[1])}}])}(Ln),Dn=function(r){function t(){var e;return x(this,t),e=G(this,t),t.constructor_.apply(e,arguments),e}return at(t,r),c(t,[{key:"buildMinimalRings",value:function(){var e=new mt,n=this._startDe;do{if(null===n.getMinEdgeRing()){var s=new mr(n,this._geometryFactory);e.add(s)}n=n.getNext()}while(n!==this._startDe);return e}},{key:"setEdgeRing",value:function(e,n){e.setEdgeRing(n)}},{key:"linkDirectedEdgesForMinimalEdgeRings",value:function(){var e=this._startDe;do{e.getNode().getEdges().linkMinimalDirectedEdges(this),e=e.getNext()}while(e!==this._startDe)}},{key:"getNext",value:function(e){return e.getNext()}}],[{key:"constructor_",value:function(){Ln.constructor_.call(this,arguments[0],arguments[1])}}])}(Ln),Lr=c(function r(){x(this,r),r.constructor_.apply(this,arguments)},[{key:"setVisited",value:function(r){this._isVisited=r}},{key:"setInResult",value:function(r){this._isInResult=r}},{key:"isCovered",value:function(){return this._isCovered}},{key:"isCoveredSet",value:function(){return this._isCoveredSet}},{key:"setLabel",value:function(r){this._label=r}},{key:"getLabel",value:function(){return this._label}},{key:"setCovered",value:function(r){this._isCovered=r,this._isCoveredSet=!0}},{key:"updateIM",value:function(r){bt.isTrue(this._label.getGeometryCount()>=2,"found partial label"),this.computeIM(r)}},{key:"isInResult",value:function(){return this._isInResult}},{key:"isVisited",value:function(){return this._isVisited}}],[{key:"constructor_",value:function(){this._label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,0!==arguments.length&&1===arguments.length&&(this._label=arguments[0])}}]),Jn=function(r){function t(){var e;return x(this,t),e=G(this,t),t.constructor_.apply(e,arguments),e}return at(t,r),c(t,[{key:"isIncidentEdgeInResult",value:function(){for(var e=this.getEdges().getEdges().iterator();e.hasNext();)if(e.next().getEdge().isInResult())return!0;return!1}},{key:"isIsolated",value:function(){return 1===this._label.getGeometryCount()}},{key:"getCoordinate",value:function(){return this._coord}},{key:"print",value:function(e){e.println("node "+this._coord+" lbl: "+this._label)}},{key:"computeIM",value:function(e){}},{key:"computeMergedLocation",value:function(e,n){var s=S.NONE;if(s=this._label.getLocation(n),!e.isNull(n)){var o=e.getLocation(n);s!==S.BOUNDARY&&(s=o)}return s}},{key:"setLabel",value:function(){if(2!==arguments.length||!Number.isInteger(arguments[1])||!Number.isInteger(arguments[0]))return pt(t,"setLabel",this,1).apply(this,arguments);var e=arguments[0],n=arguments[1];null===this._label?this._label=new Ne(e,n):this._label.setLocation(e,n)}},{key:"getEdges",value:function(){return this._edges}},{key:"mergeLabel",value:function(){if(arguments[0]instanceof t)this.mergeLabel(arguments[0]._label);else if(arguments[0]instanceof Ne)for(var n=arguments[0],s=0;s<2;s++){var o=this.computeMergedLocation(n,s);this._label.getLocation(s)===S.NONE&&this._label.setLocation(s,o)}}},{key:"add",value:function(e){this._edges.insert(e),e.setNode(this)}},{key:"setLabelBoundary",value:function(e){if(null===this._label)return null;var n=S.NONE;null!==this._label&&(n=this._label.getLocation(e)),this._label.setLocation(e,n===S.BOUNDARY?S.INTERIOR:S.BOUNDARY)}}],[{key:"constructor_",value:function(){this._coord=null,this._edges=null;var n=arguments[1];this._coord=arguments[0],this._edges=n,this._label=new Ne(0,S.NONE)}}])}(Lr),yr=function(r){function t(){return x(this,t),G(this,t,arguments)}return at(t,r),c(t)}(fi);function xn(r){return null==r?0:r.color}function qt(r){return null==r?null:r.parent}function He(r,t){null!==r&&(r.color=t)}function Fn(r){return null==r?null:r.left}function Un(r){return null==r?null:r.right}var gn=function(r){function t(){var e;return x(this,t),(e=G(this,t)).root_=null,e.size_=0,e}return at(t,r),c(t,[{key:"get",value:function(e){for(var n=this.root_;null!==n;){var s=e.compareTo(n.key);if(s<0)n=n.left;else{if(!(s>0))return n.value;n=n.right}}return null}},{key:"put",value:function(e,n){if(null===this.root_)return this.root_={key:e,value:n,left:null,right:null,parent:null,color:0,getValue:function(){return this.value},getKey:function(){return this.key}},this.size_=1,null;var s,o,h=this.root_;do{if(s=h,(o=e.compareTo(h.key))<0)h=h.left;else{if(!(o>0)){var g=h.value;return h.value=n,g}h=h.right}}while(null!==h);var y={key:e,left:null,right:null,value:n,parent:s,color:0,getValue:function(){return this.value},getKey:function(){return this.key}};return o<0?s.left=y:s.right=y,this.fixAfterInsertion(y),this.size_++,null}},{key:"fixAfterInsertion",value:function(e){var n;for(e.color=1;null!=e&&e!==this.root_&&1===e.parent.color;)qt(e)===Fn(qt(qt(e)))?1===xn(n=Un(qt(qt(e))))?(He(qt(e),0),He(n,0),He(qt(qt(e)),1),e=qt(qt(e))):(e===Un(qt(e))&&(e=qt(e),this.rotateLeft(e)),He(qt(e),0),He(qt(qt(e)),1),this.rotateRight(qt(qt(e)))):1===xn(n=Fn(qt(qt(e))))?(He(qt(e),0),He(n,0),He(qt(qt(e)),1),e=qt(qt(e))):(e===Fn(qt(e))&&(e=qt(e),this.rotateRight(e)),He(qt(e),0),He(qt(qt(e)),1),this.rotateLeft(qt(qt(e))));this.root_.color=0}},{key:"values",value:function(){var e=new mt,n=this.getFirstEntry();if(null!==n)for(e.add(n.value);null!==(n=t.successor(n));)e.add(n.value);return e}},{key:"entrySet",value:function(){var e=new kr,n=this.getFirstEntry();if(null!==n)for(e.add(n);null!==(n=t.successor(n));)e.add(n);return e}},{key:"rotateLeft",value:function(e){if(null!=e){var n=e.right;e.right=n.left,null!=n.left&&(n.left.parent=e),n.parent=e.parent,null==e.parent?this.root_=n:e.parent.left===e?e.parent.left=n:e.parent.right=n,n.left=e,e.parent=n}}},{key:"rotateRight",value:function(e){if(null!=e){var n=e.left;e.left=n.right,null!=n.right&&(n.right.parent=e),n.parent=e.parent,null==e.parent?this.root_=n:e.parent.right===e?e.parent.right=n:e.parent.left=n,n.right=e,e.parent=n}}},{key:"getFirstEntry",value:function(){var e=this.root_;if(null!=e)for(;null!=e.left;)e=e.left;return e}},{key:"size",value:function(){return this.size_}},{key:"containsKey",value:function(e){for(var n=this.root_;null!==n;){var s=e.compareTo(n.key);if(s<0)n=n.left;else{if(!(s>0))return!0;n=n.right}}return!1}}],[{key:"successor",value:function(e){var n;if(null===e)return null;if(null!==e.right){for(n=e.right;null!==n.left;)n=n.left;return n}n=e.parent;for(var s=e;null!==n&&s===n.right;)s=n,n=n.parent;return n}}])}(yr),qe=c(function r(){x(this,r),r.constructor_.apply(this,arguments)},[{key:"find",value:function(r){return this.nodeMap.get(r)}},{key:"addNode",value:function(){if(arguments[0]instanceof D){var r=arguments[0],t=this.nodeMap.get(r);return null===t&&(t=this.nodeFact.createNode(r),this.nodeMap.put(r,t)),t}if(arguments[0]instanceof Jn){var e=arguments[0],n=this.nodeMap.get(e.getCoordinate());return null===n?(this.nodeMap.put(e.getCoordinate(),e),e):(n.mergeLabel(e),n)}}},{key:"print",value:function(r){for(var t=this.iterator();t.hasNext();)t.next().print(r)}},{key:"iterator",value:function(){return this.nodeMap.values().iterator()}},{key:"values",value:function(){return this.nodeMap.values()}},{key:"getBoundaryNodes",value:function(r){for(var t=new mt,e=this.iterator();e.hasNext();){var n=e.next();n.getLabel().getLocation(r)===S.BOUNDARY&&t.add(n)}return t}},{key:"add",value:function(r){var t=r.getCoordinate();this.addNode(t).add(r)}}],[{key:"constructor_",value:function(){this.nodeMap=new gn,this.nodeFact=null,this.nodeFact=arguments[0]}}]),ye=function(){function r(){x(this,r)}return c(r,null,[{key:"isNorthern",value:function(t){return t===r.NE||t===r.NW}},{key:"isOpposite",value:function(t,e){return t!==e&&(t-e+4)%4==2}},{key:"commonHalfPlane",value:function(t,e){if(t===e)return t;if((t-e+4)%4==2)return-1;var n=t<e?t:e;return 0===n&&3===(t>e?t:e)?3:n}},{key:"isInHalfPlane",value:function(t,e){return e===r.SE?t===r.SE||t===r.SW:t===e||t===e+1}},{key:"quadrant",value:function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1];if(0===t&&0===e)throw new $("Cannot compute the quadrant for point ( "+t+", "+e+" )");return t>=0?e>=0?r.NE:r.SE:e>=0?r.NW:r.SW}if(arguments[0]instanceof D&&arguments[1]instanceof D){var n=arguments[0],s=arguments[1];if(s.x===n.x&&s.y===n.y)throw new $("Cannot compute the quadrant for two identical points "+n);return s.x>=n.x?s.y>=n.y?r.NE:r.SE:s.y>=n.y?r.NW:r.SW}}}])}();ye.NE=0,ye.NW=1,ye.SW=2,ye.SE=3;var Dr=function(){function r(){x(this,r),r.constructor_.apply(this,arguments)}return c(r,[{key:"compareDirection",value:function(t){return this._dx===t._dx&&this._dy===t._dy?0:this._quadrant>t._quadrant?1:this._quadrant<t._quadrant?-1:yt.index(t._p0,t._p1,this._p1)}},{key:"getDy",value:function(){return this._dy}},{key:"getCoordinate",value:function(){return this._p0}},{key:"setNode",value:function(t){this._node=t}},{key:"print",value:function(t){var e=Math.atan2(this._dy,this._dx),n=this.getClass().getName(),s=n.lastIndexOf("."),o=n.substring(s+1);t.print("  "+o+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+e+"   "+this._label)}},{key:"compareTo",value:function(t){return this.compareDirection(t)}},{key:"getDirectedCoordinate",value:function(){return this._p1}},{key:"getDx",value:function(){return this._dx}},{key:"getLabel",value:function(){return this._label}},{key:"getEdge",value:function(){return this._edge}},{key:"getQuadrant",value:function(){return this._quadrant}},{key:"getNode",value:function(){return this._node}},{key:"toString",value:function(){var t=Math.atan2(this._dy,this._dx),e=this.getClass().getName(),n=e.lastIndexOf(".");return"  "+e.substring(n+1)+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+t+"   "+this._label}},{key:"computeLabel",value:function(t){}},{key:"init",value:function(t,e){this._p0=t,this._p1=e,this._dx=e.x-t.x,this._dy=e.y-t.y,this._quadrant=ye.quadrant(this._dx,this._dy),bt.isTrue(!(0===this._dx&&0===this._dy),"EdgeEnd with identical endpoints found")}},{key:"interfaces_",get:function(){return[se]}}],[{key:"constructor_",value:function(){if(this._edge=null,this._label=null,this._node=null,this._p0=null,this._p1=null,this._dx=null,this._dy=null,this._quadrant=null,1===arguments.length)this._edge=arguments[0];else if(3===arguments.length)r.constructor_.call(this,arguments[0],arguments[1],arguments[2],null);else if(4===arguments.length){var h=arguments[1],g=arguments[2],y=arguments[3];r.constructor_.call(this,arguments[0]),this.init(h,g),this._label=y}}}])}(),Fr=function(r){function t(){var e;return x(this,t),e=G(this,t),t.constructor_.apply(e,arguments),e}return at(t,r),c(t,[{key:"getNextMin",value:function(){return this._nextMin}},{key:"getDepth",value:function(e){return this._depth[e]}},{key:"setVisited",value:function(e){this._isVisited=e}},{key:"computeDirectedLabel",value:function(){this._label=new Ne(this._edge.getLabel()),this._isForward||this._label.flip()}},{key:"getNext",value:function(){return this._next}},{key:"setDepth",value:function(e,n){if(-999!==this._depth[e]&&this._depth[e]!==n)throw new B("assigned depths do not match",this.getCoordinate());this._depth[e]=n}},{key:"isInteriorAreaEdge",value:function(){for(var e=!0,n=0;n<2;n++)this._label.isArea(n)&&this._label.getLocation(n,H.LEFT)===S.INTERIOR&&this._label.getLocation(n,H.RIGHT)===S.INTERIOR||(e=!1);return e}},{key:"setNextMin",value:function(e){this._nextMin=e}},{key:"print",value:function(e){pt(t,"print",this,1).call(this,e),e.print(" "+this._depth[H.LEFT]+"/"+this._depth[H.RIGHT]),e.print(" ("+this.getDepthDelta()+")"),this._isInResult&&e.print(" inResult")}},{key:"setMinEdgeRing",value:function(e){this._minEdgeRing=e}},{key:"isLineEdge",value:function(){var e=this._label.isLine(0)||this._label.isLine(1),n=!this._label.isArea(0)||this._label.allPositionsEqual(0,S.EXTERIOR),s=!this._label.isArea(1)||this._label.allPositionsEqual(1,S.EXTERIOR);return e&&n&&s}},{key:"setEdgeRing",value:function(e){this._edgeRing=e}},{key:"getMinEdgeRing",value:function(){return this._minEdgeRing}},{key:"getDepthDelta",value:function(){var e=this._edge.getDepthDelta();return this._isForward||(e=-e),e}},{key:"setInResult",value:function(e){this._isInResult=e}},{key:"getSym",value:function(){return this._sym}},{key:"isForward",value:function(){return this._isForward}},{key:"getEdge",value:function(){return this._edge}},{key:"printEdge",value:function(e){this.print(e),e.print(" "),this._isForward?this._edge.print(e):this._edge.printReverse(e)}},{key:"setSym",value:function(e){this._sym=e}},{key:"setVisitedEdge",value:function(e){this.setVisited(e),this._sym.setVisited(e)}},{key:"setEdgeDepths",value:function(e,n){var s=this.getEdge().getDepthDelta();this._isForward||(s=-s);var o=1;e===H.LEFT&&(o=-1);var h=H.opposite(e),g=n+s*o;this.setDepth(e,n),this.setDepth(h,g)}},{key:"getEdgeRing",value:function(){return this._edgeRing}},{key:"isInResult",value:function(){return this._isInResult}},{key:"setNext",value:function(e){this._next=e}},{key:"isVisited",value:function(){return this._isVisited}}],[{key:"constructor_",value:function(){this._isForward=null,this._isInResult=!1,this._isVisited=!1,this._sym=null,this._next=null,this._nextMin=null,this._edgeRing=null,this._minEdgeRing=null,this._depth=[0,-999,-999];var e=arguments[0],n=arguments[1];if(Dr.constructor_.call(this,e),this._isForward=n,n)this.init(e.getCoordinate(0),e.getCoordinate(1));else{var s=e.getNumPoints()-1;this.init(e.getCoordinate(s),e.getCoordinate(s-1))}this.computeDirectedLabel()}},{key:"depthFactor",value:function(e,n){return e===S.EXTERIOR&&n===S.INTERIOR?1:e===S.INTERIOR&&n===S.EXTERIOR?-1:0}}])}(Dr),tr=c(function r(){x(this,r)},[{key:"createNode",value:function(r){return new Jn(r,null)}}]),dn=c(function r(){x(this,r),r.constructor_.apply(this,arguments)},[{key:"printEdges",value:function(r){r.println("Edges:");for(var t=0;t<this._edges.size();t++){r.println("edge "+t+":");var e=this._edges.get(t);e.print(r),e.eiList.print(r)}}},{key:"find",value:function(r){return this._nodes.find(r)}},{key:"addNode",value:function(){return arguments[0]instanceof Jn||arguments[0]instanceof D?this._nodes.addNode(arguments[0]):void 0}},{key:"getNodeIterator",value:function(){return this._nodes.iterator()}},{key:"linkResultDirectedEdges",value:function(){for(var r=this._nodes.iterator();r.hasNext();)r.next().getEdges().linkResultDirectedEdges()}},{key:"debugPrintln",value:function(r){Be.out.println(r)}},{key:"isBoundaryNode",value:function(r,t){var e=this._nodes.find(t);if(null===e)return!1;var n=e.getLabel();return null!==n&&n.getLocation(r)===S.BOUNDARY}},{key:"linkAllDirectedEdges",value:function(){for(var r=this._nodes.iterator();r.hasNext();)r.next().getEdges().linkAllDirectedEdges()}},{key:"matchInSameDirection",value:function(r,t,e,n){return!!r.equals(e)&&yt.index(r,t,n)===yt.COLLINEAR&&ye.quadrant(r,t)===ye.quadrant(e,n)}},{key:"getEdgeEnds",value:function(){return this._edgeEndList}},{key:"debugPrint",value:function(r){Be.out.print(r)}},{key:"getEdgeIterator",value:function(){return this._edges.iterator()}},{key:"findEdgeInSameDirection",value:function(r,t){for(var e=0;e<this._edges.size();e++){var n=this._edges.get(e),s=n.getCoordinates();if(this.matchInSameDirection(r,t,s[0],s[1])||this.matchInSameDirection(r,t,s[s.length-1],s[s.length-2]))return n}return null}},{key:"insertEdge",value:function(r){this._edges.add(r)}},{key:"findEdgeEnd",value:function(r){for(var t=this.getEdgeEnds().iterator();t.hasNext();){var e=t.next();if(e.getEdge()===r)return e}return null}},{key:"addEdges",value:function(r){for(var t=r.iterator();t.hasNext();){var e=t.next();this._edges.add(e);var n=new Fr(e,!0),s=new Fr(e,!1);n.setSym(s),s.setSym(n),this.add(n),this.add(s)}}},{key:"add",value:function(r){this._nodes.add(r),this._edgeEndList.add(r)}},{key:"getNodes",value:function(){return this._nodes.values()}},{key:"findEdge",value:function(r,t){for(var e=0;e<this._edges.size();e++){var n=this._edges.get(e),s=n.getCoordinates();if(r.equals(s[0])&&t.equals(s[1]))return n}return null}}],[{key:"constructor_",value:function(){this._edges=new mt,this._nodes=null,this._edgeEndList=new mt,0===arguments.length?this._nodes=new qe(new tr):1===arguments.length&&(this._nodes=new qe(arguments[0]))}},{key:"linkResultDirectedEdges",value:function(r){for(var t=r.iterator();t.hasNext();)t.next().getEdges().linkResultDirectedEdges()}}]),Nn=function(){function r(){x(this,r),r.constructor_.apply(this,arguments)}return c(r,[{key:"sortShellsAndHoles",value:function(t,e,n){for(var s=t.iterator();s.hasNext();){var o=s.next();o.isHole()?n.add(o):e.add(o)}}},{key:"computePolygons",value:function(t){for(var e=new mt,n=t.iterator();n.hasNext();){var s=n.next().toPolygon(this._geometryFactory);e.add(s)}return e}},{key:"placeFreeHoles",value:function(t,e){for(var n=e.iterator();n.hasNext();){var s=n.next();if(null===s.getShell()){var o=r.findEdgeRingContaining(s,t);if(null===o)throw new B("unable to assign hole to a shell",s.getCoordinate(0));s.setShell(o)}}}},{key:"buildMinimalEdgeRings",value:function(t,e,n){for(var s=new mt,o=t.iterator();o.hasNext();){var h=o.next();if(h.getMaxNodeDegree()>2){h.linkDirectedEdgesForMinimalEdgeRings();var g=h.buildMinimalRings(),y=this.findShell(g);null!==y?(this.placePolygonHoles(y,g),e.add(y)):n.addAll(g)}else s.add(h)}return s}},{key:"buildMaximalEdgeRings",value:function(t){for(var e=new mt,n=t.iterator();n.hasNext();){var s=n.next();if(s.isInResult()&&s.getLabel().isArea()&&null===s.getEdgeRing()){var o=new Dn(s,this._geometryFactory);e.add(o),o.setInResult()}}return e}},{key:"placePolygonHoles",value:function(t,e){for(var n=e.iterator();n.hasNext();){var s=n.next();s.isHole()&&s.setShell(t)}}},{key:"getPolygons",value:function(){return this.computePolygons(this._shellList)}},{key:"findShell",value:function(t){for(var e=0,n=null,s=t.iterator();s.hasNext();){var o=s.next();o.isHole()||(n=o,e++)}return bt.isTrue(e<=1,"found two shells in MinimalEdgeRing list"),n}},{key:"add",value:function(){if(1===arguments.length){var t=arguments[0];this.add(t.getEdgeEnds(),t.getNodes())}else if(2===arguments.length){var e=arguments[0];dn.linkResultDirectedEdges(arguments[1]);var s=this.buildMaximalEdgeRings(e),o=new mt,h=this.buildMinimalEdgeRings(s,this._shellList,o);this.sortShellsAndHoles(h,this._shellList,o),this.placeFreeHoles(this._shellList,o)}}}],[{key:"constructor_",value:function(){this._geometryFactory=null,this._shellList=new mt,this._geometryFactory=arguments[0]}},{key:"findEdgeRingContaining",value:function(t,e){for(var n=t.getLinearRing(),s=n.getEnvelopeInternal(),o=n.getCoordinateN(0),h=null,g=null,y=e.iterator();y.hasNext();){var k=y.next(),R=k.getLinearRing(),P=R.getEnvelopeInternal();if(!P.equals(s)&&P.contains(s)){o=oe.ptNotInList(n.getCoordinates(),R.getCoordinates());var z=!1;Pr.isInRing(o,R.getCoordinates())&&(z=!0),z&&(null===h||g.contains(P))&&(g=(h=k).getLinearRing().getEnvelopeInternal())}}return h}}])}(),Ve=c(function r(){x(this,r)},[{key:"getBounds",value:function(){}}]),Ce=c(function r(){x(this,r),r.constructor_.apply(this,arguments)},[{key:"getItem",value:function(){return this._item}},{key:"getBounds",value:function(){return this._bounds}},{key:"interfaces_",get:function(){return[Ve,ce]}}],[{key:"constructor_",value:function(){this._bounds=null,this._item=null;var t=arguments[1];this._bounds=arguments[0],this._item=t}}]),rn=c(function r(){x(this,r),r.constructor_.apply(this,arguments)},[{key:"poll",value:function(){if(this.isEmpty())return null;var r=this._items.get(1);return this._items.set(1,this._items.get(this._size)),this._size-=1,this.reorder(1),r}},{key:"size",value:function(){return this._size}},{key:"reorder",value:function(r){for(var t=null,e=this._items.get(r);2*r<=this._size&&((t=2*r)!==this._size&&this._items.get(t+1).compareTo(this._items.get(t))<0&&t++,this._items.get(t).compareTo(e)<0);r=t)this._items.set(r,this._items.get(t));this._items.set(r,e)}},{key:"clear",value:function(){this._size=0,this._items.clear()}},{key:"peek",value:function(){return this.isEmpty()?null:this._items.get(1)}},{key:"isEmpty",value:function(){return 0===this._size}},{key:"add",value:function(r){this._items.add(null),this._size+=1;var t=this._size;for(this._items.set(0,r);r.compareTo(this._items.get(Math.trunc(t/2)))<0;t/=2)this._items.set(t,this._items.get(Math.trunc(t/2)));this._items.set(t,r)}}],[{key:"constructor_",value:function(){this._size=null,this._items=null,this._size=0,this._items=new mt,this._items.add(null)}}]),Ur=c(function r(){x(this,r)},[{key:"insert",value:function(r,t){}},{key:"remove",value:function(r,t){}},{key:"query",value:function(){}}]),Ie=c(function r(){x(this,r),r.constructor_.apply(this,arguments)},[{key:"getLevel",value:function(){return this._level}},{key:"size",value:function(){return this._childBoundables.size()}},{key:"getChildBoundables",value:function(){return this._childBoundables}},{key:"addChildBoundable",value:function(r){bt.isTrue(null===this._bounds),this._childBoundables.add(r)}},{key:"isEmpty",value:function(){return this._childBoundables.isEmpty()}},{key:"getBounds",value:function(){return null===this._bounds&&(this._bounds=this.computeBounds()),this._bounds}},{key:"interfaces_",get:function(){return[Ve,ce]}}],[{key:"constructor_",value:function(){this._childBoundables=new mt,this._bounds=null,this._level=null,0!==arguments.length&&1===arguments.length&&(this._level=arguments[0])}}]),Ze={reverseOrder:function(){return{compare:function(r,t){return t.compareTo(r)}}},min:function(r){return Ze.sort(r),r.get(0)},sort:function(r,t){var e=r.toArray();t?On.sort(e,t):On.sort(e);for(var n=r.iterator(),s=0,o=e.length;s<o;s++)n.next(),n.set(e[s])},singletonList:function(r){var t=new mt;return t.add(r),t}},ie=function(){function r(){x(this,r)}return c(r,null,[{key:"maxDistance",value:function(t,e,n,s,o,h,g,y){var k=r.distance(t,e,o,h);return k=Math.max(k,r.distance(t,e,g,y)),k=Math.max(k,r.distance(n,s,o,h)),Math.max(k,r.distance(n,s,g,y))}},{key:"distance",value:function(t,e,n,s){var o=n-t,h=s-e;return Math.sqrt(o*o+h*h)}},{key:"maximumDistance",value:function(t,e){var n=Math.min(t.getMinX(),e.getMinX()),s=Math.min(t.getMinY(),e.getMinY()),o=Math.max(t.getMaxX(),e.getMaxX()),h=Math.max(t.getMaxY(),e.getMaxY());return r.distance(n,s,o,h)}},{key:"minMaxDistance",value:function(t,e){var n=t.getMinX(),s=t.getMinY(),o=t.getMaxX(),h=t.getMaxY(),g=e.getMinX(),y=e.getMinY(),k=e.getMaxX(),R=e.getMaxY(),P=r.maxDistance(n,s,n,h,g,y,g,R);return P=Math.min(P,r.maxDistance(n,s,n,h,g,y,k,y)),P=Math.min(P,r.maxDistance(n,s,n,h,k,R,g,R)),P=Math.min(P,r.maxDistance(n,s,n,h,k,R,k,y)),P=Math.min(P,r.maxDistance(n,s,o,s,g,y,g,R)),P=Math.min(P,r.maxDistance(n,s,o,s,g,y,k,y)),P=Math.min(P,r.maxDistance(n,s,o,s,k,R,g,R)),P=Math.min(P,r.maxDistance(n,s,o,s,k,R,k,y)),P=Math.min(P,r.maxDistance(o,h,n,h,g,y,g,R)),P=Math.min(P,r.maxDistance(o,h,n,h,g,y,k,y)),P=Math.min(P,r.maxDistance(o,h,n,h,k,R,g,R)),P=Math.min(P,r.maxDistance(o,h,n,h,k,R,k,y)),P=Math.min(P,r.maxDistance(o,h,o,s,g,y,g,R)),P=Math.min(P,r.maxDistance(o,h,o,s,g,y,k,y)),P=Math.min(P,r.maxDistance(o,h,o,s,k,R,g,R)),Math.min(P,r.maxDistance(o,h,o,s,k,R,k,y))}}])}(),fe=function(){function r(){x(this,r),r.constructor_.apply(this,arguments)}return c(r,[{key:"maximumDistance",value:function(){return ie.maximumDistance(this._boundable1.getBounds(),this._boundable2.getBounds())}},{key:"expandToQueue",value:function(t,e){var n=r.isComposite(this._boundable1),s=r.isComposite(this._boundable2);if(n&&s)return r.area(this._boundable1)>r.area(this._boundable2)?(this.expand(this._boundable1,this._boundable2,!1,t,e),null):(this.expand(this._boundable2,this._boundable1,!0,t,e),null);if(n)return this.expand(this._boundable1,this._boundable2,!1,t,e),null;if(s)return this.expand(this._boundable2,this._boundable1,!0,t,e),null;throw new $("neither boundable is composite")}},{key:"isLeaves",value:function(){return!(r.isComposite(this._boundable1)||r.isComposite(this._boundable2))}},{key:"compareTo",value:function(t){return this._distance<t._distance?-1:this._distance>t._distance?1:0}},{key:"expand",value:function(t,e,n,s,o){for(var h=t.getChildBoundables().iterator();h.hasNext();){var g=h.next(),y=null;(y=n?new r(e,g,this._itemDistance):new r(g,e,this._itemDistance)).getDistance()<o&&s.add(y)}}},{key:"getBoundable",value:function(t){return 0===t?this._boundable1:this._boundable2}},{key:"getDistance",value:function(){return this._distance}},{key:"distance",value:function(){return this.isLeaves()?this._itemDistance.distance(this._boundable1,this._boundable2):this._boundable1.getBounds().distance(this._boundable2.getBounds())}},{key:"interfaces_",get:function(){return[se]}}],[{key:"constructor_",value:function(){this._boundable1=null,this._boundable2=null,this._distance=null,this._itemDistance=null;var e=arguments[1],n=arguments[2];this._boundable1=arguments[0],this._boundable2=e,this._itemDistance=n,this._distance=this.distance()}},{key:"area",value:function(t){return t.getBounds().getArea()}},{key:"isComposite",value:function(t){return t instanceof Ie}}])}(),Rt=c(function r(){x(this,r)},[{key:"visitItem",value:function(r){}}]),p=function(){function r(){x(this,r),r.constructor_.apply(this,arguments)}return c(r,[{key:"queryInternal",value:function(){if(Ct(arguments[2],Rt)&&arguments[0]instanceof Object&&arguments[1]instanceof Ie)for(var t=arguments[0],e=arguments[2],n=arguments[1].getChildBoundables(),s=0;s<n.size();s++){var o=n.get(s);this.getIntersectsOp().intersects(o.getBounds(),t)&&(o instanceof Ie?this.queryInternal(t,o,e):o instanceof Ce?e.visitItem(o.getItem()):bt.shouldNeverReachHere())}else if(Ct(arguments[2],vn)&&arguments[0]instanceof Object&&arguments[1]instanceof Ie)for(var h=arguments[0],g=arguments[2],y=arguments[1].getChildBoundables(),k=0;k<y.size();k++){var R=y.get(k);this.getIntersectsOp().intersects(R.getBounds(),h)&&(R instanceof Ie?this.queryInternal(h,R,g):R instanceof Ce?g.add(R.getItem()):bt.shouldNeverReachHere())}}},{key:"getNodeCapacity",value:function(){return this._nodeCapacity}},{key:"lastNode",value:function(t){return t.get(t.size()-1)}},{key:"size",value:function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.size(this._root));if(1===arguments.length){for(var t=0,e=arguments[0].getChildBoundables().iterator();e.hasNext();){var n=e.next();n instanceof Ie?t+=this.size(n):n instanceof Ce&&(t+=1)}return t}}},{key:"removeItem",value:function(t,e){for(var n=null,s=t.getChildBoundables().iterator();s.hasNext();){var o=s.next();o instanceof Ce&&o.getItem()===e&&(n=o)}return null!==n&&(t.getChildBoundables().remove(n),!0)}},{key:"itemsTree",value:function(){if(0===arguments.length){this.build();var t=this.itemsTree(this._root);return null===t?new mt:t}if(1===arguments.length){for(var e=arguments[0],n=new mt,s=e.getChildBoundables().iterator();s.hasNext();){var o=s.next();if(o instanceof Ie){var h=this.itemsTree(o);null!==h&&n.add(h)}else o instanceof Ce?n.add(o.getItem()):bt.shouldNeverReachHere()}return n.size()<=0?null:n}}},{key:"insert",value:function(t,e){bt.isTrue(!this._built,"Cannot insert items into an STR packed R-tree after it has been built."),this._itemBoundables.add(new Ce(t,e))}},{key:"boundablesAtLevel",value:function(){if(1===arguments.length){var t=arguments[0],e=new mt;return this.boundablesAtLevel(t,this._root,e),e}if(3===arguments.length){var n=arguments[0],s=arguments[1],o=arguments[2];if(bt.isTrue(n>-2),s.getLevel()===n)return o.add(s),null;for(var h=s.getChildBoundables().iterator();h.hasNext();){var g=h.next();g instanceof Ie?this.boundablesAtLevel(n,g,o):(bt.isTrue(g instanceof Ce),-1===n&&o.add(g))}return null}}},{key:"query",value:function(){if(1===arguments.length){var t=arguments[0];this.build();var e=new mt;return this.isEmpty()||this.getIntersectsOp().intersects(this._root.getBounds(),t)&&this.queryInternal(t,this._root,e),e}if(2===arguments.length){var n=arguments[0],s=arguments[1];if(this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this._root.getBounds(),n)&&this.queryInternal(n,this._root,s)}}},{key:"build",value:function(){if(this._built)return null;this._root=this._itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this._itemBoundables,-1),this._itemBoundables=null,this._built=!0}},{key:"getRoot",value:function(){return this.build(),this._root}},{key:"remove",value:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return this.build(),!!this.getIntersectsOp().intersects(this._root.getBounds(),t)&&this.remove(t,this._root,e)}if(3===arguments.length){var n=arguments[0],s=arguments[1],o=arguments[2],h=this.removeItem(s,o);if(h)return!0;for(var g=null,y=s.getChildBoundables().iterator();y.hasNext();){var k=y.next();if(this.getIntersectsOp().intersects(k.getBounds(),n)&&k instanceof Ie&&(h=this.remove(n,k,o))){g=k;break}}return null!==g&&g.getChildBoundables().isEmpty()&&s.getChildBoundables().remove(g),h}}},{key:"createHigherLevels",value:function(t,e){bt.isTrue(!t.isEmpty());var n=this.createParentBoundables(t,e+1);return 1===n.size()?n.get(0):this.createHigherLevels(n,e+1)}},{key:"depth",value:function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.depth(this._root));if(1===arguments.length){for(var t=0,e=arguments[0].getChildBoundables().iterator();e.hasNext();){var n=e.next();if(n instanceof Ie){var s=this.depth(n);s>t&&(t=s)}}return t+1}}},{key:"createParentBoundables",value:function(t,e){bt.isTrue(!t.isEmpty());var n=new mt;n.add(this.createNode(e));var s=new mt(t);Ze.sort(s,this.getComparator());for(var o=s.iterator();o.hasNext();){var h=o.next();this.lastNode(n).getChildBoundables().size()===this.getNodeCapacity()&&n.add(this.createNode(e)),this.lastNode(n).addChildBoundable(h)}return n}},{key:"isEmpty",value:function(){return this._built?this._root.isEmpty():this._itemBoundables.isEmpty()}},{key:"interfaces_",get:function(){return[ce]}}],[{key:"constructor_",value:function(){if(this._root=null,this._built=!1,this._itemBoundables=new mt,this._nodeCapacity=null,0===arguments.length)r.constructor_.call(this,r.DEFAULT_NODE_CAPACITY);else if(1===arguments.length){var t=arguments[0];bt.isTrue(t>1,"Node capacity must be greater than 1"),this._nodeCapacity=t}}},{key:"compareDoubles",value:function(t,e){return t>e?1:t<e?-1:0}}])}();p.IntersectsOp=function(){},p.DEFAULT_NODE_CAPACITY=10;var m=c(function r(){x(this,r)},[{key:"distance",value:function(r,t){}}]),v=function(r){function t(){var e;return x(this,t),e=G(this,t),t.constructor_.apply(e,arguments),e}return at(t,r),c(t,[{key:"createParentBoundablesFromVerticalSlices",value:function(e,n){bt.isTrue(e.length>0);for(var s=new mt,o=0;o<e.length;o++)s.addAll(this.createParentBoundablesFromVerticalSlice(e[o],n));return s}},{key:"nearestNeighbourK",value:function(){if(2===arguments.length)return this.nearestNeighbourK(arguments[0],ht.POSITIVE_INFINITY,arguments[1]);if(3===arguments.length){var s=arguments[0],o=arguments[2],h=arguments[1],g=new rn;g.add(s);for(var y=new rn;!g.isEmpty()&&h>=0;){var k=g.poll(),R=k.getDistance();if(R>=h)break;k.isLeaves()?y.size()<o?y.add(k):(y.peek().getDistance()>R&&(y.poll(),y.add(k)),h=y.peek().getDistance()):k.expandToQueue(g,h)}return t.getItems(y)}}},{key:"createNode",value:function(e){return new E(e)}},{key:"size",value:function(){return 0===arguments.length?pt(t,"size",this,1).call(this):pt(t,"size",this,1).apply(this,arguments)}},{key:"insert",value:function(){if(!(2===arguments.length&&arguments[1]instanceof Object&&arguments[0]instanceof te))return pt(t,"insert",this,1).apply(this,arguments);var e=arguments[0],n=arguments[1];if(e.isNull())return null;pt(t,"insert",this,1).call(this,e,n)}},{key:"getIntersectsOp",value:function(){return t.intersectsOp}},{key:"verticalSlices",value:function(e,n){for(var s=Math.trunc(Math.ceil(e.size()/n)),o=new Array(n).fill(null),h=e.iterator(),g=0;g<n;g++){o[g]=new mt;for(var y=0;h.hasNext()&&y<s;){var k=h.next();o[g].add(k),y++}}return o}},{key:"query",value:function(){if(1===arguments.length){var e=arguments[0];return pt(t,"query",this,1).call(this,e)}if(2===arguments.length){var n=arguments[0],s=arguments[1];pt(t,"query",this,1).call(this,n,s)}}},{key:"getComparator",value:function(){return t.yComparator}},{key:"createParentBoundablesFromVerticalSlice",value:function(e,n){return pt(t,"createParentBoundables",this,1).call(this,e,n)}},{key:"remove",value:function(){if(2===arguments.length&&arguments[1]instanceof Object&&arguments[0]instanceof te){var e=arguments[0],n=arguments[1];return pt(t,"remove",this,1).call(this,e,n)}return pt(t,"remove",this,1).apply(this,arguments)}},{key:"depth",value:function(){return 0===arguments.length?pt(t,"depth",this,1).call(this):pt(t,"depth",this,1).apply(this,arguments)}},{key:"createParentBoundables",value:function(e,n){bt.isTrue(!e.isEmpty());var s=Math.trunc(Math.ceil(e.size()/this.getNodeCapacity())),o=new mt(e);Ze.sort(o,t.xComparator);var h=this.verticalSlices(o,Math.trunc(Math.ceil(Math.sqrt(s))));return this.createParentBoundablesFromVerticalSlices(h,n)}},{key:"nearestNeighbour",value:function(){if(1===arguments.length){if(Ct(arguments[0],m)){var e=arguments[0];if(this.isEmpty())return null;var n=new fe(this.getRoot(),this.getRoot(),e);return this.nearestNeighbour(n)}if(arguments[0]instanceof fe){var s=arguments[0],o=ht.POSITIVE_INFINITY,h=null,g=new rn;for(g.add(s);!g.isEmpty()&&o>0;){var y=g.poll(),k=y.getDistance();if(k>=o)break;y.isLeaves()?(o=k,h=y):y.expandToQueue(g,o)}return null===h?null:[h.getBoundable(0).getItem(),h.getBoundable(1).getItem()]}}else{if(2===arguments.length){var R=arguments[0],P=arguments[1];if(this.isEmpty()||R.isEmpty())return null;var z=new fe(this.getRoot(),R.getRoot(),P);return this.nearestNeighbour(z)}if(3===arguments.length){var K=arguments[2],ot=new Ce(arguments[0],arguments[1]),gt=new fe(this.getRoot(),ot,K);return this.nearestNeighbour(gt)[0]}if(4===arguments.length){var Ht=arguments[2],Qt=arguments[3],ne=new Ce(arguments[0],arguments[1]),ke=new fe(this.getRoot(),ne,Ht);return this.nearestNeighbourK(ke,Qt)}}}},{key:"isWithinDistance",value:function(){if(2===arguments.length){var e=arguments[0],n=arguments[1],s=ht.POSITIVE_INFINITY,o=new rn;for(o.add(e);!o.isEmpty();){var h=o.poll(),g=h.getDistance();if(g>n)return!1;if(h.maximumDistance()<=n)return!0;if(h.isLeaves()){if((s=g)<=n)return!0}else h.expandToQueue(o,s)}return!1}if(3===arguments.length){var y=arguments[0],k=arguments[1],R=arguments[2],P=new fe(this.getRoot(),y.getRoot(),k);return this.isWithinDistance(P,R)}}},{key:"interfaces_",get:function(){return[Ur,ce]}}],[{key:"constructor_",value:function(){0===arguments.length?t.constructor_.call(this,t.DEFAULT_NODE_CAPACITY):1===arguments.length&&p.constructor_.call(this,arguments[0])}},{key:"centreX",value:function(e){return t.avg(e.getMinX(),e.getMaxX())}},{key:"avg",value:function(e,n){return(e+n)/2}},{key:"getItems",value:function(e){for(var n=new Array(e.size()).fill(null),s=0;!e.isEmpty();){var o=e.poll();n[s]=o.getBoundable(0).getItem(),s++}return n}},{key:"centreY",value:function(e){return t.avg(e.getMinY(),e.getMaxY())}}])}(p),E=function(r){function t(){var e;return x(this,t),e=G(this,t),t.constructor_.apply(e,arguments),e}return at(t,r),c(t,[{key:"computeBounds",value:function(){for(var e=null,n=this.getChildBoundables().iterator();n.hasNext();){var s=n.next();null===e?e=new te(s.getBounds()):e.expandToInclude(s.getBounds())}return e}}],[{key:"constructor_",value:function(){Ie.constructor_.call(this,arguments[0])}}])}(Ie);v.STRtreeNode=E,v.xComparator=new(c(function r(){x(this,r)},[{key:"interfaces_",get:function(){return[ur]}},{key:"compare",value:function(r,t){return p.compareDoubles(v.centreX(r.getBounds()),v.centreX(t.getBounds()))}}])),v.yComparator=new(c(function r(){x(this,r)},[{key:"interfaces_",get:function(){return[ur]}},{key:"compare",value:function(r,t){return p.compareDoubles(v.centreY(r.getBounds()),v.centreY(t.getBounds()))}}])),v.intersectsOp=new(c(function r(){x(this,r)},[{key:"interfaces_",get:function(){return[IntersectsOp]}},{key:"intersects",value:function(r,t){return r.intersects(t)}}])),v.DEFAULT_NODE_CAPACITY=10;var I=function(){function r(){x(this,r)}return c(r,null,[{key:"relativeSign",value:function(t,e){return t<e?-1:t>e?1:0}},{key:"compare",value:function(t,e,n){if(e.equals2D(n))return 0;var s=r.relativeSign(e.x,n.x),o=r.relativeSign(e.y,n.y);switch(t){case 0:return r.compareValue(s,o);case 1:return r.compareValue(o,s);case 2:return r.compareValue(o,-s);case 3:return r.compareValue(-s,o);case 4:return r.compareValue(-s,-o);case 5:return r.compareValue(-o,-s);case 6:return r.compareValue(-o,s);case 7:return r.compareValue(s,-o)}return bt.shouldNeverReachHere("invalid octant value"),0}},{key:"compareValue",value:function(t,e){return t<0?-1:t>0?1:e<0?-1:e>0?1:0}}])}(),M=c(function r(){x(this,r),r.constructor_.apply(this,arguments)},[{key:"getCoordinate",value:function(){return this.coord}},{key:"print",value:function(r){r.print(this.coord),r.print(" seg # = "+this.segmentIndex)}},{key:"compareTo",value:function(r){var t=r;return this.segmentIndex<t.segmentIndex?-1:this.segmentIndex>t.segmentIndex?1:this.coord.equals2D(t.coord)?0:this._isInterior?t._isInterior?I.compare(this._segmentOctant,this.coord,t.coord):1:-1}},{key:"isEndPoint",value:function(r){return 0===this.segmentIndex&&!this._isInterior||this.segmentIndex===r}},{key:"toString",value:function(){return this.segmentIndex+":"+this.coord.toString()}},{key:"isInterior",value:function(){return this._isInterior}},{key:"interfaces_",get:function(){return[se]}}],[{key:"constructor_",value:function(){this._segString=null,this.coord=null,this.segmentIndex=null,this._segmentOctant=null,this._isInterior=null;var r=arguments[0],t=arguments[1],e=arguments[2],n=arguments[3];this._segString=r,this.coord=new D(t),this.segmentIndex=e,this._segmentOctant=n,this._isInterior=!t.equals2D(r.getCoordinate(e))}}]),A=c(function r(){x(this,r)},[{key:"hasNext",value:function(){}},{key:"next",value:function(){}},{key:"remove",value:function(){}}]),q=c(function r(){x(this,r),r.constructor_.apply(this,arguments)},[{key:"getSplitCoordinates",value:function(){var r=new Mn;this.addEndpoints();for(var t=this.iterator(),e=t.next();t.hasNext();){var n=t.next();this.addEdgeCoordinates(e,n,r),e=n}return r.toCoordinateArray()}},{key:"addCollapsedNodes",value:function(){var r=new mt;this.findCollapsesFromInsertedNodes(r),this.findCollapsesFromExistingVertices(r);for(var t=r.iterator();t.hasNext();){var e=t.next().intValue();this.add(this._edge.getCoordinate(e),e)}}},{key:"createSplitEdgePts",value:function(r,t){var e=t.segmentIndex-r.segmentIndex+2;if(2===e)return[new D(r.coord),new D(t.coord)];var n=this._edge.getCoordinate(t.segmentIndex),s=t.isInterior()||!t.coord.equals2D(n);s||e--;var o=new Array(e).fill(null),h=0;o[h++]=new D(r.coord);for(var g=r.segmentIndex+1;g<=t.segmentIndex;g++)o[h++]=this._edge.getCoordinate(g);return s&&(o[h]=new D(t.coord)),o}},{key:"print",value:function(r){r.println("Intersections:");for(var t=this.iterator();t.hasNext();)t.next().print(r)}},{key:"findCollapsesFromExistingVertices",value:function(r){for(var t=0;t<this._edge.size()-2;t++){var e=this._edge.getCoordinate(t);this._edge.getCoordinate(t+1);var n=this._edge.getCoordinate(t+2);e.equals2D(n)&&r.add(En.valueOf(t+1))}}},{key:"addEdgeCoordinates",value:function(r,t,e){var n=this.createSplitEdgePts(r,t);e.add(n,!1)}},{key:"iterator",value:function(){return this._nodeMap.values().iterator()}},{key:"addSplitEdges",value:function(r){this.addEndpoints(),this.addCollapsedNodes();for(var t=this.iterator(),e=t.next();t.hasNext();){var n=t.next(),s=this.createSplitEdge(e,n);r.add(s),e=n}}},{key:"findCollapseIndex",value:function(r,t,e){if(!r.coord.equals2D(t.coord))return!1;var n=t.segmentIndex-r.segmentIndex;return t.isInterior()||n--,1===n&&(e[0]=r.segmentIndex+1,!0)}},{key:"findCollapsesFromInsertedNodes",value:function(r){for(var t=new Array(1).fill(null),e=this.iterator(),n=e.next();e.hasNext();){var s=e.next();this.findCollapseIndex(n,s,t)&&r.add(En.valueOf(t[0])),n=s}}},{key:"getEdge",value:function(){return this._edge}},{key:"addEndpoints",value:function(){var r=this._edge.size()-1;this.add(this._edge.getCoordinate(0),0),this.add(this._edge.getCoordinate(r),r)}},{key:"createSplitEdge",value:function(r,t){var e=this.createSplitEdgePts(r,t);return new ct(e,this._edge.getData())}},{key:"add",value:function(r,t){var e=new M(this._edge,r,t,this._edge.getSegmentOctant(t)),n=this._nodeMap.get(e);return null!==n?(bt.isTrue(n.coord.equals2D(r),"Found equal nodes with different coordinates"),n):(this._nodeMap.put(e,e),e)}},{key:"checkSplitEdgesCorrectness",value:function(r){var t=this._edge.getCoordinates(),e=r.get(0).getCoordinate(0);if(!e.equals2D(t[0]))throw new Te("bad split edge start point at "+e);var n=r.get(r.size()-1).getCoordinates(),s=n[n.length-1];if(!s.equals2D(t[t.length-1]))throw new Te("bad split edge end point at "+s)}}],[{key:"constructor_",value:function(){this._nodeMap=new gn,this._edge=null,this._edge=arguments[0]}}]),tt=function(){function r(){x(this,r)}return c(r,null,[{key:"octant",value:function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1];if(0===t&&0===e)throw new $("Cannot compute the octant for point ( "+t+", "+e+" )");var n=Math.abs(t),s=Math.abs(e);return t>=0?e>=0?n>=s?0:1:n>=s?7:6:e>=0?n>=s?3:2:n>=s?4:5}if(arguments[0]instanceof D&&arguments[1]instanceof D){var o=arguments[0],h=arguments[1],g=h.x-o.x,y=h.y-o.y;if(0===g&&0===y)throw new $("Cannot compute the octant for two identical points "+o);return r.octant(g,y)}}}])}(),nt=c(function r(){x(this,r)},[{key:"getCoordinates",value:function(){}},{key:"size",value:function(){}},{key:"getCoordinate",value:function(r){}},{key:"isClosed",value:function(){}},{key:"setData",value:function(r){}},{key:"getData",value:function(){}}]),Q=c(function r(){x(this,r)},[{key:"addIntersection",value:function(r,t){}},{key:"interfaces_",get:function(){return[nt]}}]),ct=function(){function r(){x(this,r),r.constructor_.apply(this,arguments)}return c(r,[{key:"getCoordinates",value:function(){return this._pts}},{key:"size",value:function(){return this._pts.length}},{key:"getCoordinate",value:function(t){return this._pts[t]}},{key:"isClosed",value:function(){return this._pts[0].equals(this._pts[this._pts.length-1])}},{key:"getSegmentOctant",value:function(t){return t===this._pts.length-1?-1:this.safeOctant(this.getCoordinate(t),this.getCoordinate(t+1))}},{key:"setData",value:function(t){this._data=t}},{key:"safeOctant",value:function(t,e){return t.equals2D(e)?0:tt.octant(t,e)}},{key:"getData",value:function(){return this._data}},{key:"addIntersection",value:function(){if(2===arguments.length)this.addIntersectionNode(arguments[0],arguments[1]);else if(4===arguments.length){var n=arguments[1],o=new D(arguments[0].getIntersection(arguments[3]));this.addIntersection(o,n)}}},{key:"toString",value:function(){return we.toLineString(new Xe(this._pts))}},{key:"getNodeList",value:function(){return this._nodeList}},{key:"addIntersectionNode",value:function(t,e){var n=e,s=n+1;return s<this._pts.length&&t.equals2D(this._pts[s])&&(n=s),this._nodeList.add(t,n)}},{key:"addIntersections",value:function(t,e,n){for(var s=0;s<t.getIntersectionNum();s++)this.addIntersection(t,e,n,s)}},{key:"interfaces_",get:function(){return[Q]}}],[{key:"constructor_",value:function(){this._nodeList=new q(this),this._pts=null,this._data=null;var e=arguments[1];this._pts=arguments[0],this._data=e}},{key:"getNodedSubstrings",value:function(){if(1===arguments.length){var t=arguments[0],e=new mt;return r.getNodedSubstrings(t,e),e}if(2===arguments.length)for(var n=arguments[1],s=arguments[0].iterator();s.hasNext();)s.next().getNodeList().addSplitEdges(n)}}])}(),Dt=function(){function r(){x(this,r),r.constructor_.apply(this,arguments)}return c(r,[{key:"minX",value:function(){return Math.min(this.p0.x,this.p1.x)}},{key:"orientationIndex",value:function(){if(arguments[0]instanceof r){var t=arguments[0],e=yt.index(this.p0,this.p1,t.p0),n=yt.index(this.p0,this.p1,t.p1);return e>=0&&n>=0||e<=0&&n<=0?Math.max(e,n):0}if(arguments[0]instanceof D)return yt.index(this.p0,this.p1,arguments[0])}},{key:"toGeometry",value:function(t){return t.createLineString([this.p0,this.p1])}},{key:"isVertical",value:function(){return this.p0.x===this.p1.x}},{key:"equals",value:function(t){if(!(t instanceof r))return!1;var e=t;return this.p0.equals(e.p0)&&this.p1.equals(e.p1)}},{key:"intersection",value:function(t){var e=new nn;return e.computeIntersection(this.p0,this.p1,t.p0,t.p1),e.hasIntersection()?e.getIntersection(0):null}},{key:"project",value:function(){if(arguments[0]instanceof D){var t=arguments[0];if(t.equals(this.p0)||t.equals(this.p1))return new D(t);var e=this.projectionFactor(t),n=new D;return n.x=this.p0.x+e*(this.p1.x-this.p0.x),n.y=this.p0.y+e*(this.p1.y-this.p0.y),n}if(arguments[0]instanceof r){var s=arguments[0],o=this.projectionFactor(s.p0),h=this.projectionFactor(s.p1);if(o>=1&&h>=1||o<=0&&h<=0)return null;var g=this.project(s.p0);o<0&&(g=this.p0),o>1&&(g=this.p1);var y=this.project(s.p1);return h<0&&(y=this.p0),h>1&&(y=this.p1),new r(g,y)}}},{key:"normalize",value:function(){this.p1.compareTo(this.p0)<0&&this.reverse()}},{key:"angle",value:function(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)}},{key:"getCoordinate",value:function(t){return 0===t?this.p0:this.p1}},{key:"distancePerpendicular",value:function(t){return tn.pointToLinePerpendicular(t,this.p0,this.p1)}},{key:"minY",value:function(){return Math.min(this.p0.y,this.p1.y)}},{key:"midPoint",value:function(){return r.midPoint(this.p0,this.p1)}},{key:"projectionFactor",value:function(t){if(t.equals(this.p0))return 0;if(t.equals(this.p1))return 1;var e=this.p1.x-this.p0.x,n=this.p1.y-this.p0.y,s=e*e+n*n;return s<=0?ht.NaN:((t.x-this.p0.x)*e+(t.y-this.p0.y)*n)/s}},{key:"closestPoints",value:function(t){var e=this.intersection(t);if(null!==e)return[e,e];var n=new Array(2).fill(null),s=ht.MAX_VALUE,o=null,h=this.closestPoint(t.p0);s=h.distance(t.p0),n[0]=h,n[1]=t.p0;var g=this.closestPoint(t.p1);(o=g.distance(t.p1))<s&&(s=o,n[0]=g,n[1]=t.p1);var y=t.closestPoint(this.p0);(o=y.distance(this.p0))<s&&(s=o,n[0]=this.p0,n[1]=y);var k=t.closestPoint(this.p1);return(o=k.distance(this.p1))<s&&(s=o,n[0]=this.p1,n[1]=k),n}},{key:"closestPoint",value:function(t){var e=this.projectionFactor(t);return e>0&&e<1?this.project(t):this.p0.distance(t)<this.p1.distance(t)?this.p0:this.p1}},{key:"maxX",value:function(){return Math.max(this.p0.x,this.p1.x)}},{key:"getLength",value:function(){return this.p0.distance(this.p1)}},{key:"compareTo",value:function(t){var e=t,n=this.p0.compareTo(e.p0);return 0!==n?n:this.p1.compareTo(e.p1)}},{key:"reverse",value:function(){var t=this.p0;this.p0=this.p1,this.p1=t}},{key:"equalsTopo",value:function(t){return this.p0.equals(t.p0)&&this.p1.equals(t.p1)||this.p0.equals(t.p1)&&this.p1.equals(t.p0)}},{key:"lineIntersection",value:function(t){return Vn.intersection(this.p0,this.p1,t.p0,t.p1)}},{key:"maxY",value:function(){return Math.max(this.p0.y,this.p1.y)}},{key:"pointAlongOffset",value:function(t,e){var n=this.p0.x+t*(this.p1.x-this.p0.x),s=this.p0.y+t*(this.p1.y-this.p0.y),o=this.p1.x-this.p0.x,h=this.p1.y-this.p0.y,g=Math.sqrt(o*o+h*h),y=0,k=0;if(0!==e){if(g<=0)throw new IllegalStateException("Cannot compute offset from zero-length line segment");y=e*o/g,k=e*h/g}return new D(n-k,s+y)}},{key:"setCoordinates",value:function(){if(1===arguments.length){var t=arguments[0];this.setCoordinates(t.p0,t.p1)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.p0.x=e.x,this.p0.y=e.y,this.p1.x=n.x,this.p1.y=n.y}}},{key:"segmentFraction",value:function(t){var e=this.projectionFactor(t);return e<0?e=0:(e>1||ht.isNaN(e))&&(e=1),e}},{key:"toString",value:function(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"}},{key:"isHorizontal",value:function(){return this.p0.y===this.p1.y}},{key:"reflect",value:function(t){var e=this.p1.getY()-this.p0.getY(),n=this.p0.getX()-this.p1.getX(),s=this.p0.getY()*(this.p1.getX()-this.p0.getX())-this.p0.getX()*(this.p1.getY()-this.p0.getY()),o=e*e+n*n,h=e*e-n*n,g=t.getX(),y=t.getY();return new D((-h*g-2*e*n*y-2*e*s)/o,(h*y-2*e*n*g-2*n*s)/o)}},{key:"distance",value:function(){if(arguments[0]instanceof r){var t=arguments[0];return tn.segmentToSegment(this.p0,this.p1,t.p0,t.p1)}if(arguments[0]instanceof D)return tn.pointToSegment(arguments[0],this.p0,this.p1)}},{key:"pointAlong",value:function(t){var e=new D;return e.x=this.p0.x+t*(this.p1.x-this.p0.x),e.y=this.p0.y+t*(this.p1.y-this.p0.y),e}},{key:"hashCode",value:function(){var t=ht.doubleToLongBits(this.p0.x);t^=31*ht.doubleToLongBits(this.p0.y);var e=Math.trunc(t)^Math.trunc(t>>32),n=ht.doubleToLongBits(this.p1.x);return n^=31*ht.doubleToLongBits(this.p1.y),e^Math.trunc(n)^Math.trunc(n>>32)}},{key:"interfaces_",get:function(){return[se,ce]}}],[{key:"constructor_",value:function(){if(this.p0=null,this.p1=null,0===arguments.length)r.constructor_.call(this,new D,new D);else if(1===arguments.length){var t=arguments[0];r.constructor_.call(this,t.p0,t.p1)}else if(2===arguments.length){var n=arguments[1];this.p0=arguments[0],this.p1=n}else if(4===arguments.length){var h=arguments[2],g=arguments[3];r.constructor_.call(this,new D(arguments[0],arguments[1]),new D(h,g))}}},{key:"midPoint",value:function(t,e){return new D((t.x+e.x)/2,(t.y+e.y)/2)}}])}(),re=c(function r(){x(this,r),r.constructor_.apply(this,arguments)},[{key:"overlap",value:function(){if(2!==arguments.length&&4===arguments.length){var t=arguments[2],e=arguments[3];arguments[0].getLineSegment(arguments[1],this._overlapSeg1),t.getLineSegment(e,this._overlapSeg2),this.overlap(this._overlapSeg1,this._overlapSeg2)}}}],[{key:"constructor_",value:function(){this._overlapSeg1=new Dt,this._overlapSeg2=new Dt}}]),ft=c(function r(){x(this,r),r.constructor_.apply(this,arguments)},[{key:"getLineSegment",value:function(r,t){t.p0=this._pts[r],t.p1=this._pts[r+1]}},{key:"computeSelect",value:function(r,t,e,n){var s=this._pts[t],o=this._pts[e];if(e-t==1)return n.select(this,t),null;if(!r.intersects(s,o))return null;var h=Math.trunc((t+e)/2);t<h&&this.computeSelect(r,t,h,n),h<e&&this.computeSelect(r,h,e,n)}},{key:"getCoordinates",value:function(){for(var r=new Array(this._end-this._start+1).fill(null),t=0,e=this._start;e<=this._end;e++)r[t++]=this._pts[e];return r}},{key:"computeOverlaps",value:function(){if(2===arguments.length){var r=arguments[0];this.computeOverlaps(this._start,this._end,r,r._start,r._end,arguments[1])}else if(6===arguments.length){var e=arguments[0],n=arguments[1],s=arguments[2],o=arguments[3],h=arguments[4],g=arguments[5];if(n-e==1&&h-o==1)return g.overlap(this,e,s,o),null;if(!this.overlaps(e,n,s,o,h))return null;var y=Math.trunc((e+n)/2),k=Math.trunc((o+h)/2);e<y&&(o<k&&this.computeOverlaps(e,y,s,o,k,g),k<h&&this.computeOverlaps(e,y,s,k,h,g)),y<n&&(o<k&&this.computeOverlaps(y,n,s,o,k,g),k<h&&this.computeOverlaps(y,n,s,k,h,g))}}},{key:"setId",value:function(r){this._id=r}},{key:"select",value:function(r,t){this.computeSelect(r,this._start,this._end,t)}},{key:"getEnvelope",value:function(){return null===this._env&&(this._env=new te(this._pts[this._start],this._pts[this._end])),this._env}},{key:"overlaps",value:function(r,t,e,n,s){return te.intersects(this._pts[r],this._pts[t],e._pts[n],e._pts[s])}},{key:"getEndIndex",value:function(){return this._end}},{key:"getStartIndex",value:function(){return this._start}},{key:"getContext",value:function(){return this._context}},{key:"getId",value:function(){return this._id}}],[{key:"constructor_",value:function(){this._pts=null,this._start=null,this._end=null,this._env=null,this._context=null,this._id=null;var t=arguments[1],e=arguments[2],n=arguments[3];this._pts=arguments[0],this._start=t,this._end=e,this._context=n}}]),Ot=function(){function r(){x(this,r)}return c(r,null,[{key:"findChainEnd",value:function(t,e){for(var n=e;n<t.length-1&&t[n].equals2D(t[n+1]);)n++;if(n>=t.length-1)return t.length-1;for(var s=ye.quadrant(t[n],t[n+1]),o=e+1;o<t.length&&(t[o-1].equals2D(t[o])||ye.quadrant(t[o-1],t[o])===s);)o++;return o-1}},{key:"getChains",value:function(){if(1===arguments.length)return r.getChains(arguments[0],null);if(2===arguments.length){var e=arguments[0],n=arguments[1],s=new mt,o=0;do{var h=r.findChainEnd(e,o),g=new ft(e,o,h,n);s.add(g),o=h}while(o<e.length-1);return s}}}])}(),Kt=c(function r(){x(this,r)},[{key:"computeNodes",value:function(r){}},{key:"getNodedSubstrings",value:function(){}}]),pe=c(function r(){x(this,r),r.constructor_.apply(this,arguments)},[{key:"setSegmentIntersector",value:function(r){this._segInt=r}},{key:"interfaces_",get:function(){return[Kt]}}],[{key:"constructor_",value:function(){this._segInt=null,0!==arguments.length&&1===arguments.length&&this.setSegmentIntersector(arguments[0])}}]),be=function(r){function t(){var e;return x(this,t),e=G(this,t),t.constructor_.apply(e,arguments),e}return at(t,r),c(t,[{key:"getMonotoneChains",value:function(){return this._monoChains}},{key:"getNodedSubstrings",value:function(){return ct.getNodedSubstrings(this._nodedSegStrings)}},{key:"getIndex",value:function(){return this._index}},{key:"add",value:function(e){for(var n=Ot.getChains(e.getCoordinates(),e).iterator();n.hasNext();){var s=n.next();s.setId(this._idCounter++),this._index.insert(s.getEnvelope(),s),this._monoChains.add(s)}}},{key:"computeNodes",value:function(e){this._nodedSegStrings=e;for(var n=e.iterator();n.hasNext();)this.add(n.next());this.intersectChains()}},{key:"intersectChains",value:function(){for(var e=new In(this._segInt),n=this._monoChains.iterator();n.hasNext();)for(var s=n.next(),o=this._index.query(s.getEnvelope()).iterator();o.hasNext();){var h=o.next();if(h.getId()>s.getId()&&(s.computeOverlaps(h,e),this._nOverlaps++),this._segInt.isDone())return null}}}],[{key:"constructor_",value:function(){this._monoChains=new mt,this._index=new v,this._idCounter=0,this._nodedSegStrings=null,this._nOverlaps=0,0!==arguments.length&&1===arguments.length&&pe.constructor_.call(this,arguments[0])}}])}(pe),In=function(r){function t(){var e;return x(this,t),e=G(this,t),t.constructor_.apply(e,arguments),e}return at(t,r),c(t,[{key:"overlap",value:function(){if(4!==arguments.length)return pt(t,"overlap",this,1).apply(this,arguments);var e=arguments[1],n=arguments[2],s=arguments[3],o=arguments[0].getContext(),h=n.getContext();this._si.processIntersections(o,e,h,s)}}],[{key:"constructor_",value:function(){this._si=null,this._si=arguments[0]}}])}(re);be.SegmentOverlapAction=In;var zt=function(){function r(){x(this,r),r.constructor_.apply(this,arguments)}return c(r,[{key:"isDeletable",value:function(t,e,n,s){var o=this._inputLine[t],h=this._inputLine[e],g=this._inputLine[n];return!!this.isConcave(o,h,g)&&!!this.isShallow(o,h,g,s)&&this.isShallowSampled(o,h,t,n,s)}},{key:"deleteShallowConcavities",value:function(){for(var t=1,e=this.findNextNonDeletedIndex(t),n=this.findNextNonDeletedIndex(e),s=!1;n<this._inputLine.length;){var o=!1;this.isDeletable(t,e,n,this._distanceTol)&&(this._isDeleted[e]=r.DELETE,o=!0,s=!0),e=this.findNextNonDeletedIndex(t=o?n:e),n=this.findNextNonDeletedIndex(e)}return s}},{key:"isShallowConcavity",value:function(t,e,n,s){return yt.index(t,e,n)===this._angleOrientation&&tn.pointToSegment(e,t,n)<s}},{key:"isShallowSampled",value:function(t,e,n,s,o){var h=Math.trunc((s-n)/r.NUM_PTS_TO_CHECK);h<=0&&(h=1);for(var g=n;g<s;g+=h)if(!this.isShallow(t,e,this._inputLine[g],o))return!1;return!0}},{key:"isConcave",value:function(t,e,n){return yt.index(t,e,n)===this._angleOrientation}},{key:"simplify",value:function(t){this._distanceTol=Math.abs(t),t<0&&(this._angleOrientation=yt.CLOCKWISE),this._isDeleted=new Array(this._inputLine.length).fill(null);var e=!1;do{e=this.deleteShallowConcavities()}while(e);return this.collapseLine()}},{key:"findNextNonDeletedIndex",value:function(t){for(var e=t+1;e<this._inputLine.length&&this._isDeleted[e]===r.DELETE;)e++;return e}},{key:"isShallow",value:function(t,e,n,s){return tn.pointToSegment(e,t,n)<s}},{key:"collapseLine",value:function(){for(var t=new Mn,e=0;e<this._inputLine.length;e++)this._isDeleted[e]!==r.DELETE&&t.add(this._inputLine[e]);return t.toCoordinateArray()}}],[{key:"constructor_",value:function(){this._inputLine=null,this._distanceTol=null,this._isDeleted=null,this._angleOrientation=yt.COUNTERCLOCKWISE,this._inputLine=arguments[0]}},{key:"simplify",value:function(t,e){return new r(t).simplify(e)}}])}();zt.INIT=0,zt.DELETE=1,zt.KEEP=1,zt.NUM_PTS_TO_CHECK=10;var Sn=function(){function r(){x(this,r),r.constructor_.apply(this,arguments)}return c(r,[{key:"getCoordinates",value:function(){return this._ptList.toArray(r.COORDINATE_ARRAY_TYPE)}},{key:"setPrecisionModel",value:function(t){this._precisionModel=t}},{key:"addPt",value:function(t){var e=new D(t);if(this._precisionModel.makePrecise(e),this.isRedundant(e))return null;this._ptList.add(e)}},{key:"reverse",value:function(){}},{key:"addPts",value:function(t,e){if(e)for(var n=0;n<t.length;n++)this.addPt(t[n]);else for(var s=t.length-1;s>=0;s--)this.addPt(t[s])}},{key:"isRedundant",value:function(t){if(this._ptList.size()<1)return!1;var e=this._ptList.get(this._ptList.size()-1);return t.distance(e)<this._minimimVertexDistance}},{key:"toString",value:function(){return(new he).createLineString(this.getCoordinates()).toString()}},{key:"closeRing",value:function(){if(this._ptList.size()<1)return null;var t=new D(this._ptList.get(0)),e=this._ptList.get(this._ptList.size()-1);if(t.equals(e))return null;this._ptList.add(t)}},{key:"setMinimumVertexDistance",value:function(t){this._minimimVertexDistance=t}}],[{key:"constructor_",value:function(){this._ptList=null,this._precisionModel=null,this._minimimVertexDistance=0,this._ptList=new mt}}])}();Sn.COORDINATE_ARRAY_TYPE=new Array(0).fill(null);var Ee=function(){function r(){x(this,r)}return c(r,null,[{key:"toDegrees",value:function(t){return 180*t/Math.PI}},{key:"normalize",value:function(t){for(;t>Math.PI;)t-=r.PI_TIMES_2;for(;t<=-Math.PI;)t+=r.PI_TIMES_2;return t}},{key:"angle",value:function(){if(1===arguments.length){var t=arguments[0];return Math.atan2(t.y,t.x)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return Math.atan2(n.y-e.y,n.x-e.x)}}},{key:"isAcute",value:function(t,e,n){return(t.x-e.x)*(n.x-e.x)+(t.y-e.y)*(n.y-e.y)>0}},{key:"isObtuse",value:function(t,e,n){return(t.x-e.x)*(n.x-e.x)+(t.y-e.y)*(n.y-e.y)<0}},{key:"interiorAngle",value:function(t,e,n){var s=r.angle(e,t),o=r.angle(e,n);return Math.abs(o-s)}},{key:"normalizePositive",value:function(t){if(t<0){for(;t<0;)t+=r.PI_TIMES_2;t>=r.PI_TIMES_2&&(t=0)}else{for(;t>=r.PI_TIMES_2;)t-=r.PI_TIMES_2;t<0&&(t=0)}return t}},{key:"angleBetween",value:function(t,e,n){var s=r.angle(e,t),o=r.angle(e,n);return r.diff(s,o)}},{key:"diff",value:function(t,e){var n=null;return(n=t<e?e-t:t-e)>Math.PI&&(n=2*Math.PI-n),n}},{key:"toRadians",value:function(t){return t*Math.PI/180}},{key:"getTurn",value:function(t,e){var n=Math.sin(e-t);return n>0?r.COUNTERCLOCKWISE:n<0?r.CLOCKWISE:r.NONE}},{key:"angleBetweenOriented",value:function(t,e,n){var s=r.angle(e,t),o=r.angle(e,n)-s;return o<=-Math.PI?o+r.PI_TIMES_2:o>Math.PI?o-r.PI_TIMES_2:o}}])}();Ee.PI_TIMES_2=2*Math.PI,Ee.PI_OVER_2=Math.PI/2,Ee.PI_OVER_4=Math.PI/4,Ee.COUNTERCLOCKWISE=yt.COUNTERCLOCKWISE,Ee.CLOCKWISE=yt.CLOCKWISE,Ee.NONE=yt.COLLINEAR;var Se=function(){function r(){x(this,r),r.constructor_.apply(this,arguments)}return c(r,[{key:"addNextSegment",value:function(t,e){if(this._s0=this._s1,this._s1=this._s2,this._s2=t,this._seg0.setCoordinates(this._s0,this._s1),this.computeOffsetSegment(this._seg0,this._side,this._distance,this._offset0),this._seg1.setCoordinates(this._s1,this._s2),this.computeOffsetSegment(this._seg1,this._side,this._distance,this._offset1),this._s1.equals(this._s2))return null;var n=yt.index(this._s0,this._s1,this._s2),s=n===yt.CLOCKWISE&&this._side===H.LEFT||n===yt.COUNTERCLOCKWISE&&this._side===H.RIGHT;0===n?this.addCollinear(e):s?this.addOutsideTurn(n,e):this.addInsideTurn(n,e)}},{key:"addLineEndCap",value:function(t,e){var n=new Dt(t,e),s=new Dt;this.computeOffsetSegment(n,H.LEFT,this._distance,s);var o=new Dt;this.computeOffsetSegment(n,H.RIGHT,this._distance,o);var y=Math.atan2(e.y-t.y,e.x-t.x);switch(this._bufParams.getEndCapStyle()){case Wt.CAP_ROUND:this._segList.addPt(s.p1),this.addDirectedFillet(e,y+Math.PI/2,y-Math.PI/2,yt.CLOCKWISE,this._distance),this._segList.addPt(o.p1);break;case Wt.CAP_FLAT:this._segList.addPt(s.p1),this._segList.addPt(o.p1);break;case Wt.CAP_SQUARE:var k=new D;k.x=Math.abs(this._distance)*Math.cos(y),k.y=Math.abs(this._distance)*Math.sin(y);var R=new D(s.p1.x+k.x,s.p1.y+k.y),P=new D(o.p1.x+k.x,o.p1.y+k.y);this._segList.addPt(R),this._segList.addPt(P)}}},{key:"getCoordinates",value:function(){return this._segList.getCoordinates()}},{key:"addMitreJoin",value:function(t,e,n,s){var o=Vn.intersection(e.p0,e.p1,n.p0,n.p1);if(null!==o&&(s<=0?1:o.distance(t)/Math.abs(s))<=this._bufParams.getMitreLimit())return this._segList.addPt(o),null;this.addLimitedMitreJoin(e,n,s,this._bufParams.getMitreLimit())}},{key:"addOutsideTurn",value:function(t,e){if(this._offset0.p1.distance(this._offset1.p0)<this._distance*r.OFFSET_SEGMENT_SEPARATION_FACTOR)return this._segList.addPt(this._offset0.p1),null;this._bufParams.getJoinStyle()===Wt.JOIN_MITRE?this.addMitreJoin(this._s1,this._offset0,this._offset1,this._distance):this._bufParams.getJoinStyle()===Wt.JOIN_BEVEL?this.addBevelJoin(this._offset0,this._offset1):(e&&this._segList.addPt(this._offset0.p1),this.addCornerFillet(this._s1,this._offset0.p1,this._offset1.p0,t,this._distance),this._segList.addPt(this._offset1.p0))}},{key:"createSquare",value:function(t){this._segList.addPt(new D(t.x+this._distance,t.y+this._distance)),this._segList.addPt(new D(t.x+this._distance,t.y-this._distance)),this._segList.addPt(new D(t.x-this._distance,t.y-this._distance)),this._segList.addPt(new D(t.x-this._distance,t.y+this._distance)),this._segList.closeRing()}},{key:"addSegments",value:function(t,e){this._segList.addPts(t,e)}},{key:"addFirstSegment",value:function(){this._segList.addPt(this._offset1.p0)}},{key:"addCornerFillet",value:function(t,e,n,s,o){var y=Math.atan2(e.y-t.y,e.x-t.x),P=Math.atan2(n.y-t.y,n.x-t.x);s===yt.CLOCKWISE?y<=P&&(y+=2*Math.PI):y>=P&&(y-=2*Math.PI),this._segList.addPt(e),this.addDirectedFillet(t,y,P,s,o),this._segList.addPt(n)}},{key:"addLastSegment",value:function(){this._segList.addPt(this._offset1.p1)}},{key:"initSideSegments",value:function(t,e,n){this._s1=t,this._s2=e,this._side=n,this._seg1.setCoordinates(t,e),this.computeOffsetSegment(this._seg1,n,this._distance,this._offset1)}},{key:"addLimitedMitreJoin",value:function(t,e,n,s){var o=this._seg0.p1,h=Ee.angle(o,this._seg0.p0),g=Ee.angleBetweenOriented(this._seg0.p0,o,this._seg1.p1)/2,y=Ee.normalize(h+g),k=Ee.normalize(y+Math.PI),R=s*n,P=n-R*Math.abs(Math.sin(g)),z=o.x+R*Math.cos(k),K=o.y+R*Math.sin(k),ot=new D(z,K),gt=new Dt(o,ot),Ht=gt.pointAlongOffset(1,P),Qt=gt.pointAlongOffset(1,-P);this._side===H.LEFT?(this._segList.addPt(Ht),this._segList.addPt(Qt)):(this._segList.addPt(Qt),this._segList.addPt(Ht))}},{key:"addDirectedFillet",value:function(t,e,n,s,o){var h=s===yt.CLOCKWISE?-1:1,g=Math.abs(e-n),y=Math.trunc(g/this._filletAngleQuantum+.5);if(y<1)return null;for(var k=g/y,R=new D,P=0;P<y;P++){var z=e+h*P*k;R.x=t.x+o*Math.cos(z),R.y=t.y+o*Math.sin(z),this._segList.addPt(R)}}},{key:"computeOffsetSegment",value:function(t,e,n,s){var o=e===H.LEFT?1:-1,h=t.p1.x-t.p0.x,g=t.p1.y-t.p0.y,y=Math.sqrt(h*h+g*g),k=o*n*h/y,R=o*n*g/y;s.p0.x=t.p0.x-R,s.p0.y=t.p0.y+k,s.p1.x=t.p1.x-R,s.p1.y=t.p1.y+k}},{key:"addInsideTurn",value:function(t,e){if(this._li.computeIntersection(this._offset0.p0,this._offset0.p1,this._offset1.p0,this._offset1.p1),this._li.hasIntersection())this._segList.addPt(this._li.getIntersection(0));else if(this._hasNarrowConcaveAngle=!0,this._offset0.p1.distance(this._offset1.p0)<this._distance*r.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)this._segList.addPt(this._offset0.p1);else{if(this._segList.addPt(this._offset0.p1),this._closingSegLengthFactor>0){var n=new D((this._closingSegLengthFactor*this._offset0.p1.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset0.p1.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(n);var s=new D((this._closingSegLengthFactor*this._offset1.p0.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset1.p0.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(s)}else this._segList.addPt(this._s1);this._segList.addPt(this._offset1.p0)}}},{key:"createCircle",value:function(t){var e=new D(t.x+this._distance,t.y);this._segList.addPt(e),this.addDirectedFillet(t,0,2*Math.PI,-1,this._distance),this._segList.closeRing()}},{key:"addBevelJoin",value:function(t,e){this._segList.addPt(t.p1),this._segList.addPt(e.p0)}},{key:"init",value:function(t){this._distance=t,this._maxCurveSegmentError=t*(1-Math.cos(this._filletAngleQuantum/2)),this._segList=new Sn,this._segList.setPrecisionModel(this._precisionModel),this._segList.setMinimumVertexDistance(t*r.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)}},{key:"addCollinear",value:function(t){this._li.computeIntersection(this._s0,this._s1,this._s1,this._s2),this._li.getIntersectionNum()>=2&&(this._bufParams.getJoinStyle()===Wt.JOIN_BEVEL||this._bufParams.getJoinStyle()===Wt.JOIN_MITRE?(t&&this._segList.addPt(this._offset0.p1),this._segList.addPt(this._offset1.p0)):this.addCornerFillet(this._s1,this._offset0.p1,this._offset1.p0,yt.CLOCKWISE,this._distance))}},{key:"closeRing",value:function(){this._segList.closeRing()}},{key:"hasNarrowConcaveAngle",value:function(){return this._hasNarrowConcaveAngle}}],[{key:"constructor_",value:function(){this._maxCurveSegmentError=0,this._filletAngleQuantum=null,this._closingSegLengthFactor=1,this._segList=null,this._distance=0,this._precisionModel=null,this._bufParams=null,this._li=null,this._s0=null,this._s1=null,this._s2=null,this._seg0=new Dt,this._seg1=new Dt,this._offset0=new Dt,this._offset1=new Dt,this._side=0,this._hasNarrowConcaveAngle=!1;var e=arguments[1],n=arguments[2];this._precisionModel=arguments[0],this._bufParams=e,this._li=new nn,this._filletAngleQuantum=Math.PI/2/e.getQuadrantSegments(),e.getQuadrantSegments()>=8&&e.getJoinStyle()===Wt.JOIN_ROUND&&(this._closingSegLengthFactor=r.MAX_CLOSING_SEG_LEN_FACTOR),this.init(n)}}])}();Se.OFFSET_SEGMENT_SEPARATION_FACTOR=.001,Se.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR=.001,Se.CURVE_VERTEX_SNAP_DISTANCE_FACTOR=1e-6,Se.MAX_CLOSING_SEG_LEN_FACTOR=80;var sn=function(){function r(){x(this,r),r.constructor_.apply(this,arguments)}return c(r,[{key:"getOffsetCurve",value:function(t,e){if(this._distance=e,0===e)return null;var n=e<0,s=Math.abs(e),o=this.getSegGen(s);t.length<=1?this.computePointCurve(t[0],o):this.computeOffsetCurve(t,n,o);var h=o.getCoordinates();return n&&oe.reverse(h),h}},{key:"computeSingleSidedBufferCurve",value:function(t,e,n){var s=this.simplifyTolerance(this._distance);if(e){n.addSegments(t,!0);var o=zt.simplify(t,-s),h=o.length-1;n.initSideSegments(o[h],o[h-1],H.LEFT),n.addFirstSegment();for(var g=h-2;g>=0;g--)n.addNextSegment(o[g],!0)}else{n.addSegments(t,!1);var y=zt.simplify(t,s),k=y.length-1;n.initSideSegments(y[0],y[1],H.LEFT),n.addFirstSegment();for(var R=2;R<=k;R++)n.addNextSegment(y[R],!0)}n.addLastSegment(),n.closeRing()}},{key:"computeRingBufferCurve",value:function(t,e,n){var s=this.simplifyTolerance(this._distance);e===H.RIGHT&&(s=-s);var o=zt.simplify(t,s),h=o.length-1;n.initSideSegments(o[h-1],o[0],e);for(var g=1;g<=h;g++)n.addNextSegment(o[g],1!==g);n.closeRing()}},{key:"computeLineBufferCurve",value:function(t,e){var n=this.simplifyTolerance(this._distance),s=zt.simplify(t,n),o=s.length-1;e.initSideSegments(s[0],s[1],H.LEFT);for(var h=2;h<=o;h++)e.addNextSegment(s[h],!0);e.addLastSegment(),e.addLineEndCap(s[o-1],s[o]);var g=zt.simplify(t,-n),y=g.length-1;e.initSideSegments(g[y],g[y-1],H.LEFT);for(var k=y-2;k>=0;k--)e.addNextSegment(g[k],!0);e.addLastSegment(),e.addLineEndCap(g[1],g[0]),e.closeRing()}},{key:"computePointCurve",value:function(t,e){switch(this._bufParams.getEndCapStyle()){case Wt.CAP_ROUND:e.createCircle(t);break;case Wt.CAP_SQUARE:e.createSquare(t)}}},{key:"getLineCurve",value:function(t,e){if(this._distance=e,this.isLineOffsetEmpty(e))return null;var n=Math.abs(e),s=this.getSegGen(n);return t.length<=1?this.computePointCurve(t[0],s):this._bufParams.isSingleSided()?this.computeSingleSidedBufferCurve(t,e<0,s):this.computeLineBufferCurve(t,s),s.getCoordinates()}},{key:"getBufferParameters",value:function(){return this._bufParams}},{key:"simplifyTolerance",value:function(t){return t*this._bufParams.getSimplifyFactor()}},{key:"getRingCurve",value:function(t,e,n){if(this._distance=n,t.length<=2)return this.getLineCurve(t,n);if(0===n)return r.copyCoordinates(t);var s=this.getSegGen(n);return this.computeRingBufferCurve(t,e,s),s.getCoordinates()}},{key:"computeOffsetCurve",value:function(t,e,n){var s=this.simplifyTolerance(this._distance);if(e){var o=zt.simplify(t,-s),h=o.length-1;n.initSideSegments(o[h],o[h-1],H.LEFT),n.addFirstSegment();for(var g=h-2;g>=0;g--)n.addNextSegment(o[g],!0)}else{var y=zt.simplify(t,s),k=y.length-1;n.initSideSegments(y[0],y[1],H.LEFT),n.addFirstSegment();for(var R=2;R<=k;R++)n.addNextSegment(y[R],!0)}n.addLastSegment()}},{key:"isLineOffsetEmpty",value:function(t){return 0===t||t<0&&!this._bufParams.isSingleSided()}},{key:"getSegGen",value:function(t){return new Se(this._precisionModel,this._bufParams,t)}}],[{key:"constructor_",value:function(){this._distance=0,this._precisionModel=null,this._bufParams=null;var e=arguments[1];this._precisionModel=arguments[0],this._bufParams=e}},{key:"copyCoordinates",value:function(t){for(var e=new Array(t.length).fill(null),n=0;n<e.length;n++)e[n]=new D(t[n]);return e}}])}(),Bn=c(function r(){x(this,r),r.constructor_.apply(this,arguments)},[{key:"findStabbedSegments",value:function(){if(1===arguments.length){for(var r=arguments[0],t=new mt,e=this._subgraphs.iterator();e.hasNext();){var n=e.next(),s=n.getEnvelope();r.y<s.getMinY()||r.y>s.getMaxY()||this.findStabbedSegments(r,n.getDirectedEdges(),t)}return t}if(3===arguments.length)if(Ct(arguments[2],vn)&&arguments[0]instanceof D&&arguments[1]instanceof Fr){for(var o=arguments[0],h=arguments[1],g=arguments[2],y=h.getEdge().getCoordinates(),k=0;k<y.length-1;k++)if(this._seg.p0=y[k],this._seg.p1=y[k+1],this._seg.p0.y>this._seg.p1.y&&this._seg.reverse(),!(Math.max(this._seg.p0.x,this._seg.p1.x)<o.x||this._seg.isHorizontal()||o.y<this._seg.p0.y||o.y>this._seg.p1.y||yt.index(this._seg.p0,this._seg.p1,o)===yt.RIGHT)){var R=h.getDepth(H.LEFT);this._seg.p0.equals(y[k])||(R=h.getDepth(H.RIGHT));var P=new Br(this._seg,R);g.add(P)}}else if(Ct(arguments[2],vn)&&arguments[0]instanceof D&&Ct(arguments[1],vn))for(var z=arguments[0],K=arguments[2],ot=arguments[1].iterator();ot.hasNext();){var gt=ot.next();gt.isForward()&&this.findStabbedSegments(z,gt,K)}}},{key:"getDepth",value:function(r){var t=this.findStabbedSegments(r);return 0===t.size()?0:Ze.min(t)._leftDepth}}],[{key:"constructor_",value:function(){this._subgraphs=null,this._seg=new Dt,this._subgraphs=arguments[0]}}]),Br=c(function r(){x(this,r),r.constructor_.apply(this,arguments)},[{key:"compareTo",value:function(r){var t=r;if(this._upwardSeg.minX()>=t._upwardSeg.maxX())return 1;if(this._upwardSeg.maxX()<=t._upwardSeg.minX())return-1;var e=this._upwardSeg.orientationIndex(t._upwardSeg);return 0!==e||0!=(e=-1*t._upwardSeg.orientationIndex(this._upwardSeg))?e:this._upwardSeg.compareTo(t._upwardSeg)}},{key:"compareX",value:function(r,t){var e=r.p0.compareTo(t.p0);return 0!==e?e:r.p1.compareTo(t.p1)}},{key:"toString",value:function(){return this._upwardSeg.toString()}},{key:"interfaces_",get:function(){return[se]}}],[{key:"constructor_",value:function(){this._upwardSeg=null,this._leftDepth=null;var t=arguments[1];this._upwardSeg=new Dt(arguments[0]),this._leftDepth=t}}]);Bn.DepthSegment=Br;var Gr=function(r){function t(){var e;return x(this,t),e=G(this,t),t.constructor_.apply(e,arguments),e}return at(t,r),c(t,null,[{key:"constructor_",value:function(){ze.constructor_.call(this,"Projective point not representable on the Cartesian plane.")}}])}(ze),Yr=function(){function r(){x(this,r),r.constructor_.apply(this,arguments)}return c(r,[{key:"getY",value:function(){var t=this.y/this.w;if(ht.isNaN(t)||ht.isInfinite(t))throw new Gr;return t}},{key:"getX",value:function(){var t=this.x/this.w;if(ht.isNaN(t)||ht.isInfinite(t))throw new Gr;return t}},{key:"getCoordinate",value:function(){var t=new D;return t.x=this.getX(),t.y=this.getY(),t}}],[{key:"constructor_",value:function(){if(this.x=null,this.y=null,this.w=null,0===arguments.length)this.x=0,this.y=0,this.w=1;else if(1===arguments.length){var t=arguments[0];this.x=t.x,this.y=t.y,this.w=1}else if(2===arguments.length){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var n=arguments[1];this.x=arguments[0],this.y=n,this.w=1}else if(arguments[0]instanceof r&&arguments[1]instanceof r){var s=arguments[0],o=arguments[1];this.x=s.y*o.w-o.y*s.w,this.y=o.x*s.w-s.x*o.w,this.w=s.x*o.y-o.x*s.y}else if(arguments[0]instanceof D&&arguments[1]instanceof D){var h=arguments[0],g=arguments[1];this.x=h.y-g.y,this.y=g.x-h.x,this.w=h.x*g.y-g.x*h.y}}else if(3===arguments.length){var k=arguments[1],R=arguments[2];this.x=arguments[0],this.y=k,this.w=R}else if(4===arguments.length){var P=arguments[0],z=arguments[1],K=arguments[2],ot=arguments[3],gt=P.y-z.y,Ht=z.x-P.x,Qt=P.x*z.y-z.x*P.y,ne=K.y-ot.y,ke=ot.x-K.x,me=K.x*ot.y-ot.x*K.y;this.x=Ht*me-ke*Qt,this.y=ne*Qt-gt*me,this.w=gt*ke-ne*Ht}}}])}(),di=function(){function r(){x(this,r),r.constructor_.apply(this,arguments)}return c(r,[{key:"area",value:function(){return r.area(this.p0,this.p1,this.p2)}},{key:"signedArea",value:function(){return r.signedArea(this.p0,this.p1,this.p2)}},{key:"interpolateZ",value:function(t){if(null===t)throw new $("Supplied point is null.");return r.interpolateZ(t,this.p0,this.p1,this.p2)}},{key:"longestSideLength",value:function(){return r.longestSideLength(this.p0,this.p1,this.p2)}},{key:"isAcute",value:function(){return r.isAcute(this.p0,this.p1,this.p2)}},{key:"circumcentre",value:function(){return r.circumcentre(this.p0,this.p1,this.p2)}},{key:"area3D",value:function(){return r.area3D(this.p0,this.p1,this.p2)}},{key:"centroid",value:function(){return r.centroid(this.p0,this.p1,this.p2)}},{key:"inCentre",value:function(){return r.inCentre(this.p0,this.p1,this.p2)}}],[{key:"constructor_",value:function(){this.p0=null,this.p1=null,this.p2=null;var e=arguments[1],n=arguments[2];this.p0=arguments[0],this.p1=e,this.p2=n}},{key:"area",value:function(t,e,n){return Math.abs(((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2)}},{key:"signedArea",value:function(t,e,n){return((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2}},{key:"det",value:function(t,e,n,s){return t*s-e*n}},{key:"interpolateZ",value:function(t,e,n,s){var o=e.x,h=e.y,g=n.x-o,y=s.x-o,k=n.y-h,R=s.y-h,P=g*R-y*k,z=t.x-o,K=t.y-h,ot=(R*z-y*K)/P,gt=(-k*z+g*K)/P;return e.getZ()+ot*(n.getZ()-e.getZ())+gt*(s.getZ()-e.getZ())}},{key:"longestSideLength",value:function(t,e,n){var s=t.distance(e),o=e.distance(n),h=n.distance(t),g=s;return o>g&&(g=o),h>g&&(g=h),g}},{key:"circumcentreDD",value:function(t,e,n){var s=_t.valueOf(t.x).subtract(n.x),o=_t.valueOf(t.y).subtract(n.y),h=_t.valueOf(e.x).subtract(n.x),g=_t.valueOf(e.y).subtract(n.y),y=_t.determinant(s,o,h,g).multiply(2),k=s.sqr().add(o.sqr()),R=h.sqr().add(g.sqr()),P=_t.determinant(o,k,g,R),z=_t.determinant(s,k,h,R),K=_t.valueOf(n.x).subtract(P.divide(y)).doubleValue(),ot=_t.valueOf(n.y).add(z.divide(y)).doubleValue();return new D(K,ot)}},{key:"isAcute",value:function(t,e,n){return!!Ee.isAcute(t,e,n)&&!!Ee.isAcute(e,n,t)&&!!Ee.isAcute(n,t,e)}},{key:"circumcentre",value:function(t,e,n){var s=n.x,o=n.y,h=t.x-s,g=t.y-o,y=e.x-s,k=e.y-o,R=2*r.det(h,g,y,k),P=r.det(g,h*h+g*g,k,y*y+k*k),z=r.det(h,h*h+g*g,y,y*y+k*k);return new D(s-P/R,o+z/R)}},{key:"perpendicularBisector",value:function(t,e){var n=e.x-t.x,s=e.y-t.y,o=new Yr(t.x+n/2,t.y+s/2,1),h=new Yr(t.x-s+n/2,t.y+n+s/2,1);return new Yr(o,h)}},{key:"angleBisector",value:function(t,e,n){var s=e.distance(t),o=s/(s+e.distance(n));return new D(t.x+o*(n.x-t.x),t.y+o*(n.y-t.y))}},{key:"area3D",value:function(t,e,n){var s=e.x-t.x,o=e.y-t.y,h=e.getZ()-t.getZ(),g=n.x-t.x,y=n.y-t.y,k=n.getZ()-t.getZ(),R=o*k-h*y,P=h*g-s*k,z=s*y-o*g;return Math.sqrt(R*R+P*P+z*z)/2}},{key:"centroid",value:function(t,e,n){return new D((t.x+e.x+n.x)/3,(t.y+e.y+n.y)/3)}},{key:"inCentre",value:function(t,e,n){var s=e.distance(n),o=t.distance(n),h=t.distance(e),g=s+o+h;return new D((s*t.x+o*e.x+h*n.x)/g,(s*t.y+o*e.y+h*n.y)/g)}}])}(),mi=c(function r(){x(this,r),r.constructor_.apply(this,arguments)},[{key:"addRingSide",value:function(r,t,e,n,s){if(0===t&&r.length<gr.MINIMUM_VALID_SIZE)return null;var o=n,h=s;r.length>=gr.MINIMUM_VALID_SIZE&&yt.isCCW(r)&&(o=s,h=n,e=H.opposite(e));var g=this._curveBuilder.getRingCurve(r,e,t);this.addCurve(g,o,h)}},{key:"addRingBothSides",value:function(r,t){this.addRingSide(r,t,H.LEFT,S.EXTERIOR,S.INTERIOR),this.addRingSide(r,t,H.RIGHT,S.INTERIOR,S.EXTERIOR)}},{key:"addPoint",value:function(r){if(this._distance<=0)return null;var t=r.getCoordinates(),e=this._curveBuilder.getLineCurve(t,this._distance);this.addCurve(e,S.EXTERIOR,S.INTERIOR)}},{key:"addPolygon",value:function(r){var t=this._distance,e=H.LEFT;this._distance<0&&(t=-this._distance,e=H.RIGHT);var n=r.getExteriorRing(),s=oe.removeRepeatedPoints(n.getCoordinates());if(this._distance<0&&this.isErodedCompletely(n,this._distance)||this._distance<=0&&s.length<3)return null;this.addRingSide(s,t,e,S.EXTERIOR,S.INTERIOR);for(var o=0;o<r.getNumInteriorRing();o++){var h=r.getInteriorRingN(o),g=oe.removeRepeatedPoints(h.getCoordinates());this._distance>0&&this.isErodedCompletely(h,-this._distance)||this.addRingSide(g,t,H.opposite(e),S.INTERIOR,S.EXTERIOR)}}},{key:"isTriangleErodedCompletely",value:function(r,t){var e=new di(r[0],r[1],r[2]),n=e.inCentre();return tn.pointToSegment(n,e.p0,e.p1)<Math.abs(t)}},{key:"addLineString",value:function(r){if(this._curveBuilder.isLineOffsetEmpty(this._distance))return null;var t=oe.removeRepeatedPoints(r.getCoordinates());if(oe.isRing(t)&&!this._curveBuilder.getBufferParameters().isSingleSided())this.addRingBothSides(t,this._distance);else{var e=this._curveBuilder.getLineCurve(t,this._distance);this.addCurve(e,S.EXTERIOR,S.INTERIOR)}}},{key:"addCurve",value:function(r,t,e){if(null===r||r.length<2)return null;var n=new ct(r,new Ne(0,S.BOUNDARY,t,e));this._curveList.add(n)}},{key:"getCurves",value:function(){return this.add(this._inputGeom),this._curveList}},{key:"add",value:function(r){if(r.isEmpty())return null;if(r instanceof $n)this.addPolygon(r);else if(r instanceof Zn)this.addLineString(r);else if(r instanceof jr)this.addPoint(r);else if(r instanceof Ge)this.addCollection(r);else if(r instanceof Me)this.addCollection(r);else if(r instanceof Jr)this.addCollection(r);else{if(!(r instanceof Ae))throw new ln(r.getGeometryType());this.addCollection(r)}}},{key:"isErodedCompletely",value:function(r,t){var e=r.getCoordinates();if(e.length<4)return t<0;if(4===e.length)return this.isTriangleErodedCompletely(e,t);var n=r.getEnvelopeInternal(),s=Math.min(n.getHeight(),n.getWidth());return t<0&&2*Math.abs(t)>s}},{key:"addCollection",value:function(r){for(var t=0;t<r.getNumGeometries();t++){var e=r.getGeometryN(t);this.add(e)}}}],[{key:"constructor_",value:function(){this._inputGeom=null,this._distance=null,this._curveBuilder=null,this._curveList=new mt;var t=arguments[1],e=arguments[2];this._inputGeom=arguments[0],this._distance=t,this._curveBuilder=e}}]),Pi=c(function r(){x(this,r)},[{key:"locate",value:function(r){}}]),Li=function(){function r(){x(this,r),r.constructor_.apply(this,arguments)}return c(r,[{key:"next",value:function(){if(this._atStart)return this._atStart=!1,r.isAtomic(this._parent)&&this._index++,this._parent;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return this._subcollectionIterator.next();this._subcollectionIterator=null}if(this._index>=this._max)throw new cr;var t=this._parent.getGeometryN(this._index++);return t instanceof Ae?(this._subcollectionIterator=new r(t),this._subcollectionIterator.next()):t}},{key:"remove",value:function(){throw new ln(this.getClass().getName())}},{key:"hasNext",value:function(){if(this._atStart)return!0;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return!0;this._subcollectionIterator=null}return!(this._index>=this._max)}},{key:"interfaces_",get:function(){return[A]}}],[{key:"constructor_",value:function(){this._parent=null,this._atStart=null,this._max=null,this._index=null,this._subcollectionIterator=null;var t=arguments[0];this._parent=t,this._atStart=!0,this._index=0,this._max=t.getNumGeometries()}},{key:"isAtomic",value:function(t){return!(t instanceof Ae)}}])}(),Pe=function(){function r(){x(this,r),r.constructor_.apply(this,arguments)}return c(r,[{key:"locate",value:function(t){return r.locate(t,this._geom)}},{key:"interfaces_",get:function(){return[Pi]}}],[{key:"constructor_",value:function(){this._geom=null,this._geom=arguments[0]}},{key:"locatePointInPolygon",value:function(t,e){if(e.isEmpty())return S.EXTERIOR;var n=e.getExteriorRing(),s=r.locatePointInRing(t,n);if(s!==S.INTERIOR)return s;for(var o=0;o<e.getNumInteriorRing();o++){var h=e.getInteriorRingN(o),g=r.locatePointInRing(t,h);if(g===S.BOUNDARY)return S.BOUNDARY;if(g===S.INTERIOR)return S.EXTERIOR}return S.INTERIOR}},{key:"locatePointInRing",value:function(t,e){return e.getEnvelopeInternal().intersects(t)?Pr.locateInRing(t,e.getCoordinates()):S.EXTERIOR}},{key:"containsPointInPolygon",value:function(t,e){return S.EXTERIOR!==r.locatePointInPolygon(t,e)}},{key:"locateInGeometry",value:function(t,e){if(e instanceof $n)return r.locatePointInPolygon(t,e);if(e instanceof Ae)for(var n=new Li(e);n.hasNext();){var s=n.next();if(s!==e){var o=r.locateInGeometry(t,s);if(o!==S.EXTERIOR)return o}}return S.EXTERIOR}},{key:"isContained",value:function(t,e){return S.EXTERIOR!==r.locate(t,e)}},{key:"locate",value:function(t,e){return e.isEmpty()?S.EXTERIOR:e.getEnvelopeInternal().intersects(t)?r.locateInGeometry(t,e):S.EXTERIOR}}])}(),Le=c(function r(){x(this,r),r.constructor_.apply(this,arguments)},[{key:"getNextCW",value:function(r){this.getEdges();var t=this._edgeList.indexOf(r),e=t-1;return 0===t&&(e=this._edgeList.size()-1),this._edgeList.get(e)}},{key:"propagateSideLabels",value:function(r){for(var t=S.NONE,e=this.iterator();e.hasNext();){var n=e.next().getLabel();n.isArea(r)&&n.getLocation(r,H.LEFT)!==S.NONE&&(t=n.getLocation(r,H.LEFT))}if(t===S.NONE)return null;for(var s=t,o=this.iterator();o.hasNext();){var h=o.next(),g=h.getLabel();if(g.getLocation(r,H.ON)===S.NONE&&g.setLocation(r,H.ON,s),g.isArea(r)){var y=g.getLocation(r,H.LEFT),k=g.getLocation(r,H.RIGHT);if(k!==S.NONE){if(k!==s)throw new B("side location conflict",h.getCoordinate());y===S.NONE&&bt.shouldNeverReachHere("found single null side (at "+h.getCoordinate()+")"),s=y}else bt.isTrue(g.getLocation(r,H.LEFT)===S.NONE,"found single null side"),g.setLocation(r,H.RIGHT,s),g.setLocation(r,H.LEFT,s)}}}},{key:"getCoordinate",value:function(){var r=this.iterator();return r.hasNext()?r.next().getCoordinate():null}},{key:"print",value:function(r){Be.out.println("EdgeEndStar:   "+this.getCoordinate());for(var t=this.iterator();t.hasNext();)t.next().print(r)}},{key:"isAreaLabelsConsistent",value:function(r){return this.computeEdgeEndLabels(r.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)}},{key:"checkAreaLabelsConsistent",value:function(r){var t=this.getEdges();if(t.size()<=0)return!0;var e=t.size()-1,n=t.get(e).getLabel().getLocation(r,H.LEFT);bt.isTrue(n!==S.NONE,"Found unlabelled area edge");for(var s=n,o=this.iterator();o.hasNext();){var h=o.next().getLabel();bt.isTrue(h.isArea(r),"Found non-area edge");var g=h.getLocation(r,H.LEFT),y=h.getLocation(r,H.RIGHT);if(g===y||y!==s)return!1;s=g}return!0}},{key:"findIndex",value:function(r){this.iterator();for(var t=0;t<this._edgeList.size();t++)if(this._edgeList.get(t)===r)return t;return-1}},{key:"iterator",value:function(){return this.getEdges().iterator()}},{key:"getEdges",value:function(){return null===this._edgeList&&(this._edgeList=new mt(this._edgeMap.values())),this._edgeList}},{key:"getLocation",value:function(r,t,e){return this._ptInAreaLocation[r]===S.NONE&&(this._ptInAreaLocation[r]=Pe.locate(t,e[r].getGeometry())),this._ptInAreaLocation[r]}},{key:"toString",value:function(){var r=new _n;r.append("EdgeEndStar:   "+this.getCoordinate()),r.append("\n");for(var t=this.iterator();t.hasNext();){var e=t.next();r.append(e),r.append("\n")}return r.toString()}},{key:"computeEdgeEndLabels",value:function(r){for(var t=this.iterator();t.hasNext();)t.next().computeLabel(r)}},{key:"computeLabelling",value:function(r){this.computeEdgeEndLabels(r[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var t=[!1,!1],e=this.iterator();e.hasNext();)for(var n=e.next().getLabel(),s=0;s<2;s++)n.isLine(s)&&n.getLocation(s)===S.BOUNDARY&&(t[s]=!0);for(var o=this.iterator();o.hasNext();)for(var h=o.next(),g=h.getLabel(),y=0;y<2;y++)if(g.isAnyNull(y)){var k=S.NONE;if(t[y])k=S.EXTERIOR;else{var R=h.getCoordinate();k=this.getLocation(y,R,r)}g.setAllLocationsIfNull(y,k)}}},{key:"getDegree",value:function(){return this._edgeMap.size()}},{key:"insertEdgeEnd",value:function(r,t){this._edgeMap.put(r,t),this._edgeList=null}}],[{key:"constructor_",value:function(){this._edgeMap=new gn,this._edgeList=null,this._ptInAreaLocation=[S.NONE,S.NONE]}}]),De=function(r){function t(){var e;return x(this,t),e=G(this,t),t.constructor_.apply(e,arguments),e}return at(t,r),c(t,[{key:"linkResultDirectedEdges",value:function(){this.getResultAreaEdges();for(var e=null,n=null,s=this._SCANNING_FOR_INCOMING,o=0;o<this._resultAreaEdgeList.size();o++){var h=this._resultAreaEdgeList.get(o),g=h.getSym();if(h.getLabel().isArea())switch(null===e&&h.isInResult()&&(e=h),s){case this._SCANNING_FOR_INCOMING:if(!g.isInResult())continue;n=g,s=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(!h.isInResult())continue;n.setNext(h),s=this._SCANNING_FOR_INCOMING}}if(s===this._LINKING_TO_OUTGOING){if(null===e)throw new B("no outgoing dirEdge found",this.getCoordinate());bt.isTrue(e.isInResult(),"unable to link last incoming dirEdge"),n.setNext(e)}}},{key:"insert",value:function(e){this.insertEdgeEnd(e,e)}},{key:"getRightmostEdge",value:function(){var e=this.getEdges(),n=e.size();if(n<1)return null;var s=e.get(0);if(1===n)return s;var o=e.get(n-1),h=s.getQuadrant(),g=o.getQuadrant();return ye.isNorthern(h)&&ye.isNorthern(g)?s:ye.isNorthern(h)||ye.isNorthern(g)?0!==s.getDy()?s:0!==o.getDy()?o:(bt.shouldNeverReachHere("found two horizontal edges incident on node"),null):o}},{key:"print",value:function(e){Be.out.println("DirectedEdgeStar: "+this.getCoordinate());for(var n=this.iterator();n.hasNext();){var s=n.next();e.print("out "),s.print(e),e.println(),e.print("in "),s.getSym().print(e),e.println()}}},{key:"getResultAreaEdges",value:function(){if(null!==this._resultAreaEdgeList)return this._resultAreaEdgeList;this._resultAreaEdgeList=new mt;for(var e=this.iterator();e.hasNext();){var n=e.next();(n.isInResult()||n.getSym().isInResult())&&this._resultAreaEdgeList.add(n)}return this._resultAreaEdgeList}},{key:"updateLabelling",value:function(e){for(var n=this.iterator();n.hasNext();){var s=n.next().getLabel();s.setAllLocationsIfNull(0,e.getLocation(0)),s.setAllLocationsIfNull(1,e.getLocation(1))}}},{key:"linkAllDirectedEdges",value:function(){this.getEdges();for(var e=null,n=null,s=this._edgeList.size()-1;s>=0;s--){var o=this._edgeList.get(s),h=o.getSym();null===n&&(n=h),null!==e&&h.setNext(e),e=o}n.setNext(e)}},{key:"computeDepths",value:function(){if(1===arguments.length){var e=arguments[0],n=this.findIndex(e),s=e.getDepth(H.LEFT),o=e.getDepth(H.RIGHT),h=this.computeDepths(n+1,this._edgeList.size(),s);if(this.computeDepths(0,n,h)!==o)throw new B("depth mismatch at "+e.getCoordinate())}else if(3===arguments.length){for(var g=arguments[1],y=arguments[2],k=arguments[0];k<g;k++){var R=this._edgeList.get(k);R.setEdgeDepths(H.RIGHT,y),y=R.getDepth(H.LEFT)}return y}}},{key:"mergeSymLabels",value:function(){for(var e=this.iterator();e.hasNext();){var n=e.next();n.getLabel().merge(n.getSym().getLabel())}}},{key:"linkMinimalDirectedEdges",value:function(e){for(var n=null,s=null,o=this._SCANNING_FOR_INCOMING,h=this._resultAreaEdgeList.size()-1;h>=0;h--){var g=this._resultAreaEdgeList.get(h),y=g.getSym();switch(null===n&&g.getEdgeRing()===e&&(n=g),o){case this._SCANNING_FOR_INCOMING:if(y.getEdgeRing()!==e)continue;s=y,o=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(g.getEdgeRing()!==e)continue;s.setNextMin(g),o=this._SCANNING_FOR_INCOMING}}o===this._LINKING_TO_OUTGOING&&(bt.isTrue(null!==n,"found null for first outgoing dirEdge"),bt.isTrue(n.getEdgeRing()===e,"unable to link last incoming dirEdge"),s.setNextMin(n))}},{key:"getOutgoingDegree",value:function(){if(0===arguments.length){for(var e=0,n=this.iterator();n.hasNext();)n.next().isInResult()&&e++;return e}if(1===arguments.length){for(var s=arguments[0],o=0,h=this.iterator();h.hasNext();)h.next().getEdgeRing()===s&&o++;return o}}},{key:"getLabel",value:function(){return this._label}},{key:"findCoveredLineEdges",value:function(){for(var e=S.NONE,n=this.iterator();n.hasNext();){var s=n.next(),o=s.getSym();if(!s.isLineEdge()){if(s.isInResult()){e=S.INTERIOR;break}if(o.isInResult()){e=S.EXTERIOR;break}}}if(e===S.NONE)return null;for(var h=e,g=this.iterator();g.hasNext();){var y=g.next(),k=y.getSym();y.isLineEdge()?y.getEdge().setCovered(h===S.INTERIOR):(y.isInResult()&&(h=S.EXTERIOR),k.isInResult()&&(h=S.INTERIOR))}}},{key:"computeLabelling",value:function(e){pt(t,"computeLabelling",this,1).call(this,e),this._label=new Ne(S.NONE);for(var n=this.iterator();n.hasNext();)for(var s=n.next().getEdge().getLabel(),o=0;o<2;o++){var h=s.getLocation(o);h!==S.INTERIOR&&h!==S.BOUNDARY||this._label.setLocation(o,S.INTERIOR)}}}],[{key:"constructor_",value:function(){this._resultAreaEdgeList=null,this._label=null,this._SCANNING_FOR_INCOMING=1,this._LINKING_TO_OUTGOING=2}}])}(Le),an=function(r){function t(){return x(this,t),G(this,t)}return at(t,r),c(t,[{key:"createNode",value:function(e){return new Jn(e,new De)}}])}(tr),ti=function(){function r(){x(this,r),r.constructor_.apply(this,arguments)}return c(r,[{key:"compareTo",value:function(t){return r.compareOriented(this._pts,this._orientation,t._pts,t._orientation)}},{key:"interfaces_",get:function(){return[se]}}],[{key:"constructor_",value:function(){this._pts=null,this._orientation=null;var t=arguments[0];this._pts=t,this._orientation=r.orientation(t)}},{key:"orientation",value:function(t){return 1===oe.increasingDirection(t)}},{key:"compareOriented",value:function(t,e,n,s){for(var o=e?1:-1,h=s?1:-1,g=e?t.length:-1,y=s?n.length:-1,k=e?0:t.length-1,R=s?0:n.length-1;;){var P=t[k].compareTo(n[R]);if(0!==P)return P;var z=(k+=o)===g,K=(R+=h)===y;if(z&&!K)return-1;if(!z&&K)return 1;if(z&&K)return 0}}}])}(),qr=c(function r(){x(this,r),r.constructor_.apply(this,arguments)},[{key:"print",value:function(r){r.print("MULTILINESTRING ( ");for(var t=0;t<this._edges.size();t++){var e=this._edges.get(t);t>0&&r.print(","),r.print("(");for(var n=e.getCoordinates(),s=0;s<n.length;s++)s>0&&r.print(","),r.print(n[s].x+" "+n[s].y);r.println(")")}r.print(")  ")}},{key:"addAll",value:function(r){for(var t=r.iterator();t.hasNext();)this.add(t.next())}},{key:"findEdgeIndex",value:function(r){for(var t=0;t<this._edges.size();t++)if(this._edges.get(t).equals(r))return t;return-1}},{key:"iterator",value:function(){return this._edges.iterator()}},{key:"getEdges",value:function(){return this._edges}},{key:"get",value:function(r){return this._edges.get(r)}},{key:"findEqualEdge",value:function(r){var t=new ti(r.getCoordinates());return this._ocaMap.get(t)}},{key:"add",value:function(r){this._edges.add(r);var t=new ti(r.getCoordinates());this._ocaMap.put(t,r)}}],[{key:"constructor_",value:function(){this._edges=new mt,this._ocaMap=new gn}}]),yi=c(function r(){x(this,r)},[{key:"processIntersections",value:function(r,t,e,n){}},{key:"isDone",value:function(){}}]),ts=function(){function r(){x(this,r),r.constructor_.apply(this,arguments)}return c(r,[{key:"isTrivialIntersection",value:function(t,e,n,s){if(t===n&&1===this._li.getIntersectionNum()){if(r.isAdjacentSegments(e,s))return!0;if(t.isClosed()){var o=t.size()-1;if(0===e&&s===o||0===s&&e===o)return!0}}return!1}},{key:"getProperIntersectionPoint",value:function(){return this._properIntersectionPoint}},{key:"hasProperInteriorIntersection",value:function(){return this._hasProperInterior}},{key:"getLineIntersector",value:function(){return this._li}},{key:"hasProperIntersection",value:function(){return this._hasProper}},{key:"processIntersections",value:function(t,e,n,s){if(t===n&&e===s)return null;this.numTests++;var o=t.getCoordinates()[e],h=t.getCoordinates()[e+1],g=n.getCoordinates()[s],y=n.getCoordinates()[s+1];this._li.computeIntersection(o,h,g,y),this._li.hasIntersection()&&(this.numIntersections++,this._li.isInteriorIntersection()&&(this.numInteriorIntersections++,this._hasInterior=!0),this.isTrivialIntersection(t,e,n,s)||(this._hasIntersection=!0,t.addIntersections(this._li,e,0),n.addIntersections(this._li,s,1),this._li.isProper()&&(this.numProperIntersections++,this._hasProper=!0,this._hasProperInterior=!0)))}},{key:"hasIntersection",value:function(){return this._hasIntersection}},{key:"isDone",value:function(){return!1}},{key:"hasInteriorIntersection",value:function(){return this._hasInterior}},{key:"interfaces_",get:function(){return[yi]}}],[{key:"constructor_",value:function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._hasInterior=!1,this._properIntersectionPoint=null,this._li=null,this._isSelfIntersection=null,this.numIntersections=0,this.numInteriorIntersections=0,this.numProperIntersections=0,this.numTests=0,this._li=arguments[0]}},{key:"isAdjacentSegments",value:function(t,e){return 1===Math.abs(t-e)}}])}(),es=c(function r(){x(this,r),r.constructor_.apply(this,arguments)},[{key:"getSegmentIndex",value:function(){return this.segmentIndex}},{key:"getCoordinate",value:function(){return this.coord}},{key:"print",value:function(r){r.print(this.coord),r.print(" seg # = "+this.segmentIndex),r.println(" dist = "+this.dist)}},{key:"compareTo",value:function(r){return this.compare(r.segmentIndex,r.dist)}},{key:"isEndPoint",value:function(r){return 0===this.segmentIndex&&0===this.dist||this.segmentIndex===r}},{key:"toString",value:function(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist}},{key:"getDistance",value:function(){return this.dist}},{key:"compare",value:function(r,t){return this.segmentIndex<r?-1:this.segmentIndex>r?1:this.dist<t?-1:this.dist>t?1:0}},{key:"interfaces_",get:function(){return[se]}}],[{key:"constructor_",value:function(){this.coord=null,this.segmentIndex=null,this.dist=null;var t=arguments[1],e=arguments[2];this.coord=new D(arguments[0]),this.segmentIndex=t,this.dist=e}}]),Di=c(function r(){x(this,r),r.constructor_.apply(this,arguments)},[{key:"print",value:function(r){r.println("Intersections:");for(var t=this.iterator();t.hasNext();)t.next().print(r)}},{key:"iterator",value:function(){return this._nodeMap.values().iterator()}},{key:"addSplitEdges",value:function(r){this.addEndpoints();for(var t=this.iterator(),e=t.next();t.hasNext();){var n=t.next(),s=this.createSplitEdge(e,n);r.add(s),e=n}}},{key:"addEndpoints",value:function(){var r=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[r],r,0)}},{key:"createSplitEdge",value:function(r,t){var e=t.segmentIndex-r.segmentIndex+2,s=t.dist>0||!t.coord.equals2D(this.edge.pts[t.segmentIndex]);s||e--;var o=new Array(e).fill(null),h=0;o[h++]=new D(r.coord);for(var g=r.segmentIndex+1;g<=t.segmentIndex;g++)o[h++]=this.edge.pts[g];return s&&(o[h]=t.coord),new vi(o,new Ne(this.edge._label))}},{key:"add",value:function(r,t,e){var n=new es(r,t,e),s=this._nodeMap.get(n);return null!==s?s:(this._nodeMap.put(n,n),n)}},{key:"isIntersection",value:function(r){for(var t=this.iterator();t.hasNext();)if(t.next().coord.equals(r))return!0;return!1}}],[{key:"constructor_",value:function(){this._nodeMap=new gn,this.edge=null,this.edge=arguments[0]}}]),ns=function(){function r(){x(this,r),r.constructor_.apply(this,arguments)}return c(r,[{key:"isIntersects",value:function(){return!this.isDisjoint()}},{key:"isCovers",value:function(){return(r.isTrue(this._matrix[S.INTERIOR][S.INTERIOR])||r.isTrue(this._matrix[S.INTERIOR][S.BOUNDARY])||r.isTrue(this._matrix[S.BOUNDARY][S.INTERIOR])||r.isTrue(this._matrix[S.BOUNDARY][S.BOUNDARY]))&&this._matrix[S.EXTERIOR][S.INTERIOR]===W.FALSE&&this._matrix[S.EXTERIOR][S.BOUNDARY]===W.FALSE}},{key:"isCoveredBy",value:function(){return(r.isTrue(this._matrix[S.INTERIOR][S.INTERIOR])||r.isTrue(this._matrix[S.INTERIOR][S.BOUNDARY])||r.isTrue(this._matrix[S.BOUNDARY][S.INTERIOR])||r.isTrue(this._matrix[S.BOUNDARY][S.BOUNDARY]))&&this._matrix[S.INTERIOR][S.EXTERIOR]===W.FALSE&&this._matrix[S.BOUNDARY][S.EXTERIOR]===W.FALSE}},{key:"set",value:function(){if(1===arguments.length)for(var t=arguments[0],e=0;e<t.length;e++){var n=Math.trunc(e/3);this._matrix[n][e%3]=W.toDimensionValue(t.charAt(e))}else 3===arguments.length&&(this._matrix[arguments[0]][arguments[1]]=arguments[2])}},{key:"isContains",value:function(){return r.isTrue(this._matrix[S.INTERIOR][S.INTERIOR])&&this._matrix[S.EXTERIOR][S.INTERIOR]===W.FALSE&&this._matrix[S.EXTERIOR][S.BOUNDARY]===W.FALSE}},{key:"setAtLeast",value:function(){if(1===arguments.length)for(var t=arguments[0],e=0;e<t.length;e++){var n=Math.trunc(e/3);this.setAtLeast(n,e%3,W.toDimensionValue(t.charAt(e)))}else if(3===arguments.length){var o=arguments[0],h=arguments[1],g=arguments[2];this._matrix[o][h]<g&&(this._matrix[o][h]=g)}}},{key:"setAtLeastIfValid",value:function(t,e,n){t>=0&&e>=0&&this.setAtLeast(t,e,n)}},{key:"isWithin",value:function(){return r.isTrue(this._matrix[S.INTERIOR][S.INTERIOR])&&this._matrix[S.INTERIOR][S.EXTERIOR]===W.FALSE&&this._matrix[S.BOUNDARY][S.EXTERIOR]===W.FALSE}},{key:"isTouches",value:function(t,e){return t>e?this.isTouches(e,t):(t===W.A&&e===W.A||t===W.L&&e===W.L||t===W.L&&e===W.A||t===W.P&&e===W.A||t===W.P&&e===W.L)&&this._matrix[S.INTERIOR][S.INTERIOR]===W.FALSE&&(r.isTrue(this._matrix[S.INTERIOR][S.BOUNDARY])||r.isTrue(this._matrix[S.BOUNDARY][S.INTERIOR])||r.isTrue(this._matrix[S.BOUNDARY][S.BOUNDARY]))}},{key:"isOverlaps",value:function(t,e){return t===W.P&&e===W.P||t===W.A&&e===W.A?r.isTrue(this._matrix[S.INTERIOR][S.INTERIOR])&&r.isTrue(this._matrix[S.INTERIOR][S.EXTERIOR])&&r.isTrue(this._matrix[S.EXTERIOR][S.INTERIOR]):t===W.L&&e===W.L&&1===this._matrix[S.INTERIOR][S.INTERIOR]&&r.isTrue(this._matrix[S.INTERIOR][S.EXTERIOR])&&r.isTrue(this._matrix[S.EXTERIOR][S.INTERIOR])}},{key:"isEquals",value:function(t,e){return t===e&&r.isTrue(this._matrix[S.INTERIOR][S.INTERIOR])&&this._matrix[S.INTERIOR][S.EXTERIOR]===W.FALSE&&this._matrix[S.BOUNDARY][S.EXTERIOR]===W.FALSE&&this._matrix[S.EXTERIOR][S.INTERIOR]===W.FALSE&&this._matrix[S.EXTERIOR][S.BOUNDARY]===W.FALSE}},{key:"toString",value:function(){for(var t=new dr("123456789"),e=0;e<3;e++)for(var n=0;n<3;n++)t.setCharAt(3*e+n,W.toDimensionSymbol(this._matrix[e][n]));return t.toString()}},{key:"setAll",value:function(t){for(var e=0;e<3;e++)for(var n=0;n<3;n++)this._matrix[e][n]=t}},{key:"get",value:function(t,e){return this._matrix[t][e]}},{key:"transpose",value:function(){var t=this._matrix[1][0];return this._matrix[1][0]=this._matrix[0][1],this._matrix[0][1]=t,t=this._matrix[2][0],this._matrix[2][0]=this._matrix[0][2],this._matrix[0][2]=t,t=this._matrix[2][1],this._matrix[2][1]=this._matrix[1][2],this._matrix[1][2]=t,this}},{key:"matches",value:function(t){if(9!==t.length)throw new $("Should be length 9: "+t);for(var e=0;e<3;e++)for(var n=0;n<3;n++)if(!r.matches(this._matrix[e][n],t.charAt(3*e+n)))return!1;return!0}},{key:"add",value:function(t){for(var e=0;e<3;e++)for(var n=0;n<3;n++)this.setAtLeast(e,n,t.get(e,n))}},{key:"isDisjoint",value:function(){return this._matrix[S.INTERIOR][S.INTERIOR]===W.FALSE&&this._matrix[S.INTERIOR][S.BOUNDARY]===W.FALSE&&this._matrix[S.BOUNDARY][S.INTERIOR]===W.FALSE&&this._matrix[S.BOUNDARY][S.BOUNDARY]===W.FALSE}},{key:"isCrosses",value:function(t,e){return t===W.P&&e===W.L||t===W.P&&e===W.A||t===W.L&&e===W.A?r.isTrue(this._matrix[S.INTERIOR][S.INTERIOR])&&r.isTrue(this._matrix[S.INTERIOR][S.EXTERIOR]):t===W.L&&e===W.P||t===W.A&&e===W.P||t===W.A&&e===W.L?r.isTrue(this._matrix[S.INTERIOR][S.INTERIOR])&&r.isTrue(this._matrix[S.EXTERIOR][S.INTERIOR]):t===W.L&&e===W.L&&0===this._matrix[S.INTERIOR][S.INTERIOR]}},{key:"interfaces_",get:function(){return[un]}}],[{key:"constructor_",value:function(){if(this._matrix=null,0===arguments.length)this._matrix=Array(3).fill().map(function(){return Array(3)}),this.setAll(W.FALSE);else if(1===arguments.length)if("string"==typeof arguments[0]){var t=arguments[0];r.constructor_.call(this),this.set(t)}else if(arguments[0]instanceof r){var e=arguments[0];r.constructor_.call(this),this._matrix[S.INTERIOR][S.INTERIOR]=e._matrix[S.INTERIOR][S.INTERIOR],this._matrix[S.INTERIOR][S.BOUNDARY]=e._matrix[S.INTERIOR][S.BOUNDARY],this._matrix[S.INTERIOR][S.EXTERIOR]=e._matrix[S.INTERIOR][S.EXTERIOR],this._matrix[S.BOUNDARY][S.INTERIOR]=e._matrix[S.BOUNDARY][S.INTERIOR],this._matrix[S.BOUNDARY][S.BOUNDARY]=e._matrix[S.BOUNDARY][S.BOUNDARY],this._matrix[S.BOUNDARY][S.EXTERIOR]=e._matrix[S.BOUNDARY][S.EXTERIOR],this._matrix[S.EXTERIOR][S.INTERIOR]=e._matrix[S.EXTERIOR][S.INTERIOR],this._matrix[S.EXTERIOR][S.BOUNDARY]=e._matrix[S.EXTERIOR][S.BOUNDARY],this._matrix[S.EXTERIOR][S.EXTERIOR]=e._matrix[S.EXTERIOR][S.EXTERIOR]}}},{key:"matches",value:function(){if(Number.isInteger(arguments[0])&&"string"==typeof arguments[1]){var t=arguments[0],e=arguments[1];return e===W.SYM_DONTCARE||e===W.SYM_TRUE&&(t>=0||t===W.TRUE)||e===W.SYM_FALSE&&t===W.FALSE||e===W.SYM_P&&t===W.P||e===W.SYM_L&&t===W.L||e===W.SYM_A&&t===W.A}if("string"==typeof arguments[0]&&"string"==typeof arguments[1]){var n=arguments[1];return new r(arguments[0]).matches(n)}}},{key:"isTrue",value:function(t){return t>=0||t===W.TRUE}}])}(),rs=function(){function r(){x(this,r),r.constructor_.apply(this,arguments)}return c(r,[{key:"size",value:function(){return this._size}},{key:"addAll",value:function(t){return null===t||0===t.length?null:(this.ensureCapacity(this._size+t.length),Be.arraycopy(t,0,this._data,this._size,t.length),void(this._size+=t.length))}},{key:"ensureCapacity",value:function(t){if(t<=this._data.length)return null;var e=Math.max(t,2*this._data.length);this._data=On.copyOf(this._data,e)}},{key:"toArray",value:function(){var t=new Array(this._size).fill(null);return Be.arraycopy(this._data,0,t,0,this._size),t}},{key:"add",value:function(t){this.ensureCapacity(this._size+1),this._data[this._size]=t,++this._size}}],[{key:"constructor_",value:function(){this._data=null,this._size=0,0===arguments.length?r.constructor_.call(this,10):1===arguments.length&&(this._data=new Array(arguments[0]).fill(null))}}])}(),is=function(){function r(){x(this,r)}return c(r,[{key:"getChainStartIndices",value:function(t){var e=0,n=new rs(Math.trunc(t.length/2));n.add(e);do{var s=this.findChainEnd(t,e);n.add(s),e=s}while(e<t.length-1);return n.toArray()}},{key:"findChainEnd",value:function(t,e){for(var n=ye.quadrant(t[e],t[e+1]),s=e+1;s<t.length&&ye.quadrant(t[s-1],t[s])===n;)s++;return s-1}},{key:"OLDgetChainStartIndices",value:function(t){var e=0,n=new mt;n.add(e);do{var s=this.findChainEnd(t,e);n.add(s),e=s}while(e<t.length-1);return r.toIntArray(n)}}],[{key:"toIntArray",value:function(t){for(var e=new Array(t.size()).fill(null),n=0;n<e.length;n++)e[n]=t.get(n).intValue();return e}}])}(),Fi=c(function r(){x(this,r),r.constructor_.apply(this,arguments)},[{key:"getCoordinates",value:function(){return this.pts}},{key:"getMaxX",value:function(r){var t=this.pts[this.startIndex[r]].x,e=this.pts[this.startIndex[r+1]].x;return t>e?t:e}},{key:"getMinX",value:function(r){var t=this.pts[this.startIndex[r]].x,e=this.pts[this.startIndex[r+1]].x;return t<e?t:e}},{key:"computeIntersectsForChain",value:function(){if(4===arguments.length){var r=arguments[0],t=arguments[1],e=arguments[2];this.computeIntersectsForChain(this.startIndex[r],this.startIndex[r+1],t,t.startIndex[e],t.startIndex[e+1],arguments[3])}else if(6===arguments.length){var s=arguments[0],o=arguments[1],h=arguments[2],g=arguments[3],y=arguments[4],k=arguments[5];if(o-s==1&&y-g==1)return k.addIntersections(this.e,s,h.e,g),null;if(!this.overlaps(s,o,h,g,y))return null;var R=Math.trunc((s+o)/2),P=Math.trunc((g+y)/2);s<R&&(g<P&&this.computeIntersectsForChain(s,R,h,g,P,k),P<y&&this.computeIntersectsForChain(s,R,h,P,y,k)),R<o&&(g<P&&this.computeIntersectsForChain(R,o,h,g,P,k),P<y&&this.computeIntersectsForChain(R,o,h,P,y,k))}}},{key:"overlaps",value:function(r,t,e,n,s){return te.intersects(this.pts[r],this.pts[t],e.pts[n],e.pts[s])}},{key:"getStartIndexes",value:function(){return this.startIndex}},{key:"computeIntersects",value:function(r,t){for(var e=0;e<this.startIndex.length-1;e++)for(var n=0;n<r.startIndex.length-1;n++)this.computeIntersectsForChain(e,r,n,t)}}],[{key:"constructor_",value:function(){this.e=null,this.pts=null,this.startIndex=null;var r=arguments[0];this.e=r,this.pts=r.getCoordinates();var t=new is;this.startIndex=t.getChainStartIndices(this.pts)}}]),ss=function(){function r(){x(this,r),r.constructor_.apply(this,arguments)}return c(r,[{key:"getDepth",value:function(t,e){return this._depth[t][e]}},{key:"setDepth",value:function(t,e,n){this._depth[t][e]=n}},{key:"isNull",value:function(){if(0===arguments.length){for(var t=0;t<2;t++)for(var e=0;e<3;e++)if(this._depth[t][e]!==r.NULL_VALUE)return!1;return!0}return 1===arguments.length?this._depth[arguments[0]][1]===r.NULL_VALUE:2===arguments.length?this._depth[arguments[0]][arguments[1]]===r.NULL_VALUE:void 0}},{key:"normalize",value:function(){for(var t=0;t<2;t++)if(!this.isNull(t)){var e=this._depth[t][1];this._depth[t][2]<e&&(e=this._depth[t][2]),e<0&&(e=0);for(var n=1;n<3;n++){var s=0;this._depth[t][n]>e&&(s=1),this._depth[t][n]=s}}}},{key:"getDelta",value:function(t){return this._depth[t][H.RIGHT]-this._depth[t][H.LEFT]}},{key:"getLocation",value:function(t,e){return this._depth[t][e]<=0?S.EXTERIOR:S.INTERIOR}},{key:"toString",value:function(){return"A: "+this._depth[0][1]+","+this._depth[0][2]+" B: "+this._depth[1][1]+","+this._depth[1][2]}},{key:"add",value:function(){if(1===arguments.length)for(var t=arguments[0],e=0;e<2;e++)for(var n=1;n<3;n++){var s=t.getLocation(e,n);s!==S.EXTERIOR&&s!==S.INTERIOR||(this.isNull(e,n)?this._depth[e][n]=r.depthAtLocation(s):this._depth[e][n]+=r.depthAtLocation(s))}else 3===arguments.length&&arguments[2]===S.INTERIOR&&this._depth[arguments[0]][arguments[1]]++}}],[{key:"constructor_",value:function(){this._depth=Array(2).fill().map(function(){return Array(3)});for(var t=0;t<2;t++)for(var e=0;e<3;e++)this._depth[t][e]=r.NULL_VALUE}},{key:"depthAtLocation",value:function(t){return t===S.EXTERIOR?0:t===S.INTERIOR?1:r.NULL_VALUE}}])}();ss.NULL_VALUE=-1;var vi=function(r){function t(){var e;return x(this,t),e=G(this,t),t.constructor_.apply(e,arguments),e}return at(t,r),c(t,[{key:"getDepth",value:function(){return this._depth}},{key:"getCollapsedEdge",value:function(){var e=new Array(2).fill(null);return e[0]=this.pts[0],e[1]=this.pts[1],new t(e,Ne.toLineLabel(this._label))}},{key:"isIsolated",value:function(){return this._isIsolated}},{key:"getCoordinates",value:function(){return this.pts}},{key:"setIsolated",value:function(e){this._isIsolated=e}},{key:"setName",value:function(e){this._name=e}},{key:"equals",value:function(e){if(!(e instanceof t))return!1;var n=e;if(this.pts.length!==n.pts.length)return!1;for(var s=!0,o=!0,h=this.pts.length,g=0;g<this.pts.length;g++)if(this.pts[g].equals2D(n.pts[g])||(s=!1),this.pts[g].equals2D(n.pts[--h])||(o=!1),!s&&!o)return!1;return!0}},{key:"getCoordinate",value:function(){return 0===arguments.length?this.pts.length>0?this.pts[0]:null:1===arguments.length?this.pts[arguments[0]]:void 0}},{key:"print",value:function(e){e.print("edge "+this._name+": "),e.print("LINESTRING (");for(var n=0;n<this.pts.length;n++)n>0&&e.print(","),e.print(this.pts[n].x+" "+this.pts[n].y);e.print(")  "+this._label+" "+this._depthDelta)}},{key:"computeIM",value:function(e){t.updateIM(this._label,e)}},{key:"isCollapsed",value:function(){return!!this._label.isArea()&&3===this.pts.length&&!!this.pts[0].equals(this.pts[2])}},{key:"isClosed",value:function(){return this.pts[0].equals(this.pts[this.pts.length-1])}},{key:"getMaximumSegmentIndex",value:function(){return this.pts.length-1}},{key:"getDepthDelta",value:function(){return this._depthDelta}},{key:"getNumPoints",value:function(){return this.pts.length}},{key:"printReverse",value:function(e){e.print("edge "+this._name+": ");for(var n=this.pts.length-1;n>=0;n--)e.print(this.pts[n]+" ");e.println("")}},{key:"getMonotoneChainEdge",value:function(){return null===this._mce&&(this._mce=new Fi(this)),this._mce}},{key:"getEnvelope",value:function(){if(null===this._env){this._env=new te;for(var e=0;e<this.pts.length;e++)this._env.expandToInclude(this.pts[e])}return this._env}},{key:"addIntersection",value:function(e,n,s,o){var h=new D(e.getIntersection(o)),g=n,y=e.getEdgeDistance(s,o),k=g+1;k<this.pts.length&&h.equals2D(this.pts[k])&&(g=k,y=0),this.eiList.add(h,g,y)}},{key:"toString",value:function(){var e=new dr;e.append("edge "+this._name+": "),e.append("LINESTRING (");for(var n=0;n<this.pts.length;n++)n>0&&e.append(","),e.append(this.pts[n].x+" "+this.pts[n].y);return e.append(")  "+this._label+" "+this._depthDelta),e.toString()}},{key:"isPointwiseEqual",value:function(e){if(this.pts.length!==e.pts.length)return!1;for(var n=0;n<this.pts.length;n++)if(!this.pts[n].equals2D(e.pts[n]))return!1;return!0}},{key:"setDepthDelta",value:function(e){this._depthDelta=e}},{key:"getEdgeIntersectionList",value:function(){return this.eiList}},{key:"addIntersections",value:function(e,n,s){for(var o=0;o<e.getIntersectionNum();o++)this.addIntersection(e,n,s,o)}}],[{key:"constructor_",value:function(){if(this.pts=null,this._env=null,this.eiList=new Di(this),this._name=null,this._mce=null,this._isIsolated=!0,this._depth=new ss,this._depthDelta=0,1===arguments.length)t.constructor_.call(this,arguments[0],null);else if(2===arguments.length){var s=arguments[1];this.pts=arguments[0],this._label=s}}},{key:"updateIM",value:function(){if(!(2===arguments.length&&arguments[1]instanceof ns&&arguments[0]instanceof Ne))return pt(t,"updateIM",this).apply(this,arguments);var e=arguments[0],n=arguments[1];n.setAtLeastIfValid(e.getLocation(0,H.ON),e.getLocation(1,H.ON),1),e.isArea()&&(n.setAtLeastIfValid(e.getLocation(0,H.LEFT),e.getLocation(1,H.LEFT),2),n.setAtLeastIfValid(e.getLocation(0,H.RIGHT),e.getLocation(1,H.RIGHT),2))}}])}(Lr),ei=function(){function r(){x(this,r),r.constructor_.apply(this,arguments)}return c(r,[{key:"setWorkingPrecisionModel",value:function(t){this._workingPrecisionModel=t}},{key:"insertUniqueEdge",value:function(t){var e=this._edgeList.findEqualEdge(t);if(null!==e){var n=e.getLabel(),s=t.getLabel();e.isPointwiseEqual(t)||(s=new Ne(t.getLabel())).flip(),n.merge(s);var o=r.depthDelta(s),h=e.getDepthDelta()+o;e.setDepthDelta(h)}else this._edgeList.add(t),t.setDepthDelta(r.depthDelta(t.getLabel()))}},{key:"buildSubgraphs",value:function(t,e){for(var n=new mt,s=t.iterator();s.hasNext();){var o=s.next(),h=o.getRightmostCoordinate(),g=new Bn(n).getDepth(h);o.computeDepth(g),o.findResultEdges(),n.add(o),e.add(o.getDirectedEdges(),o.getNodes())}}},{key:"createSubgraphs",value:function(t){for(var e=new mt,n=t.getNodes().iterator();n.hasNext();){var s=n.next();if(!s.isVisited()){var o=new Oi;o.create(s),e.add(o)}}return Ze.sort(e,Ze.reverseOrder()),e}},{key:"createEmptyResultGeometry",value:function(){return this._geomFact.createPolygon()}},{key:"getNoder",value:function(t){if(null!==this._workingNoder)return this._workingNoder;var e=new be,n=new nn;return n.setPrecisionModel(t),e.setSegmentIntersector(new ts(n)),e}},{key:"buffer",value:function(t,e){var n=this._workingPrecisionModel;null===n&&(n=t.getPrecisionModel()),this._geomFact=t.getFactory();var s=new sn(n,this._bufParams),o=new mi(t,e,s).getCurves();if(o.size()<=0)return this.createEmptyResultGeometry();this.computeNodedEdges(o,n),this._graph=new dn(new an),this._graph.addEdges(this._edgeList.getEdges());var h=this.createSubgraphs(this._graph),g=new Nn(this._geomFact);this.buildSubgraphs(h,g);var y=g.getPolygons();return y.size()<=0?this.createEmptyResultGeometry():this._geomFact.buildGeometry(y)}},{key:"computeNodedEdges",value:function(t,e){var n=this.getNoder(e);n.computeNodes(t);for(var s=n.getNodedSubstrings().iterator();s.hasNext();){var o=s.next(),h=o.getCoordinates();if(2!==h.length||!h[0].equals2D(h[1])){var g=o.getData(),y=new vi(o.getCoordinates(),new Ne(g));this.insertUniqueEdge(y)}}}},{key:"setNoder",value:function(t){this._workingNoder=t}}],[{key:"constructor_",value:function(){this._bufParams=null,this._workingPrecisionModel=null,this._workingNoder=null,this._geomFact=null,this._graph=null,this._edgeList=new qr,this._bufParams=arguments[0]}},{key:"depthDelta",value:function(t){var e=t.getLocation(0,H.LEFT),n=t.getLocation(0,H.RIGHT);return e===S.INTERIOR&&n===S.EXTERIOR?1:e===S.EXTERIOR&&n===S.INTERIOR?-1:0}},{key:"convertSegStrings",value:function(t){for(var e=new he,n=new mt;t.hasNext();){var s=t.next(),o=e.createLineString(s.getCoordinates());n.add(o)}return e.buildGeometry(n)}}])}(),Ui=function(){function r(){x(this,r),r.constructor_.apply(this,arguments)}return c(r,[{key:"rescale",value:function(){if(Ct(arguments[0],$e))for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.rescale(e.getCoordinates())}else if(arguments[0]instanceof Array){for(var n=arguments[0],s=0;s<n.length;s++)n[s].x=n[s].x/this._scaleFactor+this._offsetX,n[s].y=n[s].y/this._scaleFactor+this._offsetY;2===n.length&&n[0].equals2D(n[1])&&Be.out.println(n)}}},{key:"scale",value:function(){if(Ct(arguments[0],$e)){for(var t=arguments[0],e=new mt(t.size()),n=t.iterator();n.hasNext();){var s=n.next();e.add(new ct(this.scale(s.getCoordinates()),s.getData()))}return e}if(arguments[0]instanceof Array){for(var o=arguments[0],h=new Array(o.length).fill(null),g=0;g<o.length;g++)h[g]=new D(Math.round((o[g].x-this._offsetX)*this._scaleFactor),Math.round((o[g].y-this._offsetY)*this._scaleFactor),o[g].getZ());return oe.removeRepeatedPoints(h)}}},{key:"isIntegerPrecision",value:function(){return 1===this._scaleFactor}},{key:"getNodedSubstrings",value:function(){var t=this._noder.getNodedSubstrings();return this._isScaled&&this.rescale(t),t}},{key:"computeNodes",value:function(t){var e=t;this._isScaled&&(e=this.scale(t)),this._noder.computeNodes(e)}},{key:"interfaces_",get:function(){return[Kt]}}],[{key:"constructor_",value:function(){if(this._noder=null,this._scaleFactor=null,this._offsetX=null,this._offsetY=null,this._isScaled=!1,2===arguments.length)r.constructor_.call(this,arguments[0],arguments[1],0,0);else if(4===arguments.length){var s=arguments[1];this._noder=arguments[0],this._scaleFactor=s,this._isScaled=!this.isIntegerPrecision()}}}])}(),_i=function(){function r(){x(this,r),r.constructor_.apply(this,arguments)}return c(r,[{key:"checkEndPtVertexIntersections",value:function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();){var e=t.next().getCoordinates();this.checkEndPtVertexIntersections(e[0],this._segStrings),this.checkEndPtVertexIntersections(e[e.length-1],this._segStrings)}else if(2===arguments.length)for(var n=arguments[0],s=arguments[1].iterator();s.hasNext();)for(var o=s.next().getCoordinates(),h=1;h<o.length-1;h++)if(o[h].equals(n))throw new Te("found endpt/interior pt intersection at index "+h+" :pt "+n)}},{key:"checkInteriorIntersections",value:function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();)for(var e=t.next(),n=this._segStrings.iterator();n.hasNext();){var s=n.next();this.checkInteriorIntersections(e,s)}else if(2===arguments.length)for(var o=arguments[0],h=arguments[1],g=o.getCoordinates(),y=h.getCoordinates(),k=0;k<g.length-1;k++)for(var R=0;R<y.length-1;R++)this.checkInteriorIntersections(o,k,h,R);else if(4===arguments.length){var P=arguments[0],z=arguments[1],K=arguments[2],ot=arguments[3];if(P===K&&z===ot)return null;var gt=P.getCoordinates()[z],Ht=P.getCoordinates()[z+1],Qt=K.getCoordinates()[ot],ne=K.getCoordinates()[ot+1];if(this._li.computeIntersection(gt,Ht,Qt,ne),this._li.hasIntersection()&&(this._li.isProper()||this.hasInteriorIntersection(this._li,gt,Ht)||this.hasInteriorIntersection(this._li,Qt,ne)))throw new Te("found non-noded intersection at "+gt+"-"+Ht+" and "+Qt+"-"+ne)}}},{key:"checkValid",value:function(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses()}},{key:"checkCollapses",value:function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();){var e=t.next();this.checkCollapses(e)}else if(1===arguments.length)for(var n=arguments[0].getCoordinates(),s=0;s<n.length-2;s++)this.checkCollapse(n[s],n[s+1],n[s+2])}},{key:"hasInteriorIntersection",value:function(t,e,n){for(var s=0;s<t.getIntersectionNum();s++){var o=t.getIntersection(s);if(!o.equals(e)&&!o.equals(n))return!0}return!1}},{key:"checkCollapse",value:function(t,e,n){if(t.equals(n))throw new Te("found non-noded collapse at "+r.fact.createLineString([t,e,n]))}}],[{key:"constructor_",value:function(){this._li=new nn,this._segStrings=null,this._segStrings=arguments[0]}}])}();_i.fact=new he;var ni=function(){function r(){x(this,r),r.constructor_.apply(this,arguments)}return c(r,[{key:"intersectsScaled",value:function(t,e){var n=Math.min(t.x,e.x),s=Math.max(t.x,e.x),o=Math.min(t.y,e.y),h=Math.max(t.y,e.y),g=this._maxx<n||this._minx>s||this._maxy<o||this._miny>h;if(g)return!1;var y=this.intersectsToleranceSquare(t,e);return bt.isTrue(!(g&&y),"Found bad envelope test"),y}},{key:"initCorners",value:function(t){var e=.5;this._minx=t.x-e,this._maxx=t.x+e,this._miny=t.y-e,this._maxy=t.y+e,this._corner[0]=new D(this._maxx,this._maxy),this._corner[1]=new D(this._minx,this._maxy),this._corner[2]=new D(this._minx,this._miny),this._corner[3]=new D(this._maxx,this._miny)}},{key:"intersects",value:function(t,e){return 1===this._scaleFactor?this.intersectsScaled(t,e):(this.copyScaled(t,this._p0Scaled),this.copyScaled(e,this._p1Scaled),this.intersectsScaled(this._p0Scaled,this._p1Scaled))}},{key:"scale",value:function(t){return Math.round(t*this._scaleFactor)}},{key:"getCoordinate",value:function(){return this._originalPt}},{key:"copyScaled",value:function(t,e){e.x=this.scale(t.x),e.y=this.scale(t.y)}},{key:"getSafeEnvelope",value:function(){if(null===this._safeEnv){var t=r.SAFE_ENV_EXPANSION_FACTOR/this._scaleFactor;this._safeEnv=new te(this._originalPt.x-t,this._originalPt.x+t,this._originalPt.y-t,this._originalPt.y+t)}return this._safeEnv}},{key:"intersectsPixelClosure",value:function(t,e){return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!(this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),this._li.hasIntersection()))))}},{key:"intersectsToleranceSquare",value:function(t,e){var n=!1,s=!1;return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!(this._li.isProper()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),this._li.isProper()||(this._li.hasIntersection()&&(n=!0),this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),this._li.isProper()||(this._li.hasIntersection()&&(s=!0),this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),this._li.isProper()||n&&s||t.equals(this._pt)||e.equals(this._pt)))))}},{key:"addSnappedNode",value:function(t,e){var n=t.getCoordinate(e),s=t.getCoordinate(e+1);return!!this.intersects(n,s)&&(t.addIntersection(this.getCoordinate(),e),!0)}}],[{key:"constructor_",value:function(){this._li=null,this._pt=null,this._originalPt=null,this._ptScaled=null,this._p0Scaled=null,this._p1Scaled=null,this._scaleFactor=null,this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,this._corner=new Array(4).fill(null),this._safeEnv=null;var t=arguments[0],e=arguments[1],n=arguments[2];if(this._originalPt=t,this._pt=t,this._scaleFactor=e,this._li=n,e<=0)throw new $("Scale factor must be non-zero");1!==e&&(this._pt=new D(this.scale(t.x),this.scale(t.y)),this._p0Scaled=new D,this._p1Scaled=new D),this.initCorners(this._pt)}}])}();ni.SAFE_ENV_EXPANSION_FACTOR=.75;var Bi=c(function r(){x(this,r),r.constructor_.apply(this,arguments)},[{key:"select",value:function(){1!==arguments.length&&2===arguments.length&&(arguments[0].getLineSegment(arguments[1],this.selectedSegment),this.select(this.selectedSegment))}}],[{key:"constructor_",value:function(){this.selectedSegment=new Dt}}]),as=c(function r(){x(this,r),r.constructor_.apply(this,arguments)},[{key:"snap",value:function(){if(1===arguments.length)return this.snap(arguments[0],null,-1);if(3===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2],s=t.getSafeEnvelope(),o=new Ei(t,e,n);return this._index.query(s,new(c(function h(){x(this,h)},[{key:"interfaces_",get:function(){return[Rt]}},{key:"visitItem",value:function(h){h.select(s,o)}}]))),o.isNodeAdded()}}}],[{key:"constructor_",value:function(){this._index=null,this._index=arguments[0]}}]),Ei=function(r){function t(){var e;return x(this,t),e=G(this,t),t.constructor_.apply(e,arguments),e}return at(t,r),c(t,[{key:"isNodeAdded",value:function(){return this._isNodeAdded}},{key:"select",value:function(){if(!(2===arguments.length&&Number.isInteger(arguments[1])&&arguments[0]instanceof ft))return pt(t,"select",this,1).apply(this,arguments);var e=arguments[1],n=arguments[0].getContext();if(this._parentEdge===n&&(e===this._hotPixelVertexIndex||e+1===this._hotPixelVertexIndex))return null;this._isNodeAdded|=this._hotPixel.addSnappedNode(n,e)}}],[{key:"constructor_",value:function(){this._hotPixel=null,this._parentEdge=null,this._hotPixelVertexIndex=null,this._isNodeAdded=!1;var n=arguments[1],s=arguments[2];this._hotPixel=arguments[0],this._parentEdge=n,this._hotPixelVertexIndex=s}}])}(Bi);as.HotPixelSnapAction=Ei;var Gi=c(function r(){x(this,r),r.constructor_.apply(this,arguments)},[{key:"processIntersections",value:function(r,t,e,n){if(r===e&&t===n)return null;var s=r.getCoordinates()[t],o=r.getCoordinates()[t+1],h=e.getCoordinates()[n],g=e.getCoordinates()[n+1];if(this._li.computeIntersection(s,o,h,g),this._li.hasIntersection()&&this._li.isInteriorIntersection()){for(var y=0;y<this._li.getIntersectionNum();y++)this._interiorIntersections.add(this._li.getIntersection(y));r.addIntersections(this._li,t,0),e.addIntersections(this._li,n,1)}}},{key:"isDone",value:function(){return!1}},{key:"getInteriorIntersections",value:function(){return this._interiorIntersections}},{key:"interfaces_",get:function(){return[yi]}}],[{key:"constructor_",value:function(){this._li=null,this._interiorIntersections=null,this._li=arguments[0],this._interiorIntersections=new mt}}]),ws=c(function r(){x(this,r),r.constructor_.apply(this,arguments)},[{key:"checkCorrectness",value:function(r){var t=ct.getNodedSubstrings(r),e=new _i(t);try{e.checkValid()}catch(n){if(!(n instanceof ze))throw n;n.printStackTrace()}}},{key:"getNodedSubstrings",value:function(){return ct.getNodedSubstrings(this._nodedSegStrings)}},{key:"snapRound",value:function(r,t){var e=this.findInteriorIntersections(r,t);this.computeIntersectionSnaps(e),this.computeVertexSnaps(r)}},{key:"findInteriorIntersections",value:function(r,t){var e=new Gi(t);return this._noder.setSegmentIntersector(e),this._noder.computeNodes(r),e.getInteriorIntersections()}},{key:"computeVertexSnaps",value:function(){if(Ct(arguments[0],$e))for(var r=arguments[0].iterator();r.hasNext();){var t=r.next();this.computeVertexSnaps(t)}else if(arguments[0]instanceof ct)for(var e=arguments[0],n=e.getCoordinates(),s=0;s<n.length;s++){var o=new ni(n[s],this._scaleFactor,this._li);this._pointSnapper.snap(o,e,s)&&e.addIntersection(n[s],s)}}},{key:"computeNodes",value:function(r){this._nodedSegStrings=r,this._noder=new be,this._pointSnapper=new as(this._noder.getIndex()),this.snapRound(r,this._li)}},{key:"computeIntersectionSnaps",value:function(r){for(var t=r.iterator();t.hasNext();){var e=t.next(),n=new ni(e,this._scaleFactor,this._li);this._pointSnapper.snap(n)}}},{key:"interfaces_",get:function(){return[Kt]}}],[{key:"constructor_",value:function(){this._pm=null,this._li=null,this._scaleFactor=null,this._noder=null,this._pointSnapper=null,this._nodedSegStrings=null;var r=arguments[0];this._pm=r,this._li=new nn,this._li.setPrecisionModel(r),this._scaleFactor=r.getScale()}}]),er=function(){function r(){x(this,r),r.constructor_.apply(this,arguments)}return c(r,[{key:"bufferFixedPrecision",value:function(t){var e=new Ui(new ws(new je(1)),t.getScale()),n=new ei(this._bufParams);n.setWorkingPrecisionModel(t),n.setNoder(e),this._resultGeometry=n.buffer(this._argGeom,this._distance)}},{key:"bufferReducedPrecision",value:function(){if(0===arguments.length){for(var t=r.MAX_PRECISION_DIGITS;t>=0;t--){try{this.bufferReducedPrecision(t)}catch(o){if(!(o instanceof B))throw o;this._saveException=o}if(null!==this._resultGeometry)return null}throw this._saveException}if(1===arguments.length){var n=r.precisionScaleFactor(this._argGeom,this._distance,arguments[0]),s=new je(n);this.bufferFixedPrecision(s)}}},{key:"computeGeometry",value:function(){if(this.bufferOriginalPrecision(),null!==this._resultGeometry)return null;var t=this._argGeom.getFactory().getPrecisionModel();t.getType()===je.FIXED?this.bufferFixedPrecision(t):this.bufferReducedPrecision()}},{key:"setQuadrantSegments",value:function(t){this._bufParams.setQuadrantSegments(t)}},{key:"bufferOriginalPrecision",value:function(){try{var t=new ei(this._bufParams);this._resultGeometry=t.buffer(this._argGeom,this._distance)}catch(e){if(!(e instanceof Te))throw e;this._saveException=e}}},{key:"getResultGeometry",value:function(t){return this._distance=t,this.computeGeometry(),this._resultGeometry}},{key:"setEndCapStyle",value:function(t){this._bufParams.setEndCapStyle(t)}}],[{key:"constructor_",value:function(){if(this._argGeom=null,this._distance=null,this._bufParams=new Wt,this._resultGeometry=null,this._saveException=null,1===arguments.length)this._argGeom=arguments[0];else if(2===arguments.length){var n=arguments[1];this._argGeom=arguments[0],this._bufParams=n}}},{key:"bufferOp",value:function(){if(2===arguments.length){var t=arguments[1];return new r(arguments[0]).getResultGeometry(t)}if(3===arguments.length){if(Number.isInteger(arguments[2])&&arguments[0]instanceof lt&&"number"==typeof arguments[1]){var e=arguments[1],n=arguments[2],s=new r(arguments[0]);return s.setQuadrantSegments(n),s.getResultGeometry(e)}if(arguments[2]instanceof Wt&&arguments[0]instanceof lt&&"number"==typeof arguments[1]){var o=arguments[1];return new r(arguments[0],arguments[2]).getResultGeometry(o)}}else if(4===arguments.length){var h=arguments[1],g=arguments[2],y=arguments[3],k=new r(arguments[0]);return k.setQuadrantSegments(g),k.setEndCapStyle(y),k.getResultGeometry(h)}}},{key:"precisionScaleFactor",value:function(t,e,n){var s=t.getEnvelopeInternal(),o=wn.max(Math.abs(s.getMaxX()),Math.abs(s.getMaxY()),Math.abs(s.getMinX()),Math.abs(s.getMinY()))+2*(e>0?e:0),h=n-Math.trunc(Math.log(o)/Math.log(10)+1);return Math.pow(10,h)}}])}();er.CAP_ROUND=Wt.CAP_ROUND,er.CAP_BUTT=Wt.CAP_FLAT,er.CAP_FLAT=Wt.CAP_FLAT,er.CAP_SQUARE=Wt.CAP_SQUARE,er.MAX_PRECISION_DIGITS=12;var os=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],zr=c(function r(t){x(this,r),this.geometryFactory=t||new he},[{key:"read",value:function(r){var t,e=(t="string"==typeof r?JSON.parse(r):r).type;if(!Fe[e])throw new Error("Unknown GeoJSON type: "+t.type);return-1!==os.indexOf(e)?Fe[e].call(this,t.coordinates):Fe[e].call(this,"GeometryCollection"===e?t.geometries:t)}},{key:"write",value:function(r){var t=r.getGeometryType();if(!on[t])throw new Error("Geometry is not supported");return on[t].call(this,r)}}]),Fe={Feature:function(r){var t={};for(var e in r)t[e]=r[e];if(r.geometry){if(!Fe[r.geometry.type])throw new Error("Unknown GeoJSON type: "+r.type);t.geometry=this.read(r.geometry)}return r.bbox&&(t.bbox=Fe.bbox.call(this,r.bbox)),t},FeatureCollection:function(r){var t={};if(r.features){t.features=[];for(var e=0;e<r.features.length;++e)t.features.push(this.read(r.features[e]))}return r.bbox&&(t.bbox=this.parse.bbox.call(this,r.bbox)),t},coordinates:function(r){for(var t=[],e=0;e<r.length;++e)t.push(J(D,ge(r[e])));return t},bbox:function(r){return this.geometryFactory.createLinearRing([new D(r[0],r[1]),new D(r[2],r[1]),new D(r[2],r[3]),new D(r[0],r[3]),new D(r[0],r[1])])},Point:function(r){var t=J(D,ge(r));return this.geometryFactory.createPoint(t)},MultiPoint:function(r){for(var t=[],e=0;e<r.length;++e)t.push(Fe.Point.call(this,r[e]));return this.geometryFactory.createMultiPoint(t)},LineString:function(r){var t=Fe.coordinates.call(this,r);return this.geometryFactory.createLineString(t)},MultiLineString:function(r){for(var t=[],e=0;e<r.length;++e)t.push(Fe.LineString.call(this,r[e]));return this.geometryFactory.createMultiLineString(t)},Polygon:function(r){for(var t=Fe.coordinates.call(this,r[0]),e=this.geometryFactory.createLinearRing(t),n=[],s=1;s<r.length;++s){var h=Fe.coordinates.call(this,r[s]),g=this.geometryFactory.createLinearRing(h);n.push(g)}return this.geometryFactory.createPolygon(e,n)},MultiPolygon:function(r){for(var t=[],e=0;e<r.length;++e)t.push(Fe.Polygon.call(this,r[e]));return this.geometryFactory.createMultiPolygon(t)},GeometryCollection:function(r){for(var t=[],e=0;e<r.length;++e)t.push(this.read(r[e]));return this.geometryFactory.createGeometryCollection(t)}},on={coordinate:function(r){var t=[r.x,r.y];return r.z&&t.push(r.z),r.m&&t.push(r.m),t},Point:function(r){return{type:"Point",coordinates:on.coordinate.call(this,r.getCoordinate())}},MultiPoint:function(r){for(var t=[],e=0;e<r._geometries.length;++e){var s=on.Point.call(this,r._geometries[e]);t.push(s.coordinates)}return{type:"MultiPoint",coordinates:t}},LineString:function(r){for(var t=[],e=r.getCoordinates(),n=0;n<e.length;++n)t.push(on.coordinate.call(this,e[n]));return{type:"LineString",coordinates:t}},MultiLineString:function(r){for(var t=[],e=0;e<r._geometries.length;++e){var s=on.LineString.call(this,r._geometries[e]);t.push(s.coordinates)}return{type:"MultiLineString",coordinates:t}},Polygon:function(r){var t=[],e=on.LineString.call(this,r._shell);t.push(e.coordinates);for(var n=0;n<r._holes.length;++n){var o=on.LineString.call(this,r._holes[n]);t.push(o.coordinates)}return{type:"Polygon",coordinates:t}},MultiPolygon:function(r){for(var t=[],e=0;e<r._geometries.length;++e){var s=on.Polygon.call(this,r._geometries[e]);t.push(s.coordinates)}return{type:"MultiPolygon",coordinates:t}},GeometryCollection:function(r){for(var t=[],e=0;e<r._geometries.length;++e){var n=r._geometries[e],s=n.getGeometryType();t.push(on[s].call(this,n))}return{type:"GeometryCollection",geometries:t}}};return{BufferOp:er,GeoJSONReader:c(function r(t){x(this,r),this.parser=new zr(t||new he)},[{key:"read",value:function(r){return this.parser.read(r)}}]),GeoJSONWriter:c(function r(){x(this,r),this.parser=new zr(this.geometryFactory)},[{key:"write",value:function(r){return this.parser.write(r)}}])}}()},2274:(It,et,G)=>{var x=G(9341);function J(V){var c,j;function dt(Jt,Zt){try{var pt=V[Jt](Zt),ge=pt.value,Ue=ge instanceof x;Promise.resolve(Ue?ge.wrapped:ge).then(function(Oe){Ue?dt("return"===Jt?"return":"next",Oe):at(pt.done?"return":"normal",Oe)},function(Oe){dt("throw",Oe)})}catch(Oe){at("throw",Oe)}}function at(Jt,Zt){switch(Jt){case"return":c.resolve({value:Zt,done:!0});break;case"throw":c.reject(Zt);break;default:c.resolve({value:Zt,done:!1})}(c=c.next)?dt(c.key,c.arg):j=null}this._invoke=function St(Jt,Zt){return new Promise(function(pt,ge){var Ue={key:Jt,arg:Zt,resolve:pt,reject:ge,next:null};j?j=j.next=Ue:(c=j=Ue,dt(Jt,Zt))})},"function"!=typeof V.return&&(this.return=void 0)}J.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},J.prototype.next=function(V){return this._invoke("next",V)},J.prototype.throw=function(V){return this._invoke("throw",V)},J.prototype.return=function(V){return this._invoke("return",V)},It.exports=J,It.exports.__esModule=!0,It.exports.default=It.exports},9341:It=>{It.exports=function et(G){this.wrapped=G},It.exports.__esModule=!0,It.exports.default=It.exports},803:It=>{It.exports=function et(G,x){var J={},V=!1;function c(j,St){return V=!0,St=new Promise(function(dt){dt(G[j](St))}),{done:!1,value:x(St)}}return J[typeof Symbol<"u"&&Symbol.iterator||"@@iterator"]=function(){return this},J.next=function(j){return V?(V=!1,j):c("next",j)},"function"==typeof G.throw&&(J.throw=function(j){if(V)throw V=!1,j;return c("throw",j)}),"function"==typeof G.return&&(J.return=function(j){return V?(V=!1,j):c("return",j)}),J},It.exports.__esModule=!0,It.exports.default=It.exports},1535:It=>{function G(x){function J(V){if(Object(V)!==V)return Promise.reject(new TypeError(V+" is not an object."));var c=V.done;return Promise.resolve(V.value).then(function(j){return{value:j,done:c}})}return(G=function(c){this.s=c,this.n=c.next}).prototype={s:null,n:null,next:function(){return J(this.n.apply(this.s,arguments))},return:function(c){var j=this.s.return;return void 0===j?Promise.resolve({value:c,done:!0}):J(j.apply(this.s,arguments))},throw:function(c){var j=this.s.return;return void 0===j?Promise.reject(c):J(j.apply(this.s,arguments))}},new G(x)}It.exports=function et(x){var J,V,c,j=2;for(typeof Symbol<"u"&&(V=Symbol.asyncIterator,c=Symbol.iterator);j--;){if(V&&null!=(J=x[V]))return J.call(x);if(c&&null!=(J=x[c]))return new G(J.call(x));V="@@asyncIterator",c="@@iterator"}throw new TypeError("Object is not async iterable")},It.exports.__esModule=!0,It.exports.default=It.exports},9344:It=>{function et(x,J,V,c,j,St,dt){try{var at=x[St](dt),Jt=at.value}catch(Zt){return void V(Zt)}at.done?J(Jt):Promise.resolve(Jt).then(c,j)}It.exports=function G(x){return function(){var J=this,V=arguments;return new Promise(function(c,j){var St=x.apply(J,V);function dt(Jt){et(St,c,j,dt,at,"next",Jt)}function at(Jt){et(St,c,j,dt,at,"throw",Jt)}dt(void 0)})}},It.exports.__esModule=!0,It.exports.default=It.exports},6938:(It,et,G)=>{var x=G(9341);It.exports=function J(V){return new x(V)},It.exports.__esModule=!0,It.exports.default=It.exports},9973:(It,et,G)=>{var x=G(2274);It.exports=function J(V){return function(){return new x(V.apply(this,arguments))}},It.exports.__esModule=!0,It.exports.default=It.exports},7362:(It,et,G)=>{"use strict";var x=G(9344).default,J=G(9973).default,V=G(6938).default,c=G(803).default,j=G(1535).default;function St(p,m){return function(){return p.apply(m,arguments)}}const{toString:dt}=Object.prototype,{getPrototypeOf:at}=Object,Jt=(p=Object.create(null),m=>{const v=dt.call(m);return p[v]||(p[v]=v.slice(8,-1).toLowerCase())}),Zt=p=>(p=p.toLowerCase(),m=>Jt(m)===p),pt=p=>m=>typeof m===p,{isArray:ge}=Array,Ue=pt("undefined");var p;const yn=Zt("ArrayBuffer"),ze=pt("string"),$=pt("function"),Y=pt("number"),se=p=>null!==p&&"object"==typeof p,ce=p=>{if("object"!==Jt(p))return!1;const m=at(p);return!(null!==m&&m!==Object.prototype&&null!==Object.getPrototypeOf(m)||Symbol.toStringTag in p||Symbol.iterator in p)},w=Zt("Date"),Tt=Zt("File"),wt=Zt("Blob"),Tn=Zt("FileList"),Qn=Zt("URLSearchParams"),[ar,or,Xn,ht]=["ReadableStream","Request","Response","Headers"].map(Zt);function Te(p,m,{allOwnKeys:v=!1}={}){if(null===p||typeof p>"u")return;let E,I;if("object"!=typeof p&&(p=[p]),ge(p))for(E=0,I=p.length;E<I;E++)m.call(null,p[E],E,p);else{const M=v?Object.getOwnPropertyNames(p):Object.keys(p),A=M.length;let q;for(E=0;E<A;E++)q=M[E],m.call(null,p[q],q,p)}}function Hn(p,m){m=m.toLowerCase();const v=Object.keys(p);let I,E=v.length;for(;E-- >0;)if(I=v[E],m===I.toLowerCase())return I;return null}const bt=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Er=p=>!Ue(p)&&p!==bt,$e=(p=>m=>p&&m instanceof p)(typeof Uint8Array<"u"&&at(Uint8Array)),Wr=Zt("HTMLFormElement"),$r=(({hasOwnProperty:p})=>(m,v)=>p.call(m,v))(Object.prototype),H=Zt("RegExp"),hr=(p,m)=>{const v=Object.getOwnPropertyDescriptors(p),E={};Te(v,(I,M)=>{let A;!1!==(A=m(I,M,p))&&(E[M]=A||I)}),Object.defineProperties(p,E)},_n="abcdefghijklmnopqrstuvwxyz",En="0123456789",cn={DIGIT:En,ALPHA:_n,ALPHA_DIGIT:_n+_n.toUpperCase()+En},yt=Zt("AsyncFunction");var B={isArray:ge,isArrayBuffer:yn,isBuffer:function Oe(p){return null!==p&&!Ue(p)&&null!==p.constructor&&!Ue(p.constructor)&&$(p.constructor.isBuffer)&&p.constructor.isBuffer(p)},isFormData:p=>{let m;return p&&("function"==typeof FormData&&p instanceof FormData||$(p.append)&&("formdata"===(m=Jt(p))||"object"===m&&$(p.toString)&&"[object FormData]"===p.toString()))},isArrayBufferView:function Wt(p){let m;return m=typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView(p):p&&p.buffer&&yn(p.buffer),m},isString:ze,isNumber:Y,isBoolean:p=>!0===p||!1===p,isObject:se,isPlainObject:ce,isReadableStream:ar,isRequest:or,isResponse:Xn,isHeaders:ht,isUndefined:Ue,isDate:w,isFile:Tt,isBlob:wt,isRegExp:H,isFunction:$,isStream:p=>se(p)&&$(p.pipe),isURLSearchParams:Qn,isTypedArray:$e,isFileList:Tn,forEach:Te,merge:function lr(){const{caseless:p}=Er(this)&&this||{},m={},v=(E,I)=>{const M=p&&Hn(m,I)||I;m[M]=ce(m[M])&&ce(E)?lr(m[M],E):ce(E)?lr({},E):ge(E)?E.slice():E};for(let E=0,I=arguments.length;E<I;E++)arguments[E]&&Te(arguments[E],v);return m},extend:(p,m,v,{allOwnKeys:E}={})=>(Te(m,(I,M)=>{p[M]=v&&$(I)?St(I,v):I},{allOwnKeys:E}),p),trim:p=>p.trim?p.trim():p.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:p=>(65279===p.charCodeAt(0)&&(p=p.slice(1)),p),inherits:(p,m,v,E)=>{p.prototype=Object.create(m.prototype,E),p.prototype.constructor=p,Object.defineProperty(p,"super",{value:m.prototype}),v&&Object.assign(p.prototype,v)},toFlatObject:(p,m,v,E)=>{let I,M,A;const q={};if(m=m||{},null==p)return m;do{for(I=Object.getOwnPropertyNames(p),M=I.length;M-- >0;)A=I[M],(!E||E(A,p,m))&&!q[A]&&(m[A]=p[A],q[A]=!0);p=!1!==v&&at(p)}while(p&&(!v||v(p,m))&&p!==Object.prototype);return m},kindOf:Jt,kindOfTest:Zt,endsWith:(p,m,v)=>{p=String(p),(void 0===v||v>p.length)&&(v=p.length);const E=p.indexOf(m,v-=m.length);return-1!==E&&E===v},toArray:p=>{if(!p)return null;if(ge(p))return p;let m=p.length;if(!Y(m))return null;const v=new Array(m);for(;m-- >0;)v[m]=p[m];return v},forEachEntry:(p,m)=>{const E=(p&&p[Symbol.iterator]).call(p);let I;for(;(I=E.next())&&!I.done;){const M=I.value;m.call(p,M[0],M[1])}},matchAll:(p,m)=>{let v;const E=[];for(;null!==(v=p.exec(m));)E.push(v);return E},isHTMLForm:Wr,hasOwnProperty:$r,hasOwnProp:$r,reduceDescriptors:hr,freezeMethods:p=>{hr(p,(m,v)=>{if($(p)&&-1!==["arguments","caller","callee"].indexOf(v))return!1;if($(p[v])){if(m.enumerable=!1,"writable"in m)return void(m.writable=!1);m.set||(m.set=()=>{throw Error("Can not rewrite read-only method '"+v+"'")})}})},toObjectSet:(p,m)=>{const v={},E=I=>{I.forEach(M=>{v[M]=!0})};return ge(p)?E(p):E(String(p).split(m)),v},toCamelCase:p=>p.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(v,E,I){return E.toUpperCase()+I}),noop:()=>{},toFiniteNumber:(p,m)=>null!=p&&Number.isFinite(p=+p)?p:m,findKey:Hn,global:bt,isContextDefined:Er,ALPHABET:cn,generateString:(p=16,m=cn.ALPHA_DIGIT)=>{let v="";const{length:E}=m;for(;p--;)v+=m[Math.random()*E|0];return v},isSpecCompliantForm:function Nr(p){return!!(p&&$(p.append)&&"FormData"===p[Symbol.toStringTag]&&p[Symbol.iterator])},toJSONObject:p=>{const m=new Array(10),v=(E,I)=>{if(se(E)){if(m.indexOf(E)>=0)return;if(!("toJSON"in E)){m[I]=E;const M=ge(E)?[]:{};return Te(E,(A,q)=>{const tt=v(A,I+1);!Ue(tt)&&(M[q]=tt)}),m[I]=void 0,M}}return E};return v(p,0)},isAsyncFn:yt,isThenable:p=>p&&(se(p)||$(p))&&$(p.then)&&$(p.catch)};function kt(p,m,v,E,I){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=p,this.name="AxiosError",m&&(this.code=m),v&&(this.config=v),E&&(this.request=E),I&&(this.response=I)}B.inherits(kt,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:B.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const mt=kt.prototype,fr={};function Vn(p){return B.isPlainObject(p)||B.isArray(p)}function Be(p){return B.endsWith(p,"[]")?p.slice(0,-2):p}function wn(p,m,v){return p?p.concat(m).map(function(I,M){return I=Be(I),!v&&M?"["+I+"]":I}).join(v?".":""):m}["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(p=>{fr[p]={value:p}}),Object.defineProperties(kt,fr),Object.defineProperty(mt,"isAxiosError",{value:!0}),kt.from=(p,m,v,E,I,M)=>{const A=Object.create(mt);return B.toFlatObject(p,A,function(tt){return tt!==Error.prototype},q=>"isAxiosError"!==q),kt.call(A,p.message,m,v,E,I),A.cause=p,A.name=p.name,M&&Object.assign(A,M),A};const ci=B.toFlatObject(B,{},null,function(m){return/^is[A-Z]/.test(m)});function Cn(p,m,v){if(!B.isObject(p))throw new TypeError("target must be an object");m=m||new FormData;const E=(v=B.toFlatObject(v,{metaTokens:!0,dots:!1,indexes:!1},!1,function(Ot,Kt){return!B.isUndefined(Kt[Ot])})).metaTokens,I=v.visitor||Q,M=v.dots,A=v.indexes,tt=(v.Blob||typeof Blob<"u"&&Blob)&&B.isSpecCompliantForm(m);if(!B.isFunction(I))throw new TypeError("visitor must be a function");function nt(ft){if(null===ft)return"";if(B.isDate(ft))return ft.toISOString();if(!tt&&B.isBlob(ft))throw new kt("Blob is not supported. Use a Buffer instead.");return B.isArrayBuffer(ft)||B.isTypedArray(ft)?tt&&"function"==typeof Blob?new Blob([ft]):Buffer.from(ft):ft}function Q(ft,Ot,Kt){let pe=ft;if(ft&&!Kt&&"object"==typeof ft)if(B.endsWith(Ot,"{}"))Ot=E?Ot:Ot.slice(0,-2),ft=JSON.stringify(ft);else if(B.isArray(ft)&&function tn(p){return B.isArray(p)&&!p.some(Vn)}(ft)||(B.isFileList(ft)||B.endsWith(Ot,"[]"))&&(pe=B.toArray(ft)))return Ot=Be(Ot),pe.forEach(function(In,zt){!B.isUndefined(In)&&null!==In&&m.append(!0===A?wn([Ot],zt,M):null===A?Ot:Ot+"[]",nt(In))}),!1;return!!Vn(ft)||(m.append(wn(Kt,Ot,M),nt(ft)),!1)}const ct=[],Dt=Object.assign(ci,{defaultVisitor:Q,convertValue:nt,isVisitable:Vn});if(!B.isObject(p))throw new TypeError("data must be an object");return function re(ft,Ot){if(!B.isUndefined(ft)){if(-1!==ct.indexOf(ft))throw Error("Circular reference detected in "+Ot.join("."));ct.push(ft),B.forEach(ft,function(pe,be){!0===(!(B.isUndefined(pe)||null===pe)&&I.call(m,pe,B.isString(be)?be.trim():be,Ot,Dt))&&re(pe,Ot?Ot.concat(be):[be])}),ct.pop()}}(p),m}function Ir(p){const m={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(p).replace(/[!'()~]|%20|%00/g,function(E){return m[E]})}function Sr(p,m){this._pairs=[],p&&Cn(p,this,m)}const ae=Sr.prototype;function W(p){return encodeURIComponent(p).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Rn(p,m,v){if(!m)return p;const E=v&&v.encode||W,I=v&&v.serialize;let M;if(M=I?I(m,v):B.isURLSearchParams(m)?m.toString():new Sr(m,v).toString(E),M){const A=p.indexOf("#");-1!==A&&(p=p.slice(0,A)),p+=(-1===p.indexOf("?")?"?":"&")+M}return p}ae.append=function(m,v){this._pairs.push([m,v])},ae.toString=function(m){const v=m?function(E){return m.call(this,E,Ir)}:Ir;return this._pairs.map(function(I){return v(I[0])+"="+v(I[1])},"").join("&")};var Zn=class Qe{constructor(){this.handlers=[]}use(m,v,E){return this.handlers.push({fulfilled:m,rejected:v,synchronous:!!E&&E.synchronous,runWhen:E?E.runWhen:null}),this.handlers.length-1}eject(m){this.handlers[m]&&(this.handlers[m]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(m){B.forEach(this.handlers,function(E){null!==E&&m(E)})}},Wn={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},wr={isBrowser:!0,classes:{URLSearchParams:typeof URLSearchParams<"u"?URLSearchParams:Sr,FormData:typeof FormData<"u"?FormData:null,Blob:typeof Blob<"u"?Blob:null},protocols:["http","https","file","blob","url","data"]};const $n=typeof window<"u"&&typeof document<"u",An=(p=>$n&&["ReactNative","NativeScript","NS"].indexOf(p)<0)(typeof navigator<"u"&&navigator.product),Kr=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&"function"==typeof self.importScripts,hi=$n&&window.location.href||"http://localhost";var Ge={...Object.freeze({__proto__:null,hasBrowserEnv:$n,hasStandardBrowserWebWorkerEnv:Kr,hasStandardBrowserEnv:An,origin:hi}),...wr};function Cr(p){function m(v,E,I,M){let A=v[M++];if("__proto__"===A)return!0;const q=Number.isFinite(+A),tt=M>=v.length;return A=!A&&B.isArray(I)?I.length:A,tt?(I[A]=B.hasOwnProp(I,A)?[I[A],E]:E,!q):((!I[A]||!B.isObject(I[A]))&&(I[A]=[]),m(v,E,I[A],M)&&B.isArray(I[A])&&(I[A]=function en(p){const m={},v=Object.keys(p);let E;const I=v.length;let M;for(E=0;E<I;E++)M=v[E],m[M]=p[M];return m}(I[A])),!q)}if(B.isFormData(p)&&B.isFunction(p.entries)){const v={};return B.forEachEntry(p,(E,I)=>{m(function hn(p){return B.matchAll(/\w+|\[(\w*)]/g,p).map(m=>"[]"===m[0]?"":m[1]||m[0])}(E),I,v,0)}),v}return null}const Mn={transitional:Wn,adapter:["xhr","http","fetch"],transformRequest:[function(m,v){const E=v.getContentType()||"",I=E.indexOf("application/json")>-1,M=B.isObject(m);if(M&&B.isHTMLForm(m)&&(m=new FormData(m)),B.isFormData(m))return I?JSON.stringify(Cr(m)):m;if(B.isArrayBuffer(m)||B.isBuffer(m)||B.isStream(m)||B.isFile(m)||B.isBlob(m)||B.isReadableStream(m))return m;if(B.isArrayBufferView(m))return m.buffer;if(B.isURLSearchParams(m))return v.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),m.toString();let q;if(M){if(E.indexOf("application/x-www-form-urlencoded")>-1)return function gr(p,m){return Cn(p,new Ge.classes.URLSearchParams,Object.assign({visitor:function(v,E,I,M){return Ge.isNode&&B.isBuffer(v)?(this.append(E,v.toString("base64")),!1):M.defaultVisitor.apply(this,arguments)}},m))}(m,this.formSerializer).toString();if((q=B.isFileList(m))||E.indexOf("multipart/form-data")>-1){const tt=this.env&&this.env.FormData;return Cn(q?{"files[]":m}:m,tt&&new tt,this.formSerializer)}}return M||I?(v.setContentType("application/json",!1),function Rr(p,m,v){if(B.isString(p))try{return(m||JSON.parse)(p),B.trim(p)}catch(E){if("SyntaxError"!==E.name)throw E}return(v||JSON.stringify)(p)}(m)):m}],transformResponse:[function(m){const v=this.transitional||Mn.transitional,E=v&&v.forcedJSONParsing,I="json"===this.responseType;if(B.isResponse(m)||B.isReadableStream(m))return m;if(m&&B.isString(m)&&(E&&!this.responseType||I)){const A=!(v&&v.silentJSONParsing)&&I;try{return JSON.parse(m)}catch(q){if(A)throw"SyntaxError"===q.name?kt.from(q,kt.ERR_BAD_RESPONSE,this,null,this.response):q}}return m}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Ge.classes.FormData,Blob:Ge.classes.Blob},validateStatus:function(m){return m>=200&&m<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};B.forEach(["delete","get","head","post","put","patch"],p=>{Mn.headers[p]={}});var oe=Mn;const Ai=B.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),dr=Symbol("internals");function Xe(p){return p&&String(p).trim().toLowerCase()}function jn(p){return!1===p||null==p?p:B.isArray(p)?p.map(jn):String(p)}function Or(p,m,v,E,I){if(B.isFunction(E))return E.call(this,m,v);if(I&&(m=v),B.isString(m)){if(B.isString(E))return-1!==m.indexOf(E);if(B.isRegExp(E))return E.test(m)}}class Me{constructor(m){m&&this.set(m)}set(m,v,E){const I=this;function M(q,tt,nt){const Q=Xe(tt);if(!Q)throw new Error("header name must be a non-empty string");const ct=B.findKey(I,Q);(!ct||void 0===I[ct]||!0===nt||void 0===nt&&!1!==I[ct])&&(I[ct||tt]=jn(q))}const A=(q,tt)=>B.forEach(q,(nt,Q)=>M(nt,Q,tt));if(B.isPlainObject(m)||m instanceof this.constructor)A(m,v);else if(B.isString(m)&&(m=m.trim())&&!(p=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(p.trim()))(m))A((p=>{const m={};let v,E,I;return p&&p.split("\n").forEach(function(A){I=A.indexOf(":"),v=A.substring(0,I).trim().toLowerCase(),E=A.substring(I+1).trim(),!(!v||m[v]&&Ai[v])&&("set-cookie"===v?m[v]?m[v].push(E):m[v]=[E]:m[v]=m[v]?m[v]+", "+E:E)}),m})(m),v);else if(B.isHeaders(m))for(const[q,tt]of m.entries())M(tt,q,E);else null!=m&&M(v,m,E);return this}get(m,v){if(m=Xe(m)){const E=B.findKey(this,m);if(E){const I=this[E];if(!v)return I;if(!0===v)return function Jr(p){const m=Object.create(null),v=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let E;for(;E=v.exec(p);)m[E[1]]=E[2];return m}(I);if(B.isFunction(v))return v.call(this,I,E);if(B.isRegExp(v))return v.exec(I);throw new TypeError("parser must be boolean|regexp|function")}}}has(m,v){if(m=Xe(m)){const E=B.findKey(this,m);return!(!E||void 0===this[E]||v&&!Or(0,this[E],E,v))}return!1}delete(m,v){const E=this;let I=!1;function M(A){if(A=Xe(A)){const q=B.findKey(E,A);q&&(!v||Or(0,E[q],q,v))&&(delete E[q],I=!0)}}return B.isArray(m)?m.forEach(M):M(m),I}clear(m){const v=Object.keys(this);let E=v.length,I=!1;for(;E--;){const M=v[E];(!m||Or(0,this[M],M,m,!0))&&(delete this[M],I=!0)}return I}normalize(m){const v=this,E={};return B.forEach(this,(I,M)=>{const A=B.findKey(E,M);if(A)return v[A]=jn(I),void delete v[M];const q=m?function je(p){return p.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(m,v,E)=>v.toUpperCase()+E)}(M):String(M).trim();q!==M&&delete v[M],v[q]=jn(I),E[q]=!0}),this}concat(...m){return this.constructor.concat(this,...m)}toJSON(m){const v=Object.create(null);return B.forEach(this,(E,I)=>{null!=E&&!1!==E&&(v[I]=m&&B.isArray(E)?E.join(", "):E)}),v}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([m,v])=>m+": "+v).join("\n")}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(m){return m instanceof this?m:new this(m)}static concat(m,...v){const E=new this(m);return v.forEach(I=>E.set(I)),E}static accessor(m){const E=(this[dr]=this[dr]={accessors:{}}).accessors,I=this.prototype;function M(A){const q=Xe(A);E[q]||(function bn(p,m){const v=B.toCamelCase(" "+m);["get","set","has"].forEach(E=>{Object.defineProperty(p,E+v,{value:function(I,M,A){return this[E].call(this,m,I,M,A)},configurable:!0})})}(I,A),E[q]=!0)}return B.isArray(m)?m.forEach(M):M(m),this}}Me.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),B.reduceDescriptors(Me.prototype,({value:p},m)=>{let v=m[0].toUpperCase()+m.slice(1);return{get:()=>p,set(E){this[v]=E}}}),B.freezeMethods(Me);var he=Me;function fn(p,m){const v=this||oe,E=m||v,I=he.from(E.headers);let M=E.data;return B.forEach(p,function(q){M=q.call(v,M,I.normalize(),m?m.status:void 0)}),I.normalize(),M}function Ar(p){return!(!p||!p.__CANCEL__)}function Pt(p,m,v){kt.call(this,p??"canceled",kt.ERR_CANCELED,m,v),this.name="CanceledError"}function gi(p,m,v){const E=v.config.validateStatus;v.status&&E&&!E(v.status)?m(new kt("Request failed with status code "+v.status,[kt.ERR_BAD_REQUEST,kt.ERR_BAD_RESPONSE][Math.floor(v.status/100)-4],v.config,v.request,v)):p(v)}B.inherits(Pt,kt,{__CANCEL__:!0});var ee=(p,m,v=3)=>{let E=0;const I=function xe(p,m){p=p||10;const v=new Array(p),E=new Array(p);let A,I=0,M=0;return m=void 0!==m?m:1e3,function(tt){const nt=Date.now(),Q=E[M];A||(A=nt),v[I]=tt,E[I]=nt;let ct=M,Dt=0;for(;ct!==I;)Dt+=v[ct++],ct%=p;if(I=(I+1)%p,I===M&&(M=(M+1)%p),nt-A<m)return;const re=Q&&nt-Q;return re?Math.round(1e3*Dt/re):void 0}}(50,250);return function kn(p,m){let v=0;const E=1e3/m;let I=null;return function(){const A=!0===this,q=Date.now();if(A||q-v>E)return I&&(clearTimeout(I),I=null),v=q,p.apply(null,arguments);I||(I=setTimeout(()=>(I=null,v=Date.now(),p.apply(null,arguments)),E-(q-v)))}}(M=>{const A=M.loaded,q=M.lengthComputable?M.total:void 0,tt=A-E,nt=I(tt);E=A;const ct={loaded:A,total:q,progress:q?A/q:void 0,bytes:tt,rate:nt||void 0,estimated:nt&&q&&A<=q?(q-A)/nt:void 0,event:M,lengthComputable:null!=q};ct[m?"download":"upload"]=!0,p(ct)},v)},de=Ge.hasStandardBrowserEnv?function(){const m=/(msie|trident)/i.test(navigator.userAgent),v=document.createElement("a");let E;function I(M){let A=M;return m&&(v.setAttribute("href",A),A=v.href),v.setAttribute("href",A),{href:v.href,protocol:v.protocol?v.protocol.replace(/:$/,""):"",host:v.host,search:v.search?v.search.replace(/^\?/,""):"",hash:v.hash?v.hash.replace(/^#/,""):"",hostname:v.hostname,port:v.port,pathname:"/"===v.pathname.charAt(0)?v.pathname:"/"+v.pathname}}return E=I(window.location.href),function(A){const q=B.isString(A)?I(A):A;return q.protocol===E.protocol&&q.host===E.host}}():function(){return!0},Ft=Ge.hasStandardBrowserEnv?{write(p,m,v,E,I,M){const A=[p+"="+encodeURIComponent(m)];B.isNumber(v)&&A.push("expires="+new Date(v).toGMTString()),B.isString(E)&&A.push("path="+E),B.isString(I)&&A.push("domain="+I),!0===M&&A.push("secure"),document.cookie=A.join("; ")},read(p){const m=document.cookie.match(new RegExp("(^|;\\s*)("+p+")=([^;]*)"));return m?decodeURIComponent(m[3]):null},remove(p){this.write(p,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function Ke(p,m){return p&&!function $t(p){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(p)}(m)?function Kn(p,m){return m?p.replace(/\/?\/$/,"")+"/"+m.replace(/^\/+/,""):p}(p,m):m}const xt=p=>p instanceof he?{...p}:p;function Pn(p,m){m=m||{};const v={};function E(nt,Q,ct){return B.isPlainObject(nt)&&B.isPlainObject(Q)?B.merge.call({caseless:ct},nt,Q):B.isPlainObject(Q)?B.merge({},Q):B.isArray(Q)?Q.slice():Q}function I(nt,Q,ct){return B.isUndefined(Q)?B.isUndefined(nt)?void 0:E(void 0,nt,ct):E(nt,Q,ct)}function M(nt,Q){if(!B.isUndefined(Q))return E(void 0,Q)}function A(nt,Q){return B.isUndefined(Q)?B.isUndefined(nt)?void 0:E(void 0,nt):E(void 0,Q)}function q(nt,Q,ct){return ct in m?E(nt,Q):ct in p?E(void 0,nt):void 0}const tt={url:M,method:M,data:M,baseURL:A,transformRequest:A,transformResponse:A,paramsSerializer:A,timeout:A,timeoutMessage:A,withCredentials:A,withXSRFToken:A,adapter:A,responseType:A,xsrfCookieName:A,xsrfHeaderName:A,onUploadProgress:A,onDownloadProgress:A,decompress:A,maxContentLength:A,maxBodyLength:A,beforeRedirect:A,transport:A,httpAgent:A,httpsAgent:A,cancelToken:A,socketPath:A,responseEncoding:A,validateStatus:q,headers:(nt,Q)=>I(xt(nt),xt(Q),!0)};return B.forEach(Object.keys(Object.assign({},p,m)),function(Q){const ct=tt[Q]||I,Dt=ct(p[Q],m[Q],Q);B.isUndefined(Dt)&&ct!==q||(v[Q]=Dt)}),v}var pr=p=>{const m=Pn({},p);let tt,{data:v,withXSRFToken:E,xsrfHeaderName:I,xsrfCookieName:M,headers:A,auth:q}=m;if(m.headers=A=he.from(A),m.url=Rn(Ke(m.baseURL,m.url),p.params,p.paramsSerializer),q&&A.set("Authorization","Basic "+btoa((q.username||"")+":"+(q.password?unescape(encodeURIComponent(q.password)):""))),B.isFormData(v))if(Ge.hasStandardBrowserEnv||Ge.hasStandardBrowserWebWorkerEnv)A.setContentType(void 0);else if(!1!==(tt=A.getContentType())){const[nt,...Q]=tt?tt.split(";").map(ct=>ct.trim()).filter(Boolean):[];A.setContentType([nt||"multipart/form-data",...Q].join("; "))}if(Ge.hasStandardBrowserEnv&&(E&&B.isFunction(E)&&(E=E(m)),E||!1!==E&&de(m.url))){const nt=I&&M&&Ft.read(M);nt&&A.set(I,nt)}return m},br=typeof XMLHttpRequest<"u"&&function(p){return new Promise(function(v,E){const I=pr(p);let M=I.data;const A=he.from(I.headers).normalize();let tt,{responseType:q}=I;function nt(){I.cancelToken&&I.cancelToken.unsubscribe(tt),I.signal&&I.signal.removeEventListener("abort",tt)}let Q=new XMLHttpRequest;function ct(){if(!Q)return;const re=he.from("getAllResponseHeaders"in Q&&Q.getAllResponseHeaders());gi(function(pe){v(pe),nt()},function(pe){E(pe),nt()},{data:q&&"text"!==q&&"json"!==q?Q.response:Q.responseText,status:Q.status,statusText:Q.statusText,headers:re,config:p,request:Q}),Q=null}Q.open(I.method.toUpperCase(),I.url,!0),Q.timeout=I.timeout,"onloadend"in Q?Q.onloadend=ct:Q.onreadystatechange=function(){!Q||4!==Q.readyState||0===Q.status&&(!Q.responseURL||0!==Q.responseURL.indexOf("file:"))||setTimeout(ct)},Q.onabort=function(){!Q||(E(new kt("Request aborted",kt.ECONNABORTED,I,Q)),Q=null)},Q.onerror=function(){E(new kt("Network Error",kt.ERR_NETWORK,I,Q)),Q=null},Q.ontimeout=function(){let ft=I.timeout?"timeout of "+I.timeout+"ms exceeded":"timeout exceeded";I.timeoutErrorMessage&&(ft=I.timeoutErrorMessage),E(new kt(ft,(I.transitional||Wn).clarifyTimeoutError?kt.ETIMEDOUT:kt.ECONNABORTED,I,Q)),Q=null},void 0===M&&A.setContentType(null),"setRequestHeader"in Q&&B.forEach(A.toJSON(),function(ft,Ot){Q.setRequestHeader(Ot,ft)}),B.isUndefined(I.withCredentials)||(Q.withCredentials=!!I.withCredentials),q&&"json"!==q&&(Q.responseType=I.responseType),"function"==typeof I.onDownloadProgress&&Q.addEventListener("progress",ee(I.onDownloadProgress,!0)),"function"==typeof I.onUploadProgress&&Q.upload&&Q.upload.addEventListener("progress",ee(I.onUploadProgress)),(I.cancelToken||I.signal)&&(tt=re=>{!Q||(E(!re||re.type?new Pt(null,p,Q):re),Q.abort(),Q=null)},I.cancelToken&&I.cancelToken.subscribe(tt),I.signal&&(I.signal.aborted?tt():I.signal.addEventListener("abort",tt)));const Dt=function Yt(p){const m=/^([-+\w]{1,25})(:?\/\/|:)/.exec(p);return m&&m[1]||""}(I.url);Dt&&-1===Ge.protocols.indexOf(Dt)?E(new kt("Unsupported protocol "+Dt+":",kt.ERR_BAD_REQUEST,p)):Q.send(M||null)})},Et=(p,m)=>{let E,v=new AbortController;const I=function(tt){if(!E){E=!0,A();const nt=tt instanceof Error?tt:this.reason;v.abort(nt instanceof kt?nt:new Pt(nt instanceof Error?nt.message:nt))}};let M=m&&setTimeout(()=>{I(new kt(`timeout ${m} of ms exceeded`,kt.ETIMEDOUT))},m);const A=()=>{p&&(M&&clearTimeout(M),M=null,p.forEach(tt=>{tt&&(tt.removeEventListener?tt.removeEventListener("abort",I):tt.unsubscribe(I))}),p=null)};p.forEach(tt=>tt&&tt.addEventListener&&tt.addEventListener("abort",I));const{signal:q}=v;return q.unsubscribe=A,[q,()=>{M&&clearTimeout(M),M=null}]};const bi=function*(p,m){let v=p.byteLength;if(!m||v<m)return void(yield p);let I,E=0;for(;E<v;)I=E+m,yield p.slice(E,I),E=I},we=function(){var p=J(function*(m,v,E){var A,I=!1,M=!1;try{for(var tt,q=j(m);I=!(tt=yield V(q.next())).done;I=!1){const nt=tt.value;yield*c(j(bi(ArrayBuffer.isView(nt)?nt:yield V(E(String(nt))),v)),V)}}catch(nt){M=!0,A=nt}finally{try{I&&null!=q.return&&(yield V(q.return()))}finally{if(M)throw A}}});return function(v,E,I){return p.apply(this,arguments)}}(),jt=(p,m,v,E,I)=>{const M=we(p,m,I);let A=0;return new ReadableStream({type:"bytes",pull:q=>x(function*(){const{done:tt,value:nt}=yield M.next();if(tt)return q.close(),void E();v&&v(A+=nt.byteLength),q.enqueue(new Uint8Array(nt))})(),cancel:q=>(E(q),M.return())},{highWaterMark:2})},nn=(p,m)=>{const v=null!=p;return E=>setTimeout(()=>m({lengthComputable:v,total:p,loaded:E}))},Ye="function"==typeof fetch&&"function"==typeof Request&&"function"==typeof Response,Pr=Ye&&"function"==typeof ReadableStream,Lt=Ye&&("function"==typeof TextEncoder?(p=>m=>p.encode(m))(new TextEncoder):function(){var p=x(function*(m){return new Uint8Array(yield new Response(m).arrayBuffer())});return function(m){return p.apply(this,arguments)}}()),Ne=Pr&&(()=>{let p=!1;const m=new Request(Ge.origin,{body:new ReadableStream,method:"POST",get duplex(){return p=!0,"half"}}).headers.has("Content-Type");return p&&!m})(),mr=Pr&&!!(()=>{try{return B.isReadableStream(new Response("").body)}catch{}})(),Dn={stream:mr&&(p=>p.body)};Ye&&(p=>{["text","arrayBuffer","blob","formData","stream"].forEach(m=>{!Dn[m]&&(Dn[m]=B.isFunction(p[m])?v=>v[m]():(v,E)=>{throw new kt(`Response type '${m}' is not supported`,kt.ERR_NOT_SUPPORT,E)})})})(new Response);const Lr=function(){var p=x(function*(m){return null==m?0:B.isBlob(m)?m.size:B.isSpecCompliantForm(m)?(yield new Request(m).arrayBuffer()).byteLength:B.isArrayBufferView(m)?m.byteLength:(B.isURLSearchParams(m)&&(m+=""),B.isString(m)?(yield Lt(m)).byteLength:void 0)});return function(v){return p.apply(this,arguments)}}(),Jn=function(){var p=x(function*(m,v){return B.toFiniteNumber(m.getContentLength())??Lr(v)});return function(v,E){return p.apply(this,arguments)}}();var yr=Ye&&function(){var p=x(function*(m){let{url:v,method:E,data:I,signal:M,cancelToken:A,timeout:q,onDownloadProgress:tt,onUploadProgress:nt,responseType:Q,headers:ct,withCredentials:Dt="same-origin",fetchOptions:re}=pr(m);Q=Q?(Q+"").toLowerCase():"text";let Kt,pe,[ft,Ot]=M||A||q?Et([M,A],q):[];const be=()=>{!Kt&&setTimeout(()=>{ft&&ft.unsubscribe()}),Kt=!0};let In;try{if(nt&&Ne&&"get"!==E&&"head"!==E&&0!==(In=yield Jn(ct,I))){let sn,Se=new Request(v,{method:"POST",body:I,duplex:"half"});B.isFormData(I)&&(sn=Se.headers.get("content-type"))&&ct.setContentType(sn),Se.body&&(I=jt(Se.body,65536,nn(In,ee(nt)),null,Lt))}B.isString(Dt)||(Dt=Dt?"cors":"omit"),pe=new Request(v,{...re,signal:ft,method:E.toUpperCase(),headers:ct.normalize().toJSON(),body:I,duplex:"half",withCredentials:Dt});let zt=yield fetch(pe);const Sn=mr&&("stream"===Q||"response"===Q);if(mr&&(tt||Sn)){const Se={};["status","statusText","headers"].forEach(Bn=>{Se[Bn]=zt[Bn]});const sn=B.toFiniteNumber(zt.headers.get("content-length"));zt=new Response(jt(zt.body,65536,tt&&nn(sn,ee(tt,!0)),Sn&&be,Lt),Se)}Q=Q||"text";let Ee=yield Dn[B.findKey(Dn,Q)||"text"](zt,m);return!Sn&&be(),Ot&&Ot(),yield new Promise((Se,sn)=>{gi(Se,sn,{data:Ee,headers:he.from(zt.headers),status:zt.status,statusText:zt.statusText,config:m,request:pe})})}catch(zt){throw be(),zt&&"TypeError"===zt.name&&/fetch/i.test(zt.message)?Object.assign(new kt("Network Error",kt.ERR_NETWORK,m,pe),{cause:zt.cause||zt}):kt.from(zt,zt&&zt.code,m,pe)}});return function(m){return p.apply(this,arguments)}}();const xn={http:null,xhr:br,fetch:yr};B.forEach(xn,(p,m)=>{if(p){try{Object.defineProperty(p,"name",{value:m})}catch{}Object.defineProperty(p,"adapterName",{value:m})}});const qt=p=>`- ${p}`,He=p=>B.isFunction(p)||null===p||!1===p;var Fn_getAdapter=p=>{p=B.isArray(p)?p:[p];const{length:m}=p;let v,E;const I={};for(let M=0;M<m;M++){let A;if(v=p[M],E=v,!He(v)&&(E=xn[(A=String(v)).toLowerCase()],void 0===E))throw new kt(`Unknown adapter '${A}'`);if(E)break;I[A||"#"+M]=E}if(!E){const M=Object.entries(I).map(([q,tt])=>`adapter ${q} `+(!1===tt?"is not supported by the environment":"is not available in the build"));throw new kt("There is no suitable adapter to dispatch the request "+(m?M.length>1?"since :\n"+M.map(qt).join("\n"):" "+qt(M[0]):"as no adapter specified"),"ERR_NOT_SUPPORT")}return E};function Un(p){if(p.cancelToken&&p.cancelToken.throwIfRequested(),p.signal&&p.signal.aborted)throw new Pt(null,p)}function gn(p){return Un(p),p.headers=he.from(p.headers),p.data=fn.call(p,p.transformRequest),-1!==["post","put","patch"].indexOf(p.method)&&p.headers.setContentType("application/x-www-form-urlencoded",!1),Fn_getAdapter(p.adapter||oe.adapter)(p).then(function(E){return Un(p),E.data=fn.call(p,p.transformResponse,E),E.headers=he.from(E.headers),E},function(E){return Ar(E)||(Un(p),E&&E.response&&(E.response.data=fn.call(p,p.transformResponse,E.response),E.response.headers=he.from(E.response.headers))),Promise.reject(E)})}const ye={};["object","boolean","number","function","string","symbol"].forEach((p,m)=>{ye[p]=function(E){return typeof E===p||"a"+(m<1?"n ":" ")+p}});const Dr={};ye.transitional=function(m,v,E){function I(M,A){return"[Axios v1.7.2] Transitional option '"+M+"'"+A+(E?". "+E:"")}return(M,A,q)=>{if(!1===m)throw new kt(I(A," has been removed"+(v?" in "+v:"")),kt.ERR_DEPRECATED);return v&&!Dr[A]&&(Dr[A]=!0,console.warn(I(A," has been deprecated since v"+v+" and will be removed in the near future"))),!m||m(M,A,q)}};var tr={assertOptions:function Fr(p,m,v){if("object"!=typeof p)throw new kt("options must be an object",kt.ERR_BAD_OPTION_VALUE);const E=Object.keys(p);let I=E.length;for(;I-- >0;){const M=E[I],A=m[M];if(A){const q=p[M],tt=void 0===q||A(q,M,p);if(!0!==tt)throw new kt("option "+M+" must be "+tt,kt.ERR_BAD_OPTION_VALUE)}else if(!0!==v)throw new kt("Unknown option "+M,kt.ERR_BAD_OPTION)}},validators:ye};const dn=tr.validators;class Nn{constructor(m){this.defaults=m,this.interceptors={request:new Zn,response:new Zn}}request(m,v){var E=this;return x(function*(){try{return yield E._request(m,v)}catch(I){if(I instanceof Error){let M;Error.captureStackTrace?Error.captureStackTrace(M={}):M=new Error;const A=M.stack?M.stack.replace(/^.+\n/,""):"";try{I.stack?A&&!String(I.stack).endsWith(A.replace(/^.+\n.+\n/,""))&&(I.stack+="\n"+A):I.stack=A}catch{}}throw I}})()}_request(m,v){"string"==typeof m?(v=v||{}).url=m:v=m||{},v=Pn(this.defaults,v);const{transitional:E,paramsSerializer:I,headers:M}=v;void 0!==E&&tr.assertOptions(E,{silentJSONParsing:dn.transitional(dn.boolean),forcedJSONParsing:dn.transitional(dn.boolean),clarifyTimeoutError:dn.transitional(dn.boolean)},!1),null!=I&&(B.isFunction(I)?v.paramsSerializer={serialize:I}:tr.assertOptions(I,{encode:dn.function,serialize:dn.function},!0)),v.method=(v.method||this.defaults.method||"get").toLowerCase();let A=M&&B.merge(M.common,M[v.method]);M&&B.forEach(["delete","get","head","post","put","patch","common"],ft=>{delete M[ft]}),v.headers=he.concat(A,M);const q=[];let tt=!0;this.interceptors.request.forEach(function(Ot){"function"==typeof Ot.runWhen&&!1===Ot.runWhen(v)||(tt=tt&&Ot.synchronous,q.unshift(Ot.fulfilled,Ot.rejected))});const nt=[];this.interceptors.response.forEach(function(Ot){nt.push(Ot.fulfilled,Ot.rejected)});let Q,Dt,ct=0;if(!tt){const ft=[gn.bind(this),void 0];for(ft.unshift.apply(ft,q),ft.push.apply(ft,nt),Dt=ft.length,Q=Promise.resolve(v);ct<Dt;)Q=Q.then(ft[ct++],ft[ct++]);return Q}Dt=q.length;let re=v;for(ct=0;ct<Dt;){const ft=q[ct++],Ot=q[ct++];try{re=ft(re)}catch(Kt){Ot.call(this,Kt);break}}try{Q=gn.call(this,re)}catch(ft){return Promise.reject(ft)}for(ct=0,Dt=nt.length;ct<Dt;)Q=Q.then(nt[ct++],nt[ct++]);return Q}getUri(m){return Rn(Ke((m=Pn(this.defaults,m)).baseURL,m.url),m.params,m.paramsSerializer)}}B.forEach(["delete","get","head","options"],function(m){Nn.prototype[m]=function(v,E){return this.request(Pn(E||{},{method:m,url:v,data:(E||{}).data}))}}),B.forEach(["post","put","patch"],function(m){function v(E){return function(M,A,q){return this.request(Pn(q||{},{method:m,headers:E?{"Content-Type":"multipart/form-data"}:{},url:M,data:A}))}}Nn.prototype[m]=v(),Nn.prototype[m+"Form"]=v(!0)});var Ve=Nn;class Ce{constructor(m){if("function"!=typeof m)throw new TypeError("executor must be a function.");let v;this.promise=new Promise(function(M){v=M});const E=this;this.promise.then(I=>{if(!E._listeners)return;let M=E._listeners.length;for(;M-- >0;)E._listeners[M](I);E._listeners=null}),this.promise.then=I=>{let M;const A=new Promise(q=>{E.subscribe(q),M=q}).then(I);return A.cancel=function(){E.unsubscribe(M)},A},m(function(M,A,q){E.reason||(E.reason=new Pt(M,A,q),v(E.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(m){this.reason?m(this.reason):this._listeners?this._listeners.push(m):this._listeners=[m]}unsubscribe(m){if(!this._listeners)return;const v=this._listeners.indexOf(m);-1!==v&&this._listeners.splice(v,1)}static source(){let m;return{token:new Ce(function(I){m=I}),cancel:m}}}var rn=Ce;const Ze={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Ze).forEach(([p,m])=>{Ze[m]=p});var ie=Ze;const Rt=function fe(p){const m=new Ve(p),v=St(Ve.prototype.request,m);return B.extend(v,Ve.prototype,m,{allOwnKeys:!0}),B.extend(v,m,null,{allOwnKeys:!0}),v.create=function(I){return fe(Pn(p,I))},v}(oe);Rt.Axios=Ve,Rt.CanceledError=Pt,Rt.CancelToken=rn,Rt.isCancel=Ar,Rt.VERSION="1.7.2",Rt.toFormData=Cn,Rt.AxiosError=kt,Rt.Cancel=Rt.CanceledError,Rt.all=function(m){return Promise.all(m)},Rt.spread=function Ur(p){return function(v){return p.apply(null,v)}},Rt.isAxiosError=function Ie(p){return B.isObject(p)&&!0===p.isAxiosError},Rt.mergeConfig=Pn,Rt.AxiosHeaders=he,Rt.formToJSON=p=>Cr(B.isHTMLForm(p)?new FormData(p):p),Rt.getAdapter=Fn_getAdapter,Rt.HttpStatusCode=ie,Rt.default=Rt,It.exports=Rt}}]);