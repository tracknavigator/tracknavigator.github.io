(self.webpackChunkmap_bag_osm_pois=self.webpackChunkmap_bag_osm_pois||[]).push([[928],{3540:function(wt,et,q){"use strict";var N=q(9344).default,J=this&&this.__importDefault||function(j){return j&&j.__esModule?j:{default:j}};Object.defineProperty(et,"__esModule",{value:!0}),et.getHelp=et.getZoneMapFeatures=et.getArea=void 0;const Q=J(q(7362)),x=q(6703),K=q(8857),Ct=q(2671);function _t(j){return ot.apply(this,arguments)}function ot(){return(ot=N(function*(j){try{console.log(`Take data from: ${x.NOMINATIM_OSM_API}${j}`);const se=yield Q.default.get(`${x.NOMINATIM_OSM_API}${j}`);return console.log("OK"),wn(se.data[0].boundingbox)}catch{return console.error("ERROR",`${x.NOMINATIM_OSM_API}${j} data not take correctly. Try again later please`),"data not take correctly. Try again later please"}})).apply(this,arguments)}function Vt(){return(Vt=N(function*(j=x.Values.EMPTY){if(!j||!j.length)throw new Error("Need search term!!");return yield _t(j)})).apply(this,arguments)}function Et(j){return ge.apply(this,arguments)}function ge(){return(ge=N(function*(j,se=[],L=!1){const kt=(0,K.createQueryInfo)({bbox:j||x.Values.EMPTY,outputFormat:x.OUTPUT_FORMAT.JSON,timeOutInSeconds:50,filters:se});L&&console.log(`Query:\n ${kt}`);try{const ct=yield Q.default.post(x.OVERPASS_API,kt);return L&&console.log("OK",j),ct.data}catch{return console.log("ERROR",j),null}})).apply(this,arguments)}function De(){return(De=N(function*(j){console.log(`Input data : ${j}`);const se=j.filters||[];return!j.search||j.bbox&&j.bbox.length?yield Et(j.bbox||x.Values.EMPTY,se):yield Et((yield _t(j.search))||x.Values.EMPTY,se)})).apply(this,arguments)}function wn(j){return W.apply(this,arguments)}function W(){return(W=N(function*(j){const se=j[1];return j[1]=j[2],j[2]=se,j.join(",")})).apply(this,arguments)}et.getArea=function $t(){return Vt.apply(this,arguments)},et.getZoneMapFeatures=function be(j){return De.apply(this,arguments)},et.getHelp=function Ve(j=x.Values.SPANISH_CODE){return Ct.FEATURES.map(se=>({type:se.key,filterValues:[...se.values.map(L=>L!==x.Values.EMPTY?L:x.Values.EMPTY)],description:j===x.Values.SPANISH_CODE?se.description.es:se.description.en,url:se.info}))}},6703:(wt,et)=>{"use strict";var N;Object.defineProperty(et,"__esModule",{value:!0}),et.Values=et.INSTRUCTIONS_HELP=et.OUTPUT_FORMAT=et.NOMINATIM_OSM_API=et.OVERPASS_API=void 0,et.OVERPASS_API="https://overpass-api.de/api/interpreter",et.NOMINATIM_OSM_API="https://nominatim.openstreetmap.org/search?X-Requested-With=overpass-ide&format=json&q=",et.OUTPUT_FORMAT={JSON:"json",XML:"xml"},et.INSTRUCTIONS_HELP={intro:"Instrucciones de ",find:{byArea:"",byBoundaryBox:""}},(N=et.Values||(et.Values={})).EMPTY="",N.SPANISH_CODE="es"},5299:function(wt,et,q){"use strict";var N=this&&this.__createBinding||(Object.create?function(Q,x,K,Ct){void 0===Ct&&(Ct=K);var _t=Object.getOwnPropertyDescriptor(x,K);(!_t||("get"in _t?!x.__esModule:_t.writable||_t.configurable))&&(_t={enumerable:!0,get:function(){return x[K]}}),Object.defineProperty(Q,Ct,_t)}:function(Q,x,K,Ct){void 0===Ct&&(Ct=K),Q[Ct]=x[K]}),J=this&&this.__exportStar||function(Q,x){for(var K in Q)"default"!==K&&!Object.prototype.hasOwnProperty.call(x,K)&&N(x,Q,K)};Object.defineProperty(et,"__esModule",{value:!0}),J(q(6703),et),J(q(2671),et)},2671:(wt,et,q)=>{"use strict";Object.defineProperty(et,"__esModule",{value:!0}),et.FEATURES=et.AMENITY=void 0;const N=q(6703),J="amenity";et.AMENITY={bank:`"${J}"="bank"`,bar:`"${J}"="bar"`,college:`${J}=college`,ice_cream:`"${J}"="ice_cream"`};const x="https://wiki.openstreetmap.org/wiki/";et.FEATURES=[{key:"atm",values:["atm=yes","amenity=atm"],category:J,description:{es:N.Values.EMPTY,en:N.Values.EMPTY},info:`${x}Tag:amenity%3Datm`},{key:"bank",values:[et.AMENITY.bank],category:J,description:{es:N.Values.EMPTY,en:N.Values.EMPTY},info:`${x}Tag:amenity%3Dbank`},{key:"bar",values:[et.AMENITY.bar],category:J,description:{es:N.Values.EMPTY,en:N.Values.EMPTY},info:`${x}Tag:amenity%3Dbar`},{key:"biergarten",values:["amenity=biertgarten","biertgarten=yes"],category:J,description:{es:N.Values.EMPTY,en:N.Values.EMPTY},info:`${x}Tag:amenity%3Dbiergarten`},{key:"cafe",values:["amenity=cafe"],category:J,description:{es:N.Values.EMPTY,en:N.Values.EMPTY},info:`${x}Tag:amenity%3Dcafe`},{key:"fast_food",values:["amenity=fast_food"],category:J,description:{es:N.Values.EMPTY,en:N.Values.EMPTY},info:`${x}Eo:Tag:amenity%3Dfast_food`},{key:"ice_cream",values:[et.AMENITY.ice_cream],category:J,description:{es:N.Values.EMPTY,en:N.Values.EMPTY},info:`${x}Tag:amenity%3Dice_cream`},{key:"pub",values:["amenity=pub"],category:J,description:{es:N.Values.EMPTY,en:N.Values.EMPTY},info:`${x}Tag:amenity%3Dpub`},{key:"restaurant",values:["amenity=restaurant"],category:J,description:{es:N.Values.EMPTY,en:N.Values.EMPTY},info:`${x}Tag:amenity%3Drestaurant`},{key:"college",values:["amenity=college"],category:J,description:{es:"Campus o edificios de un instituto de educaci\xf3n superior",en:"Campus or buildings of an institute of Further Education (aka continuing education)"},info:`${x}Tag:amenity%3Dcollege`},{key:"driving_school",values:["amenity=driving_school"],category:J,description:{es:"Autoescuela para poder sacar licencia de diferentes veh\xedculos motorizados",en:"Driving School which offers motor vehicle driving lessons"},info:`${x}Tag:amenity%3Ddriving_school`},{key:"library",values:["amenity=library"],category:J,description:{es:"Una biblioteca p\xfablica (municipal, universitaria,\u2026) para sacar libros en pr\xe9stamo.",en:"A public library (municipal, university, \u2026) to borrow books from."},info:N.Values.EMPTY},{key:"school",values:["amenity=school"],category:J,description:{es:N.Values.EMPTY,en:N.Values.EMPTY},info:`${x}Tag:amenity%3Dschool`},{key:"university",values:["amenity=university"],category:J,description:{es:N.Values.EMPTY,en:N.Values.EMPTY},info:N.Values.EMPTY},{key:"education",values:["amenity=university","amenity=school","amenity=college","amenity=music_school","amenity=language_school"],category:J,description:{es:N.Values.EMPTY,en:N.Values.EMPTY},info:N.Values.EMPTY},{key:"language",values:["amenity=language_school"],category:J,description:{es:N.Values.EMPTY,en:N.Values.EMPTY},info:`${x}Tag:amenity%3Dlanguage_school`},{key:"bus",values:["amenity=bus_station","public_transport=station"],category:J,description:{es:N.Values.EMPTY,en:N.Values.EMPTY},info:N.Values.EMPTY},{key:"car_wash",values:["amenity=car_wash"],category:J,description:{es:N.Values.EMPTY,en:N.Values.EMPTY},info:`${x}Tag:amenity%3Dcar_wash`},{key:"gasoline",values:["amenity=fuel"],category:J,description:{es:N.Values.EMPTY,en:N.Values.EMPTY},info:N.Values.EMPTY},{key:"parking",values:["amenity=parking","highway=service","service=parking_aisle"],category:J,description:{es:N.Values.EMPTY,en:N.Values.EMPTY},info:N.Values.EMPTY}]},8857:(wt,et,q)=>{"use strict";Object.defineProperty(et,"__esModule",{value:!0}),et.createQueryInfo=void 0;const N=q(6703);et.createQueryInfo=Q=>{if(!Q.bbox)throw new Error("\n        \xa1\xa1\xa1\xa1 NEED PASS BOUNDARY BOX LIMITS IF YOU WANT USE QUERY WITH BOUNDARIES BOX !!!!\n        ==============================================================================\n        Pass value with next format: \n        <latitude_south_west>,<longitude_south_west>,<latitude_north_east>,<longitude_north_east>\n\n        For Example:\n        43.16540434728322,-2.4239873886108403,43.18261784109349,-2.401371002197266\n        ");const Ct=`\n    [bbox:${Q.bbox}][out:${Q.outputFormat||N.OUTPUT_FORMAT.JSON}][timeout:${Q.timeOutInSeconds}];\n    (`;let _t="";return Q.filters&&Q.filters.length?(_t="\n      ",Q.filters.map($t=>{_t+=`node[${$t}]; `}),_t+="\n      "):_t='\n      node["amenity"="drinking_water"];\n      node["natural"="spring"];\n      node["drinking_water"="yes"];\n      ',`\n    ${Ct}${_t}\n    );\n    out body;\n    \n    `}},4788:function(wt,et,q){"use strict";var N=this&&this.__createBinding||(Object.create?function(Q,x,K,Ct){void 0===Ct&&(Ct=K);var _t=Object.getOwnPropertyDescriptor(x,K);(!_t||("get"in _t?!x.__esModule:_t.writable||_t.configurable))&&(_t={enumerable:!0,get:function(){return x[K]}}),Object.defineProperty(Q,Ct,_t)}:function(Q,x,K,Ct){void 0===Ct&&(Ct=K),Q[Ct]=x[K]}),J=this&&this.__exportStar||function(Q,x){for(var K in Q)"default"!==K&&!Object.prototype.hasOwnProperty.call(x,K)&&N(x,Q,K)};Object.defineProperty(et,"__esModule",{value:!0}),J(q(3540),et),J(q(8857),et),J(q(5299),et),J(q(3654),et)},5250:(wt,et)=>{"use strict";Object.defineProperty(et,"__esModule",{value:!0})},3654:function(wt,et,q){"use strict";var N=this&&this.__createBinding||(Object.create?function(Q,x,K,Ct){void 0===Ct&&(Ct=K);var _t=Object.getOwnPropertyDescriptor(x,K);(!_t||("get"in _t?!x.__esModule:_t.writable||_t.configurable))&&(_t={enumerable:!0,get:function(){return x[K]}}),Object.defineProperty(Q,Ct,_t)}:function(Q,x,K,Ct){void 0===Ct&&(Ct=K),Q[Ct]=x[K]}),J=this&&this.__exportStar||function(Q,x){for(var K in Q)"default"!==K&&!Object.prototype.hasOwnProperty.call(x,K)&&N(x,Q,K)};Object.defineProperty(et,"__esModule",{value:!0}),J(q(5250),et),J(q(7227),et)},7227:(wt,et)=>{"use strict";Object.defineProperty(et,"__esModule",{value:!0})},2928:(wt,et,q)=>{"use strict";q.r(et),q.d(et,{AppModule:()=>Fo});var N=q(6895),J=q(5479),Q=q(9671);function K(s,o){if(s===o)return!0;if(null==s||null==o||"object"!=typeof s||"object"!=typeof o)return!1;const u=Object.keys(s),l=Object.keys(o);if(u.length!==l.length)return!1;for(let h of u)if(!l.includes(h)||!K(s[h],o[h]))return!1;return!0}function Ct(s,o){s.some(l=>K(l,o))||s.push(o)}var Vt=q(3033);const Et="https://www.google.com/maps/",ge=s=>`${Et}@?api=1&map_action=pano&viewpoint=${s.lat},${s.lng}`,be=s=>`${Et}dir/?api=1&destination=${s.lat},${s.lng}`;var W=q(8177),L=q(3228),kt=(()=>{return(s=kt||(kt={})).AMENITY="amenity",s.BUILDING="building",s.BUS="bus",s.HIGHWAY="highway",s.HISTORIC="historic",s.LEISURE="leisure",s.MAN_MADE="man_made",s.NATURAL="natural",s.RAILWAY="railway",s.SHOP="shop",s.TOURISM="tourism",s.TRAIN="train",kt;var s})(),ct=(()=>{return(s=ct||(ct={})).ATTRACTION="attraction",s.BAKERY="bakery",s.BAR="bar",s.BUS_STOP="bus_stop",s.CAVE_ENTRANCE="cave_entrance",s.CAMP_PITCH="camp_pitch",s.COFFEE="cafe",s.DRINKING_WATER="drinking_water",s.FAST_FOOD="fast_food",s.FITNESS_CENTRE="fitness_centre",s.FITNESS_STATION="fitness_station",s.FUEL="fuel",s.HOTEL="hotel",s.HOSTEL="hostel",s.ICE_CREAM="ice_cream",s.MUSEUM="museum",s.PEAK="peak",s.PARKING="parking",s.PARKING_SPACE="parking_space",s.PASTRY="pastry",s.PLAYGROUND="playground",s.PUB="pub",s.PICNIC_TABLE="picnic_table",s.RESTAURANT="restaurant",s.SPORTS_CENTRE="sports_centre",s.SPRING="spring",s.SUPERMARKET="supermarket",s.STOP="stop",s.TOILETS="toilets",s.TRACK="track",s.YES="yes",s.WATER_TAP="water_tap",ct;var s})();const hr=[{check:s=>s[kt.NATURAL]===ct.PEAK,value:L.NQ.PEAK},{check:s=>s[kt.TOURISM]===ct.HOSTEL,value:L.NQ.HOSTEL},{check:s=>s[kt.TOURISM]===ct.HOTEL,value:L.NQ.HOTEL},{check:s=>s[kt.TOURISM]===ct.MUSEUM,value:L.NQ.MUSEUM},{check:s=>s[kt.NATURAL]===ct.CAVE_ENTRANCE,value:L.NQ.CAVES},{check:s=>s[kt.TOURISM]===L.NQ.VIEWPOINT,value:L.NQ.VIEWPOINT},{check:s=>s[kt.TOURISM]===L.NQ.PICNIC_SITE||s[kt.LEISURE]===ct.PICNIC_TABLE,value:L.NQ.PICNIC_SITE},{check:s=>s[kt.AMENITY]===ct.FUEL,value:L.NQ.FUEL},{check:s=>s[kt.AMENITY]===ct.DRINKING_WATER||s[kt.MAN_MADE]===ct.WATER_TAP||s[kt.NATURAL]===ct.SPRING,value:L.NQ.WATER},{check:s=>s[kt.TOURISM]===ct.ATTRACTION,value:L.NQ.ATTRACTION},{check:s=>s[kt.SHOP]===ct.SUPERMARKET||s[kt.BUILDING]===ct.SUPERMARKET,value:L.NQ.SUPERMARKET},{check:s=>s[kt.TRAIN]===ct.YES||s[kt.RAILWAY]===ct.STOP,value:L.NQ.TRAIN},{check:s=>s[kt.BUS]===ct.YES||s[kt.HIGHWAY]===ct.BUS_STOP,value:L.NQ.BUS},{check:s=>s[kt.LEISURE]===ct.SPORTS_CENTRE||s[kt.BUILDING]===ct.SPORTS_CENTRE||s[kt.LEISURE]===ct.FITNESS_CENTRE||s[kt.LEISURE]===ct.FITNESS_STATION||s[kt.LEISURE]===ct.TRACK,value:L.NQ.SPORTS},{check:s=>s[kt.SHOP]===ct.BAKERY,value:L.NQ.BAKERY},{check:s=>s[kt.AMENITY]===ct.COFFEE,value:L.NQ.CAFE},{check:s=>s[kt.AMENITY]===ct.ICE_CREAM,value:L.NQ.ICE_CREAM},{check:s=>s[kt.AMENITY]===ct.FAST_FOOD,value:L.NQ.FAST_FOOD},{check:s=>s[kt.AMENITY]===ct.PUB,value:L.NQ.PUB},{check:s=>s[kt.AMENITY]===ct.RESTAURANT,value:L.NQ.RESTAURANT},{check:s=>s[kt.AMENITY]===ct.BAR,value:L.NQ.BAR},{check:s=>s[kt.AMENITY]===ct.PARKING,value:L.NQ.PARKING},{check:s=>s[kt.AMENITY]===ct.PARKING_SPACE,value:L.NQ.PARKING_SPACE},{check:s=>s[kt.SHOP]===ct.PASTRY,value:L.NQ.PASTRY},{check:s=>s[kt.AMENITY]===ct.TOILETS,value:L.NQ.TOILETS},{check:s=>s[kt.LEISURE]===ct.PLAYGROUND,value:L.NQ.PLAYGROUND},{check:s=>s[kt.TOURISM]===ct.CAMP_PITCH,value:L.NQ.CAMPING},{check:s=>s[kt.HISTORIC],value:L.NQ.HISTORICAL},{check:s=>s[kt.AMENITY]===L.NQ.ATM,value:L.NQ.ATM}],Cn=s=>s.filter(o=>o.checked).map(o=>o.tags).flat();function yn(s){return W.Po.values.find(o=>o.id===s)?.color||"#deaf30"}q(9529);const zn=[{id:"drinking_water",label:"Cazador de Fuentes de Agua Potable",i18n:"profiles.waterPointsHunter",pois:[L.NQ.WATER]},{id:"peak_collector",label:"Coleccionista de Cimas",i18n:"profiles.peakCollector",pois:[L.NQ.WATER,L.NQ.PEAK,L.NQ.VIEWPOINT]},{id:"runner",label:"Corredor de asfalto",i18n:"profiles.roadRunner",pois:[L.NQ.BUS,L.NQ.TRAIN,L.NQ.WATER,L.NQ.TOILETS,L.NQ.SPORTS,L.NQ.VIEWPOINT]},{id:"walking_santiago",label:"Peregrino Camino de Santiago",i18n:"profiles.walkingSantiago",pois:[L.NQ.BUS,L.NQ.TRAIN,L.NQ.WATER,L.NQ.TOILETS,L.NQ.SUPERMARKET,L.NQ.BAKERY,L.NQ.CAFE,L.NQ.BAR,L.NQ.RESTAURANT,L.NQ.FAST_FOOD,L.NQ.PASTRY,L.NQ.VIEWPOINT,L.NQ.PICNIC_SITE,L.NQ.HISTORICAL,L.NQ.MUSEUM,L.NQ.ATTRACTION,L.NQ.HOTEL,L.NQ.HOSTEL]},{id:"trail_runner",label:"Corredor Trail Running",i18n:"profiles.trailRunner",pois:[L.NQ.BUS,L.NQ.TRAIN,L.NQ.WATER,L.NQ.PEAK,L.NQ.PARKING,L.NQ.CAVES,L.NQ.VIEWPOINT,L.NQ.HISTORICAL,L.NQ.ATTRACTION]},{id:"walking_mountains",label:"Senderismo",i18n:"profiles.walkingMountains",pois:[L.NQ.BUS,L.NQ.TRAIN,L.NQ.BAR,L.NQ.RESTAURANT,L.NQ.WATER,L.NQ.PEAK,L.NQ.PARKING,L.NQ.CAVES,L.NQ.VIEWPOINT,L.NQ.ATTRACTION]},{id:"city_tourism",label:"Turismo de Ciudad",i18n:"profiles.cityTourist",pois:[L.NQ.BAKERY,L.NQ.TOILETS,L.NQ.PARKING,L.NQ.PARKING_SPACE,L.NQ.PASTRY,L.NQ.HISTORICAL,L.NQ.BAR,L.NQ.PUB,L.NQ.RESTAURANT,L.NQ.CAFE,L.NQ.FAST_FOOD,L.NQ.ICE_CREAM,L.NQ.ATM,L.NQ.BUS,L.NQ.TRAIN,L.NQ.WATER,L.NQ.VIEWPOINT,L.NQ.PICNIC_SITE,L.NQ.MUSEUM,L.NQ.ATTRACTION,L.NQ.HOTEL,L.NQ.HOSTEL]},{id:"rural_tourism",label:"Turismo Rural",i18n:"profiles.ruralTourist",pois:[L.NQ.PEAK,L.NQ.HISTORICAL,L.NQ.WATER,L.NQ.BAR,L.NQ.CAFE,L.NQ.RESTAURANT,L.NQ.ICE_CREAM,L.NQ.PUB,L.NQ.PARKING,L.NQ.PARKING_SPACE,L.NQ.VIEWPOINT,L.NQ.PICNIC_SITE]},{id:"road_cycling",label:"Ciclismo de carretera",i18n:"profiles.roadCycling",pois:[L.NQ.BUS,L.NQ.TRAIN,L.NQ.WATER,L.NQ.TOILETS,L.NQ.CAFE,L.NQ.RESTAURANT,L.NQ.FAST_FOOD,L.NQ.PUB,L.NQ.SPORTS,L.NQ.PARKING,L.NQ.PARKING_SPACE,L.NQ.VIEWPOINT,L.NQ.PICNIC_SITE]},{id:"btt_gravel",label:"BTT / Gravel",i18n:"profiles.bttGravel",pois:[L.NQ.BUS,L.NQ.TRAIN,L.NQ.WATER,L.NQ.PEAK,L.NQ.TOILETS,L.NQ.CAFE,L.NQ.RESTAURANT,L.NQ.FAST_FOOD,L.NQ.PUB,L.NQ.SPORTS,L.NQ.PARKING,L.NQ.PARKING_SPACE,L.NQ.VIEWPOINT,L.NQ.PICNIC_SITE]}];var dr=q(4128),Xn=q(2722),gt=q(4004),Vn=q(6775),At=q(8407),Qn=q(4788);const Dt=At.Control.extend({options:{mapId:"map",position:"topleft",exitText:"Salir pantalla completa",entryText:"Ver en pantalla completa"},initialize:function(s){At.Util.setOptions(this,s)},onAdd:function(){const s=At.DomUtil.create("input","leaflet-control-zoom leaflet-bar leaflet-control"),o=this.options;function u(){document.fullscreenElement&&setTimeout(()=>document.exitFullscreen(),520),s.style.backgroundImage="url(https://cdn-icons-png.flaticon.com/512/2089/2089670.png)",s.title=o.entryText}function l(){document.fullscreenElement||u()}return s.type="button",s.title=o.entryText,s.style.backgroundImage="url(https://cdn-icons-png.flaticon.com/512/2089/2089670.png)",s.style.backgroundSize="15px 15px",s.style.backgroundRepeat="no-repeat",s.style.backgroundPosition="50% 50%",s.style.width="32px",s.style.height="32px",s.style.padding="12px",s.style.lineHeight="30px",s.style.fontSize="22px",s.style.fontWeight="bold",s.style.cursor="pointer",document.addEventListener("fullscreenchange",l),document.addEventListener("webkitfullscreenchange",l),document.addEventListener("mozfullscreenchange",l),document.addEventListener("MSFullscreenChange",l),s.onclick=()=>{document.fullscreenElement?u():(document.getElementById(o.mapId)?.requestFullscreen(),s.title=o.exitText,s.style.backgroundImage="url(https://cdn-icons-png.flaticon.com/512/483/483332.png)")},s}}),D=(At.Control.extend({options:{position:"bottomleft",mapId:"map"},_div:At.DomUtil.create("div","info-control"),initialize:function(s){At.Util.setOptions(this,s)},onAdd:function(){const s=At.DomUtil.create("div","info-control");return this._div=s,this.hide(),s},update:function(s){this._div.innerHTML=s||"<h4>Info Panel</h4><div>Click on a marker</div>",this.show()},show:function(){At.DomUtil.addClass(this._div,"visible")},hide:function(){At.DomUtil.removeClass(this._div,"visible")}}),At.Control.extend({initialize:function(s){At.Util.setOptions(this,s)},_div:At.DomUtil.create("div","info legend"),options:{position:"bottomleft",title:"Earthquakes",activeTags:[],tagNames:[]},onAdd:function(){const s=At.DomUtil.create("div","info legend");return this._div=s,this.update(),s.style.backgroundColor="white",s.style.textAlign="center",s.style.padding="3px",s.style.borderRadius="6px",s.style.border="1px solid #333",s.style.marginBottom="5px",s.style.width="100%",s},update:function(){this._div.innerHTML+=`<h3>${this.options.title}</h3>`,this.options.activeTags.forEach(s=>{const o=yn(s),u=this.options.tagNames.find(h=>h.tag&&h.tag===s);this._div.innerHTML+=`<div><i style="background: ${o}"></i>${u&&u.i18n||"Waypoint"}</div>`}),this.show()},show:function(){At.DomUtil.addClass(this._div,"visible")}})),Kt=At.Control.extend({options:{position:"bottomleft",img:"https://raw.githubusercontent.com/leaflet-maps-course/resources/main/logotypes/am.png",border:!0},initialize:function(s){At.Util.setOptions(this,s)},onAdd:function(){const s=At.DomUtil.create("img");return s.src=this.options.img,s.style.width="50px",this.options.border&&(s.style.borderBottom="3px solid #506bff"),s}}),I='Map data: &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, <a href="http://viewfinderpanoramas.org">SRTM</a> | Map style: &copy; <a href="https://opentopomap.org">OpenTopoMap</a> (<a href="https://creativecommons.org/licenses/by-sa/3.0/">CC-BY-SA</a>) &copy; <a href="https://anartz-mugika.com/" target="_blank">Anartz Mugika Ledo</a> '+(new Date).getFullYear(),Qe={CartoDB:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors &copy; <a href="https://carto.com/attributions">CARTO</a> - <a href="https://anartz-mugika.com/" target="_blank">Anartz Mugika Ledo</a> '+(new Date).getFullYear(),CyclOSM:'<a href="https://github.com/cyclosm/cyclosm-cartocss-style/releases" title="CyclOSM - Open Bicycle render">CyclOSM</a> | Map data: &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',EsriWorldImagery:"Tiles &copy; Esri &mdash; Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community",EsriWorldTopoMap:"Tiles &copy; Esri &mdash; Esri, DeLorme, NAVTEQ, TomTom, Intermap, iPC, USGS, FAO, NPS, NRCAN, GeoBase, Kadaster NL, Ordnance Survey, Esri Japan, METI, Esri China (Hong Kong), and the GIS User Community",OSM:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors  - <a href="https://anartz-mugika.com/" target="_blank">Anartz Mugika Ledo</a> '+(new Date).getFullYear(),OSMHot:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, Tiles style by <a href="https://www.hotosm.org/" target="_blank">Humanitarian OpenStreetMap Team</a> hosted by <a href="https://openstreetmap.fr/" target="_blank">OpenStreetMap France</a> - <a href="https://anartz-mugika.com/" target="_blank">Anartz Mugika Ledo</a> '+(new Date).getFullYear(),OpenTopo:'Map data: &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, <a href="http://viewfinderpanoramas.org">SRTM</a> | Map style: &copy; <a href="https://opentopomap.org">OpenTopoMap</a> (<a href="https://creativecommons.org/licenses/by-sa/3.0/">CC-BY-SA</a>)',Stadia:'&copy; <a href="https://stadiamaps.com/">Stadia Maps</a>, &copy; <a href="https://openmaptiles.org/">OpenMapTiles</a> &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors',ThunderForest:'&copy; <a href="http://www.thunderforest.com/">Thunderforest</a>, &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'},Je_baseLayers_default="https://{s}.tile.osm.org/{z}/{x}/{y}.png",Je_baseLayers_osmManik="https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png";var _r=q(6684),kr=q(2340);function qe(s,o,u){if(null!==s)for(var l,h,g,k,T,w,F,R,C=0,A=0,G=s.type,U="FeatureCollection"===G,V="Feature"===G,it=U?s.features.length:1,lt=0;lt<it;lt++){T=(R=!!(F=U?s.features[lt].geometry:V?s.geometry:s)&&"GeometryCollection"===F.type)?F.geometries.length:1;for(var ft=0;ft<T;ft++){var H=0,Tt=0;if(null!==(k=R?F.geometries[ft]:F)){w=k.coordinates;var zt=k.type;switch(C=!u||"Polygon"!==zt&&"MultiPolygon"!==zt?0:1,zt){case null:break;case"Point":if(!1===o(w,A,lt,H,Tt))return!1;A++,H++;break;case"LineString":case"MultiPoint":for(l=0;l<w.length;l++){if(!1===o(w[l],A,lt,H,Tt))return!1;A++,"MultiPoint"===zt&&H++}"LineString"===zt&&H++;break;case"Polygon":case"MultiLineString":for(l=0;l<w.length;l++){for(h=0;h<w[l].length-C;h++){if(!1===o(w[l][h],A,lt,H,Tt))return!1;A++}"MultiLineString"===zt&&H++,"Polygon"===zt&&Tt++}"Polygon"===zt&&H++;break;case"MultiPolygon":for(l=0;l<w.length;l++){for(Tt=0,h=0;h<w[l].length;h++){for(g=0;g<w[l][h].length-C;g++){if(!1===o(w[l][h][g],A,lt,H,Tt))return!1;A++}Tt++}H++}break;case"GeometryCollection":for(l=0;l<k.geometries.length;l++)if(!1===qe(k.geometries[l],o,u))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function vn(s,o){if("Feature"===s.type)o(s,0);else if("FeatureCollection"===s.type)for(var u=0;u<s.features.length&&!1!==o(s.features[u],u);u++);}function Rn(s,o){var u,l,h,g,k,T,w,F,C,A,R=0,G="FeatureCollection"===s.type,U="Feature"===s.type,V=G?s.features.length:1;for(u=0;u<V;u++){for(F=G?s.features[u].properties:U?s.properties:{},C=G?s.features[u].bbox:U?s.bbox:void 0,A=G?s.features[u].id:U?s.id:void 0,k=(w=!!(T=G?s.features[u].geometry:U?s.geometry:s)&&"GeometryCollection"===T.type)?T.geometries.length:1,h=0;h<k;h++)if(null!==(g=w?T.geometries[h]:T))switch(g.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===o(g,R,F,C,A))return!1;break;case"GeometryCollection":for(l=0;l<g.geometries.length;l++)if(!1===o(g.geometries[l],R,F,C,A))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===o(null,R,F,C,A))return!1;R++}}function we(s,o={}){if(null!=s.bbox&&!0!==o.recompute)return s.bbox;const u=[1/0,1/0,-1/0,-1/0];return qe(s,l=>{u[0]>l[0]&&(u[0]=l[0]),u[1]>l[1]&&(u[1]=l[1]),u[2]<l[0]&&(u[2]=l[0]),u[3]<l[1]&&(u[3]=l[1])}),u}var ne=6371008.8,xr={centimeters:100*ne,centimetres:100*ne,degrees:360/(2*Math.PI),feet:3.28084*ne,inches:39.37*ne,kilometers:ne/1e3,kilometres:ne/1e3,meters:ne,metres:ne,miles:ne/1609.344,millimeters:1e3*ne,millimetres:1e3*ne,nauticalmiles:ne/1852,radians:1,yards:1.0936*ne};function tn(s,o,u={}){const l={type:"Feature"};return(0===u.id||u.id)&&(l.id=u.id),u.bbox&&(l.bbox=u.bbox),l.properties=o||{},l.geometry=s,l}function ln(s,o={}){const u={type:"FeatureCollection"};return o.id&&(u.id=o.id),o.bbox&&(u.bbox=o.bbox),u.features=s,u}function en(s){return!isNaN(s)&&null!==s&&!Array.isArray(s)}var An=q(7016);function He(){return new jn}function jn(){this.reset()}jn.prototype={constructor:jn,reset:function(){this.s=this.t=0},add:function(s){Ge(Ln,s,this.t),Ge(this,Ln.s,this.s),this.s?this.t+=Ln.t:this.s=Ln.t},valueOf:function(){return this.s}};var Ln=new jn;function Ge(s,o,u){var l=s.s=o+u,h=l-o;s.t=o-(l-h)+(u-h)}var Ft=1e-6,St=Math.PI,de=St/2,Kn=St/4,pe=2*St,Be=180/St,Ut=St/180,Jt=Math.abs,hn=Math.atan,he=Math.atan2,yt=Math.cos,mt=(Math,Math,Math,Math,Math,Math.sin),xe=(Math,Math.sqrt);Math;function si(s){return s>1?0:s<-1?St:Math.acos(s)}function We(s){return s>1?de:s<-1?-de:Math.asin(s)}function te(){}function Wt(s,o){s&&Jn.hasOwnProperty(s.type)&&Jn[s.type](s,o)}var nn={Feature:function(s,o){Wt(s.geometry,o)},FeatureCollection:function(s,o){for(var u=s.features,l=-1,h=u.length;++l<h;)Wt(u[l].geometry,o)}},Jn={Sphere:function(s,o){o.sphere()},Point:function(s,o){o.point((s=s.coordinates)[0],s[1],s[2])},MultiPoint:function(s,o){for(var u=s.coordinates,l=-1,h=u.length;++l<h;)o.point((s=u[l])[0],s[1],s[2])},LineString:function(s,o){Pn(s.coordinates,o,0)},MultiLineString:function(s,o){for(var u=s.coordinates,l=-1,h=u.length;++l<h;)Pn(u[l],o,0)},Polygon:function(s,o){Ne(s.coordinates,o)},MultiPolygon:function(s,o){for(var u=s.coordinates,l=-1,h=u.length;++l<h;)Ne(u[l],o)},GeometryCollection:function(s,o){for(var u=s.geometries,l=-1,h=u.length;++l<h;)Wt(u[l],o)}};function Pn(s,o,u){var g,l=-1,h=s.length-u;for(o.lineStart();++l<h;)o.point((g=s[l])[0],g[1],g[2]);o.lineEnd()}function Ne(s,o){var u=-1,l=s.length;for(o.polygonStart();++u<l;)Pn(s[u],o,1);o.polygonEnd()}function fe(s){return[he(s[1],s[0]),We(s[2])]}function rn(s){var o=s[0],u=s[1],l=yt(u);return[l*yt(o),l*mt(o),mt(u)]}function Gn(s,o){return s[0]*o[0]+s[1]*o[1]+s[2]*o[2]}function sn(s,o){return[s[1]*o[2]-s[2]*o[1],s[2]*o[0]-s[0]*o[2],s[0]*o[1]-s[1]*o[0]]}function Ye(s,o){s[0]+=o[0],s[1]+=o[1],s[2]+=o[2]}function In(s,o){return[s[0]*o,s[1]*o,s[2]*o]}function gn(s){var o=xe(s[0]*s[0]+s[1]*s[1]+s[2]*s[2]);s[0]/=o,s[1]/=o,s[2]/=o}function Li(s,o){function u(l,h){return l=s(l,h),o(l[0],l[1])}return s.invert&&o.invert&&(u.invert=function(l,h){return(l=o.invert(l,h))&&s.invert(l[0],l[1])}),u}function ci(s,o){return[s>St?s-pe:s<-St?s+pe:s,o]}function Di(s){return function(o,u){return[(o+=s)>St?o-pe:o<-St?o+pe:o,u]}}function hi(s){var o=Di(s);return o.invert=Di(-s),o}function fi(s,o){var u=yt(s),l=mt(s),h=yt(o),g=mt(o);function k(T,w){var F=yt(w),C=yt(T)*F,A=mt(T)*F,R=mt(w),G=R*u+C*l;return[he(A*h-G*g,C*u-R*l),We(G*h+A*g)]}return k.invert=function(T,w){var F=yt(w),C=yt(T)*F,A=mt(T)*F,R=mt(w),G=R*h-A*g;return[he(A*h+R*g,C*u+G*l),We(G*u-C*l)]},k}function gi(s,o){(o=rn(o))[0]-=s,gn(o);var u=si(-o[1]);return((-o[2]<0?-u:u)+pe-Ft)%pe}function Gi(){var o,s=[];return{point:function(u,l){o.push([u,l])},lineStart:function(){s.push(o=[])},lineEnd:te,rejoin:function(){s.length>1&&s.push(s.pop().concat(s.shift()))},result:function(){var u=s;return s=[],o=null,u}}}function Lr(s,o){return Jt(s[0]-o[0])<Ft&&Jt(s[1]-o[1])<Ft}function Zr(s,o,u,l){this.x=s,this.z=o,this.o=u,this.e=l,this.v=!1,this.n=this.p=null}function qi(s,o,u,l,h){var T,w,g=[],k=[];if(s.forEach(function(U){if(!((V=U.length-1)<=0)){var V,ft,it=U[0],lt=U[V];if(Lr(it,lt)){for(h.lineStart(),T=0;T<V;++T)h.point((it=U[T])[0],it[1]);return void h.lineEnd()}g.push(ft=new Zr(it,U,null,!0)),k.push(ft.o=new Zr(it,null,ft,!1)),g.push(ft=new Zr(lt,U,null,!1)),k.push(ft.o=new Zr(lt,null,ft,!0))}}),g.length){for(k.sort(o),nr(g),nr(k),T=0,w=k.length;T<w;++T)k[T].e=u=!u;for(var C,A,F=g[0];;){for(var R=F,G=!0;R.v;)if((R=R.n)===F)return;C=R.z,h.lineStart();do{if(R.v=R.o.v=!0,R.e){if(G)for(T=0,w=C.length;T<w;++T)h.point((A=C[T])[0],A[1]);else l(R.x,R.n.x,1,h);R=R.n}else{if(G)for(T=(C=R.p.z).length-1;T>=0;--T)h.point((A=C[T])[0],A[1]);else l(R.x,R.p.x,-1,h);R=R.p}C=(R=R.o).z,G=!G}while(!R.v);h.lineEnd()}}}function nr(s){if(o=s.length){for(var o,h,u=0,l=s[0];++u<o;)l.n=h=s[u],h.p=l,l=h;l.n=h=s[0],h.p=l}}function Yi(s,o){return s<o?-1:s>o?1:s>=o?0:NaN}function ut(s){for(var u,g,k,o=s.length,l=-1,h=0;++l<o;)h+=s[l].length;for(g=new Array(h);--o>=0;)for(u=(k=s[o]).length;--u>=0;)g[--h]=k[u];return g}He(),He(),He(),ci.invert=ci,function zi(s){1===s.length&&(s=function $e(s){return function(o,u){return Yi(s(o),u)}}(s))}(Yi),Math.sqrt(50),Math.sqrt(10),Math.sqrt(2);var ht=1e9,Bt=-ht;function Yt(s,o,u,l){function h(F,C){return s<=F&&F<=u&&o<=C&&C<=l}function g(F,C,A,R){var G=0,U=0;if(null==F||(G=k(F,A))!==(U=k(C,A))||w(F,C)<0^A>0)do{R.point(0===G||3===G?s:u,G>1?l:o)}while((G=(G+A+4)%4)!==U);else R.point(C[0],C[1])}function k(F,C){return Jt(F[0]-s)<Ft?C>0?0:3:Jt(F[0]-u)<Ft?C>0?2:1:Jt(F[1]-o)<Ft?C>0?1:0:C>0?3:2}function T(F,C){return w(F.x,C.x)}function w(F,C){var A=k(F,1),R=k(C,1);return A!==R?A-R:0===A?C[1]-F[1]:1===A?F[0]-C[0]:2===A?F[1]-C[1]:C[0]-F[0]}return function(F){var R,G,U,V,it,lt,ft,H,Tt,zt,Nt,C=F,A=Gi(),Lt={point:qt,lineStart:function _e(){Lt.point=at,G&&G.push(U=[]),zt=!0,Tt=!1,ft=H=NaN},lineEnd:function Xe(){R&&(at(V,it),lt&&Tt&&A.rejoin(),R.push(A.result())),Lt.point=qt,Tt&&C.lineEnd()},polygonStart:function ve(){C=A,R=[],G=[],Nt=!0},polygonEnd:function ue(){var Ht=function Pt(){for(var Ht=0,le=0,Re=G.length;le<Re;++le)for(var Gr,ar,Ke=G[le],mn=1,Ni=Ke.length,sr=Ke[0],rs=sr[0],$r=sr[1];mn<Ni;++mn)Gr=rs,ar=$r,rs=(sr=Ke[mn])[0],$r=sr[1],ar<=l?$r>l&&(rs-Gr)*(l-ar)>($r-ar)*(s-Gr)&&++Ht:$r<=l&&(rs-Gr)*(l-ar)<($r-ar)*(s-Gr)&&--Ht;return Ht}(),le=Nt&&Ht,Re=(R=ut(R)).length;(le||Re)&&(F.polygonStart(),le&&(F.lineStart(),g(null,null,1,F),F.lineEnd()),Re&&qi(R,T,Ht,g,F),F.polygonEnd()),C=F,R=G=U=null}};function qt(Ht,le){h(Ht,le)&&C.point(Ht,le)}function at(Ht,le){var Re=h(Ht,le);if(G&&U.push([Ht,le]),zt)V=Ht,it=le,lt=Re,zt=!1,Re&&(C.lineStart(),C.point(Ht,le));else if(Re&&Tt)C.point(Ht,le);else{var Ke=[ft=Math.max(Bt,Math.min(ht,ft)),H=Math.max(Bt,Math.min(ht,H))],mn=[Ht=Math.max(Bt,Math.min(ht,Ht)),le=Math.max(Bt,Math.min(ht,le))];!function Bi(s,o,u,l,h,g){var U,k=s[0],T=s[1],C=0,A=1,R=o[0]-k,G=o[1]-T;if(U=u-k,R||!(U>0)){if(U/=R,R<0){if(U<C)return;U<A&&(A=U)}else if(R>0){if(U>A)return;U>C&&(C=U)}if(U=h-k,R||!(U<0)){if(U/=R,R<0){if(U>A)return;U>C&&(C=U)}else if(R>0){if(U<C)return;U<A&&(A=U)}if(U=l-T,G||!(U>0)){if(U/=G,G<0){if(U<C)return;U<A&&(A=U)}else if(G>0){if(U>A)return;U>C&&(C=U)}if(U=g-T,G||!(U<0)){if(U/=G,G<0){if(U>A)return;U>C&&(C=U)}else if(G>0){if(U<C)return;U<A&&(A=U)}return C>0&&(s[0]=k+C*R,s[1]=T+C*G),A<1&&(o[0]=k+A*R,o[1]=T+A*G),!0}}}}}(Ke,mn,s,o,u,l)?Re&&(C.lineStart(),C.point(Ht,le),Nt=!1):(Tt||(C.lineStart(),C.point(Ke[0],Ke[1])),C.point(mn[0],mn[1]),Re||C.lineEnd(),Nt=!1)}ft=Ht,H=le,Tt=Re}return Lt}}var ye=He();He(),He(),He();var Hr=1/0,Wi=Hr,yi=-Hr,ji=yi;const Us={point:function _a(s,o){s<Hr&&(Hr=s),s>yi&&(yi=s),o<Wi&&(Wi=o),o>ji&&(ji=o)},lineStart:te,lineEnd:te,polygonStart:te,polygonEnd:te,result:function(){var s=[[Hr,Wi],[yi,ji]];return yi=ji=-(Wi=Hr=1/0),s}};function Hs(s,o,u,l){return function(h,g){var A,R,G,k=o(g),T=h.invert(l[0],l[1]),w=Gi(),F=o(w),C=!1,U={point:V,lineStart:lt,lineEnd:ft,polygonStart:function(){U.point=H,U.lineStart=Tt,U.lineEnd=zt,R=[],A=[]},polygonEnd:function(){U.point=V,U.lineStart=lt,U.lineEnd=ft,R=ut(R);var Nt=function Te(s,o){var u=o[0],l=o[1],h=[mt(u),-yt(u),0],g=0,k=0;ye.reset();for(var T=0,w=s.length;T<w;++T)if(C=(F=s[T]).length)for(var F,C,A=F[C-1],R=A[0],G=A[1]/2+Kn,U=mt(G),V=yt(G),it=0;it<C;++it,R=ft,U=Tt,V=zt,A=lt){var lt=F[it],ft=lt[0],H=lt[1]/2+Kn,Tt=mt(H),zt=yt(H),Nt=ft-R,Lt=Nt>=0?1:-1,qt=Lt*Nt,Pt=qt>St,ve=U*Tt;if(ye.add(he(ve*Lt*mt(qt),V*zt+ve*yt(qt))),g+=Pt?Nt+Lt*pe:Nt,Pt^R>=u^ft>=u){var ue=sn(rn(A),rn(lt));gn(ue);var _e=sn(h,ue);gn(_e);var Xe=(Pt^Nt>=0?-1:1)*We(_e[2]);(l>Xe||l===Xe&&(ue[0]||ue[1]))&&(k+=Pt^Nt>=0?1:-1)}}return(g<-Ft||g<Ft&&ye<-Ft)^1&k}(A,T);R.length?(C||(g.polygonStart(),C=!0),qi(R,Oa,Nt,u,g)):Nt&&(C||(g.polygonStart(),C=!0),g.lineStart(),u(null,null,1,g),g.lineEnd()),C&&(g.polygonEnd(),C=!1),R=A=null},sphere:function(){g.polygonStart(),g.lineStart(),u(null,null,1,g),g.lineEnd(),g.polygonEnd()}};function V(Nt,Lt){var qt=h(Nt,Lt);s(Nt=qt[0],Lt=qt[1])&&g.point(Nt,Lt)}function it(Nt,Lt){var qt=h(Nt,Lt);k.point(qt[0],qt[1])}function lt(){U.point=it,k.lineStart()}function ft(){U.point=V,k.lineEnd()}function H(Nt,Lt){G.push([Nt,Lt]);var qt=h(Nt,Lt);F.point(qt[0],qt[1])}function Tt(){F.lineStart(),G=[]}function zt(){H(G[0][0],G[0][1]),F.lineEnd();var qt,ve,ue,_e,Nt=F.clean(),Lt=w.result(),Pt=Lt.length;if(G.pop(),A.push(G),G=null,Pt){if(1&Nt){if((ve=(ue=Lt[0]).length-1)>0){for(C||(g.polygonStart(),C=!0),g.lineStart(),qt=0;qt<ve;++qt)g.point((_e=ue[qt])[0],_e[1]);g.lineEnd()}return}Pt>1&&2&Nt&&Lt.push(Lt.pop().concat(Lt.shift())),R.push(Lt.filter(Ca))}}return U}}function Ca(s){return s.length>1}function Oa(s,o){return((s=s.x)[0]<0?s[1]-de-Ft:de-s[1])-((o=o.x)[0]<0?o[1]-de-Ft:de-o[1])}He(),function Zs(s){return"m0,"+s+"a"+s+","+s+" 0 1,1 0,"+-2*s+"a"+s+","+s+" 0 1,1 0,"+2*s+"z"}(4.5);const Ws=Hs(function(){return!0},function Ra(s){var h,o=NaN,u=NaN,l=NaN;return{lineStart:function(){s.lineStart(),h=1},point:function(g,k){var T=g>0?St:-St,w=Jt(g-o);Jt(w-St)<Ft?(s.point(o,u=(u+k)/2>0?de:-de),s.point(l,u),s.lineEnd(),s.lineStart(),s.point(T,u),s.point(g,u),h=0):l!==T&&w>=St&&(Jt(o-l)<Ft&&(o-=l*Ft),Jt(g-T)<Ft&&(g-=T*Ft),u=function ba(s,o,u,l){var h,g,k=mt(s-u);return Jt(k)>Ft?hn((mt(o)*(g=yt(l))*mt(u)-mt(l)*(h=yt(o))*mt(s))/(h*g*k)):(o+l)/2}(o,u,g,k),s.point(l,u),s.lineEnd(),s.lineStart(),s.point(T,u),h=0),s.point(o=g,u=k),l=T},lineEnd:function(){s.lineEnd(),o=u=NaN},clean:function(){return 2-h}}},function Ma(s,o,u,l){var h;if(null==s)l.point(-St,h=u*de),l.point(0,h),l.point(St,h),l.point(St,0),l.point(St,-h),l.point(0,-h),l.point(-St,-h),l.point(-St,0),l.point(-St,h);else if(Jt(s[0]-o[0])>Ft){var g=s[0]<o[0]?St:-St;l.point(-g,h=u*g/2),l.point(0,h),l.point(g,h)}else l.point(o[0],o[1])},[-St,-de]);function Aa(s,o){var u=yt(s),l=u>0,h=Jt(u)>Ft;function k(C,A){return yt(C)*yt(A)>u}function w(C,A,R){var V=[1,0,0],it=sn(rn(C),rn(A)),lt=Gn(it,it),ft=it[0],H=lt-ft*ft;if(!H)return!R&&C;var Tt=u*lt/H,zt=-u*ft/H,Nt=sn(V,it),Lt=In(V,Tt);Ye(Lt,In(it,zt));var Pt=Nt,ve=Gn(Lt,Pt),ue=Gn(Pt,Pt),_e=ve*ve-ue*(Gn(Lt,Lt)-1);if(!(_e<0)){var Xe=xe(_e),at=In(Pt,(-ve-Xe)/ue);if(Ye(at,Lt),at=fe(at),!R)return at;var mn,Ht=C[0],le=A[0],Re=C[1],Ke=A[1];le<Ht&&(mn=Ht,Ht=le,le=mn);var Ni=le-Ht,sr=Jt(Ni-St)<Ft;if(!sr&&Ke<Re&&(mn=Re,Re=Ke,Ke=mn),sr||Ni<Ft?sr?Re+Ke>0^at[1]<(Jt(at[0]-Ht)<Ft?Re:Ke):Re<=at[1]&&at[1]<=Ke:Ni>St^(Ht<=at[0]&&at[0]<=le)){var ar=In(Pt,(-ve+Xe)/ue);return Ye(ar,Lt),[at,fe(ar)]}}}function F(C,A){var R=l?s:St-s,G=0;return C<-R?G|=1:C>R&&(G|=2),A<-R?G|=4:A>R&&(G|=8),G}return Hs(k,function T(C){var A,R,G,U,V;return{lineStart:function(){U=G=!1,V=1},point:function(it,lt){var H,ft=[it,lt],Tt=k(it,lt),zt=l?Tt?0:F(it,lt):Tt?F(it+(it<0?St:-St),lt):0;if(!A&&(U=G=Tt)&&C.lineStart(),Tt!==G&&(!(H=w(A,ft))||Lr(A,H)||Lr(ft,H))&&(ft[0]+=Ft,ft[1]+=Ft,Tt=k(ft[0],ft[1])),Tt!==G)V=0,Tt?(C.lineStart(),H=w(ft,A),C.point(H[0],H[1])):(H=w(A,ft),C.point(H[0],H[1]),C.lineEnd()),A=H;else if(h&&A&&l^Tt){var Nt;!(zt&R)&&(Nt=w(ft,A,!0))&&(V=0,l?(C.lineStart(),C.point(Nt[0][0],Nt[0][1]),C.point(Nt[1][0],Nt[1][1]),C.lineEnd()):(C.point(Nt[1][0],Nt[1][1]),C.lineEnd(),C.lineStart(),C.point(Nt[0][0],Nt[0][1])))}Tt&&(!A||!Lr(A,ft))&&C.point(ft[0],ft[1]),A=ft,G=Tt,R=zt},lineEnd:function(){G&&C.lineEnd(),A=null},clean:function(){return V|(U&&G)<<1}}},function g(C,A,R,G){!function Fi(s,o,u,l,h,g){if(u){var k=yt(o),T=mt(o),w=l*u;null==h?(h=o+l*pe,g=o-w/2):(h=gi(k,h),g=gi(k,g),(l>0?h<g:h>g)&&(h+=l*pe));for(var F,C=h;l>0?C>g:C<g;C-=w)F=fe([k,-T*yt(C),-T*mt(C)]),s.point(F[0],F[1])}}(G,s,o,R,C,A)},l?[0,-s]:[-St,s-St])}function js(s){return s}function xs(s){return function(o){var u=new Ns;for(var l in s)u[l]=s[l];return u.stream=o,u}}function Ns(){}function $s(s,o,u){var l=o[1][0]-o[0][0],h=o[1][1]-o[0][1],g=s.clipExtent&&s.clipExtent();s.scale(150).translate([0,0]),null!=g&&s.clipExtent(null),function Ae(s,o){s&&nn.hasOwnProperty(s.type)?nn[s.type](s,o):Wt(s,o)}(u,s.stream(Us));var k=Us.result(),T=Math.min(l/(k[1][0]-k[0][0]),h/(k[1][1]-k[0][1])),w=+o[0][0]+(l-T*(k[1][0]+k[0][0]))/2,F=+o[0][1]+(h-T*(k[1][1]+k[0][1]))/2;return null!=g&&s.clipExtent(g),s.scale(150*T).translate([w,F])}Ns.prototype={constructor:Ns,point:function(s,o){this.stream.point(s,o)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var Pa=yt(30*Ut);function Js(s,o){return+o?function Fa(s,o){function u(l,h,g,k,T,w,F,C,A,R,G,U,V,it){var lt=F-l,ft=C-h,H=lt*lt+ft*ft;if(H>4*o&&V--){var Tt=k+R,zt=T+G,Nt=w+U,Lt=xe(Tt*Tt+zt*zt+Nt*Nt),qt=We(Nt/=Lt),Pt=Jt(Jt(Nt)-1)<Ft||Jt(g-A)<Ft?(g+A)/2:he(zt,Tt),ve=s(Pt,qt),ue=ve[0],_e=ve[1],Xe=ue-l,at=_e-h,Ht=ft*Xe-lt*at;(Ht*Ht/H>o||Jt((lt*Xe+ft*at)/H-.5)>.3||k*R+T*G+w*U<Pa)&&(u(l,h,g,k,T,w,ue,_e,Pt,Tt/=Lt,zt/=Lt,Nt,V,it),it.point(ue,_e),u(ue,_e,Pt,Tt,zt,Nt,F,C,A,R,G,U,V,it))}}return function(l){var h,g,k,T,w,F,C,A,R,G,U,V,it={point:lt,lineStart:ft,lineEnd:Tt,polygonStart:function(){l.polygonStart(),it.lineStart=zt},polygonEnd:function(){l.polygonEnd(),it.lineStart=ft}};function lt(qt,Pt){qt=s(qt,Pt),l.point(qt[0],qt[1])}function ft(){A=NaN,it.point=H,l.lineStart()}function H(qt,Pt){var ve=rn([qt,Pt]),ue=s(qt,Pt);u(A,R,C,G,U,V,A=ue[0],R=ue[1],C=qt,G=ve[0],U=ve[1],V=ve[2],16,l),l.point(A,R)}function Tt(){it.point=lt,l.lineEnd()}function zt(){ft(),it.point=Nt,it.lineEnd=Lt}function Nt(qt,Pt){H(h=qt,Pt),g=A,k=R,T=G,w=U,F=V,it.point=H}function Lt(){u(A,R,C,G,U,V,g,k,h,T,w,F,16,l),it.lineEnd=Tt,Tt()}return it}}(s,o):function Da(s){return xs({point:function(o,u){o=s(o,u),this.stream.point(o[0],o[1])}})}(s)}var Ua=xs({point:function(s,o){this.stream.point(s*Ut,o*Ut)}});function Ga(s){return function Ba(s){var o,g,k,R,G,lt,ft,H,Lt,qt,u=150,l=480,h=250,T=0,w=0,F=0,C=0,A=0,U=null,V=Ws,it=null,Tt=js,zt=.5,Nt=Js(ue,zt);function Pt(at){return[(at=G(at[0]*Ut,at[1]*Ut))[0]*u+g,k-at[1]*u]}function ve(at){return(at=G.invert((at[0]-g)/u,(k-at[1])/u))&&[at[0]*Be,at[1]*Be]}function ue(at,Ht){return[(at=o(at,Ht))[0]*u+g,k-at[1]*u]}function _e(){G=Li(R=function Pi(s,o,u){return(s%=pe)?o||u?Li(hi(s),fi(o,u)):hi(s):o||u?fi(o,u):ci}(F,C,A),o);var at=o(T,w);return g=l-at[0]*u,k=h+at[1]*u,Xe()}function Xe(){return Lt=qt=null,Pt}return Pt.stream=function(at){return Lt&&qt===at?Lt:Lt=Ua(V(R,Nt(Tt(qt=at))))},Pt.clipAngle=function(at){return arguments.length?(V=+at?Aa(U=at*Ut,6*Ut):(U=null,Ws),Xe()):U*Be},Pt.clipExtent=function(at){return arguments.length?(Tt=null==at?(it=lt=ft=H=null,js):Yt(it=+at[0][0],lt=+at[0][1],ft=+at[1][0],H=+at[1][1]),Xe()):null==it?null:[[it,lt],[ft,H]]},Pt.scale=function(at){return arguments.length?(u=+at,_e()):u},Pt.translate=function(at){return arguments.length?(l=+at[0],h=+at[1],_e()):[l,h]},Pt.center=function(at){return arguments.length?(T=at[0]%360*Ut,w=at[1]%360*Ut,_e()):[T*Be,w*Be]},Pt.rotate=function(at){return arguments.length?(F=at[0]%360*Ut,C=at[1]%360*Ut,A=at.length>2?at[2]%360*Ut:0,_e()):[F*Be,C*Be,A*Be]},Pt.precision=function(at){return arguments.length?(Nt=Js(ue,zt=at*at),Xe()):xe(zt)},Pt.fitExtent=function(at,Ht){return $s(Pt,at,Ht)},Pt.fitSize=function(at,Ht){return function La(s,o,u){return $s(s,[[0,0],o],u)}(Pt,at,Ht)},function(){return o=s.apply(this,arguments),Pt.invert=o.invert&&ve,_e()}}(function(){return s})()}function ta(s){return function(o,u){var l=yt(o),h=yt(u),g=s(l*h);return[g*h*mt(o),g*mt(u)]}}function xi(s){return function(o,u){var l=xe(o*o+u*u),h=s(l),g=mt(h),k=yt(h);return[he(o*g,l*k),We(l&&u*g/l)]}}ta(function(s){return xe(2/(1+s))}).invert=xi(function(s){return 2*We(s/2)});var na=ta(function(s){return(s=si(s))&&s/mt(s)});function Ss(s,o){return[s,o]}na.invert=xi(function(s){return s}),Ss.invert=Ss,xi(hn),xi(We),xi(function(s){return 2*hn(s)});var{BufferOp:Za,GeoJSONReader:Ha,GeoJSONWriter:Wa}=An;function es(s,o,u,l){var h=s.properties||{},g="Feature"===s.type?s.geometry:s;if("GeometryCollection"===g.type){var k=[];return Rn(s,function(V){var it=es(V,o,u,l);it&&k.push(it)}),ln(k)}var T=function $a(s){var o=function Wn(s,o={}){const u=we(s);return function Ze(s,o,u={}){if(!s)throw new Error("coordinates is required");if(!Array.isArray(s))throw new Error("coordinates must be an Array");if(s.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!en(s[0])||!en(s[1]))throw new Error("coordinates must contain numbers");return tn({type:"Point",coordinates:s},o,u)}([(u[0]+u[2])/2,(u[1]+u[3])/2],o.properties,o)}(s).geometry.coordinates,u=[-o[0],-o[1]];return function za(){return Ga(na).scale(79.4188).clipAngle(179.999)}().rotate(u).scale(ne)}(g),w={type:g.type,coordinates:la(g.coordinates,T)},C=(new Ha).read(w),A=function Sr(s,o="kilometers"){const u=xr[o];if(!u)throw new Error(o+" units is invalid");return s*u}(function Tr(s,o="kilometers"){const u=xr[o];if(!u)throw new Error(o+" units is invalid");return s/u}(o,u),"meters"),R=Za.bufferOp(C,A,l);if(!ua((R=(new Wa).write(R)).coordinates))return tn({type:R.type,coordinates:ca(R.coordinates,T)},h)}function ua(s){return Array.isArray(s[0])?ua(s[0]):isNaN(s[0])}function la(s,o){return"object"!=typeof s[0]?o(s):s.map(function(u){return la(u,o)})}function ca(s,o){return"object"!=typeof s[0]?o.invert(s):s.map(function(u){return ca(u,o)})}const ha=s=>`${s.getSouthWest().lat},${s.getSouthWest().lng},${s.getNorthEast().lat},${s.getNorthEast().lng}`;class Ka{constructor(o,u="map"){this.coordinates=[],this.distances=[],this.circles=[],this.filters=[],this.rangePoiInMetres=W.Y5,this.pois=[],this.bounds="0,0",this.trackOk=!1,this.tagNames=[],this.activeTags=[],this.removeIfMapExist=()=>this.get()&&this.get().remove(),this.get=()=>this.map,this.getLayers=()=>({track:W.qr,trackNearCircles:W.Nz,markers:W.Hc}),this.addPOIsSelectInMap=(l=[])=>{const h=[];return l.map(g=>{const k=+this.distances[g.pointIndex].toFixed(2),T=g.position[0],w=g.position[1],F=this.addMarkerItem(g.tagName||"",[T,w]),{streetView:C,direction:A}={direction:be(s={lat:T,lng:w}),streetView:ge(s)};var s;h.push({tag:g.tagName,i18nText:g.tags&&g.tags.name?g.tags.name:F,lat:T,lng:w,ele:g.tags&&g.tags.ele?g.tags.ele:g.popup.ele||0,distance:k,streetView:C,direction:A,symbol:g.symbol||"",tags:g.tags})}),h},this.id=u,this.tagNames=o}init(){this.removeIfMapExist(),this.map=new At.Map(this.id,{center:[0,0],zoom:3,maxZoom:19}),((s=Je_baseLayers_default,o={attribution:I,maxZoom:20})=>(0,At.tileLayer)(s,o))(Je_baseLayers_osmManik,{attribution:Qe.OSM}).addTo(this.get()),this.addControls({fullscreen:!0,legend:!1,watermark:!0}),this.addLayers()}addLayers(){W.qr.addTo(this.get()),W.Nz.addTo(this.get()),W.Hc.addTo(this.get())}removeLayers(){W.Nz.clearLayers(),W.Hc.clearLayers()}removeLegendControl(){for(var o=document.getElementsByClassName("legend");o[0];)o[0].parentNode.removeChild(o[0])}resetAll(){this.reset(),this.resetTrack()}reset(){this.coordinates.length=0,this.circles.length=0,this.resetLayersMarkersCirclesNear()}resetLayersMarkersCirclesNear(){this.removeLayers(),this.removeLegendControl(),this.pois.length=0}resetTrack(){W.qr.clearLayers(),this.addLayers()}addControls(o){const{fullscreen:u,watermark:l}=o;u&&new Dt(undefined).addTo(this.get()),l&&new Kt({position:"topright"}).addTo(this.get())}addMarkerItem(o,u){const l=this.tagNames.find(g=>g.tag&&g.tag===o),h=`${l&&l.i18n||"Waypoint"}`;return(0,At.marker)(u,{icon:(s=o||"",(0,At.divIcon)({className:"custom-icon-marker",iconSize:(0,At.point)(40,40),html:`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32" class="marker"><path fill-opacity="0.25" d="M16 32s1.427-9.585 3.761-12.025c4.595-4.805 8.685-.99 8.685-.99s4.044 3.964-.526 8.743C25.514 30.245 16 32 16 32z"/><path stroke="#fff" fill="${yn(s)}" d="M15.938 32S6 17.938 6 11.938C6 .125 15.938 0 15.938 0S26 .125 26 11.875C26 18.062 15.938 32 15.938 32zM16 6a4 4 0 100 8 4 4 0 000-8z"/></svg>`,iconAnchor:[12,24],popupAnchor:[9,-26]}))}).addTo(this.getLayers().markers).bindTooltip(h,{direction:"top",offset:[8,-15],sticky:!1}),h;var s}drawTrack(o,u){var l=this;return(0,Q.Z)(function*(){l.init();let h=0;return l.distances=[],l.resetAll(),o.forEach((g,k)=>{l.coordinates.push([+g.lat.toFixed(5),+g.lon.toFixed(5)]);const{lat:T,lon:w}=k>0?o[k-1]:o[k],{lat:F,lon:C}=o[k];h+=function $t(s,o,u,l){const h=R=>R*Math.PI/180,k=h(u-s),T=h(l-o),w=h(s),F=h(u),C=Math.sin(k/2)*Math.sin(k/2)+Math.sin(T/2)*Math.sin(T/2)*Math.cos(w)*Math.cos(F);return 2*Math.atan2(Math.sqrt(C),Math.sqrt(1-C))*6371}(T,w,F,C),l.distances.push(h)}),u?.length&&(u.forEach(g=>{l.addMarkerItem(g.name||"",[+g.lat,+g.lon]),console.log(g.name,g,l.activeTags),(!l.activeTags.length||!l.activeTags.includes(g.name||""))&&l.activeTags.push(g.name||"")}),l.addLegendControl(l.activeTags)),l.addRoutePolyLine(),l.addStartFinishPoints(),l.saveTemporalyInLocalStorage(o),W.rX.OK})()}addRoutePolyLine(){this.trackPolyLine=(0,At.polyline)(this.coordinates,{weight:5,color:"green",lineJoin:"round"}).addTo(this.getLayers().track),this.trackPolyLine&&(this.trackOk=!0),this.centerTrackCameraAndZoom()}centerCameraInTrack(){var o=this;return(0,Q.Z)(function*(){o.get().fitBounds(o.trackPolyLine.getBounds(),{padding:[50,50]})})()}centerTrackCameraAndZoom(){var o=this;return(0,Q.Z)(function*(){o.centerCameraInTrack(),o.takeSearchBounds()})()}calculateExpandedArea(){const o=function ja(s,o,u){var l=(u=u||{}).units||"kilometers",h=u.steps||8;if(!s)throw new Error("geojson is required");if("object"!=typeof u)throw new Error("options must be an object");if("number"!=typeof h)throw new Error("steps must be an number");if(void 0===o)throw new Error("radius is required");if(h<=0)throw new Error("steps must be greater than 0");var g=[];switch(s.type){case"GeometryCollection":return Rn(s,function(k){var T=es(k,o,l,h);T&&g.push(T)}),ln(g);case"FeatureCollection":return vn(s,function(k){var T=es(k,o,l,h);T&&vn(T,function(w){w&&g.push(w)})}),ln(g)}return es(s,o,l,h)}(this.trackPolyLine.toGeoJSON(),this.rangePoiInMetres,{units:"meters"});if(o){const u=we(o);console.log("L\xedmites expandidos (formato bbox):",u);const l=(0,At.latLngBounds)([u[1],u[0]],[u[3],u[2]]);return kr.N.logRadius&&(0,At.rectangle)(l,{color:"#00ff00",weight:4,fill:!1,opacity:.5}).addTo(this.get()),ha(l)}return console.error("No se pudo crear el \xe1rea de expansi\xf3n. La polil\xednea puede ser inv\xe1lida."),ha(this.get().getBounds())}takeSearchBounds(){localStorage.setItem(W.iL.BOUNDS,this.calculateExpandedArea())}addStartFinishPoints(){if(this.coordinates.length>2){const u=this.coordinates[this.coordinates.length-1];this.addCircle(this.coordinates[0],"green"),this.addCircle(u,"red")}}addCircle(o,u){(0,At.circle)([+o[0].toFixed(5),+o[1].toFixed(5)],{radius:15,color:"white",opacity:100,fillColor:u,fillOpacity:1}).addTo(this.getLayers().track)}drawPOIs(o,u=150){var l=this;return(0,Q.Z)(function*(){if(l.resetLayersMarkersCirclesNear(),l.rangePoiInMetres=u,l.filters=o,yield l.downloadSelectAreaPOIs(),l.pois.length){l.defineTrackLinePointsAndTrackNearZone();let h=[];h=l.getUsePOIs(h);const g=l.addPOIsSelectInMap(h),k=[...new Set(g.map(u=>u.tag))];return k.length&&l.addLegendControl(k),kr.N.logRadius&&setTimeout(()=>l.get().removeLayer(l.getLayers().trackNearCircles),2e3),localStorage.setItem(W.iL.REPORT_POIS,JSON.stringify(((s,o,u="ASC")=>s.sort("ASC"===u?(l,h)=>l[o]-h[o]:(l,h)=>h[o]-l[o]))(g,"distance"))),{ok:!0,message:k.length?W.rX.OK:W.rX.NO_DATA_FOUND}}return{ok:!1,message:W.rX.NO_DATA_FOUND}})()}addLegendControl(o=[]){for(var u=document.getElementsByClassName("legend");u[0];)u[0].parentNode.removeChild(u[0]);const l=new D({title:"Puntos de inter\xe9s",position:"bottomleft",activeTags:o,tagNames:this.tagNames});this.get().addControl(l)}downloadSelectAreaPOIs(){var o=this;return(0,Q.Z)(function*(){const u=yield o.getPOIsFromSelectFilters();return o.pois=[],!!(u&&u.elements||!u.elements.length)&&(u.elements.map(l=>{const h=l.tags,g=(s=>{const o=hr.find(u=>u.check(s));return o?o.value:W.NQ.WAYPOINT})(h);o.pois.push({position:[l.lat,l.lon],popup:h,tagName:g,photo:W.Po.values.find(k=>k.id===g)?.photo||"",symbol:(0,_r.sS)(g),pointIndex:-1,tags:h})}),!0)})()}getUsePOIs(o=[]){for(let u=0;u<this.pois.length;u++){const l=this.pois[u].position;for(let h=0;h<this.circles.length;h++)if(this.circles[h].getLatLng().distanceTo(l)<=this.rangePoiInMetres){this.pois[u].pointIndex=h,Ct(o,this.pois[u]);break}}return o}defineTrackLinePointsAndTrackNearZone(){this.circles=[],this.coordinates.map(o=>{const u=(0,At.circle)([+o[0],+o[1]],{radius:this.rangePoiInMetres,fillOpacity:0,opacity:W.Yh?100:0});this.circles.push(u),u.addTo(this.getLayers().trackNearCircles)})}saveTemporalyInLocalStorage(o){o.length&&localStorage.setItem(W.iL.TRACK_POINTS,JSON.stringify(o))}getPOIsFromSelectFilters(){var o=this;return(0,Q.Z)(function*(){return yield(0,Qn.getZoneMapFeatures)({bbox:localStorage.getItem(W.iL.BOUNDS)||"",filters:o.filters}).then(u=>u).catch(u=>(console.log("error",u),{}))})()}}var y=q(8274),Ja=q(2324);let to=(()=>{class s{constructor(){this.select={value:50,range:[0,100]},this.title="",this.selectValue=new y.vpe}onInput(u){document.getElementById("rangeValue").innerText=u+` ${this.select.extra}`}changeValue(u){this.selectValue.emit(+u.target.value||W.Y5),this.onInput(+u.target.value||W.Y5)}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275cmp=y.Xpm({type:s,selectors:[["app-slider"]],inputs:{select:"select",title:"title"},outputs:{selectValue:"selectValue"},decls:9,vars:5,consts:[[1,"row"],[1,"column"],["type","range",1,"slider",3,"min","max","value","change"],[1,"column-10"],["id","rangeValue"]],template:function(u,l){1&u&&(y.TgZ(0,"div",0),y._UZ(1,"br"),y.TgZ(2,"div",1),y._uU(3),y.qZA(),y.TgZ(4,"div",1)(5,"input",2),y.NdJ("change",function(g){return l.changeValue(g)}),y.qZA()(),y.TgZ(6,"div",3)(7,"p",4),y._uU(8),y.qZA()()()),2&u&&(y.xp6(3),y.Oqu(l.title),y.xp6(2),y.Q6J("min",l.select.range[0])("max",l.select.range[1])("value",l.select.value),y.xp6(3),y.hij("",l.select.value," m"))},styles:[".slidecontainer[_ngcontent-%COMP%]{width:100%;margin:1rem}.slider[_ngcontent-%COMP%]{appearance:none;width:100%;height:25px;background:#d3d3d3;outline:none;opacity:.7;transition:opacity .2s}.slider[_ngcontent-%COMP%]:hover{opacity:1}.slider[_ngcontent-%COMP%]::-webkit-slider-thumb{appearance:none;width:25px;height:25px;background:#3f51b5;cursor:pointer}.slider[_ngcontent-%COMP%]::-moz-range-thumb{width:25px;height:25px;background:#3f51b5;cursor:pointer}"]}),s})();var jr=q(4032);function eo(s,o){1&s&&(y.TgZ(0,"span"),y._uU(1),y.ALo(2,"translate"),y.qZA()),2&s&&(y.xp6(1),y.Oqu(y.lcZ(2,1,"multiSelect.label.noFilters")))}function no(s,o){if(1&s){const u=y.EpF();y.TgZ(0,"span",9),y.NdJ("click",function(){y.CHM(u);const h=y.oxw().$implicit,g=y.oxw(2);return y.KtG(g.manage(h,!1))}),y.TgZ(1,"span",10),y._uU(2,"X"),y.qZA(),y._uU(3),y.ALo(4,"translate"),y.qZA()}if(2&s){const u=y.oxw().$implicit;y.xp6(3),y.hij("\xa0",y.lcZ(4,1,u.i18n),"")}}function ro(s,o){if(1&s&&(y.ynx(0),y.YNc(1,no,5,3,"span",8),y.BQk()),2&s){const u=o.$implicit;y.xp6(1),y.Q6J("ngIf",u.checked)}}function io(s,o){if(1&s&&(y.ynx(0),y.YNc(1,ro,2,1,"ng-container",7),y.BQk()),2&s){const u=y.oxw();y.xp6(1),y.Q6J("ngForOf",u.filters)}}let so=(()=>{class s{constructor(){this.filters=[],this.noFilters=!1,this.translateService=(0,y.f3M)(jr.sK),this.activeValues=new y.vpe}ngOnInit(){document.getElementById("selected-options").addEventListener("click",()=>{this.close()}),this.dropdown=document.getElementById("dropdown"),this.startOptionsList()}startOptionsList(){this.optionsList=document.getElementById("options-list"),this.removeAllListItems(),this.expandableCheckedOptions(),document.addEventListener("click",u=>{u.target.closest(".multiselect-container")||(this.dropdown.style.display="none")})}expandableCheckedOptions(){this.filters.forEach(u=>{const l=document.createElement("li");l.style.padding="5px",l.innerHTML=`<label class="checkbox-label">\n      <input style="accent-color:#3f51b5;" type="checkbox" ${u.checked?"checked":""} data-id="${u.id}">&nbsp;${this.translateService.instant(u.i18n)}\n      </label>`,this.optionsList.appendChild(l)}),this.optionsList.addEventListener("change",u=>{const l=u.target.getAttribute("data-id"),h=this.filters.find(g=>g.id===l);h.checked=u.target.checked,this.manage(h,h.checked)}),this.setSelectTags()}removeAllListItems(){if(this.optionsList)for(;this.optionsList.firstChild;)this.optionsList.removeChild(this.optionsList.firstChild);else console.error('No se encontr\xf3 la lista con el id "options-list".')}ngOnChanges(u){u.filters&&this.optionsList&&(this.filters=u.filters.currentValue,this.startOptionsList())}setSelectTags(){const u=Cn(this.filters);this.noFilters=!u.length,(0,y.X6Q)()&&console.log(u),this.activeValues.emit(u)}manage(u,l){const h=this.filters.findIndex(({text:g})=>u.text===g);if(this.filters[h].checked=l,this.setSelectTags(),!l){const g=document.querySelector(`#options-list input[data-id="${u.id}"]`);g&&(g.checked=!1)}}close(){this.dropdown.style.display="block"===this.dropdown.style.display?"none":"block"}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275cmp=y.Xpm({type:s,selectors:[["app-multi-select"]],inputs:{filters:"filters"},outputs:{activeValues:"activeValues"},features:[y.TTD],decls:12,vars:5,consts:[[1,"multiselect-container"],["id","selected-options",1,"selected-options"],[4,"ngIf"],[1,"filter-item-select","more-btn"],["id","dropdown",1,"dropdown"],["id","options-list",1,"options-list"],[3,"click"],[4,"ngFor","ngForOf"],["class","filter-item-select",3,"click",4,"ngIf"],[1,"filter-item-select",3,"click"],[1,"remove-item"]],template:function(u,l){1&u&&(y.TgZ(0,"div",0)(1,"div",1),y.YNc(2,eo,3,3,"span",2),y.YNc(3,io,2,1,"ng-container",2),y.TgZ(4,"div",3),y._uU(5),y.ALo(6,"translate"),y.qZA()(),y.TgZ(7,"div",4),y._UZ(8,"ul",5),y.TgZ(9,"div")(10,"button",6),y.NdJ("click",function(){return l.close()}),y._uU(11,"OK"),y.qZA()()()()),2&u&&(y.xp6(2),y.Q6J("ngIf",l.noFilters),y.xp6(1),y.Q6J("ngIf",!l.noFilters),y.xp6(2),y.hij(" ",y.lcZ(6,3,"multiSelect.moreButton")," "))},dependencies:[N.sg,N.O5,jr.X$],styles:["body[_ngcontent-%COMP%]{font-family:Arial,sans-serif}.multiselect-container[_ngcontent-%COMP%]{position:relative;min-width:200px;width:100%;margin-top:1rem}.selected-options[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;border:1px solid #ccc;padding:5px;cursor:pointer;min-height:16px;margin-top:-12px}.selected-options[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:flex;align-items:center;background-color:#e2e2e2;margin:2px;padding:2px 5px;border-radius:3px}.selected-options[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-right:5px}.remove-item[_ngcontent-%COMP%]{color:#999;cursor:pointer;display:inline-block;font-weight:700;margin-right:2px}.filter-item-select[_ngcontent-%COMP%]{background-color:#e4e4e4;border:1px solid #aaa;margin:3px;padding:10px!important;border-radius:4px!important;display:block;font-size:small}.selected-options[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   .remove-option[_ngcontent-%COMP%]{cursor:pointer}.dropdown[_ngcontent-%COMP%]{position:absolute;top:100%;left:0;right:0;background:#fff;border:1px solid #ccc;display:none;max-height:300px;overflow-y:auto;z-index:3000}.dropdown[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:calc(100% - 10px);padding:5px;border:none;border-bottom:1px solid #ccc}.options-list[_ngcontent-%COMP%]{list-style-type:none;margin:0;padding:0}.options-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:5px!important;cursor:pointer;display:flex;align-items:center}.options-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{background-color:#f0f0f0}.options-list[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin-right:10px}.more-btn[_ngcontent-%COMP%], button[_ngcontent-%COMP%]{background-color:var(--principal-color)!important;color:#fff;padding:10px 20px!important;border-radius:4px!important}button[_ngcontent-%COMP%]{height:40px;width:100px;margin:10px -50px;position:relative;top:50%;left:50%;display:block;transition:background-color .3s ease}button[_ngcontent-%COMP%]:hover, .more-btn[_ngcontent-%COMP%]:hover{cursor:pointer!important;background-color:var(--principal-color-hover)!important}  .checkbox-label{display:flex;align-items:center;padding:5px 0;width:100%;cursor:pointer}  .checkbox-label:hover{background-color:#e2e2e2}.checkbox-label[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{margin-right:10px}"]}),s})();function ao(s,o){if(1&s&&(y.TgZ(0,"option",3),y._uU(1),y.ALo(2,"translate"),y.qZA()),2&s){const u=o.$implicit,l=y.oxw();y.Q6J("value",u[l.objectSelectProperty.value]),y.xp6(1),y.hij(" ",y.lcZ(2,2,u[l.objectSelectProperty.label])," ")}}let oo=(()=>{class s{constructor(){this.options=[],this.objectSelectProperty={value:"id",label:"label"},this.selectOption=new y.vpe,this.translate=(0,y.f3M)(jr.sK)}ngOnInit(){this.translate.setDefaultLang("es"),this.translate.use("es")}onSelectOption(u){this.selectOption.emit(u.target.value)}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275cmp=y.Xpm({type:s,selectors:[["app-custom-select"]],inputs:{options:"options",objectSelectProperty:"objectSelectProperty"},outputs:{selectOption:"selectOption"},decls:9,vars:5,consts:[[1,"custom-select-container"],[1,"custom-select-wrapper"],["id","custom-select",3,"change"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],[1,"material-icons"],["src","/assets/img/expand_more.svg"]],template:function(u,l){1&u&&(y.TgZ(0,"div",0)(1,"div",1)(2,"select",2),y.NdJ("change",function(g){return l.onSelectOption(g)}),y.TgZ(3,"option",3),y._uU(4),y.ALo(5,"translate"),y.qZA(),y.YNc(6,ao,3,4,"option",4),y.qZA(),y.TgZ(7,"span",5),y._UZ(8,"img",6),y.qZA()()()),2&u&&(y.xp6(3),y.Q6J("value",null),y.xp6(1),y.Oqu(y.lcZ(5,3,"profiles.selectOption")),y.xp6(2),y.Q6J("ngForOf",l.options))},dependencies:[N.sg,jr.X$],styles:[".custom-select-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-bottom:16px;position:relative}label[_ngcontent-%COMP%]{margin-bottom:8px;font-size:16px;color:#757575}.custom-select-wrapper[_ngcontent-%COMP%]{position:relative}select[_ngcontent-%COMP%]{width:100%;padding:8px 12px;font-size:16px;border:1px solid #ccc;border-radius:4px;appearance:none;outline:none;font-family:Roboto,sans-serif}select[_ngcontent-%COMP%]:focus{border-color:#3f51b5}.custom-select-wrapper[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{position:absolute;top:50%;right:12px;transform:translateY(-50%);pointer-events:none;color:#757575}"]}),s})();function uo(s,o){1&s&&(y.TgZ(0,"p"),y._uU(1," Arrastra y suelta tus archivos aqu\xed / Click para seleccionar "),y.qZA())}function lo(s,o){if(1&s&&(y.TgZ(0,"p"),y._uU(1),y.qZA()),2&s){const u=y.oxw();y.xp6(1),y.hij("Archivo seleccionado: ",u.selectedFile.name,"")}}const co=function(s){return{"drag-over":s}};let ho=(()=>{class s{constructor(){this.isDragOver=!1,this.selectedFile=null,this.fileContent=null,this.includeWaypointsIfExists=!1,this.sendFileContent=new y.vpe}onDragOver(u){u.preventDefault(),this.isDragOver=!0}onDragLeave(u){u.preventDefault(),this.isDragOver=!1}onDrop(u){u.preventDefault(),this.isDragOver=!1,u.dataTransfer?.files.length&&this.handleFile(u.dataTransfer.files[0])}onFileSelect(u){const l=u.target;l.files?.length&&this.handleFile(l.files[0])}handleFile(u){const h=u.name.split(".").pop();h&&[".gpx"].includes(`.${h}`)?(this.selectedFile=u,this.readFileContent(u)):(alert("Tipo de archivo no soportado. Por favor, selecciona un archivo .gpx"),this.fileContent=null,this.sendFileContent.emit({data:"---",includeWaypoints:this.includeWaypointsIfExists,fileName:""}))}readFileContent(u){const l=new FileReader;l.onload=()=>{this.fileContent=l.result,this.sendFileContent.emit({data:this.fileContent,includeWaypoints:this.includeWaypointsIfExists,fileName:u.name.split(".")[0]})},l.onerror=h=>{console.error("Error al leer el archivo",h),this.fileContent=null,this.sendFileContent.emit({data:"---",includeWaypoints:this.includeWaypointsIfExists,fileName:""})},l.readAsText(u)}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275cmp=y.Xpm({type:s,selectors:[["app-gpx-file-charger"]],outputs:{sendFileContent:"sendFileContent"},decls:5,vars:5,consts:[[1,"drag-drop-container",3,"ngClass","dragover","dragleave","drop","click"],[4,"ngIf"],["type","file","hidden","",3,"change"],["fileInput",""]],template:function(u,l){if(1&u){const h=y.EpF();y.TgZ(0,"div",0),y.NdJ("dragover",function(k){return l.onDragOver(k)})("dragleave",function(k){return l.onDragLeave(k)})("drop",function(k){return l.onDrop(k)})("click",function(){y.CHM(h);const k=y.MAs(4);return y.KtG(k.click())}),y.YNc(1,uo,2,0,"p",1),y.YNc(2,lo,2,1,"p",1),y.TgZ(3,"input",2,3),y.NdJ("change",function(k){return l.onFileSelect(k)}),y.qZA()()}2&u&&(y.Q6J("ngClass",y.VKq(3,co,l.isDragOver)),y.xp6(1),y.Q6J("ngIf",!l.selectedFile),y.xp6(1),y.Q6J("ngIf",l.selectedFile))},dependencies:[N.mk,N.O5],styles:[".drag-drop-container[_ngcontent-%COMP%]{border:2px dashed #ccc;padding:20px;text-align:center;cursor:pointer;transition:background-color .3s,border-color .3s;border-radius:10px;position:relative;overflow:hidden;margin-bottom:1rem}.drag-drop-container.drag-over[_ngcontent-%COMP%]{border-color:#3f51b5;background-color:#3f51b51a}.drag-drop-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-top:10px}.file-content[_ngcontent-%COMP%]{margin-top:20px;text-align:left;background:#f9f9f9;padding:10px;border:1px solid #ccc;border-radius:5px;max-height:300px;overflow-y:auto}"]}),s})(),fo=(()=>{class s{downloadTrackWithWaypoints(u,l=!0){var h=this;return(0,Q.Z)(function*(){const g=yield h.generateGpxWaypoints(u||"TrackNavigator Track",l),k=l?W.vH.GPX:W.vH.KML,T=g.map(({content:w,fileName:F,type:C})=>({content:w,fileName:`${F}_track_navigator.${(0,Vt.AH)(k)}`,folder:"waypoint"===C?"waypoints":void 0}));yield(0,Vt.RZ)(T,u||"track_files")})()}generateGpxWaypoints(u,l=!0){return(0,Q.Z)(function*(){const h=JSON.parse(localStorage.getItem(W.iL.TRACK_POINTS)||""),g=JSON.parse(localStorage.getItem(W.iL.REPORT_POIS)||"");if(l){const k=function j(s,o,u,l={name:"Anartz Mugika Ledo",email:"mugan86@gmail.com",website:"https://anartz-mugika.com/"},h=W.EO){const g=u.name.replace(/\s+/g,"_"),k=[],T=new Set;o.forEach(R=>{const G=`${R.lat},${R.lng}`;T.has(G)||(T.add(G),k.push(R))});const w=(R,G=[])=>{let U='<?xml version="1.0" encoding="UTF-8" standalone="no" ?>\n';return U+=`<gpx xmlns="http://www.topografix.com/GPX/1/1" version="1.1" creator="${l.name} - ${l.website}">\n`,U+=`<metadata>\n<name>${u.name}</name>\n`,u.description&&(U+=`<desc>${u.description}</desc>\n`),U+=`<author>\n<name>${l.name}</name>\n<email>${l.email}</email>\n`,U+=`<link href="${l.website}">\n<text>${l.name}'s Website</text>\n</link>\n</author>\n`,U+="</metadata>\n",G.forEach(V=>{U+=`<wpt lat="${V.lat}" lon="${V.lng}">\n`,void 0!==V.ele&&(U+=`<ele>${V.ele}</ele>\n`),U+=`<name>${V.i18nText||"Waypoint"}</name>\n`,V.symbol&&(U+=`<sym>${V.symbol}</sym>\n`),void 0!==V.distance&&(U+=`<cmt>km ${V.distance}</cmt>\n`),U+="</wpt>\n"}),R&&(U+="<trk>\n<trkseg>\n",s.forEach(V=>{U+=`<trkpt lat="${V.lat}" lon="${V.lon}">\n`,void 0!==V.ele&&(U+=`<ele>${V.ele}</ele>\n`),U+="</trkpt>\n"}),U+="</trkseg>\n</trk>\n"),U+="</gpx>",U},F={fileName:`${g}_track_with_waypoints`,content:w(!0,o),type:"track"},C={fileName:`${g}_track_only`,content:w(!0,[]),type:"track-waypoint"},A=[];for(let R=0;R<o.length;R+=h){const G=o.slice(R,R+h);A.push({fileName:`${g}_waypoints_${R/25+1}`,content:w(!1,G),type:"waypoint"})}return{trackWithWaypoints:F,trackOnly:C,waypointPacks:A}}(h,g,{name:u,description:"Ruta completa con waypoints"});return console.log(JSON.stringify(k)),[k.trackOnly,k.trackWithWaypoints,...k.waypointPacks]}return function se(s,o,u={name:"Anartz Mugika Ledo",email:"mugan86@gmail.com",website:"https://anartz-mugika.com/"},l={name:"My Track",description:"Generated GPX Track"}){const h=new Map;o.forEach(k=>{const T=`${k.lat},${k.lng}`;h.has(T)||h.set(T,k)});let g=`<?xml version="1.0" encoding="UTF-8"?>\n<kml xmlns="http://earth.google.com/kml/2.0">\n  <Document>\n    <name>${l.name}</name>\n    <description>${l.description}</description>\n\n    <Atom:author>\n      <Atom:name>${u.name}</Atom:name>\n      <Atom:email>${u.email}</Atom:email>\n    </Atom:author>\n    <Atom:link href="${u.website}"/>\n    \n    <Style id="trackStyle"><LineStyle><color>FF00A5FF</color><width>6</width></LineStyle></Style>`;return h.forEach(k=>{g+=`\n  <Placemark>\n    <name>${k.i18nText}</name>\n    <description><![CDATA[\n      <a href="${k.streetView}">Street View</a><br/>\n      <a href="${k.direction}">Directions</a>\n    ]]></description>\n    <Point>\n      <coordinates>${k.lng},${k.lat},${k.ele}</coordinates>\n    </Point>\n  </Placemark>`}),g+="\n  <Placemark>\n    <name>Track</name>\n    <styleUrl>#trackStyle</styleUrl>\n    <LineString>\n      <extrude>1</extrude>\n      <tessellate>1</tessellate>\n      <coordinates>",s.forEach(k=>{g+=`\n        ${k.lon},${k.lat},${k.ele}`}),g+="\n      </coordinates>\n    </LineString>\n  </Placemark>",g+="\n</Document>\n</kml>",[{fileName:l.name,content:g}]}(h,g,W.oH,{...W.dg,name:u})})()}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=y.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),go=(()=>{class s{constructor(){this.fileName="",this.outputDataService=(0,y.f3M)(fo)}createFile(u){var l=this;return(0,Q.Z)(function*(){yield l.outputDataService.downloadTrackWithWaypoints(l.fileName||"",u),l.modal(!1)})()}modal(u=!0){return(0,Q.Z)(function*(){const l=document.getElementById("downloadModal");u?l.showModal():l.close()})()}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275cmp=y.Xpm({type:s,selectors:[["app-download-modal"]],inputs:{fileName:"fileName"},decls:14,vars:0,consts:[["id","downloadModal"],[1,"modal-header"],["id","closeModalBtn",1,"close-btn",3,"click"],[1,"modal-body"],[1,"modal-buttons"],[1,"download-btn",3,"click"]],template:function(u,l){1&u&&(y.TgZ(0,"dialog",0)(1,"div",1)(2,"span"),y._uU(3,"Descarga"),y.qZA(),y.TgZ(4,"button",2),y.NdJ("click",function(){return l.modal(!1)}),y._uU(5," \xd7 "),y.qZA()(),y.TgZ(6,"div",3)(7,"p"),y._uU(8," Seleccione una de las dos opciones para descargar nuestro fichero con los Puntos de Inter\xe9s (POIs) "),y.qZA(),y.TgZ(9,"div",4)(10,"button",5),y.NdJ("click",function(){return l.createFile(!0)}),y._uU(11,"GPX"),y.qZA(),y.TgZ(12,"button",5),y.NdJ("click",function(){return l.createFile(!1)}),y._uU(13," Google Earth (KML) "),y.qZA()()()())},styles:["button[_ngcontent-%COMP%]{cursor:pointer}#openModalBtn[_ngcontent-%COMP%]{padding:10px 20px;background-color:#4caf50;color:#fff;border:none;border-radius:5px;margin:20px}dialog[_ngcontent-%COMP%]{border:none;border-radius:8px;padding:20px;max-width:400px;width:100%;box-shadow:0 2px 10px #0000001a}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:15px}.modal-header[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:20px;font-weight:700}.close-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:18px;font-weight:700;color:#333;cursor:pointer}.close-btn[_ngcontent-%COMP%]:hover{background-color:#c2c7c7}.modal-body[_ngcontent-%COMP%]{text-align:center}.modal-buttons[_ngcontent-%COMP%]{display:flex;justify-content:space-around;margin-top:20px}.download-btn[_ngcontent-%COMP%]{background-color:var(--principal-color)!important;padding:10px 20px;color:#fff;border:none;border-radius:5px;transition:background-color .3s}.download-btn[_ngcontent-%COMP%]:hover{cursor:pointer!important;background-color:var(--principal-color-hover)!important}"]}),s})();function po(s,o){1&s&&y._UZ(0,"app-dialog")}function mo(s,o){1&s&&(y._UZ(0,"div",9),y.ALo(1,"translate")),2&s&&y.s9C("innerHTML",y.lcZ(1,1,"sections.two.dataOSMInfo"),y.oJD)}function yo(s,o){1&s&&(y.TgZ(0,"div",26),y._uU(1),y.ALo(2,"translate"),y.qZA()),2&s&&(y.xp6(1),y.hij(" ",y.lcZ(2,1,"sections.one.okMessage")," "))}function vo(s,o){1&s&&(y.TgZ(0,"div",27),y._uU(1),y.ALo(2,"translate"),y.qZA()),2&s&&(y.xp6(1),y.hij(" ",y.lcZ(2,1,"sections.one.infoMessage")," "))}function _o(s,o){1&s&&(y.TgZ(0,"div",28),y._uU(1),y.ALo(2,"translate"),y.qZA()),2&s&&(y.xp6(1),y.hij(" ",y.lcZ(2,1,"sections.one.errorMessage")," "))}function ko(s,o){1&s&&(y._UZ(0,"div",9),y.ALo(1,"translate")),2&s&&y.s9C("innerHTML",y.lcZ(1,1,"sections.two.notFoundData"),y.oJD)}function Eo(s,o){1&s&&(y.TgZ(0,"div",27),y._uU(1),y.ALo(2,"translate"),y.qZA()),2&s&&(y.xp6(1),y.hij(" ",y.lcZ(2,1,"sections.two.infoMessage")," "))}function xo(s,o){1&s&&(y.TgZ(0,"div",28),y._uU(1),y.ALo(2,"translate"),y.qZA()),2&s&&(y.xp6(1),y.hij(" ",y.lcZ(2,1,"sections.two.errorMessage")," "))}const No=function(){return{value:"id",label:"i18n"}},Io=function(){return[50,400]},So=function(s,o){return{value:s,range:o,extra:"m"}};function To(s,o){if(1&s){const u=y.EpF();y.TgZ(0,"div",10)(1,"div",11)(2,"div",12)(3,"div",13),y._uU(4),y.ALo(5,"translate"),y.qZA(),y.TgZ(6,"app-gpx-file-charger",14),y.NdJ("sendFileContent",function(h){y.CHM(u);const g=y.oxw();return y.KtG(g.loadTrack(h))}),y.qZA(),y.YNc(7,yo,3,3,"div",15),y.YNc(8,vo,3,3,"div",16),y.YNc(9,_o,3,3,"div",17),y.qZA()(),y.TgZ(10,"div",18)(11,"div",13),y._uU(12),y.ALo(13,"translate"),y.qZA(),y.TgZ(14,"div")(15,"label",19),y._uU(16),y.ALo(17,"translate"),y.qZA(),y.TgZ(18,"app-custom-select",20),y.NdJ("selectOption",function(h){y.CHM(u);const g=y.oxw();return y.KtG(g.onSelectProfile(h))}),y.qZA()(),y.TgZ(19,"div")(20,"label",21),y._uU(21),y.ALo(22,"translate"),y.qZA(),y.TgZ(23,"app-multi-select",22),y.NdJ("activeValues",function(h){y.CHM(u);const g=y.oxw();return y.KtG(g.setMultiFilters(h))}),y.qZA()(),y.TgZ(24,"div",23)(25,"app-slider",24),y.NdJ("selectValue",function(h){y.CHM(u);const g=y.oxw();return y.KtG(g.changeMetersArround(h))}),y.ALo(26,"translate"),y.qZA()(),y.YNc(27,ko,2,3,"div",5),y.YNc(28,Eo,3,3,"div",16),y.YNc(29,xo,3,3,"div",17),y.TgZ(30,"button",25),y.NdJ("click",function(){y.CHM(u);const h=y.oxw();return y.KtG(h.findPois())}),y._uU(31),y.ALo(32,"translate"),y.qZA()()()}if(2&s){const u=y.oxw();y.xp6(4),y.Oqu(y.lcZ(5,16,"sections.one.title")),y.xp6(3),y.Q6J("ngIf",1===u.trackLoadOk),y.xp6(1),y.Q6J("ngIf",3===u.trackLoadOk),y.xp6(1),y.Q6J("ngIf",0===u.trackLoadOk),y.xp6(3),y.Oqu(y.lcZ(13,18,"sections.two.title")),y.xp6(4),y.Oqu(y.lcZ(17,20,"sections.two.selectProfile")),y.xp6(2),y.Q6J("options",u.profiles)("objectSelectProperty",y.DdM(28,No)),y.xp6(3),y.Oqu(y.lcZ(22,22,"sections.two.pois")),y.xp6(2),y.Q6J("filters",u.filtersSelect),y.xp6(2),y.s9C("title",y.lcZ(26,24,"sections.two.radiusInfo")),y.Q6J("select",y.WLB(30,So,u.rangePoiInMetres,y.DdM(29,Io))),y.xp6(2),y.Q6J("ngIf",6===u.searchStatus),y.xp6(1),y.Q6J("ngIf",4===u.searchStatus),y.xp6(1),y.Q6J("ngIf",0===u.searchStatus),y.xp6(2),y.hij(" ",y.lcZ(32,26,"sections.two.searchButton")," ")}}const wo=function(s){return{block:s}},Co=[{path:"",component:(()=>{class s extends Vn.H{constructor(){super(...arguments),this.title="map-bag-osm-pois",this.repor=[],this.isLoading=!1,this.filters=W.Po,this.filtersSelect=W.Po.values,this.rangePoiInMetres=W.Y5,this.profiles=zn,this.trackLoadOk=W.rX.INIT,this.searchStatus=W.rX.INIT,this.readyToLoad=W.rX.INIT,this.fileName="",this.downloadButtonCheck=()=>{document.getElementById("report").style.display=5!==this.readyToLoad?"none":"block"},this.scrollToBottom=()=>window.scroll({top:100,left:100,behavior:"smooth"})}ngOnInit(){super.ngOnInit(),this.isLoading=!0,(0,dr.D)(this.filters.values.map(u=>this.translate.get(u.i18n))).pipe((0,Xn.R)(this.unsubscribe$)).pipe((0,gt.U)(u=>u.map((l,h)=>({tag:this.filters.values[h].id,i18n:l})))).subscribe(u=>{this.mapService=new Ka(u),this.mapService.init(),setTimeout(()=>this.isLoading=!1,200)})}loadTrack({data:u,includeWaypoints:l,fileName:h}){var g=this;return(0,Q.Z)(function*(){if(g.readyToLoad=W.rX.INIT,g.downloadButtonCheck(),"---"===u)return void(g.trackLoadOk=g.trackLoadOk===W.rX.OK?W.rX.EXIST_FILE:W.rX.ERROR);g.fileName=h;const k=new Vt.nM(u),{ok:T,points:w}=k.getTracks();if(T)return g.trackLoadOk=yield g.mapService.drawTrack(w,l?k.getWayPoints():[]),g.searchStatus=W.rX.INIT,void(l&&g.scrollToBottom());g.trackLoadOk=W.rX.ERROR})()}modal(u=!0){return(0,Q.Z)(function*(){const l=document.getElementById("downloadModal");u?l.showModal():l.close()})()}setMultiFilters(u){this.filters.select=u}onSelectProfile(u){this.selectedProfileId=u;const l=this.profiles.find(h=>h.id===this.selectedProfileId)?.pois;this.filtersSelect=this.filtersSelect.map(h=>(h.checked=l?.includes(h.id)||!1,h)),this.filters.select=Cn(this.filtersSelect)}changeMetersArround(u){this.rangePoiInMetres=u}findPois(){var u=this;return(0,Q.Z)(function*(){if(u.downloadButtonCheck(),u.readyToLoad=W.rX.INIT,u.trackLoadOk===W.rX.ERROR||u.trackLoadOk===W.rX.INIT)return void(u.searchStatus=W.rX.ERROR);(u.trackLoadOk===W.rX.EXIST_FILE||u.trackLoadOk===W.rX.OK)&&(u.searchStatus=W.rX.START_SEARCH);const{ok:l,message:h}=yield u.mapService.drawPOIs(u.filters.select,u.rangePoiInMetres);u.searchStatus=h,u.readyToLoad=W.rX.READY_TO_LOAD,l&&(u.downloadButtonCheck(),u.mapService.centerTrackCameraAndZoom(),u.scrollToBottom())})()}ngOnDestroy(){this.mapService.resetAll(),this.filters.select=W.Po.select,this.filtersSelect=W.Po.values.map(u=>(u.checked=W.MJ.includes(u.id),u))}}return s.\u0275fac=function(){let o;return function(l){return(o||(o=y.n5z(s)))(l||s)}}(),s.\u0275cmp=y.Xpm({type:s,selectors:[["app-app"]],features:[y.qOj],decls:11,vars:10,consts:[[4,"ngIf"],[1,"container","container-center",3,"ngClass"],["id","map-element",1,"main-content"],["id","report",3,"click"],["src","/assets/img/download-pdf.svg"],["class","alert info",3,"innerHTML",4,"ngIf"],["id","map"],["class","filters",4,"ngIf"],[3,"fileName"],[1,"alert","info",3,"innerHTML"],[1,"filters"],["id","first-load-gpx"],[1,"section"],[1,"section-title"],[3,"sendFileContent"],["class","alert success",4,"ngIf"],["class","alert info",4,"ngIf"],["class","alert error",4,"ngIf"],["id","second-adventure-profile",1,"section"],["for","adventureProfile"],[3,"options","objectSelectProperty","selectOption"],["for","pointsOfInterest","id","three-pois-selection"],[3,"filters","activeValues"],["id","four-pois-found-range-in-metres"],[3,"select","title","selectValue"],["id","searchButton","id","five-found-pois",3,"click"],[1,"alert","success"],[1,"alert","info"],[1,"alert","error"]],template:function(u,l){1&u&&(y.YNc(0,po,1,0,"app-dialog",0),y.TgZ(1,"div",1)(2,"div",2)(3,"button",3),y.NdJ("click",function(){return l.modal()}),y._UZ(4,"img",4),y._uU(5),y.ALo(6,"translate"),y.qZA(),y.YNc(7,mo,2,3,"div",5),y._UZ(8,"div",6),y.qZA(),y.YNc(9,To,33,33,"div",7),y.qZA(),y._UZ(10,"app-download-modal",8)),2&u&&(y.Q6J("ngIf",l.isLoading),y.xp6(1),y.Q6J("ngClass",y.VKq(8,wo,l.isLoading)),y.xp6(4),y.hij("\xa0\xa0 ",y.lcZ(6,6,"download.button")," "),y.xp6(2),y.Q6J("ngIf",!l.isLoading),y.xp6(2),y.Q6J("ngIf",!l.isLoading),y.xp6(1),y.Q6J("fileName",l.fileName))},dependencies:[N.mk,N.O5,Ja.a,to,so,oo,ho,go,jr.X$],styles:[".block[_ngcontent-%COMP%]{cursor:none}#report[_ngcontent-%COMP%]{position:fixed;top:1rem;left:1rem;height:60px;cursor:pointer;z-index:2501;color:#fff;border-radius:6px;display:none}#report[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px;height:20px}code[_ngcontent-%COMP%]{color:#f0f}.leaflet-popup-content[_ngcontent-%COMP%]   .btn__popup[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%], .leaflet-tooltip-pane[_ngcontent-%COMP%]   .btn__popup[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]{display:inline-block;padding:10px 20px;text-align:center;text-decoration:none;color:#fff;background-color:#3c5d6e!important;border-radius:6px;outline:none;transition:.3s;border:2px solid transparent}.leaflet-popup-content[_ngcontent-%COMP%]   .btn__popup[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]:hover, .leaflet-popup-content[_ngcontent-%COMP%]   .btn__popup[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]:focus{background-color:#c2c7c7;border-color:#7aa8b7}select[_ngcontent-%COMP%]{position:relative;min-width:200px;width:100%}.file-upload-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;margin:20px}.file-upload-label[_ngcontent-%COMP%]{display:flex;align-items:center;cursor:pointer;color:var(--principal-color);font-size:16px}input[type=file][_ngcontent-%COMP%]{display:none}.material-icons[_ngcontent-%COMP%]{margin-right:8px}.file-upload-info[_ngcontent-%COMP%]{margin-top:10px;font-size:14px;color:#757575}.section[_ngcontent-%COMP%]{border:2px solid #ccc;padding:20px;margin-bottom:20px}.section-title[_ngcontent-%COMP%]{font-weight:700;margin-bottom:10px}#searchButton[_ngcontent-%COMP%]{margin-top:1rem}.alert[_ngcontent-%COMP%]{padding:15px;margin-bottom:1rem;border-radius:5px}.success[_ngcontent-%COMP%]{background-color:#4caf50}.error[_ngcontent-%COMP%]{background-color:#f44336}.success[_ngcontent-%COMP%], .error[_ngcontent-%COMP%]{color:#fff}.info[_ngcontent-%COMP%]{background-color:#cfe2ff;color:#052c65}  .important-url{text-decoration:underline;font-size:1.2rem}  .important-url:hover{-webkit-text-decoration:dotted;text-decoration:dotted;font-size:1.2rem}"]}),s})()}];let Oo=(()=>{class s{}return s.\u0275fac=function(u){return new(u||s)},s.\u0275mod=y.oAB({type:s}),s.\u0275inj=y.cJS({imports:[J.Bz.forChild(Co),J.Bz]}),s})();var Ro=q(9250),bo=q(753),Mo=q(5444),Ao=q(5010),Lo=q(9746),Po=q(7105),Do=q(6922);let Fo=(()=>{class s{}return s.\u0275fac=function(u){return new(u||s)},s.\u0275mod=y.oAB({type:s}),s.\u0275inj=y.cJS({imports:[N.ez,Oo,Ro.S,bo.K,Mo.J,Ao.q,jr.aw,Lo._,Po.y,Do.b]}),s})()},7016:function(wt){wt.exports=function(){"use strict";function et(r,t){(null==t||t>r.length)&&(t=r.length);for(var e=0,n=Array(t);e<t;e++)n[e]=r[e];return n}function q(r,t,e){return t=_t(t),function(n,i){if(i&&("object"==typeof i||"function"==typeof i))return i;if(void 0!==i)throw new TypeError("Derived constructors may only return object or undefined");return function(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}(n)}(r,$t()?Reflect.construct(t,e||[],_t(r).constructor):t.apply(r,e))}function N(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function J(r,t,e){if($t())return Reflect.construct.apply(null,arguments);var n=[null];n.push.apply(n,t);var i=new(r.bind.apply(r,n));return e&&Vt(i,e.prototype),i}function Q(r,t){for(var e=0;e<t.length;e++){var n=t[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,be(n.key),n)}}function x(r,t,e){return t&&Q(r.prototype,t),e&&Q(r,e),Object.defineProperty(r,"prototype",{writable:!1}),r}function K(r,t){var e=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(!e){if(Array.isArray(r)||(e=De(r))||t){e&&(r=e);var n=0,i=function(){};return{s:i,n:function(){return n>=r.length?{done:!0}:{done:!1,value:r[n++]}},e:function(m){throw m},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,c=!0,f=!1;return{s:function(){e=e.call(r)},n:function(){var m=e.next();return c=m.done,m},e:function(m){f=!0,a=m},f:function(){try{c||null==e.return||e.return()}finally{if(f)throw a}}}}function Ct(){return Ct=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(r,t,e){var n=function(a,c){for(;!{}.hasOwnProperty.call(a,c)&&null!==(a=_t(a)););return a}(r,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?r:e):i.value}},Ct.apply(null,arguments)}function _t(r){return(_t=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(r)}function ot(r,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(t&&t.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),t&&Vt(r,t)}function $t(){try{var r=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return($t=function(){return!!r})()}function Vt(r,t){return(Vt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,n){return e.__proto__=n,e})(r,t)}function Et(r,t,e,n){var i=Ct(_t(1&n?r.prototype:r),t,e);return 2&n&&"function"==typeof i?function(a){return i.apply(e,a)}:i}function ge(r){return function(t){if(Array.isArray(t))return et(t)}(r)||function(t){if(typeof Symbol<"u"&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(r)||De(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function be(r){var t=function(e,n){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var a=i.call(e,"string");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r);return"symbol"==typeof t?t:t+""}function De(r,t){if(r){if("string"==typeof r)return et(r,t);var e={}.toString.call(r).slice(8,-1);return"Object"===e&&r.constructor&&(e=r.constructor.name),"Map"===e||"Set"===e?Array.from(r):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?et(r,t):void 0}}function wn(r){var t="function"==typeof Map?new Map:void 0;return wn=function(e){if(null===e||!function(i){try{return-1!==Function.toString.call(i).indexOf("[native code]")}catch{return"function"==typeof i}}(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return J(e,arguments,_t(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),Vt(n,e)},wn(r)}var W=function(){function r(){N(this,r),r.constructor_.apply(this,arguments)}return x(r,[{key:"getEndCapStyle",value:function(){return this._endCapStyle}},{key:"isSingleSided",value:function(){return this._isSingleSided}},{key:"setQuadrantSegments",value:function(t){this._quadrantSegments=t,0===this._quadrantSegments&&(this._joinStyle=r.JOIN_BEVEL),this._quadrantSegments<0&&(this._joinStyle=r.JOIN_MITRE,this._mitreLimit=Math.abs(this._quadrantSegments)),t<=0&&(this._quadrantSegments=1),this._joinStyle!==r.JOIN_ROUND&&(this._quadrantSegments=r.DEFAULT_QUADRANT_SEGMENTS)}},{key:"getJoinStyle",value:function(){return this._joinStyle}},{key:"setJoinStyle",value:function(t){this._joinStyle=t}},{key:"setSimplifyFactor",value:function(t){this._simplifyFactor=t<0?0:t}},{key:"getSimplifyFactor",value:function(){return this._simplifyFactor}},{key:"getQuadrantSegments",value:function(){return this._quadrantSegments}},{key:"setEndCapStyle",value:function(t){this._endCapStyle=t}},{key:"getMitreLimit",value:function(){return this._mitreLimit}},{key:"setMitreLimit",value:function(t){this._mitreLimit=t}},{key:"setSingleSided",value:function(t){this._isSingleSided=t}}],[{key:"constructor_",value:function(){if(this._quadrantSegments=r.DEFAULT_QUADRANT_SEGMENTS,this._endCapStyle=r.CAP_ROUND,this._joinStyle=r.JOIN_ROUND,this._mitreLimit=r.DEFAULT_MITRE_LIMIT,this._isSingleSided=!1,this._simplifyFactor=r.DEFAULT_SIMPLIFY_FACTOR,0!==arguments.length)if(1===arguments.length)this.setQuadrantSegments(arguments[0]);else if(2===arguments.length){var n=arguments[1];this.setQuadrantSegments(arguments[0]),this.setEndCapStyle(n)}else if(4===arguments.length){var a=arguments[1],c=arguments[2],f=arguments[3];this.setQuadrantSegments(arguments[0]),this.setEndCapStyle(a),this.setJoinStyle(c),this.setMitreLimit(f)}}},{key:"bufferDistanceError",value:function(t){var e=Math.PI/2/t;return 1-Math.cos(e/2)}}])}();W.CAP_ROUND=1,W.CAP_FLAT=2,W.CAP_SQUARE=3,W.JOIN_ROUND=1,W.JOIN_MITRE=2,W.JOIN_BEVEL=3,W.DEFAULT_QUADRANT_SEGMENTS=8,W.DEFAULT_MITRE_LIMIT=5,W.DEFAULT_SIMPLIFY_FACTOR=.01;var Ve=function(r){function t(e){var n;return N(this,t),(n=q(this,t,[e])).name=Object.keys({Exception:t})[0],n}return ot(t,r),x(t,[{key:"toString",value:function(){return this.message}}])}(wn(Error)),j=function(r){function t(e){var n;return N(this,t),(n=q(this,t,[e])).name=Object.keys({IllegalArgumentException:t})[0],n}return ot(t,r),x(t)}(Ve),se=x(function r(){N(this,r)},[{key:"filter",value:function(r){}}]);function L(){}function kt(){}function ct(){}var fr,Cn,yn,Kr,Br,gr,zn,dr=x(function r(){N(this,r)},null,[{key:"equalsWithTolerance",value:function(r,t,e){return Math.abs(r-t)<=e}}]),Xn=x(function r(t,e){N(this,r),this.low=e||0,this.high=t||0},null,[{key:"toBinaryString",value:function(r){var t,e="";for(t=2147483648;t>0;t>>>=1)e+=(r.high&t)===t?"1":"0";for(t=2147483648;t>0;t>>>=1)e+=(r.low&t)===t?"1":"0";return e}}]);function gt(){}function Vn(){}gt.NaN=NaN,gt.isNaN=function(r){return Number.isNaN(r)},gt.isInfinite=function(r){return!Number.isFinite(r)},gt.MAX_VALUE=Number.MAX_VALUE,gt.POSITIVE_INFINITY=Number.POSITIVE_INFINITY,gt.NEGATIVE_INFINITY=Number.NEGATIVE_INFINITY,"function"==typeof Float64Array&&"function"==typeof Int32Array?(Br=2146435072,gr=new Float64Array(1),zn=new Int32Array(gr.buffer),gt.doubleToLongBits=function(r){gr[0]=r;var t=0|zn[0],e=0|zn[1];return(e&Br)===Br&&1048575&e&&0!==t&&(t=0,e=2146959360),new Xn(e,t)},gt.longBitsToDouble=function(r){return zn[0]=r.low,zn[1]=r.high,gr[0]}):(1023,fr=Math.log2,Cn=Math.floor,yn=Math.pow,Kr=function(){for(var r=53;r>0;r--){var t=yn(2,r)-1;if(Cn(fr(t))+1===r)return t}return 0}(),gt.doubleToLongBits=function(r){var t,e,n,i,a,c,f,m,E;if(r<0||1/r===Number.NEGATIVE_INFINITY?(c=1<<31,r=-r):c=0,0===r)return new Xn(m=c,E=0);if(r===1/0)return new Xn(m=2146435072|c,E=0);if(r!=r)return new Xn(m=2146959360,E=0);if(i=0,E=0,(t=Cn(r))>1)if(t<=Kr)(i=Cn(fr(t)))<=20?(E=0,m=t<<20-i&1048575):(E=t%(e=yn(2,n=i-20))<<32-n,m=t/e&1048575);else for(n=t,E=0;0!==(n=Cn(e=n/2));)i++,E>>>=1,E|=(1&m)<<31,m>>>=1,e!==n&&(m|=524288);if(f=i+1023,a=0===t,t=r-t,i<52&&0!==t)for(n=0;;){if((e=2*t)>=1?(t=e-1,a?(f--,a=!1):(n<<=1,n|=1,i++)):(t=e,a?0==--f&&(i++,a=!1):(n<<=1,i++)),20===i)m|=n,n=0;else if(52===i){E|=n;break}if(1===e){i<20?m|=n<<20-i:i<52&&(E|=n<<52-i);break}}return m|=f<<20,new Xn(m|=c,E)},gt.longBitsToDouble=function(r){var t,e,n,i,a=r.high,c=r.low,f=a&1<<31?-1:1;for(n=((2146435072&a)>>20)-1023,i=0,e=1<<19,t=1;t<=20;t++)a&e&&(i+=yn(2,-t)),e>>>=1;for(e=1<<31,t=21;t<=52;t++)c&e&&(i+=yn(2,-t)),e>>>=1;if(-1023===n){if(0===i)return 0*f;n=-1022}else{if(1024===n)return 0===i?f/0:NaN;i+=1}return f*i*yn(2,n)});var At=function(r){function t(e){var n;return N(this,t),(n=q(this,t,[e])).name=Object.keys({RuntimeException:t})[0],n}return ot(t,r),x(t)}(Ve),Qn=function(r){function t(){var e;return N(this,t),e=q(this,t),t.constructor_.apply(e,arguments),e}return ot(t,r),x(t,null,[{key:"constructor_",value:function(){0===arguments.length?At.constructor_.call(this):1===arguments.length&&At.constructor_.call(this,arguments[0])}}])}(At),Dt=function(){function r(){N(this,r)}return x(r,null,[{key:"shouldNeverReachHere",value:function(){if(0===arguments.length)r.shouldNeverReachHere(null);else if(1===arguments.length){var t=arguments[0];throw new Qn("Should never reach here"+(null!==t?": "+t:""))}}},{key:"isTrue",value:function(){if(1===arguments.length)r.isTrue(arguments[0],null);else if(2===arguments.length){var e=arguments[1];if(!arguments[0])throw null===e?new Qn:new Qn(e)}}},{key:"equals",value:function(){if(2===arguments.length)r.equals(arguments[0],arguments[1],null);else if(3===arguments.length){var n=arguments[0],i=arguments[1],a=arguments[2];if(!i.equals(n))throw new Qn("Expected "+n+" but encountered "+i+(null!==a?": "+a:""))}}}])}(),pr=new ArrayBuffer(8),mr=new Float64Array(pr),Jr=new Int32Array(pr),D=function(){function r(){N(this,r),r.constructor_.apply(this,arguments)}return x(r,[{key:"getM",value:function(){return gt.NaN}},{key:"setOrdinate",value:function(t,e){switch(t){case r.X:this.x=e;break;case r.Y:this.y=e;break;case r.Z:this.setZ(e);break;default:throw new j("Invalid ordinate index: "+t)}}},{key:"equals2D",value:function(){if(1===arguments.length){var t=arguments[0];return this.x===t.x&&this.y===t.y}if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!dr.equalsWithTolerance(this.x,e.x,n)&&!!dr.equalsWithTolerance(this.y,e.y,n)}}},{key:"setM",value:function(t){throw new j("Invalid ordinate index: "+r.M)}},{key:"getZ",value:function(){return this.z}},{key:"getOrdinate",value:function(t){switch(t){case r.X:return this.x;case r.Y:return this.y;case r.Z:return this.getZ()}throw new j("Invalid ordinate index: "+t)}},{key:"equals3D",value:function(t){return this.x===t.x&&this.y===t.y&&(this.getZ()===t.getZ()||gt.isNaN(this.getZ())&&gt.isNaN(t.getZ()))}},{key:"equals",value:function(t){return t instanceof r&&this.equals2D(t)}},{key:"equalInZ",value:function(t,e){return dr.equalsWithTolerance(this.getZ(),t.getZ(),e)}},{key:"setX",value:function(t){this.x=t}},{key:"compareTo",value:function(t){return this.x<t.x?-1:this.x>t.x?1:this.y<t.y?-1:this.y>t.y?1:0}},{key:"getX",value:function(){return this.x}},{key:"setZ",value:function(t){this.z=t}},{key:"clone",value:function(){try{return null}catch(t){if(t instanceof CloneNotSupportedException)return Dt.shouldNeverReachHere("this shouldn't happen because this class is Cloneable"),null;throw t}}},{key:"copy",value:function(){return new r(this)}},{key:"toString",value:function(){return"("+this.x+", "+this.y+", "+this.getZ()+")"}},{key:"distance3D",value:function(t){var e=this.x-t.x,n=this.y-t.y,i=this.getZ()-t.getZ();return Math.sqrt(e*e+n*n+i*i)}},{key:"getY",value:function(){return this.y}},{key:"setY",value:function(t){this.y=t}},{key:"distance",value:function(t){var e=this.x-t.x,n=this.y-t.y;return Math.sqrt(e*e+n*n)}},{key:"hashCode",value:function(){var t=17;return 37*(t=37*t+r.hashCode(this.x))+r.hashCode(this.y)}},{key:"setCoordinate",value:function(t){this.x=t.x,this.y=t.y,this.z=t.getZ()}},{key:"interfaces_",get:function(){return[L,kt,ct]}}],[{key:"constructor_",value:function(){if(this.x=null,this.y=null,this.z=null,0===arguments.length)r.constructor_.call(this,0,0);else if(1===arguments.length){var t=arguments[0];r.constructor_.call(this,t.x,t.y,t.getZ())}else if(2===arguments.length)r.constructor_.call(this,arguments[0],arguments[1],r.NULL_ORDINATE);else if(3===arguments.length){var a=arguments[1],c=arguments[2];this.x=arguments[0],this.y=a,this.z=c}}},{key:"hashCode",value:function(t){return mr[0]=t,Jr[0]^Jr[1]}}])}(),ti=function(){function r(){N(this,r),r.constructor_.apply(this,arguments)}return x(r,[{key:"compare",value:function(t,e){var n=r.compare(t.x,e.x);if(0!==n)return n;var i=r.compare(t.y,e.y);return 0!==i?i:this._dimensionsToTest<=2?0:r.compare(t.getZ(),e.getZ())}},{key:"interfaces_",get:function(){return[Vn]}}],[{key:"constructor_",value:function(){if(this._dimensionsToTest=2,0===arguments.length)r.constructor_.call(this,2);else if(1===arguments.length){var t=arguments[0];if(2!==t&&3!==t)throw new j("only 2 or 3 dimensions may be specified");this._dimensionsToTest=t}}},{key:"compare",value:function(t,e){return t<e?-1:t>e?1:gt.isNaN(t)?gt.isNaN(e)?0:-1:gt.isNaN(e)?1:0}}])}();D.DimensionalComparator=ti,D.NULL_ORDINATE=gt.NaN,D.X=0,D.Y=1,D.Z=2,D.M=3;var Kt=function(){function r(){N(this,r),r.constructor_.apply(this,arguments)}return x(r,[{key:"getArea",value:function(){return this.getWidth()*this.getHeight()}},{key:"equals",value:function(t){if(!(t instanceof r))return!1;var e=t;return this.isNull()?e.isNull():this._maxx===e.getMaxX()&&this._maxy===e.getMaxY()&&this._minx===e.getMinX()&&this._miny===e.getMinY()}},{key:"intersection",value:function(t){return this.isNull()||t.isNull()||!this.intersects(t)?new r:new r(this._minx>t._minx?this._minx:t._minx,this._maxx<t._maxx?this._maxx:t._maxx,this._miny>t._miny?this._miny:t._miny,this._maxy<t._maxy?this._maxy:t._maxy)}},{key:"isNull",value:function(){return this._maxx<this._minx}},{key:"getMaxX",value:function(){return this._maxx}},{key:"covers",value:function(){if(1===arguments.length){if(arguments[0]instanceof D){var t=arguments[0];return this.covers(t.x,t.y)}if(arguments[0]instanceof r){var e=arguments[0];return!this.isNull()&&!e.isNull()&&e.getMinX()>=this._minx&&e.getMaxX()<=this._maxx&&e.getMinY()>=this._miny&&e.getMaxY()<=this._maxy}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];return!this.isNull()&&n>=this._minx&&n<=this._maxx&&i>=this._miny&&i<=this._maxy}}},{key:"intersects",value:function(){if(1===arguments.length){if(arguments[0]instanceof r){var t=arguments[0];return!this.isNull()&&!t.isNull()&&!(t._minx>this._maxx||t._maxx<this._minx||t._miny>this._maxy||t._maxy<this._miny)}if(arguments[0]instanceof D){var e=arguments[0];return this.intersects(e.x,e.y)}}else if(2===arguments.length){if(arguments[0]instanceof D&&arguments[1]instanceof D){var n=arguments[0],i=arguments[1];return!(this.isNull()||(n.x<i.x?n.x:i.x)>this._maxx||(n.x>i.x?n.x:i.x)<this._minx||(n.y<i.y?n.y:i.y)>this._maxy||(n.y>i.y?n.y:i.y)<this._miny)}if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var a=arguments[0],c=arguments[1];return!this.isNull()&&!(a>this._maxx||a<this._minx||c>this._maxy||c<this._miny)}}}},{key:"getMinY",value:function(){return this._miny}},{key:"getDiameter",value:function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return Math.sqrt(t*t+e*e)}},{key:"getMinX",value:function(){return this._minx}},{key:"expandToInclude",value:function(){if(1===arguments.length){if(arguments[0]instanceof D){var t=arguments[0];this.expandToInclude(t.x,t.y)}else if(arguments[0]instanceof r){var e=arguments[0];if(e.isNull())return null;this.isNull()?(this._minx=e.getMinX(),this._maxx=e.getMaxX(),this._miny=e.getMinY(),this._maxy=e.getMaxY()):(e._minx<this._minx&&(this._minx=e._minx),e._maxx>this._maxx&&(this._maxx=e._maxx),e._miny<this._miny&&(this._miny=e._miny),e._maxy>this._maxy&&(this._maxy=e._maxy))}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];this.isNull()?(this._minx=n,this._maxx=n,this._miny=i,this._maxy=i):(n<this._minx&&(this._minx=n),n>this._maxx&&(this._maxx=n),i<this._miny&&(this._miny=i),i>this._maxy&&(this._maxy=i))}}},{key:"minExtent",value:function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t<e?t:e}},{key:"getWidth",value:function(){return this.isNull()?0:this._maxx-this._minx}},{key:"compareTo",value:function(t){var e=t;return this.isNull()?e.isNull()?0:-1:e.isNull()?1:this._minx<e._minx?-1:this._minx>e._minx?1:this._miny<e._miny?-1:this._miny>e._miny?1:this._maxx<e._maxx?-1:this._maxx>e._maxx?1:this._maxy<e._maxy?-1:this._maxy>e._maxy?1:0}},{key:"translate",value:function(t,e){if(this.isNull())return null;this.init(this.getMinX()+t,this.getMaxX()+t,this.getMinY()+e,this.getMaxY()+e)}},{key:"copy",value:function(){return new r(this)}},{key:"toString",value:function(){return"Env["+this._minx+" : "+this._maxx+", "+this._miny+" : "+this._maxy+"]"}},{key:"setToNull",value:function(){this._minx=0,this._maxx=-1,this._miny=0,this._maxy=-1}},{key:"disjoint",value:function(t){return!(!this.isNull()&&!t.isNull())||t._minx>this._maxx||t._maxx<this._minx||t._miny>this._maxy||t._maxy<this._miny}},{key:"getHeight",value:function(){return this.isNull()?0:this._maxy-this._miny}},{key:"maxExtent",value:function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t>e?t:e}},{key:"expandBy",value:function(){if(1===arguments.length){var t=arguments[0];this.expandBy(t,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this.isNull())return null;this._minx-=e,this._maxx+=e,this._miny-=n,this._maxy+=n,(this._minx>this._maxx||this._miny>this._maxy)&&this.setToNull()}}},{key:"contains",value:function(){if(1===arguments.length){if(arguments[0]instanceof r)return this.covers(arguments[0]);if(arguments[0]instanceof D)return this.covers(arguments[0])}else if(2===arguments.length)return this.covers(arguments[0],arguments[1])}},{key:"centre",value:function(){return this.isNull()?null:new D((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)}},{key:"init",value:function(){if(0===arguments.length)this.setToNull();else if(1===arguments.length){if(arguments[0]instanceof D){var t=arguments[0];this.init(t.x,t.x,t.y,t.y)}else if(arguments[0]instanceof r){var e=arguments[0];this._minx=e._minx,this._maxx=e._maxx,this._miny=e._miny,this._maxy=e._maxy}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];this.init(n.x,i.x,n.y,i.y)}else if(4===arguments.length){var a=arguments[0],c=arguments[1],f=arguments[2],m=arguments[3];a<c?(this._minx=a,this._maxx=c):(this._minx=c,this._maxx=a),f<m?(this._miny=f,this._maxy=m):(this._miny=m,this._maxy=f)}}},{key:"getMaxY",value:function(){return this._maxy}},{key:"distance",value:function(t){if(this.intersects(t))return 0;var e=0;this._maxx<t._minx?e=t._minx-this._maxx:this._minx>t._maxx&&(e=this._minx-t._maxx);var n=0;return this._maxy<t._miny?n=t._miny-this._maxy:this._miny>t._maxy&&(n=this._miny-t._maxy),0===e?n:0===n?e:Math.sqrt(e*e+n*n)}},{key:"hashCode",value:function(){var t=17;return 37*(t=37*(t=37*(t=37*t+D.hashCode(this._minx))+D.hashCode(this._maxx))+D.hashCode(this._miny))+D.hashCode(this._maxy)}},{key:"interfaces_",get:function(){return[L,ct]}}],[{key:"constructor_",value:function(){if(this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,0===arguments.length)this.init();else if(1===arguments.length)if(arguments[0]instanceof D){var t=arguments[0];this.init(t.x,t.x,t.y,t.y)}else arguments[0]instanceof r&&this.init(arguments[0]);else if(2===arguments.length){var n=arguments[0],i=arguments[1];this.init(n.x,i.x,n.y,i.y)}else 4===arguments.length&&this.init(arguments[0],arguments[1],arguments[2],arguments[3])}},{key:"intersects",value:function(){if(3===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2];return n.x>=(t.x<e.x?t.x:e.x)&&n.x<=(t.x>e.x?t.x:e.x)&&n.y>=(t.y<e.y?t.y:e.y)&&n.y<=(t.y>e.y?t.y:e.y)}if(4===arguments.length){var i=arguments[0],a=arguments[1],c=arguments[2],f=arguments[3],m=Math.min(c.x,f.x),E=Math.max(c.x,f.x),O=Math.min(i.x,a.x),P=Math.max(i.x,a.x);return!(O>E||P<m||(m=Math.min(c.y,f.y),E=Math.max(c.y,f.y),O=Math.min(i.y,a.y),P=Math.max(i.y,a.y),O>E||P<m))}}}])}(),dt=function(){function r(){N(this,r),r.constructor_.apply(this,arguments)}return x(r,[{key:"isGeometryCollection",value:function(){return this.getTypeCode()===r.TYPECODE_GEOMETRYCOLLECTION}},{key:"getFactory",value:function(){return this._factory}},{key:"getGeometryN",value:function(t){return this}},{key:"getArea",value:function(){return 0}},{key:"isRectangle",value:function(){return!1}},{key:"equalsExact",value:function(t){return this===t||this.equalsExact(t,0)}},{key:"geometryChanged",value:function(){this.apply(r.geometryChangedFilter)}},{key:"geometryChangedAction",value:function(){this._envelope=null}},{key:"equalsNorm",value:function(t){return null!==t&&this.norm().equalsExact(t.norm())}},{key:"getLength",value:function(){return 0}},{key:"getNumGeometries",value:function(){return 1}},{key:"compareTo",value:function(){var t;if(1===arguments.length){var e=arguments[0];return t=e,this.getTypeCode()!==t.getTypeCode()?this.getTypeCode()-t.getTypeCode():this.isEmpty()&&t.isEmpty()?0:this.isEmpty()?-1:t.isEmpty()?1:this.compareToSameClass(e)}if(2===arguments.length){var n=arguments[0],i=arguments[1];return t=n,this.getTypeCode()!==t.getTypeCode()?this.getTypeCode()-t.getTypeCode():this.isEmpty()&&t.isEmpty()?0:this.isEmpty()?-1:t.isEmpty()?1:this.compareToSameClass(n,i)}}},{key:"getUserData",value:function(){return this._userData}},{key:"getSRID",value:function(){return this._SRID}},{key:"getEnvelope",value:function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())}},{key:"checkNotGeometryCollection",value:function(t){if(t.getTypeCode()===r.TYPECODE_GEOMETRYCOLLECTION)throw new j("This method does not support GeometryCollection arguments")}},{key:"equal",value:function(t,e,n){return 0===n?t.equals(e):t.distance(e)<=n}},{key:"norm",value:function(){var t=this.copy();return t.normalize(),t}},{key:"reverse",value:function(){var t=this.reverseInternal();return null!=this.envelope&&(t.envelope=this.envelope.copy()),t.setSRID(this.getSRID()),t}},{key:"copy",value:function(){var t=this.copyInternal();return t.envelope=null==this._envelope?null:this._envelope.copy(),t._SRID=this._SRID,t._userData=this._userData,t}},{key:"getPrecisionModel",value:function(){return this._factory.getPrecisionModel()}},{key:"getEnvelopeInternal",value:function(){return null===this._envelope&&(this._envelope=this.computeEnvelopeInternal()),new Kt(this._envelope)}},{key:"setSRID",value:function(t){this._SRID=t}},{key:"setUserData",value:function(t){this._userData=t}},{key:"compare",value:function(t,e){for(var n=t.iterator(),i=e.iterator();n.hasNext()&&i.hasNext();){var a=n.next(),c=i.next(),f=a.compareTo(c);if(0!==f)return f}return n.hasNext()?1:i.hasNext()?-1:0}},{key:"hashCode",value:function(){return this.getEnvelopeInternal().hashCode()}},{key:"isEquivalentClass",value:function(t){return this.getClass()===t.getClass()}},{key:"isGeometryCollectionOrDerived",value:function(){return this.getTypeCode()===r.TYPECODE_GEOMETRYCOLLECTION||this.getTypeCode()===r.TYPECODE_MULTIPOINT||this.getTypeCode()===r.TYPECODE_MULTILINESTRING||this.getTypeCode()===r.TYPECODE_MULTIPOLYGON}},{key:"interfaces_",get:function(){return[kt,L,ct]}},{key:"getClass",value:function(){return r}}],[{key:"hasNonEmptyElements",value:function(t){for(var e=0;e<t.length;e++)if(!t[e].isEmpty())return!0;return!1}},{key:"hasNullElements",value:function(t){for(var e=0;e<t.length;e++)if(null===t[e])return!0;return!1}}])}();dt.constructor_=function(r){r&&(this._envelope=null,this._userData=null,this._factory=r,this._SRID=r.getSRID())},dt.TYPECODE_POINT=0,dt.TYPECODE_MULTIPOINT=1,dt.TYPECODE_LINESTRING=2,dt.TYPECODE_LINEARRING=3,dt.TYPECODE_MULTILINESTRING=4,dt.TYPECODE_POLYGON=5,dt.TYPECODE_MULTIPOLYGON=6,dt.TYPECODE_GEOMETRYCOLLECTION=7,dt.TYPENAME_POINT="Point",dt.TYPENAME_MULTIPOINT="MultiPoint",dt.TYPENAME_LINESTRING="LineString",dt.TYPENAME_LINEARRING="LinearRing",dt.TYPENAME_MULTILINESTRING="MultiLineString",dt.TYPENAME_POLYGON="Polygon",dt.TYPENAME_MULTIPOLYGON="MultiPolygon",dt.TYPENAME_GEOMETRYCOLLECTION="GeometryCollection",dt.geometryChangedFilter={get interfaces_(){return[se]},filter:function(r){r.geometryChangedAction()}};var I=function(){function r(){N(this,r)}return x(r,null,[{key:"toLocationSymbol",value:function(t){switch(t){case r.EXTERIOR:return"e";case r.BOUNDARY:return"b";case r.INTERIOR:return"i";case r.NONE:return"-"}throw new j("Unknown location value: "+t)}}])}();I.INTERIOR=0,I.BOUNDARY=1,I.EXTERIOR=2,I.NONE=-1;var Qe=x(function r(){N(this,r)},[{key:"add",value:function(){}},{key:"addAll",value:function(){}},{key:"isEmpty",value:function(){}},{key:"iterator",value:function(){}},{key:"size",value:function(){}},{key:"toArray",value:function(){}},{key:"remove",value:function(){}}]),Me=function(r){function t(e){var n;return N(this,t),(n=q(this,t,[e])).name=Object.keys({NoSuchElementException:t})[0],n}return ot(t,r),x(t)}(Ve),Je=function(r){function t(e){var n;return N(this,t),(n=q(this,t,[e])).name=Object.keys({UnsupportedOperationException:t})[0],n}return ot(t,r),x(t)}(Ve),yr=function(r){function t(){return N(this,t),q(this,t,arguments)}return ot(t,r),x(t,[{key:"contains",value:function(){}}])}(Qe),vr=function(r){function t(e){var n;return N(this,t),(n=q(this,t)).map=new Map,e instanceof Qe&&n.addAll(e),n}return ot(t,r),x(t,[{key:"contains",value:function(e){var n=e.hashCode?e.hashCode():e;return!!this.map.has(n)}},{key:"add",value:function(e){var n=e.hashCode?e.hashCode():e;return!this.map.has(n)&&!!this.map.set(n,e)}},{key:"addAll",value:function(e){var n,i=K(e);try{for(i.s();!(n=i.n()).done;)this.add(n.value)}catch(c){i.e(c)}finally{i.f()}return!0}},{key:"remove",value:function(){throw new Je}},{key:"size",value:function(){return this.map.size}},{key:"isEmpty",value:function(){return 0===this.map.size}},{key:"toArray",value:function(){return Array.from(this.map.values())}},{key:"iterator",value:function(){return new ei(this.map)}},{key:Symbol.iterator,value:function(){return this.map}}])}(yr),ei=x(function r(t){N(this,r),this.iterator=t.values();var e=this.iterator.next(),i=e.value;this.done=e.done,this.value=i},[{key:"next",value:function(){if(this.done)throw new Me;var r=this.value,t=this.iterator.next(),n=t.value;return this.done=t.done,this.value=n,r}},{key:"hasNext",value:function(){return!this.done}},{key:"remove",value:function(){throw new Je}}]),Z=function(){function r(){N(this,r)}return x(r,null,[{key:"opposite",value:function(t){return t===r.LEFT?r.RIGHT:t===r.RIGHT?r.LEFT:t}}])}();Z.ON=0,Z.LEFT=1,Z.RIGHT=2;var _r=function(r){function t(e){var n;return N(this,t),(n=q(this,t,[e])).name=Object.keys({EmptyStackException:t})[0],n}return ot(t,r),x(t)}(Ve),kr=function(r){function t(e){var n;return N(this,t),(n=q(this,t,[e])).name=Object.keys({IndexOutOfBoundsException:t})[0],n}return ot(t,r),x(t)}(Ve),qe=function(r){function t(){return N(this,t),q(this,t,arguments)}return ot(t,r),x(t,[{key:"get",value:function(){}},{key:"set",value:function(){}},{key:"isEmpty",value:function(){}}])}(Qe),Ii=function(r){function t(){var e;return N(this,t),(e=q(this,t)).array=[],e}return ot(t,r),x(t,[{key:"add",value:function(e){return this.array.push(e),!0}},{key:"get",value:function(e){if(e<0||e>=this.size())throw new kr;return this.array[e]}},{key:"push",value:function(e){return this.array.push(e),e}},{key:"pop",value:function(){if(0===this.array.length)throw new _r;return this.array.pop()}},{key:"peek",value:function(){if(0===this.array.length)throw new _r;return this.array[this.array.length-1]}},{key:"empty",value:function(){return 0===this.array.length}},{key:"isEmpty",value:function(){return this.empty()}},{key:"search",value:function(e){return this.array.indexOf(e)}},{key:"size",value:function(){return this.array.length}},{key:"toArray",value:function(){return this.array.slice()}}])}(qe);function Ot(r,t){return r.interfaces_&&r.interfaces_.indexOf(t)>-1}var On=x(function r(t){N(this,r),this.str=t},[{key:"append",value:function(r){this.str+=r}},{key:"setCharAt",value:function(r,t){this.str=this.str.substr(0,r)+t+this.str.substr(r+1)}},{key:"toString",value:function(){return this.str}}]),vn=function(){function r(t){N(this,r),this.value=t}return x(r,[{key:"intValue",value:function(){return this.value}},{key:"compareTo",value:function(t){return this.value<t?-1:this.value>t?1:0}}],[{key:"compare",value:function(t,e){return t<e?-1:t>e?1:0}},{key:"isNan",value:function(t){return Number.isNaN(t)}},{key:"valueOf",value:function(t){return new r(t)}}])}(),Er=x(function r(){N(this,r)},null,[{key:"isWhitespace",value:function(r){return r<=32&&r>=0||127===r}},{key:"toUpperCase",value:function(r){return r.toUpperCase()}}]),It=function(){function r(){N(this,r),r.constructor_.apply(this,arguments)}return x(r,[{key:"le",value:function(t){return this._hi<t._hi||this._hi===t._hi&&this._lo<=t._lo}},{key:"extractSignificantDigits",value:function(t,e){var n=this.abs(),i=r.magnitude(n._hi),a=r.TEN.pow(i);(n=n.divide(a)).gt(r.TEN)?(n=n.divide(r.TEN),i+=1):n.lt(r.ONE)&&(n=n.multiply(r.TEN),i-=1);for(var c=i+1,f=new On,m=r.MAX_PRINT_DIGITS-1,E=0;E<=m;E++){t&&E===c&&f.append(".");var O=Math.trunc(n._hi);if(O<0)break;var P=!1,z=0;O>9?(P=!0,z="9"):z="0"+O,f.append(z),n=n.subtract(r.valueOf(O)).multiply(r.TEN),P&&n.selfAdd(r.TEN);var tt=!0,ut=r.magnitude(n._hi);if(ut<0&&Math.abs(ut)>=m-E&&(tt=!1),!tt)break}return e[0]=i,f.toString()}},{key:"sqr",value:function(){return this.multiply(this)}},{key:"doubleValue",value:function(){return this._hi+this._lo}},{key:"subtract",value:function(){return arguments[0]instanceof r?this.add(arguments[0].negate()):"number"==typeof arguments[0]?this.add(-arguments[0]):void 0}},{key:"equals",value:function(){if(1===arguments.length&&arguments[0]instanceof r){var t=arguments[0];return this._hi===t._hi&&this._lo===t._lo}}},{key:"isZero",value:function(){return 0===this._hi&&0===this._lo}},{key:"selfSubtract",value:function(){if(arguments[0]instanceof r){var t=arguments[0];return this.isNaN()?this:this.selfAdd(-t._hi,-t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.isNaN()?this:this.selfAdd(-e,0)}}},{key:"getSpecialNumberString",value:function(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null}},{key:"min",value:function(t){return this.le(t)?this:t}},{key:"selfDivide",value:function(){if(1===arguments.length){if(arguments[0]instanceof r){var t=arguments[0];return this.selfDivide(t._hi,t._lo)}if("number"==typeof arguments[0])return this.selfDivide(arguments[0],0)}else if(2===arguments.length){var n,i,a,c,f=arguments[0],E=null,O=null,P=null,z=null;return z=(E=(P=r.SPLIT*(a=this._hi/f))-(E=P-a))*(O=(z=r.SPLIT*f)-(O=z-f))-(c=a*f)+E*(i=f-O)+(n=a-E)*O+n*i,z=a+(P=(this._hi-c-z+this._lo-a*arguments[1])/f),this._hi=z,this._lo=a-z+P,this}}},{key:"dump",value:function(){return"DD<"+this._hi+", "+this._lo+">"}},{key:"divide",value:function(){if(arguments[0]instanceof r){var t,e,n,i,a=arguments[0],c=null,f=null,m=null,E=null;return t=(n=this._hi/a._hi)-(c=(m=r.SPLIT*n)-(c=m-n)),E=c*(f=(E=r.SPLIT*a._hi)-(f=E-a._hi))-(i=n*a._hi)+c*(e=a._hi-f)+t*f+t*e,new r(E=n+(m=(this._hi-i-E+this._lo-n*a._lo)/a._hi),n-E+m)}if("number"==typeof arguments[0]){var O=arguments[0];return gt.isNaN(O)?r.createNaN():r.copy(this).selfDivide(O,0)}}},{key:"ge",value:function(t){return this._hi>t._hi||this._hi===t._hi&&this._lo>=t._lo}},{key:"pow",value:function(t){if(0===t)return r.valueOf(1);var e=new r(this),n=r.valueOf(1),i=Math.abs(t);if(i>1)for(;i>0;)i%2==1&&n.selfMultiply(e),(i/=2)>0&&(e=e.sqr());else n=e;return t<0?n.reciprocal():n}},{key:"ceil",value:function(){if(this.isNaN())return r.NaN;var t=Math.ceil(this._hi),e=0;return t===this._hi&&(e=Math.ceil(this._lo)),new r(t,e)}},{key:"compareTo",value:function(t){return this._hi<t._hi?-1:this._hi>t._hi?1:this._lo<t._lo?-1:this._lo>t._lo?1:0}},{key:"rint",value:function(){return this.isNaN()?this:this.add(.5).floor()}},{key:"setValue",value:function(){return arguments[0]instanceof r||"number"==typeof arguments[0]?(this.init(arguments[0]),this):void 0}},{key:"max",value:function(t){return this.ge(t)?this:t}},{key:"sqrt",value:function(){if(this.isZero())return r.valueOf(0);if(this.isNegative())return r.NaN;var t=1/Math.sqrt(this._hi),n=r.valueOf(this._hi*t),i=this.subtract(n.sqr())._hi*(.5*t);return n.add(i)}},{key:"selfAdd",value:function(){if(1===arguments.length){if(arguments[0]instanceof r){var t=arguments[0];return this.selfAdd(t._hi,t._lo)}if("number"==typeof arguments[0]){var e,n,i,a,c,f=arguments[0],m=null;return m=(i=this._hi+f)-(a=i-this._hi),n=(c=(m=f-a+(this._hi-m))+this._lo)+(i-(e=i+c)),this._hi=e+n,this._lo=n+(e-this._hi),this}}else if(2===arguments.length){var E,O,P,z,tt=arguments[0],ut=arguments[1],ht=null,Bt=null,Yt=null;Bt=(P=this._hi+tt)-(Yt=P-this._hi),ht=(O=this._lo+ut)-(z=O-this._lo);var ee=(E=P+(Yt=(Bt=tt-Yt+(this._hi-Bt))+O))+(Yt=(ht=ut-z+(this._lo-ht))+(Yt+(P-E))),ye=Yt+(E-ee);return this._hi=ee,this._lo=ye,this}}},{key:"selfMultiply",value:function(){if(1===arguments.length){if(arguments[0]instanceof r){var t=arguments[0];return this.selfMultiply(t._hi,t._lo)}if("number"==typeof arguments[0])return this.selfMultiply(arguments[0],0)}else if(2===arguments.length){var n,i,a=arguments[0],f=null,m=null,E=null,O=null;f=(E=r.SPLIT*this._hi)-this._hi,f=E-f;var P=(E=this._hi*a)+(O=f*(m=(O=r.SPLIT*a)-(m=O-a))-E+f*(i=a-m)+(n=this._hi-f)*m+n*i+(this._hi*arguments[1]+this._lo*a)),z=O+(f=E-P);return this._hi=P,this._lo=z,this}}},{key:"selfSqr",value:function(){return this.selfMultiply(this)}},{key:"floor",value:function(){if(this.isNaN())return r.NaN;var t=Math.floor(this._hi),e=0;return t===this._hi&&(e=Math.floor(this._lo)),new r(t,e)}},{key:"negate",value:function(){return this.isNaN()?this:new r(-this._hi,-this._lo)}},{key:"clone",value:function(){try{return null}catch(t){if(t instanceof CloneNotSupportedException)return null;throw t}}},{key:"multiply",value:function(){if(arguments[0]instanceof r){var t=arguments[0];return t.isNaN()?r.createNaN():r.copy(this).selfMultiply(t)}if("number"==typeof arguments[0]){var e=arguments[0];return gt.isNaN(e)?r.createNaN():r.copy(this).selfMultiply(e,0)}}},{key:"isNaN",value:function(){return gt.isNaN(this._hi)}},{key:"intValue",value:function(){return Math.trunc(this._hi)}},{key:"toString",value:function(){var t=r.magnitude(this._hi);return t>=-3&&t<=20?this.toStandardNotation():this.toSciNotation()}},{key:"toStandardNotation",value:function(){var t=this.getSpecialNumberString();if(null!==t)return t;var e=new Array(1).fill(null),n=this.extractSignificantDigits(!0,e),i=e[0]+1,a=n;return"."===n.charAt(0)?a="0"+n:i<0?a="0."+r.stringOfChar("0",-i)+n:-1===n.indexOf(".")&&(a=n+r.stringOfChar("0",i-n.length)+".0"),this.isNegative()?"-"+a:a}},{key:"reciprocal",value:function(){var t,e,n,i,a=null,c=null,f=null,m=null;t=(n=1/this._hi)-(a=(f=r.SPLIT*n)-(a=f-n)),c=(m=r.SPLIT*this._hi)-this._hi;var E=n+(f=(1-(i=n*this._hi)-(m=a*(c=m-c)-i+a*(e=this._hi-c)+t*c+t*e)-n*this._lo)/this._hi);return new r(E,n-E+f)}},{key:"toSciNotation",value:function(){if(this.isZero())return r.SCI_NOT_ZERO;var t=this.getSpecialNumberString();if(null!==t)return t;var e=new Array(1).fill(null),n=this.extractSignificantDigits(!1,e),i=r.SCI_NOT_EXPONENT_CHAR+e[0];if("0"===n.charAt(0))throw new IllegalStateException("Found leading zero: "+n);var a="";n.length>1&&(a=n.substring(1));var c=n.charAt(0)+"."+a;return this.isNegative()?"-"+c+i:c+i}},{key:"abs",value:function(){return this.isNaN()?r.NaN:this.isNegative()?this.negate():new r(this)}},{key:"isPositive",value:function(){return this._hi>0||0===this._hi&&this._lo>0}},{key:"lt",value:function(t){return this._hi<t._hi||this._hi===t._hi&&this._lo<t._lo}},{key:"add",value:function(){if(arguments[0]instanceof r){var t=arguments[0];return r.copy(this).selfAdd(t)}if("number"==typeof arguments[0]){var e=arguments[0];return r.copy(this).selfAdd(e)}}},{key:"init",value:function(){if(1===arguments.length){if("number"==typeof arguments[0])this._hi=arguments[0],this._lo=0;else if(arguments[0]instanceof r){var e=arguments[0];this._hi=e._hi,this._lo=e._lo}}else if(2===arguments.length){var i=arguments[1];this._hi=arguments[0],this._lo=i}}},{key:"gt",value:function(t){return this._hi>t._hi||this._hi===t._hi&&this._lo>t._lo}},{key:"isNegative",value:function(){return this._hi<0||0===this._hi&&this._lo<0}},{key:"trunc",value:function(){return this.isNaN()?r.NaN:this.isPositive()?this.floor():this.ceil()}},{key:"signum",value:function(){return this._hi>0?1:this._hi<0?-1:this._lo>0?1:this._lo<0?-1:0}},{key:"interfaces_",get:function(){return[ct,L,kt]}}],[{key:"constructor_",value:function(){this._hi=0,this._lo=0,0===arguments.length?this.init(0):1===arguments.length?"number"==typeof arguments[0]||arguments[0]instanceof r?this.init(arguments[0]):"string"==typeof arguments[0]&&r.constructor_.call(this,r.parse(arguments[0])):2===arguments.length&&this.init(arguments[0],arguments[1])}},{key:"determinant",value:function(){if("number"==typeof arguments[3]&&"number"==typeof arguments[2]&&"number"==typeof arguments[0]&&"number"==typeof arguments[1]){var e=arguments[1],n=arguments[2],i=arguments[3];return r.determinant(r.valueOf(arguments[0]),r.valueOf(e),r.valueOf(n),r.valueOf(i))}if(arguments[3]instanceof r&&arguments[2]instanceof r&&arguments[0]instanceof r&&arguments[1]instanceof r){var a=arguments[1],c=arguments[2];return arguments[0].multiply(arguments[3]).selfSubtract(a.multiply(c))}}},{key:"sqr",value:function(t){return r.valueOf(t).selfMultiply(t)}},{key:"valueOf",value:function(){return"string"==typeof arguments[0]?r.parse(arguments[0]):"number"==typeof arguments[0]?new r(arguments[0]):void 0}},{key:"sqrt",value:function(t){return r.valueOf(t).sqrt()}},{key:"parse",value:function(t){for(var e=0,n=t.length;Er.isWhitespace(t.charAt(e));)e++;var i=!1;if(e<n){var a=t.charAt(e);"-"!==a&&"+"!==a||(e++,"-"===a&&(i=!0))}for(var c=new r,f=0,m=0,E=0,O=!1;!(e>=n);){var P=t.charAt(e);if(e++,Er.isDigit(P)){var z=P-"0";c.selfMultiply(r.TEN),c.selfAdd(z),f++}else{if("."!==P){if("e"===P||"E"===P){var tt=t.substring(e);try{E=vn.parseInt(tt)}catch(ee){throw ee instanceof NumberFormatException?new NumberFormatException("Invalid exponent "+tt+" in string "+t):ee}break}throw new NumberFormatException("Unexpected character '"+P+"' at position "+e+" in string "+t)}m=f,O=!0}}var ut=c;O||(m=f);var ht=f-m-E;if(0===ht)ut=c;else if(ht>0){var Bt=r.TEN.pow(ht);ut=c.divide(Bt)}else if(ht<0){var Yt=r.TEN.pow(-ht);ut=c.multiply(Yt)}return i?ut.negate():ut}},{key:"createNaN",value:function(){return new r(gt.NaN,gt.NaN)}},{key:"copy",value:function(t){return new r(t)}},{key:"magnitude",value:function(t){var e=Math.abs(t),n=Math.log(e)/Math.log(10),i=Math.trunc(Math.floor(n));return 10*Math.pow(10,i)<=e&&(i+=1),i}},{key:"stringOfChar",value:function(t,e){for(var n=new On,i=0;i<e;i++)n.append(t);return n.toString()}}])}();It.PI=new It(3.141592653589793,12246467991473532e-32),It.TWO_PI=new It(6.283185307179586,24492935982947064e-32),It.PI_2=new It(1.5707963267948966,6123233995736766e-32),It.E=new It(2.718281828459045,14456468917292502e-32),It.NaN=new It(gt.NaN,gt.NaN),It.EPS=123259516440783e-46,It.SPLIT=134217729,It.MAX_PRINT_DIGITS=32,It.TEN=It.valueOf(10),It.ONE=It.valueOf(1),It.SCI_NOT_EXPONENT_CHAR="E",It.SCI_NOT_ZERO="0.0E0";var Rn=function(){function r(){N(this,r)}return x(r,null,[{key:"orientationIndex",value:function(t,e,n){var i=r.orientationIndexFilter(t,e,n);if(i<=1)return i;var a=It.valueOf(e.x).selfAdd(-t.x),c=It.valueOf(e.y).selfAdd(-t.y),f=It.valueOf(n.x).selfAdd(-e.x),m=It.valueOf(n.y).selfAdd(-e.y);return a.selfMultiply(m).selfSubtract(c.selfMultiply(f)).signum()}},{key:"signOfDet2x2",value:function(){if(arguments[3]instanceof It&&arguments[2]instanceof It&&arguments[0]instanceof It&&arguments[1]instanceof It){var t=arguments[1],e=arguments[2];return arguments[0].multiply(arguments[3]).selfSubtract(t.multiply(e)).signum()}if("number"==typeof arguments[3]&&"number"==typeof arguments[2]&&"number"==typeof arguments[0]&&"number"==typeof arguments[1]){var a=arguments[1],c=arguments[2],f=arguments[3],m=It.valueOf(arguments[0]),E=It.valueOf(a),O=It.valueOf(c),P=It.valueOf(f);return m.multiply(P).selfSubtract(E.multiply(O)).signum()}}},{key:"intersection",value:function(t,e,n,i){var a=new It(t.y).selfSubtract(e.y),c=new It(e.x).selfSubtract(t.x),f=new It(t.x).selfMultiply(e.y).selfSubtract(new It(e.x).selfMultiply(t.y)),m=new It(n.y).selfSubtract(i.y),E=new It(i.x).selfSubtract(n.x),O=new It(n.x).selfMultiply(i.y).selfSubtract(new It(i.x).selfMultiply(n.y)),P=c.multiply(O).selfSubtract(E.multiply(f)),z=m.multiply(f).selfSubtract(a.multiply(O)),tt=a.multiply(E).selfSubtract(m.multiply(c)),ut=P.selfDivide(tt).doubleValue(),ht=z.selfDivide(tt).doubleValue();return gt.isNaN(ut)||gt.isInfinite(ut)||gt.isNaN(ht)||gt.isInfinite(ht)?null:new D(ut,ht)}},{key:"orientationIndexFilter",value:function(t,e,n){var i=null,a=(t.x-n.x)*(e.y-n.y),c=(t.y-n.y)*(e.x-n.x),f=a-c;if(a>0){if(c<=0)return r.signum(f);i=a+c}else{if(!(a<0)||c>=0)return r.signum(f);i=-a-c}var m=r.DP_SAFE_EPSILON*i;return f>=m||-f>=m?r.signum(f):2}},{key:"signum",value:function(t){return t>0?1:t<0?-1:0}}])}();Rn.DP_SAFE_EPSILON=1e-15;var Xt=x(function r(){N(this,r)},[{key:"getM",value:function(r){if(this.hasM()){var t=this.getDimension()-this.getMeasures();return this.getOrdinate(r,t)}return gt.NaN}},{key:"setOrdinate",value:function(r,t,e){}},{key:"getZ",value:function(r){return this.hasZ()?this.getOrdinate(r,2):gt.NaN}},{key:"size",value:function(){}},{key:"getOrdinate",value:function(r,t){}},{key:"getCoordinate",value:function(){}},{key:"getCoordinateCopy",value:function(r){}},{key:"createCoordinate",value:function(){}},{key:"getDimension",value:function(){}},{key:"hasM",value:function(){return this.getMeasures()>0}},{key:"getX",value:function(r){}},{key:"hasZ",value:function(){return this.getDimension()-this.getMeasures()>2}},{key:"getMeasures",value:function(){return 0}},{key:"expandEnvelope",value:function(r){}},{key:"copy",value:function(){}},{key:"getY",value:function(r){}},{key:"toCoordinateArray",value:function(){}},{key:"interfaces_",get:function(){return[kt]}}]);Xt.X=0,Xt.Y=1,Xt.Z=2,Xt.M=3;var xt=function(){function r(){N(this,r)}return x(r,null,[{key:"index",value:function(t,e,n){return Rn.orientationIndex(t,e,n)}},{key:"isCCW",value:function(){if(arguments[0]instanceof Array){var t=arguments[0],e=t.length-1;if(e<3)throw new j("Ring has fewer than 4 points, so orientation cannot be determined");for(var n=t[0],i=0,a=1;a<=e;a++){var c=t[a];c.y>n.y&&(n=c,i=a)}var f=i;do{(f-=1)<0&&(f=e)}while(t[f].equals2D(n)&&f!==i);var m=i;do{m=(m+1)%e}while(t[m].equals2D(n)&&m!==i);var E=t[f],O=t[m];if(E.equals2D(n)||O.equals2D(n)||E.equals2D(O))return!1;var P=r.index(E,n,O);return 0===P?E.x>O.x:P>0}if(Ot(arguments[0],Xt)){var z=arguments[0],tt=z.size()-1;if(tt<3)throw new j("Ring has fewer than 4 points, so orientation cannot be determined");for(var ut=z.getCoordinate(0),ht=0,Bt=1;Bt<=tt;Bt++){var Yt=z.getCoordinate(Bt);Yt.y>ut.y&&(ut=Yt,ht=Bt)}var ee=null,ye=ht;do{(ye-=1)<0&&(ye=tt),ee=z.getCoordinate(ye)}while(ee.equals2D(ut)&&ye!==ht);var Te=null,Tn=ht;do{Te=z.getCoordinate(Tn=(Tn+1)%tt)}while(Te.equals2D(ut)&&Tn!==ht);if(ee.equals2D(ut)||Te.equals2D(ut)||ee.equals2D(Te))return!1;var rr=r.index(ee,ut,Te);return 0===rr?ee.x>Te.x:rr>0}}}])}();xt.CLOCKWISE=-1,xt.RIGHT=xt.CLOCKWISE,xt.COUNTERCLOCKWISE=1,xt.LEFT=xt.COUNTERCLOCKWISE,xt.COLLINEAR=0,xt.STRAIGHT=xt.COLLINEAR;var is=x(function r(){N(this,r),r.constructor_.apply(this,arguments)},[{key:"getCoordinate",value:function(){return this._minCoord}},{key:"getRightmostSide",value:function(r,t){var e=this.getRightmostSideOfSegment(r,t);return e<0&&(e=this.getRightmostSideOfSegment(r,t-1)),e<0&&(this._minCoord=null,this.checkForRightmostCoordinate(r)),e}},{key:"findRightmostEdgeAtVertex",value:function(){var r=this._minDe.getEdge().getCoordinates();Dt.isTrue(this._minIndex>0&&this._minIndex<r.length,"rightmost point expected to be interior vertex of edge");var t=r[this._minIndex-1],e=r[this._minIndex+1],n=xt.index(this._minCoord,e,t),i=!1;(t.y<this._minCoord.y&&e.y<this._minCoord.y&&n===xt.COUNTERCLOCKWISE||t.y>this._minCoord.y&&e.y>this._minCoord.y&&n===xt.CLOCKWISE)&&(i=!0),i&&(this._minIndex=this._minIndex-1)}},{key:"getRightmostSideOfSegment",value:function(r,t){var e=r.getEdge().getCoordinates();if(t<0||t+1>=e.length||e[t].y===e[t+1].y)return-1;var n=Z.LEFT;return e[t].y<e[t+1].y&&(n=Z.RIGHT),n}},{key:"getEdge",value:function(){return this._orientedDe}},{key:"checkForRightmostCoordinate",value:function(r){for(var t=r.getEdge().getCoordinates(),e=0;e<t.length-1;e++)(null===this._minCoord||t[e].x>this._minCoord.x)&&(this._minDe=r,this._minIndex=e,this._minCoord=t[e])}},{key:"findRightmostEdgeAtNode",value:function(){var r=this._minDe.getNode().getEdges();this._minDe=r.getRightmostEdge(),this._minDe.isForward()||(this._minDe=this._minDe.getSym(),this._minIndex=this._minDe.getEdge().getCoordinates().length-1)}},{key:"findEdge",value:function(r){for(var t=r.iterator();t.hasNext();){var e=t.next();e.isForward()&&this.checkForRightmostCoordinate(e)}Dt.isTrue(0!==this._minIndex||this._minCoord.equals(this._minDe.getCoordinate()),"inconsistency in rightmost processing"),0===this._minIndex?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this._orientedDe=this._minDe,this.getRightmostSide(this._minDe,this._minIndex)===Z.LEFT&&(this._orientedDe=this._minDe.getSym())}}],[{key:"constructor_",value:function(){this._minIndex=-1,this._minCoord=null,this._minDe=null,this._orientedDe=null}}]),B=function(r){function t(e,n){var i;return N(this,t),(i=q(this,t,[n?e+" [ "+n+" ]":e])).pt=n?new D(n):void 0,i.name=Object.keys({TopologyException:t})[0],i}return ot(t,r),x(t,[{key:"getCoordinate",value:function(){return this.pt}}])}(At),bt=x(function r(){N(this,r),this.array=[]},[{key:"addLast",value:function(r){this.array.push(r)}},{key:"removeFirst",value:function(){return this.array.shift()}},{key:"isEmpty",value:function(){return 0===this.array.length}}]),vt=function(r){function t(e){var n;return N(this,t),(n=q(this,t)).array=[],e instanceof Qe&&n.addAll(e),n}return ot(t,r),x(t,[{key:"interfaces_",get:function(){return[qe,Qe]}},{key:"ensureCapacity",value:function(){}},{key:"add",value:function(e){return 1===arguments.length?this.array.push(e):this.array.splice(arguments[0],0,arguments[1]),!0}},{key:"clear",value:function(){this.array=[]}},{key:"addAll",value:function(e){var n,i=K(e);try{for(i.s();!(n=i.n()).done;)this.array.push(n.value)}catch(c){i.e(c)}finally{i.f()}}},{key:"set",value:function(e,n){var i=this.array[e];return this.array[e]=n,i}},{key:"iterator",value:function(){return new ni(this)}},{key:"get",value:function(e){if(e<0||e>=this.size())throw new kr;return this.array[e]}},{key:"isEmpty",value:function(){return 0===this.array.length}},{key:"sort",value:function(e){e?this.array.sort(function(n,i){return e.compare(n,i)}):this.array.sort()}},{key:"size",value:function(){return this.array.length}},{key:"toArray",value:function(){return this.array.slice()}},{key:"remove",value:function(e){for(var n=0,i=this.array.length;n<i;n++)if(this.array[n]===e)return!!this.array.splice(n,1);return!1}},{key:Symbol.iterator,value:function(){return this.array.values()}}])}(qe),ni=x(function r(t){N(this,r),this.arrayList=t,this.position=0},[{key:"next",value:function(){if(this.position===this.arrayList.size())throw new Me;return this.arrayList.get(this.position++)}},{key:"hasNext",value:function(){return this.position<this.arrayList.size()}},{key:"set",value:function(r){return this.arrayList.set(this.position-1,r)}},{key:"remove",value:function(){this.arrayList.remove(this.arrayList.get(this.position))}}]),Si=x(function r(){N(this,r),r.constructor_.apply(this,arguments)},[{key:"clearVisitedEdges",value:function(){for(var r=this._dirEdgeList.iterator();r.hasNext();)r.next().setVisited(!1)}},{key:"getRightmostCoordinate",value:function(){return this._rightMostCoord}},{key:"computeNodeDepth",value:function(r){for(var t=null,e=r.getEdges().iterator();e.hasNext();){var n=e.next();if(n.isVisited()||n.getSym().isVisited()){t=n;break}}if(null===t)throw new B("unable to find edge to compute depths at "+r.getCoordinate());r.getEdges().computeDepths(t);for(var i=r.getEdges().iterator();i.hasNext();){var a=i.next();a.setVisited(!0),this.copySymDepths(a)}}},{key:"computeDepth",value:function(r){this.clearVisitedEdges();var t=this._finder.getEdge();t.getNode(),t.getLabel(),t.setEdgeDepths(Z.RIGHT,r),this.copySymDepths(t),this.computeDepths(t)}},{key:"create",value:function(r){this.addReachable(r),this._finder.findEdge(this._dirEdgeList),this._rightMostCoord=this._finder.getCoordinate()}},{key:"findResultEdges",value:function(){for(var r=this._dirEdgeList.iterator();r.hasNext();){var t=r.next();t.getDepth(Z.RIGHT)>=1&&t.getDepth(Z.LEFT)<=0&&!t.isInteriorAreaEdge()&&t.setInResult(!0)}}},{key:"computeDepths",value:function(r){var t=new vr,e=new bt,n=r.getNode();for(e.addLast(n),t.add(n),r.setVisited(!0);!e.isEmpty();){var i=e.removeFirst();t.add(i),this.computeNodeDepth(i);for(var a=i.getEdges().iterator();a.hasNext();){var c=a.next().getSym();if(!c.isVisited()){var f=c.getNode();t.contains(f)||(e.addLast(f),t.add(f))}}}}},{key:"compareTo",value:function(r){return this._rightMostCoord.x<r._rightMostCoord.x?-1:this._rightMostCoord.x>r._rightMostCoord.x?1:0}},{key:"getEnvelope",value:function(){if(null===this._env){for(var r=new Kt,t=this._dirEdgeList.iterator();t.hasNext();)for(var e=t.next().getEdge().getCoordinates(),n=0;n<e.length-1;n++)r.expandToInclude(e[n]);this._env=r}return this._env}},{key:"addReachable",value:function(r){var t=new Ii;for(t.add(r);!t.empty();){var e=t.pop();this.add(e,t)}}},{key:"copySymDepths",value:function(r){var t=r.getSym();t.setDepth(Z.LEFT,r.getDepth(Z.RIGHT)),t.setDepth(Z.RIGHT,r.getDepth(Z.LEFT))}},{key:"add",value:function(r,t){r.setVisited(!0),this._nodes.add(r);for(var e=r.getEdges().iterator();e.hasNext();){var n=e.next();this._dirEdgeList.add(n);var i=n.getSym().getNode();i.isVisited()||t.push(i)}}},{key:"getNodes",value:function(){return this._nodes}},{key:"getDirectedEdges",value:function(){return this._dirEdgeList}},{key:"interfaces_",get:function(){return[L]}}],[{key:"constructor_",value:function(){this._finder=null,this._dirEdgeList=new vt,this._nodes=new vt,this._rightMostCoord=null,this._env=null,this._finder=new is}}]),or=x(function r(){N(this,r)},null,[{key:"intersection",value:function(r,t,e,n){var i=r.x<t.x?r.x:t.x,a=r.y<t.y?r.y:t.y,c=r.x>t.x?r.x:t.x,f=r.y>t.y?r.y:t.y,m=e.x<n.x?e.x:n.x,E=e.y<n.y?e.y:n.y,O=e.x>n.x?e.x:n.x,P=e.y>n.y?e.y:n.y,z=((i>m?i:m)+(c<O?c:O))/2,tt=((a>E?a:E)+(f<P?f:P))/2,ut=r.x-z,ht=r.y-tt,Bt=t.x-z,Yt=t.y-tt,ee=e.x-z,ye=e.y-tt,Te=n.x-z,Tn=n.y-tt,rr=ht-Yt,Pr=Bt-ut,Dr=ut*Yt-Bt*ht,ir=ye-Tn,Xi=Te-ee,Vi=ee*Tn-Te*ye,Qi=rr*Xi-ir*Pr,di=(Pr*Vi-Xi*Dr)/Qi,mi=(ir*Dr-rr*Vi)/Qi;return gt.isNaN(di)||gt.isInfinite(di)||gt.isNaN(mi)||gt.isInfinite(mi)?null:new D(di+z,mi+tt)}}]),we=x(function r(){N(this,r)},null,[{key:"arraycopy",value:function(r,t,e,n,i){for(var a=0,c=t;c<t+i;c++)e[n+a]=r[c],a++}},{key:"getProperty",value:function(r){return{"line.separator":"\n"}[r]}}]),Zn=function(){function r(){N(this,r)}return x(r,null,[{key:"log10",value:function(t){var e=Math.log(t);return gt.isInfinite(e)||gt.isNaN(e)?e:e/r.LOG_10}},{key:"min",value:function(t,e,n,i){var a=t;return e<a&&(a=e),n<a&&(a=n),i<a&&(a=i),a}},{key:"clamp",value:function(){if("number"==typeof arguments[2]&&"number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1],n=arguments[2];return t<e?e:t>n?n:t}if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var i=arguments[0],a=arguments[1],c=arguments[2];return i<a?a:i>c?c:i}}},{key:"wrap",value:function(t,e){return t<0?e- -t%e:t%e}},{key:"max",value:function(){if(3===arguments.length){var t=arguments[1],e=arguments[2],n=arguments[0];return t>n&&(n=t),e>n&&(n=e),n}if(4===arguments.length){var i=arguments[1],a=arguments[2],c=arguments[3],f=arguments[0];return i>f&&(f=i),a>f&&(f=a),c>f&&(f=c),f}}},{key:"average",value:function(t,e){return(t+e)/2}}])}();Zn.LOG_10=Math.log(10);var ne=function(){function r(){N(this,r)}return x(r,null,[{key:"segmentToSegment",value:function(t,e,n,i){if(t.equals(e))return r.pointToSegment(t,n,i);if(n.equals(i))return r.pointToSegment(i,t,e);var a=!1;if(Kt.intersects(t,e,n,i)){var c=(e.x-t.x)*(i.y-n.y)-(e.y-t.y)*(i.x-n.x);if(0===c)a=!0;else{var m=((t.y-n.y)*(e.x-t.x)-(t.x-n.x)*(e.y-t.y))/c,E=((t.y-n.y)*(i.x-n.x)-(t.x-n.x)*(i.y-n.y))/c;(E<0||E>1||m<0||m>1)&&(a=!0)}}else a=!0;return a?Zn.min(r.pointToSegment(t,n,i),r.pointToSegment(e,n,i),r.pointToSegment(n,t,e),r.pointToSegment(i,t,e)):0}},{key:"pointToSegment",value:function(t,e,n){if(e.x===n.x&&e.y===n.y)return t.distance(e);var i=(n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y),a=((t.x-e.x)*(n.x-e.x)+(t.y-e.y)*(n.y-e.y))/i;return a<=0?t.distance(e):a>=1?t.distance(n):Math.abs(((e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y))/i)*Math.sqrt(i)}},{key:"pointToLinePerpendicular",value:function(t,e,n){var i=(n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y);return Math.abs(((e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y))/i)*Math.sqrt(i)}},{key:"pointToSegmentString",value:function(t,e){if(0===e.length)throw new j("Line array must contain at least one vertex");for(var n=t.distance(e[0]),i=0;i<e.length-1;i++){var a=r.pointToSegment(t,e[i],e[i+1]);a<n&&(n=a)}return n}}])}(),xr=x(function r(){N(this,r)},[{key:"create",value:function(){if(1===arguments.length)arguments[0]instanceof Array||Ot(arguments[0],Xt);else if(2!==arguments.length&&3===arguments.length)return this.create(arguments[0],arguments[1])}}]),un=x(function r(){N(this,r)},[{key:"filter",value:function(r){}}]),tn=x(function r(){N(this,r)},null,[{key:"ofLine",value:function(r){var t=r.size();if(t<=1)return 0;var e=0,n=new D;r.getCoordinate(0,n);for(var i=n.x,a=n.y,c=1;c<t;c++){r.getCoordinate(c,n);var f=n.x,m=n.y,E=f-i,O=m-a;e+=Math.sqrt(E*E+O*O),i=f,a=m}return e}}]),Nr=x(function r(){N(this,r)}),Ze=function(){function r(){N(this,r)}return x(r,null,[{key:"copyCoord",value:function(t,e,n,i){for(var a=Math.min(t.getDimension(),n.getDimension()),c=0;c<a;c++)n.setOrdinate(i,c,t.getOrdinate(e,c))}},{key:"isRing",value:function(t){var e=t.size();return 0===e||!(e<=3)&&t.getOrdinate(0,Xt.X)===t.getOrdinate(e-1,Xt.X)&&t.getOrdinate(0,Xt.Y)===t.getOrdinate(e-1,Xt.Y)}},{key:"scroll",value:function(){if(2===arguments.length){if(Ot(arguments[0],Xt)&&Number.isInteger(arguments[1])){var t=arguments[0];r.scroll(t,arguments[1],r.isRing(t))}else if(Ot(arguments[0],Xt)&&arguments[1]instanceof D){var n=arguments[0],a=r.indexOf(arguments[1],n);if(a<=0)return null;r.scroll(n,a)}}else if(3===arguments.length){var c=arguments[0],f=arguments[1],m=arguments[2];if(f<=0)return null;for(var E=c.copy(),O=m?c.size()-1:c.size(),P=0;P<O;P++)for(var z=0;z<c.getDimension();z++)c.setOrdinate(P,z,E.getOrdinate((f+P)%O,z));if(m)for(var tt=0;tt<c.getDimension();tt++)c.setOrdinate(O,tt,c.getOrdinate(0,tt))}}},{key:"isEqual",value:function(t,e){var n=t.size();if(n!==e.size())return!1;for(var i=Math.min(t.getDimension(),e.getDimension()),a=0;a<n;a++)for(var c=0;c<i;c++){var f=t.getOrdinate(a,c),m=e.getOrdinate(a,c);if(!(t.getOrdinate(a,c)===e.getOrdinate(a,c)||gt.isNaN(f)&&gt.isNaN(m)))return!1}return!0}},{key:"minCoordinateIndex",value:function(){if(1===arguments.length){var t=arguments[0];return r.minCoordinateIndex(t,0,t.size()-1)}if(3===arguments.length){for(var e=arguments[0],n=arguments[2],i=-1,a=null,c=arguments[1];c<=n;c++){var f=e.getCoordinate(c);(null===a||a.compareTo(f)>0)&&(a=f,i=c)}return i}}},{key:"extend",value:function(t,e,n){var i=t.create(n,e.getDimension()),a=e.size();if(r.copy(e,0,i,0,a),a>0)for(var c=a;c<n;c++)r.copy(e,a-1,i,c,1);return i}},{key:"reverse",value:function(t){for(var e=t.size()-1,n=Math.trunc(e/2),i=0;i<=n;i++)r.swap(t,i,e-i)}},{key:"swap",value:function(t,e,n){if(e===n)return null;for(var i=0;i<t.getDimension();i++){var a=t.getOrdinate(e,i);t.setOrdinate(e,i,t.getOrdinate(n,i)),t.setOrdinate(n,i,a)}}},{key:"copy",value:function(t,e,n,i,a){for(var c=0;c<a;c++)r.copyCoord(t,e+c,n,i+c)}},{key:"ensureValidRing",value:function(t,e){var n=e.size();return 0===n?e:n<=3?r.createClosedRing(t,e,4):e.getOrdinate(0,Xt.X)===e.getOrdinate(n-1,Xt.X)&&e.getOrdinate(0,Xt.Y)===e.getOrdinate(n-1,Xt.Y)?e:r.createClosedRing(t,e,n+1)}},{key:"indexOf",value:function(t,e){for(var n=0;n<e.size();n++)if(t.x===e.getOrdinate(n,Xt.X)&&t.y===e.getOrdinate(n,Xt.Y))return n;return-1}},{key:"createClosedRing",value:function(t,e,n){var i=t.create(n,e.getDimension()),a=e.size();r.copy(e,0,i,0,a);for(var c=a;c<n;c++)r.copy(e,0,i,c,1);return i}},{key:"minCoordinate",value:function(t){for(var e=null,n=0;n<t.size();n++){var i=t.getCoordinate(n);(null===e||e.compareTo(i)>0)&&(e=i)}return e}}])}(),$=function(){function r(){N(this,r)}return x(r,null,[{key:"toDimensionSymbol",value:function(t){switch(t){case r.FALSE:return r.SYM_FALSE;case r.TRUE:return r.SYM_TRUE;case r.DONTCARE:return r.SYM_DONTCARE;case r.P:return r.SYM_P;case r.L:return r.SYM_L;case r.A:return r.SYM_A}throw new j("Unknown dimension value: "+t)}},{key:"toDimensionValue",value:function(t){switch(Er.toUpperCase(t)){case r.SYM_FALSE:return r.FALSE;case r.SYM_TRUE:return r.TRUE;case r.SYM_DONTCARE:return r.DONTCARE;case r.SYM_P:return r.P;case r.SYM_L:return r.L;case r.SYM_A:return r.A}throw new j("Unknown dimension symbol: "+t)}}])}();$.P=0,$.L=1,$.A=2,$.FALSE=-1,$.TRUE=-2,$.DONTCARE=-3,$.SYM_FALSE="F",$.SYM_TRUE="T",$.SYM_DONTCARE="*",$.SYM_P="0",$.SYM_L="1",$.SYM_A="2";var bn=x(function r(){N(this,r)},[{key:"filter",value:function(r){}}]),Ir=x(function r(){N(this,r)},[{key:"filter",value:function(r,t){}},{key:"isDone",value:function(){}},{key:"isGeometryChanged",value:function(){}}]),_n=function(r){function t(){var e;return N(this,t),e=q(this,t),t.constructor_.apply(e,arguments),e}return ot(t,r),x(t,[{key:"computeEnvelopeInternal",value:function(){return this.isEmpty()?new Kt:this._points.expandEnvelope(new Kt)}},{key:"isRing",value:function(){return this.isClosed()&&this.isSimple()}},{key:"getCoordinates",value:function(){return this._points.toCoordinateArray()}},{key:"copyInternal",value:function(){return new t(this._points.copy(),this._factory)}},{key:"equalsExact",value:function(){if(2===arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof dt){var e=arguments[0],n=arguments[1];if(!this.isEquivalentClass(e))return!1;var i=e;if(this._points.size()!==i._points.size())return!1;for(var a=0;a<this._points.size();a++)if(!this.equal(this._points.getCoordinate(a),i._points.getCoordinate(a),n))return!1;return!0}return Et(t,"equalsExact",this,1).apply(this,arguments)}},{key:"normalize",value:function(){for(var e=0;e<Math.trunc(this._points.size()/2);e++){var n=this._points.size()-1-e;if(!this._points.getCoordinate(e).equals(this._points.getCoordinate(n))){if(this._points.getCoordinate(e).compareTo(this._points.getCoordinate(n))>0){var i=this._points.copy();Ze.reverse(i),this._points=i}return null}}}},{key:"getCoordinate",value:function(){return this.isEmpty()?null:this._points.getCoordinate(0)}},{key:"getBoundaryDimension",value:function(){return this.isClosed()?$.FALSE:0}},{key:"isClosed",value:function(){return!this.isEmpty()&&this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))}},{key:"reverseInternal",value:function(){var e=this._points.copy();return Ze.reverse(e),this.getFactory().createLineString(e)}},{key:"getEndPoint",value:function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)}},{key:"getTypeCode",value:function(){return dt.TYPECODE_LINESTRING}},{key:"getDimension",value:function(){return 1}},{key:"getLength",value:function(){return tn.ofLine(this._points)}},{key:"getNumPoints",value:function(){return this._points.size()}},{key:"compareToSameClass",value:function(){if(1===arguments.length){for(var e=arguments[0],n=0,i=0;n<this._points.size()&&i<e._points.size();){var a=this._points.getCoordinate(n).compareTo(e._points.getCoordinate(i));if(0!==a)return a;n++,i++}return n<this._points.size()?1:i<e._points.size()?-1:0}if(2===arguments.length)return arguments[1].compare(this._points,arguments[0]._points)}},{key:"apply",value:function(){if(Ot(arguments[0],un))for(var e=arguments[0],n=0;n<this._points.size();n++)e.filter(this._points.getCoordinate(n));else if(Ot(arguments[0],Ir)){var i=arguments[0];if(0===this._points.size())return null;for(var a=0;a<this._points.size()&&(i.filter(this._points,a),!i.isDone());a++);i.isGeometryChanged()&&this.geometryChanged()}else(Ot(arguments[0],bn)||Ot(arguments[0],se))&&arguments[0].filter(this)}},{key:"getBoundary",value:function(){throw new Je}},{key:"isEquivalentClass",value:function(e){return e instanceof t}},{key:"getCoordinateN",value:function(e){return this._points.getCoordinate(e)}},{key:"getGeometryType",value:function(){return dt.TYPENAME_LINESTRING}},{key:"getCoordinateSequence",value:function(){return this._points}},{key:"isEmpty",value:function(){return 0===this._points.size()}},{key:"init",value:function(e){if(null===e&&(e=this.getFactory().getCoordinateSequenceFactory().create([])),1===e.size())throw new j("Invalid number of points in LineString (found "+e.size()+" - must be 0 or >= 2)");this._points=e}},{key:"isCoordinate",value:function(e){for(var n=0;n<this._points.size();n++)if(this._points.getCoordinate(n).equals(e))return!0;return!1}},{key:"getStartPoint",value:function(){return this.isEmpty()?null:this.getPointN(0)}},{key:"getPointN",value:function(e){return this.getFactory().createPoint(this._points.getCoordinate(e))}},{key:"interfaces_",get:function(){return[Nr]}}],[{key:"constructor_",value:function(){if(this._points=null,0!==arguments.length&&2===arguments.length){var e=arguments[0];dt.constructor_.call(this,arguments[1]),this.init(e)}}}])}(dt),qr=x(function r(){N(this,r)}),ln=function(r){function t(){var e;return N(this,t),e=q(this,t),t.constructor_.apply(e,arguments),e}return ot(t,r),x(t,[{key:"computeEnvelopeInternal",value:function(){if(this.isEmpty())return new Kt;var e=new Kt;return e.expandToInclude(this._coordinates.getX(0),this._coordinates.getY(0)),e}},{key:"getCoordinates",value:function(){return this.isEmpty()?[]:[this.getCoordinate()]}},{key:"copyInternal",value:function(){return new t(this._coordinates.copy(),this._factory)}},{key:"equalsExact",value:function(){if(2===arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof dt){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&(!(!this.isEmpty()||!e.isEmpty())||this.isEmpty()===e.isEmpty()&&this.equal(e.getCoordinate(),this.getCoordinate(),n))}return Et(t,"equalsExact",this,1).apply(this,arguments)}},{key:"normalize",value:function(){}},{key:"getCoordinate",value:function(){return 0!==this._coordinates.size()?this._coordinates.getCoordinate(0):null}},{key:"getBoundaryDimension",value:function(){return $.FALSE}},{key:"reverseInternal",value:function(){return this.getFactory().createPoint(this._coordinates.copy())}},{key:"getTypeCode",value:function(){return dt.TYPECODE_POINT}},{key:"getDimension",value:function(){return 0}},{key:"getNumPoints",value:function(){return this.isEmpty()?0:1}},{key:"getX",value:function(){if(null===this.getCoordinate())throw new IllegalStateException("getX called on empty Point");return this.getCoordinate().x}},{key:"compareToSameClass",value:function(){if(1===arguments.length){var e=arguments[0];return this.getCoordinate().compareTo(e.getCoordinate())}if(2===arguments.length)return arguments[1].compare(this._coordinates,arguments[0]._coordinates)}},{key:"apply",value:function(){if(Ot(arguments[0],un)){var e=arguments[0];if(this.isEmpty())return null;e.filter(this.getCoordinate())}else if(Ot(arguments[0],Ir)){var n=arguments[0];if(this.isEmpty())return null;n.filter(this._coordinates,0),n.isGeometryChanged()&&this.geometryChanged()}else(Ot(arguments[0],bn)||Ot(arguments[0],se))&&arguments[0].filter(this)}},{key:"getBoundary",value:function(){return this.getFactory().createGeometryCollection()}},{key:"getGeometryType",value:function(){return dt.TYPENAME_POINT}},{key:"getCoordinateSequence",value:function(){return this._coordinates}},{key:"getY",value:function(){if(null===this.getCoordinate())throw new IllegalStateException("getY called on empty Point");return this.getCoordinate().y}},{key:"isEmpty",value:function(){return 0===this._coordinates.size()}},{key:"init",value:function(e){null===e&&(e=this.getFactory().getCoordinateSequenceFactory().create([])),Dt.isTrue(e.size()<=1),this._coordinates=e}},{key:"isSimple",value:function(){return!0}},{key:"interfaces_",get:function(){return[qr]}}],[{key:"constructor_",value:function(){this._coordinates=null;var e=arguments[0];dt.constructor_.call(this,arguments[1]),this.init(e)}}])}(dt),Yr=function(){function r(){N(this,r)}return x(r,null,[{key:"ofRing",value:function(){return arguments[0]instanceof Array||Ot(arguments[0],Xt)?Math.abs(r.ofRingSigned(arguments[0])):void 0}},{key:"ofRingSigned",value:function(){if(arguments[0]instanceof Array){var t=arguments[0];if(t.length<3)return 0;for(var e=0,n=t[0].x,i=1;i<t.length-1;i++)e+=(t[i].x-n)*(t[i-1].y-t[i+1].y);return e/2}if(Ot(arguments[0],Xt)){var f=arguments[0],m=f.size();if(m<3)return 0;var E=new D,O=new D,P=new D;f.getCoordinate(0,O),f.getCoordinate(1,P);var z=O.x;P.x-=z;for(var tt=0,ut=1;ut<m-1;ut++)E.y=O.y,O.x=P.x,O.y=P.y,f.getCoordinate(ut+1,P),P.x-=z,tt+=O.x*(E.y-P.y);return tt/2}}}])}(),kn=x(function r(){N(this,r)},null,[{key:"sort",value:function(){var r=arguments,t=arguments[0];if(1===arguments.length)t.sort(function(z,tt){return z.compareTo(tt)});else if(2===arguments.length)t.sort(function(z,tt){return r[1].compare(z,tt)});else if(3===arguments.length){var e=t.slice(arguments[1],arguments[2]);e.sort();var n=t.slice(0,arguments[1]).concat(e,t.slice(arguments[2],t.length));t.splice(0,t.length);var i,a=K(n);try{for(a.s();!(i=a.n()).done;)t.push(i.value)}catch(z){a.e(z)}finally{a.f()}}else if(4===arguments.length){var f=t.slice(arguments[1],arguments[2]);f.sort(function(z,tt){return r[3].compare(z,tt)});var m=t.slice(0,arguments[1]).concat(f,t.slice(arguments[2],t.length));t.splice(0,t.length);var E,O=K(m);try{for(O.s();!(E=O.n()).done;)t.push(E.value)}catch(z){O.e(z)}finally{O.f()}}}},{key:"asList",value:function(r){var t,e=new vt,n=K(r);try{for(n.s();!(t=n.n()).done;)e.add(t.value)}catch(a){n.e(a)}finally{n.f()}return e}},{key:"copyOf",value:function(r,t){return r.slice(0,t)}}]),zr=x(function r(){N(this,r)}),Hn=function(r){function t(){var e;return N(this,t),e=q(this,t),t.constructor_.apply(e,arguments),e}return ot(t,r),x(t,[{key:"computeEnvelopeInternal",value:function(){return this._shell.getEnvelopeInternal()}},{key:"getCoordinates",value:function(){if(this.isEmpty())return[];for(var e=new Array(this.getNumPoints()).fill(null),n=-1,i=this._shell.getCoordinates(),a=0;a<i.length;a++)e[++n]=i[a];for(var c=0;c<this._holes.length;c++)for(var f=this._holes[c].getCoordinates(),m=0;m<f.length;m++)e[++n]=f[m];return e}},{key:"getArea",value:function(){var e=0;e+=Yr.ofRing(this._shell.getCoordinateSequence());for(var n=0;n<this._holes.length;n++)e-=Yr.ofRing(this._holes[n].getCoordinateSequence());return e}},{key:"copyInternal",value:function(){for(var e=this._shell.copy(),n=new Array(this._holes.length).fill(null),i=0;i<this._holes.length;i++)n[i]=this._holes[i].copy();return new t(e,n,this._factory)}},{key:"isRectangle",value:function(){if(0!==this.getNumInteriorRing()||null===this._shell||5!==this._shell.getNumPoints())return!1;for(var e=this._shell.getCoordinateSequence(),n=this.getEnvelopeInternal(),i=0;i<5;i++){var a=e.getX(i);if(a!==n.getMinX()&&a!==n.getMaxX())return!1;var c=e.getY(i);if(c!==n.getMinY()&&c!==n.getMaxY())return!1}for(var f=e.getX(0),m=e.getY(0),E=1;E<=4;E++){var O=e.getX(E),P=e.getY(E);if(O!==f==(P!==m))return!1;f=O,m=P}return!0}},{key:"equalsExact",value:function(){if(2===arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof dt){var e=arguments[0],n=arguments[1];if(!this.isEquivalentClass(e))return!1;var i=e;if(!this._shell.equalsExact(i._shell,n)||this._holes.length!==i._holes.length)return!1;for(var f=0;f<this._holes.length;f++)if(!this._holes[f].equalsExact(i._holes[f],n))return!1;return!0}return Et(t,"equalsExact",this,1).apply(this,arguments)}},{key:"normalize",value:function(){if(0===arguments.length){this._shell=this.normalized(this._shell,!0);for(var e=0;e<this._holes.length;e++)this._holes[e]=this.normalized(this._holes[e],!1);kn.sort(this._holes)}else if(2===arguments.length){var n=arguments[0],i=arguments[1];if(n.isEmpty())return null;var a=n.getCoordinateSequence(),c=Ze.minCoordinateIndex(a,0,a.size()-2);Ze.scroll(a,c,!0),xt.isCCW(a)===i&&Ze.reverse(a)}}},{key:"getCoordinate",value:function(){return this._shell.getCoordinate()}},{key:"getNumInteriorRing",value:function(){return this._holes.length}},{key:"getBoundaryDimension",value:function(){return 1}},{key:"reverseInternal",value:function(){for(var e=this.getExteriorRing().reverse(),n=new Array(this.getNumInteriorRing()).fill(null),i=0;i<n.length;i++)n[i]=this.getInteriorRingN(i).reverse();return this.getFactory().createPolygon(e,n)}},{key:"getTypeCode",value:function(){return dt.TYPECODE_POLYGON}},{key:"getDimension",value:function(){return 2}},{key:"getLength",value:function(){var e=0;e+=this._shell.getLength();for(var n=0;n<this._holes.length;n++)e+=this._holes[n].getLength();return e}},{key:"getNumPoints",value:function(){for(var e=this._shell.getNumPoints(),n=0;n<this._holes.length;n++)e+=this._holes[n].getNumPoints();return e}},{key:"convexHull",value:function(){return this.getExteriorRing().convexHull()}},{key:"normalized",value:function(e,n){var i=e.copy();return this.normalize(i,n),i}},{key:"compareToSameClass",value:function(){if(1===arguments.length)return this._shell.compareToSameClass(arguments[0]._shell);if(2===arguments.length){var a=arguments[1],c=arguments[0],E=this._shell.compareToSameClass(c._shell,a);if(0!==E)return E;for(var O=this.getNumInteriorRing(),P=c.getNumInteriorRing(),z=0;z<O&&z<P;){var tt=this.getInteriorRingN(z),ut=c.getInteriorRingN(z),ht=tt.compareToSameClass(ut,a);if(0!==ht)return ht;z++}return z<O?1:z<P?-1:0}}},{key:"apply",value:function(){if(Ot(arguments[0],un)){var e=arguments[0];this._shell.apply(e);for(var n=0;n<this._holes.length;n++)this._holes[n].apply(e)}else if(Ot(arguments[0],Ir)){var i=arguments[0];if(this._shell.apply(i),!i.isDone())for(var a=0;a<this._holes.length&&(this._holes[a].apply(i),!i.isDone());a++);i.isGeometryChanged()&&this.geometryChanged()}else if(Ot(arguments[0],bn))arguments[0].filter(this);else if(Ot(arguments[0],se)){var c=arguments[0];c.filter(this),this._shell.apply(c);for(var f=0;f<this._holes.length;f++)this._holes[f].apply(c)}}},{key:"getBoundary",value:function(){if(this.isEmpty())return this.getFactory().createMultiLineString();var e=new Array(this._holes.length+1).fill(null);e[0]=this._shell;for(var n=0;n<this._holes.length;n++)e[n+1]=this._holes[n];return e.length<=1?this.getFactory().createLinearRing(e[0].getCoordinateSequence()):this.getFactory().createMultiLineString(e)}},{key:"getGeometryType",value:function(){return dt.TYPENAME_POLYGON}},{key:"getExteriorRing",value:function(){return this._shell}},{key:"isEmpty",value:function(){return this._shell.isEmpty()}},{key:"getInteriorRingN",value:function(e){return this._holes[e]}},{key:"interfaces_",get:function(){return[zr]}}],[{key:"constructor_",value:function(){this._shell=null,this._holes=null;var e=arguments[0],n=arguments[1];if(dt.constructor_.call(this,arguments[2]),null===e&&(e=this.getFactory().createLinearRing()),null===n&&(n=[]),dt.hasNullElements(n))throw new j("holes must not contain null elements");if(e.isEmpty()&&dt.hasNonEmptyElements(n))throw new j("shell is empty but holes are not");this._shell=e,this._holes=n}}])}(dt),Ti=function(r){function t(){return N(this,t),q(this,t,arguments)}return ot(t,r),x(t)}(yr),Sr=function(r){function t(e){var n;return N(this,t),(n=q(this,t)).array=[],e instanceof Qe&&n.addAll(e),n}return ot(t,r),x(t,[{key:"contains",value:function(e){var n,i=K(this.array);try{for(i.s();!(n=i.n()).done;)if(0===n.value.compareTo(e))return!0}catch(a){i.e(a)}finally{i.f()}return!1}},{key:"add",value:function(e){if(this.contains(e))return!1;for(var n=0,i=this.array.length;n<i;n++)if(1===this.array[n].compareTo(e))return!!this.array.splice(n,0,e);return this.array.push(e),!0}},{key:"addAll",value:function(e){var n,i=K(e);try{for(i.s();!(n=i.n()).done;)this.add(n.value)}catch(c){i.e(c)}finally{i.f()}return!0}},{key:"remove",value:function(){throw new Je}},{key:"size",value:function(){return this.array.length}},{key:"isEmpty",value:function(){return 0===this.array.length}},{key:"toArray",value:function(){return this.array.slice()}},{key:"iterator",value:function(){return new Tr(this.array)}}])}(Ti),Tr=x(function r(t){N(this,r),this.array=t,this.position=0},[{key:"next",value:function(){if(this.position===this.array.length)throw new Me;return this.array[this.position++]}},{key:"hasNext",value:function(){return this.position<this.array.length}},{key:"remove",value:function(){throw new Je}}]),Fe=function(r){function t(){var e;return N(this,t),e=q(this,t),t.constructor_.apply(e,arguments),e}return ot(t,r),x(t,[{key:"computeEnvelopeInternal",value:function(){for(var e=new Kt,n=0;n<this._geometries.length;n++)e.expandToInclude(this._geometries[n].getEnvelopeInternal());return e}},{key:"getGeometryN",value:function(e){return this._geometries[e]}},{key:"getCoordinates",value:function(){for(var e=new Array(this.getNumPoints()).fill(null),n=-1,i=0;i<this._geometries.length;i++)for(var a=this._geometries[i].getCoordinates(),c=0;c<a.length;c++)e[++n]=a[c];return e}},{key:"getArea",value:function(){for(var e=0,n=0;n<this._geometries.length;n++)e+=this._geometries[n].getArea();return e}},{key:"copyInternal",value:function(){for(var e=new Array(this._geometries.length).fill(null),n=0;n<e.length;n++)e[n]=this._geometries[n].copy();return new t(e,this._factory)}},{key:"equalsExact",value:function(){if(2===arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof dt){var e=arguments[0],n=arguments[1];if(!this.isEquivalentClass(e))return!1;var i=e;if(this._geometries.length!==i._geometries.length)return!1;for(var a=0;a<this._geometries.length;a++)if(!this._geometries[a].equalsExact(i._geometries[a],n))return!1;return!0}return Et(t,"equalsExact",this,1).apply(this,arguments)}},{key:"normalize",value:function(){for(var e=0;e<this._geometries.length;e++)this._geometries[e].normalize();kn.sort(this._geometries)}},{key:"getCoordinate",value:function(){return this.isEmpty()?null:this._geometries[0].getCoordinate()}},{key:"getBoundaryDimension",value:function(){for(var e=$.FALSE,n=0;n<this._geometries.length;n++)e=Math.max(e,this._geometries[n].getBoundaryDimension());return e}},{key:"reverseInternal",value:function(){for(var e=this._geometries.length,n=new vt(e),i=0;i<e;i++)n.add(this._geometries[i].reverse());return this.getFactory().buildGeometry(n)}},{key:"getTypeCode",value:function(){return dt.TYPECODE_GEOMETRYCOLLECTION}},{key:"getDimension",value:function(){for(var e=$.FALSE,n=0;n<this._geometries.length;n++)e=Math.max(e,this._geometries[n].getDimension());return e}},{key:"getLength",value:function(){for(var e=0,n=0;n<this._geometries.length;n++)e+=this._geometries[n].getLength();return e}},{key:"getNumPoints",value:function(){for(var e=0,n=0;n<this._geometries.length;n++)e+=this._geometries[n].getNumPoints();return e}},{key:"getNumGeometries",value:function(){return this._geometries.length}},{key:"compareToSameClass",value:function(){if(1===arguments.length){var e=arguments[0],n=new Sr(kn.asList(this._geometries)),i=new Sr(kn.asList(e._geometries));return this.compare(n,i)}if(2===arguments.length){for(var a=arguments[1],c=arguments[0],f=this.getNumGeometries(),m=c.getNumGeometries(),E=0;E<f&&E<m;){var O=this.getGeometryN(E),P=c.getGeometryN(E),z=O.compareToSameClass(P,a);if(0!==z)return z;E++}return E<f?1:E<m?-1:0}}},{key:"apply",value:function(){if(Ot(arguments[0],un))for(var e=arguments[0],n=0;n<this._geometries.length;n++)this._geometries[n].apply(e);else if(Ot(arguments[0],Ir)){var i=arguments[0];if(0===this._geometries.length)return null;for(var a=0;a<this._geometries.length&&(this._geometries[a].apply(i),!i.isDone());a++);i.isGeometryChanged()&&this.geometryChanged()}else if(Ot(arguments[0],bn)){var c=arguments[0];c.filter(this);for(var f=0;f<this._geometries.length;f++)this._geometries[f].apply(c)}else if(Ot(arguments[0],se)){var m=arguments[0];m.filter(this);for(var E=0;E<this._geometries.length;E++)this._geometries[E].apply(m)}}},{key:"getBoundary",value:function(){return dt.checkNotGeometryCollection(this),Dt.shouldNeverReachHere(),null}},{key:"getGeometryType",value:function(){return dt.TYPENAME_GEOMETRYCOLLECTION}},{key:"isEmpty",value:function(){for(var e=0;e<this._geometries.length;e++)if(!this._geometries[e].isEmpty())return!1;return!0}}],[{key:"constructor_",value:function(){if(this._geometries=null,0!==arguments.length&&2===arguments.length){var e=arguments[0];if(dt.constructor_.call(this,arguments[1]),null===e&&(e=[]),dt.hasNullElements(e))throw new j("geometries must not contain null elements");this._geometries=e}}}])}(dt),Ue=function(r){function t(){var e;return N(this,t),e=q(this,t),t.constructor_.apply(e,arguments),e}return ot(t,r),x(t,[{key:"copyInternal",value:function(){for(var e=new Array(this._geometries.length).fill(null),n=0;n<e.length;n++)e[n]=this._geometries[n].copy();return new t(e,this._factory)}},{key:"isValid",value:function(){return!0}},{key:"equalsExact",value:function(){if(2===arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof dt){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&Et(t,"equalsExact",this,1).call(this,e,n)}return Et(t,"equalsExact",this,1).apply(this,arguments)}},{key:"getCoordinate",value:function(){return 1===arguments.length&&Number.isInteger(arguments[0])?this._geometries[arguments[0]].getCoordinate():Et(t,"getCoordinate",this,1).apply(this,arguments)}},{key:"getBoundaryDimension",value:function(){return $.FALSE}},{key:"getTypeCode",value:function(){return dt.TYPECODE_MULTIPOINT}},{key:"getDimension",value:function(){return 0}},{key:"getBoundary",value:function(){return this.getFactory().createGeometryCollection()}},{key:"getGeometryType",value:function(){return dt.TYPENAME_MULTIPOINT}},{key:"interfaces_",get:function(){return[qr]}}],[{key:"constructor_",value:function(){Fe.constructor_.call(this,arguments[0],arguments[1])}}])}(Fe),ur=function(r){function t(){var e;return N(this,t),e=q(this,t),t.constructor_.apply(e,arguments),e}return ot(t,r),x(t,[{key:"copyInternal",value:function(){return new t(this._points.copy(),this._factory)}},{key:"getBoundaryDimension",value:function(){return $.FALSE}},{key:"isClosed",value:function(){return!!this.isEmpty()||Et(t,"isClosed",this,1).call(this)}},{key:"reverseInternal",value:function(){var e=this._points.copy();return Ze.reverse(e),this.getFactory().createLinearRing(e)}},{key:"getTypeCode",value:function(){return dt.TYPECODE_LINEARRING}},{key:"validateConstruction",value:function(){if(!this.isEmpty()&&!Et(t,"isClosed",this,1).call(this))throw new j("Points of LinearRing do not form a closed linestring");if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<t.MINIMUM_VALID_SIZE)throw new j("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")}},{key:"getGeometryType",value:function(){return dt.TYPENAME_LINEARRING}}],[{key:"constructor_",value:function(){_n.constructor_.call(this,arguments[0],arguments[1]),this.validateConstruction()}}])}(_n);ur.MINIMUM_VALID_SIZE=4;var En=function(r){function t(){var e;return N(this,t),e=q(this,t),t.constructor_.apply(e,arguments),e}return ot(t,r),x(t,[{key:"setOrdinate",value:function(e,n){switch(e){case t.X:this.x=n;break;case t.Y:this.y=n;break;default:throw new j("Invalid ordinate index: "+e)}}},{key:"getZ",value:function(){return D.NULL_ORDINATE}},{key:"getOrdinate",value:function(e){switch(e){case t.X:return this.x;case t.Y:return this.y}throw new j("Invalid ordinate index: "+e)}},{key:"setZ",value:function(e){throw new j("CoordinateXY dimension 2 does not support z-ordinate")}},{key:"copy",value:function(){return new t(this)}},{key:"toString",value:function(){return"("+this.x+", "+this.y+")"}},{key:"setCoordinate",value:function(e){this.x=e.x,this.y=e.y,this.z=e.getZ()}}],[{key:"constructor_",value:function(){if(0===arguments.length)D.constructor_.call(this);else if(1===arguments.length){if(arguments[0]instanceof t){var e=arguments[0];D.constructor_.call(this,e.x,e.y)}else if(arguments[0]instanceof D){var n=arguments[0];D.constructor_.call(this,n.x,n.y)}}else 2===arguments.length&&D.constructor_.call(this,arguments[0],arguments[1],D.NULL_ORDINATE)}}])}(D);En.X=0,En.Y=1,En.Z=-1,En.M=-1;var Mn=function(r){function t(){var e;return N(this,t),e=q(this,t),t.constructor_.apply(e,arguments),e}return ot(t,r),x(t,[{key:"getM",value:function(){return this._m}},{key:"setOrdinate",value:function(e,n){switch(e){case t.X:this.x=n;break;case t.Y:this.y=n;break;case t.M:this._m=n;break;default:throw new j("Invalid ordinate index: "+e)}}},{key:"setM",value:function(e){this._m=e}},{key:"getZ",value:function(){return D.NULL_ORDINATE}},{key:"getOrdinate",value:function(e){switch(e){case t.X:return this.x;case t.Y:return this.y;case t.M:return this._m}throw new j("Invalid ordinate index: "+e)}},{key:"setZ",value:function(e){throw new j("CoordinateXY dimension 2 does not support z-ordinate")}},{key:"copy",value:function(){return new t(this)}},{key:"toString",value:function(){return"("+this.x+", "+this.y+" m="+this.getM()+")"}},{key:"setCoordinate",value:function(e){this.x=e.x,this.y=e.y,this.z=e.getZ(),this._m=e.getM()}}],[{key:"constructor_",value:function(){if(this._m=null,0===arguments.length)D.constructor_.call(this),this._m=0;else if(1===arguments.length){if(arguments[0]instanceof t){var e=arguments[0];D.constructor_.call(this,e.x,e.y),this._m=e._m}else if(arguments[0]instanceof D){var n=arguments[0];D.constructor_.call(this,n.x,n.y),this._m=this.getM()}}else if(3===arguments.length){var c=arguments[2];D.constructor_.call(this,arguments[0],arguments[1],D.NULL_ORDINATE),this._m=c}}}])}(D);Mn.X=0,Mn.Y=1,Mn.Z=-1,Mn.M=2;var wr=function(r){function t(){var e;return N(this,t),e=q(this,t),t.constructor_.apply(e,arguments),e}return ot(t,r),x(t,[{key:"getM",value:function(){return this._m}},{key:"setOrdinate",value:function(e,n){switch(e){case D.X:this.x=n;break;case D.Y:this.y=n;break;case D.Z:this.z=n;break;case D.M:this._m=n;break;default:throw new j("Invalid ordinate index: "+e)}}},{key:"setM",value:function(e){this._m=e}},{key:"getOrdinate",value:function(e){switch(e){case D.X:return this.x;case D.Y:return this.y;case D.Z:return this.getZ();case D.M:return this.getM()}throw new j("Invalid ordinate index: "+e)}},{key:"copy",value:function(){return new t(this)}},{key:"toString",value:function(){return"("+this.x+", "+this.y+", "+this.getZ()+" m="+this.getM()+")"}},{key:"setCoordinate",value:function(e){this.x=e.x,this.y=e.y,this.z=e.getZ(),this._m=e.getM()}}],[{key:"constructor_",value:function(){if(this._m=null,0===arguments.length)D.constructor_.call(this),this._m=0;else if(1===arguments.length)if(arguments[0]instanceof t){var e=arguments[0];D.constructor_.call(this,e),this._m=e._m}else arguments[0]instanceof D&&(D.constructor_.call(this,arguments[0]),this._m=this.getM());else if(4===arguments.length){var f=arguments[3];D.constructor_.call(this,arguments[0],arguments[1],arguments[2]),this._m=f}}}])}(D),Cr=function(){function r(){N(this,r)}return x(r,null,[{key:"measures",value:function(t){return t instanceof En?0:t instanceof Mn||t instanceof wr?1:0}},{key:"dimension",value:function(t){return t instanceof En?2:t instanceof Mn?3:t instanceof wr?4:3}},{key:"create",value:function(){if(1===arguments.length)return r.create(arguments[0],0);if(2===arguments.length){var e=arguments[0],n=arguments[1];return 2===e?new En:3===e&&0===n?new D:3===e&&1===n?new Mn:4===e&&1===n?new wr:new D}}}])}(),en=function(r){function t(){var e;return N(this,t),e=q(this,t),t.constructor_.apply(e,arguments),e}return ot(t,r),x(t,[{key:"getCoordinate",value:function(e){return this.get(e)}},{key:"addAll",value:function(){if(2===arguments.length&&"boolean"==typeof arguments[1]&&Ot(arguments[0],Qe)){for(var e=arguments[1],n=!1,i=arguments[0].iterator();i.hasNext();)this.add(i.next(),e),n=!0;return n}return Et(t,"addAll",this,1).apply(this,arguments)}},{key:"clone",value:function(){for(var e=Et(t,"clone",this,1).call(this),n=0;n<this.size();n++)e.add(n,this.get(n).clone());return e}},{key:"toCoordinateArray",value:function(){if(0===arguments.length)return this.toArray(t.coordArrayType);if(1===arguments.length){if(arguments[0])return this.toArray(t.coordArrayType);for(var e=this.size(),n=new Array(e).fill(null),i=0;i<e;i++)n[i]=this.get(e-i-1);return n}}},{key:"add",value:function(){if(1===arguments.length){var e=arguments[0];return Et(t,"add",this,1).call(this,e)}if(2===arguments.length){if(arguments[0]instanceof Array&&"boolean"==typeof arguments[1])return this.add(arguments[0],arguments[1],!0),!0;if(arguments[0]instanceof D&&"boolean"==typeof arguments[1]){var a=arguments[0];if(!arguments[1]&&this.size()>=1&&this.get(this.size()-1).equals2D(a))return null;Et(t,"add",this,1).call(this,a)}else if(arguments[0]instanceof Object&&"boolean"==typeof arguments[1])return this.add(arguments[0],arguments[1]),!0}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var m=arguments[0],E=arguments[1];if(arguments[2])for(var O=0;O<m.length;O++)this.add(m[O],E);else for(var P=m.length-1;P>=0;P--)this.add(m[P],E);return!0}if("boolean"==typeof arguments[2]&&Number.isInteger(arguments[0])&&arguments[1]instanceof D){var z=arguments[0],tt=arguments[1];if(!arguments[2]){var ut=this.size();if(ut>0&&(z>0&&this.get(z-1).equals2D(tt)||z<ut&&this.get(z).equals2D(tt)))return null}Et(t,"add",this,1).call(this,z,tt)}}else if(4===arguments.length){var ht=arguments[0],Bt=arguments[1],Yt=arguments[2],ee=arguments[3],ye=1;Yt>ee&&(ye=-1);for(var Te=Yt;Te!==ee;Te+=ye)this.add(ht[Te],Bt);return!0}}},{key:"closeRing",value:function(){if(this.size()>0){var e=this.get(0).copy();this.add(e,!1)}}}],[{key:"constructor_",value:function(){if(0!==arguments.length)if(1===arguments.length){var e=arguments[0];this.ensureCapacity(e.length),this.add(e,!0)}else if(2===arguments.length){var n=arguments[0],i=arguments[1];this.ensureCapacity(n.length),this.add(n,i)}}}])}(vt);en.coordArrayType=new Array(0).fill(null);var ce=function(){function r(){N(this,r)}return x(r,null,[{key:"isRing",value:function(t){return!(t.length<4||!t[0].equals2D(t[t.length-1]))}},{key:"ptNotInList",value:function(t,e){for(var n=0;n<t.length;n++){var i=t[n];if(r.indexOf(i,e)<0)return i}return null}},{key:"scroll",value:function(t,e){var n=r.indexOf(e,t);if(n<0)return null;var i=new Array(t.length).fill(null);we.arraycopy(t,n,i,0,t.length-n),we.arraycopy(t,0,i,t.length-n,n),we.arraycopy(i,0,t,0,t.length)}},{key:"equals",value:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(t===e)return!0;if(null===t||null===e||t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].equals(e[n]))return!1;return!0}if(3===arguments.length){var i=arguments[0],a=arguments[1],c=arguments[2];if(i===a)return!0;if(null===i||null===a||i.length!==a.length)return!1;for(var f=0;f<i.length;f++)if(0!==c.compare(i[f],a[f]))return!1;return!0}}},{key:"intersection",value:function(t,e){for(var n=new en,i=0;i<t.length;i++)e.intersects(t[i])&&n.add(t[i],!0);return n.toCoordinateArray()}},{key:"measures",value:function(t){if(null===t||0===t.length)return 0;var e,n=0,i=K(t);try{for(i.s();!(e=i.n()).done;)n=Math.max(n,Cr.measures(e.value))}catch(c){i.e(c)}finally{i.f()}return n}},{key:"hasRepeatedPoints",value:function(t){for(var e=1;e<t.length;e++)if(t[e-1].equals(t[e]))return!0;return!1}},{key:"removeRepeatedPoints",value:function(t){return r.hasRepeatedPoints(t)?new en(t,!1).toCoordinateArray():t}},{key:"reverse",value:function(t){for(var e=t.length-1,n=Math.trunc(e/2),i=0;i<=n;i++){var a=t[i];t[i]=t[e-i],t[e-i]=a}}},{key:"removeNull",value:function(t){for(var e=0,n=0;n<t.length;n++)null!==t[n]&&e++;var i=new Array(e).fill(null);if(0===e)return i;for(var a=0,c=0;c<t.length;c++)null!==t[c]&&(i[a++]=t[c]);return i}},{key:"copyDeep",value:function(){if(1===arguments.length){for(var t=arguments[0],e=new Array(t.length).fill(null),n=0;n<t.length;n++)e[n]=t[n].copy();return e}if(5===arguments.length)for(var i=arguments[0],a=arguments[1],c=arguments[2],f=arguments[3],m=arguments[4],E=0;E<m;E++)c[f+E]=i[a+E].copy()}},{key:"isEqualReversed",value:function(t,e){for(var n=0;n<t.length;n++)if(0!==t[n].compareTo(e[t.length-n-1]))return!1;return!0}},{key:"envelope",value:function(t){for(var e=new Kt,n=0;n<t.length;n++)e.expandToInclude(t[n]);return e}},{key:"toCoordinateArray",value:function(t){return t.toArray(r.coordArrayType)}},{key:"dimension",value:function(t){if(null===t||0===t.length)return 3;var e,n=0,i=K(t);try{for(i.s();!(e=i.n()).done;)n=Math.max(n,Cr.dimension(e.value))}catch(c){i.e(c)}finally{i.f()}return n}},{key:"atLeastNCoordinatesOrNothing",value:function(t,e){return e.length>=t?e:[]}},{key:"indexOf",value:function(t,e){for(var n=0;n<e.length;n++)if(t.equals(e[n]))return n;return-1}},{key:"increasingDirection",value:function(t){for(var e=0;e<Math.trunc(t.length/2);e++){var i=t[e].compareTo(t[t.length-1-e]);if(0!==i)return i}return 1}},{key:"compare",value:function(t,e){for(var n=0;n<t.length&&n<e.length;){var i=t[n].compareTo(e[n]);if(0!==i)return i;n++}return n<e.length?-1:n<t.length?1:0}},{key:"minCoordinate",value:function(t){for(var e=null,n=0;n<t.length;n++)(null===e||e.compareTo(t[n])>0)&&(e=t[n]);return e}},{key:"extract",value:function(t,e,n){e=Zn.clamp(e,0,t.length);var i=(n=Zn.clamp(n,-1,t.length))-e+1;n<0&&(i=0),e>=t.length&&(i=0),n<e&&(i=0);var a=new Array(i).fill(null);if(0===i)return a;for(var c=0,f=e;f<=n;f++)a[c++]=t[f];return a}}])}(),wi=x(function r(){N(this,r)},[{key:"compare",value:function(r,t){return ce.compare(r,t)}},{key:"interfaces_",get:function(){return[Vn]}}]),Ci=x(function r(){N(this,r)},[{key:"compare",value:function(r,t){var e=r,n=t;if(e.length<n.length)return-1;if(e.length>n.length)return 1;if(0===e.length)return 0;var i=ce.compare(e,n);return ce.isEqualReversed(e,n)?0:i}},{key:"OLDcompare",value:function(r,t){var e=r,n=t;if(e.length<n.length)return-1;if(e.length>n.length)return 1;if(0===e.length)return 0;for(var i=ce.increasingDirection(e),a=ce.increasingDirection(n),c=i>0?0:e.length-1,f=a>0?0:e.length-1,m=0;m<e.length;m++){var E=e[c].compareTo(n[f]);if(0!==E)return E;c+=i,f+=a}return 0}},{key:"interfaces_",get:function(){return[Vn]}}]);ce.ForwardComparator=wi,ce.BidirectionalComparator=Ci,ce.coordArrayType=new Array(0).fill(null);var Wn=x(function r(t){N(this,r),this.str=t},[{key:"append",value:function(r){this.str+=r}},{key:"setCharAt",value:function(r,t){this.str=this.str.substr(0,r)+t+this.str.substr(r+1)}},{key:"toString",value:function(){return this.str}}]),cn=function(){function r(){N(this,r),r.constructor_.apply(this,arguments)}return x(r,[{key:"getM",value:function(t){return this.hasM()?this._coordinates[t].getM():gt.NaN}},{key:"setOrdinate",value:function(t,e,n){switch(e){case Xt.X:this._coordinates[t].x=n;break;case Xt.Y:this._coordinates[t].y=n;break;default:this._coordinates[t].setOrdinate(e,n)}}},{key:"getZ",value:function(t){return this.hasZ()?this._coordinates[t].getZ():gt.NaN}},{key:"size",value:function(){return this._coordinates.length}},{key:"getOrdinate",value:function(t,e){switch(e){case Xt.X:return this._coordinates[t].x;case Xt.Y:return this._coordinates[t].y;default:return this._coordinates[t].getOrdinate(e)}}},{key:"getCoordinate",value:function(){if(1===arguments.length)return this._coordinates[arguments[0]];2===arguments.length&&arguments[1].setCoordinate(this._coordinates[arguments[0]])}},{key:"getCoordinateCopy",value:function(t){var e=this.createCoordinate();return e.setCoordinate(this._coordinates[t]),e}},{key:"createCoordinate",value:function(){return Cr.create(this.getDimension(),this.getMeasures())}},{key:"getDimension",value:function(){return this._dimension}},{key:"getX",value:function(t){return this._coordinates[t].x}},{key:"getMeasures",value:function(){return this._measures}},{key:"expandEnvelope",value:function(t){for(var e=0;e<this._coordinates.length;e++)t.expandToInclude(this._coordinates[e]);return t}},{key:"copy",value:function(){for(var t=new Array(this.size()).fill(null),e=0;e<this._coordinates.length;e++){var n=this.createCoordinate();n.setCoordinate(this._coordinates[e]),t[e]=n}return new r(t,this._dimension,this._measures)}},{key:"toString",value:function(){if(this._coordinates.length>0){var t=new Wn(17*this._coordinates.length);t.append("("),t.append(this._coordinates[0]);for(var e=1;e<this._coordinates.length;e++)t.append(", "),t.append(this._coordinates[e]);return t.append(")"),t.toString()}return"()"}},{key:"getY",value:function(t){return this._coordinates[t].y}},{key:"toCoordinateArray",value:function(){return this._coordinates}},{key:"interfaces_",get:function(){return[Xt,ct]}}],[{key:"constructor_",value:function(){if(this._dimension=3,this._measures=0,this._coordinates=null,1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];r.constructor_.call(this,t,ce.dimension(t),ce.measures(t))}else if(Number.isInteger(arguments[0])){var e=arguments[0];this._coordinates=new Array(e).fill(null);for(var n=0;n<e;n++)this._coordinates[n]=new D}else if(Ot(arguments[0],Xt)){var i=arguments[0];if(null===i)return this._coordinates=new Array(0).fill(null),null;this._dimension=i.getDimension(),this._measures=i.getMeasures(),this._coordinates=new Array(i.size()).fill(null);for(var a=0;a<this._coordinates.length;a++)this._coordinates[a]=i.getCoordinateCopy(a)}}else if(2===arguments.length){if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var c=arguments[0];r.constructor_.call(this,c,arguments[1],ce.measures(c))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var m=arguments[0],E=arguments[1];this._coordinates=new Array(m).fill(null),this._dimension=E;for(var O=0;O<m;O++)this._coordinates[O]=Cr.create(E)}}else if(3===arguments.length)if(Number.isInteger(arguments[2])&&arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var P=arguments[0],tt=arguments[2];this._dimension=arguments[1],this._measures=tt,this._coordinates=null===P?new Array(0).fill(null):P}else if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var ut=arguments[0],ht=arguments[1],Bt=arguments[2];this._coordinates=new Array(ut).fill(null),this._dimension=ht,this._measures=Bt;for(var Yt=0;Yt<ut;Yt++)this._coordinates[Yt]=this.createCoordinate()}}}])}(),An=function(){function r(){N(this,r)}return x(r,[{key:"readResolve",value:function(){return r.instance()}},{key:"create",value:function(){if(1===arguments.length){if(arguments[0]instanceof Array)return new cn(arguments[0]);if(Ot(arguments[0],Xt))return new cn(arguments[0])}else{if(2===arguments.length){var t=arguments[1];return t>3&&(t=3),t<2&&(t=2),new cn(arguments[0],t)}if(3===arguments.length){var e=arguments[2],n=arguments[1]-e;return e>1&&(e=1),n>3&&(n=3),n<2&&(n=2),new cn(arguments[0],n+e,e)}}}},{key:"interfaces_",get:function(){return[xr,ct]}}],[{key:"instance",value:function(){return r.instanceObject}}])}();An.instanceObject=new An;var He=function(r){function t(){var e;return N(this,t),e=q(this,t),t.constructor_.apply(e,arguments),e}return ot(t,r),x(t,[{key:"copyInternal",value:function(){for(var e=new Array(this._geometries.length).fill(null),n=0;n<e.length;n++)e[n]=this._geometries[n].copy();return new t(e,this._factory)}},{key:"equalsExact",value:function(){if(2===arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof dt){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&Et(t,"equalsExact",this,1).call(this,e,n)}return Et(t,"equalsExact",this,1).apply(this,arguments)}},{key:"getBoundaryDimension",value:function(){return 1}},{key:"getTypeCode",value:function(){return dt.TYPECODE_MULTIPOLYGON}},{key:"getDimension",value:function(){return 2}},{key:"getBoundary",value:function(){if(this.isEmpty())return this.getFactory().createMultiLineString();for(var e=new vt,n=0;n<this._geometries.length;n++)for(var i=this._geometries[n].getBoundary(),a=0;a<i.getNumGeometries();a++)e.add(i.getGeometryN(a));var c=new Array(e.size()).fill(null);return this.getFactory().createMultiLineString(e.toArray(c))}},{key:"getGeometryType",value:function(){return dt.TYPENAME_MULTIPOLYGON}},{key:"interfaces_",get:function(){return[zr]}}],[{key:"constructor_",value:function(){Fe.constructor_.call(this,arguments[0],arguments[1])}}])}(Fe),jn=x(function r(){N(this,r)},[{key:"get",value:function(){}},{key:"put",value:function(){}},{key:"size",value:function(){}},{key:"values",value:function(){}},{key:"entrySet",value:function(){}}]),Ln=function(r){function t(){var e;return N(this,t),(e=q(this,t)).map=new Map,e}return ot(t,r),x(t,[{key:"get",value:function(e){return this.map.get(e)||null}},{key:"put",value:function(e,n){return this.map.set(e,n),n}},{key:"values",value:function(){for(var e=new vt,n=this.map.values(),i=n.next();!i.done;)e.add(i.value),i=n.next();return e}},{key:"entrySet",value:function(){var e=new vr;return this.map.entries().forEach(function(n){return e.add(n)}),e}},{key:"size",value:function(){return this.map.size()}}])}(jn),Ge=function(){function r(){N(this,r),r.constructor_.apply(this,arguments)}return x(r,[{key:"equals",value:function(t){return t instanceof r&&this._modelType===t._modelType&&this._scale===t._scale}},{key:"compareTo",value:function(t){var e=t,n=this.getMaximumSignificantDigits(),i=e.getMaximumSignificantDigits();return vn.compare(n,i)}},{key:"getScale",value:function(){return this._scale}},{key:"isFloating",value:function(){return this._modelType===r.FLOATING||this._modelType===r.FLOATING_SINGLE}},{key:"getType",value:function(){return this._modelType}},{key:"toString",value:function(){var t="UNKNOWN";return this._modelType===r.FLOATING?t="Floating":this._modelType===r.FLOATING_SINGLE?t="Floating-Single":this._modelType===r.FIXED&&(t="Fixed (Scale="+this.getScale()+")"),t}},{key:"makePrecise",value:function(){if("number"==typeof arguments[0]){var t=arguments[0];return gt.isNaN(t)||this._modelType===r.FLOATING_SINGLE?t:this._modelType===r.FIXED?Math.round(t*this._scale)/this._scale:t}if(arguments[0]instanceof D){var e=arguments[0];if(this._modelType===r.FLOATING)return null;e.x=this.makePrecise(e.x),e.y=this.makePrecise(e.y)}}},{key:"getMaximumSignificantDigits",value:function(){var t=16;return this._modelType===r.FLOATING?t=16:this._modelType===r.FLOATING_SINGLE?t=6:this._modelType===r.FIXED&&(t=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),t}},{key:"setScale",value:function(t){this._scale=Math.abs(t)}},{key:"interfaces_",get:function(){return[ct,L]}}],[{key:"constructor_",value:function(){if(this._modelType=null,this._scale=null,0===arguments.length)this._modelType=r.FLOATING;else if(1===arguments.length)if(arguments[0]instanceof Ft){var t=arguments[0];this._modelType=t,t===r.FIXED&&this.setScale(1)}else if("number"==typeof arguments[0]){var e=arguments[0];this._modelType=r.FIXED,this.setScale(e)}else if(arguments[0]instanceof r){var n=arguments[0];this._modelType=n._modelType,this._scale=n._scale}}},{key:"mostPrecise",value:function(t,e){return t.compareTo(e)>=0?t:e}}])}(),Ft=function(){function r(){N(this,r),r.constructor_.apply(this,arguments)}return x(r,[{key:"readResolve",value:function(){return r.nameToTypeMap.get(this._name)}},{key:"toString",value:function(){return this._name}},{key:"interfaces_",get:function(){return[ct]}}],[{key:"constructor_",value:function(){this._name=null;var t=arguments[0];this._name=t,r.nameToTypeMap.put(t,this)}}])}();Ft.nameToTypeMap=new Ln,Ge.Type=Ft,Ge.FIXED=new Ft("FIXED"),Ge.FLOATING=new Ft("FLOATING"),Ge.FLOATING_SINGLE=new Ft("FLOATING SINGLE"),Ge.maximumPreciseValue=9007199254740992;var $n=function(r){function t(){var e;return N(this,t),e=q(this,t),t.constructor_.apply(e,arguments),e}return ot(t,r),x(t,[{key:"copyInternal",value:function(){for(var e=new Array(this._geometries.length).fill(null),n=0;n<e.length;n++)e[n]=this._geometries[n].copy();return new t(e,this._factory)}},{key:"equalsExact",value:function(){if(2===arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof dt){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&Et(t,"equalsExact",this,1).call(this,e,n)}return Et(t,"equalsExact",this,1).apply(this,arguments)}},{key:"getBoundaryDimension",value:function(){return this.isClosed()?$.FALSE:0}},{key:"isClosed",value:function(){if(this.isEmpty())return!1;for(var e=0;e<this._geometries.length;e++)if(!this._geometries[e].isClosed())return!1;return!0}},{key:"getTypeCode",value:function(){return dt.TYPECODE_MULTILINESTRING}},{key:"getDimension",value:function(){return 1}},{key:"getBoundary",value:function(){throw new Je}},{key:"getGeometryType",value:function(){return dt.TYPENAME_MULTILINESTRING}},{key:"interfaces_",get:function(){return[Nr]}}],[{key:"constructor_",value:function(){Fe.constructor_.call(this,arguments[0],arguments[1])}}])}(Fe),St=function(){function r(){N(this,r),r.constructor_.apply(this,arguments)}return x(r,[{key:"createEmpty",value:function(t){switch(t){case-1:return this.createGeometryCollection();case 0:return this.createPoint();case 1:return this.createLineString();case 2:return this.createPolygon();default:throw new j("Invalid dimension: "+t)}}},{key:"toGeometry",value:function(t){return t.isNull()?this.createPoint():t.getMinX()===t.getMaxX()&&t.getMinY()===t.getMaxY()?this.createPoint(new D(t.getMinX(),t.getMinY())):t.getMinX()===t.getMaxX()||t.getMinY()===t.getMaxY()?this.createLineString([new D(t.getMinX(),t.getMinY()),new D(t.getMaxX(),t.getMaxY())]):this.createPolygon(this.createLinearRing([new D(t.getMinX(),t.getMinY()),new D(t.getMinX(),t.getMaxY()),new D(t.getMaxX(),t.getMaxY()),new D(t.getMaxX(),t.getMinY()),new D(t.getMinX(),t.getMinY())]),null)}},{key:"createLineString",value:function(){if(0===arguments.length)return this.createLineString(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return this.createLineString(null!==t?this.getCoordinateSequenceFactory().create(t):null)}if(Ot(arguments[0],Xt))return new _n(arguments[0],this)}}},{key:"createMultiLineString",value:function(){return 0===arguments.length?new $n(null,this):1===arguments.length?new $n(arguments[0],this):void 0}},{key:"buildGeometry",value:function(t){for(var e=null,n=!1,i=!1,a=t.iterator();a.hasNext();){var c=a.next(),f=c.getTypeCode();null===e&&(e=f),f!==e&&(n=!0),c instanceof Fe&&(i=!0)}if(null===e)return this.createGeometryCollection();if(n||i)return this.createGeometryCollection(r.toGeometryArray(t));var m=t.iterator().next();if(t.size()>1){if(m instanceof Hn)return this.createMultiPolygon(r.toPolygonArray(t));if(m instanceof _n)return this.createMultiLineString(r.toLineStringArray(t));if(m instanceof ln)return this.createMultiPoint(r.toPointArray(t));Dt.shouldNeverReachHere("Unhandled geometry type: "+m.getGeometryType())}return m}},{key:"createMultiPointFromCoords",value:function(t){return this.createMultiPoint(null!==t?this.getCoordinateSequenceFactory().create(t):null)}},{key:"createPoint",value:function(){if(0===arguments.length)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof D){var t=arguments[0];return this.createPoint(null!==t?this.getCoordinateSequenceFactory().create([t]):null)}if(Ot(arguments[0],Xt))return new ln(arguments[0],this)}}},{key:"getCoordinateSequenceFactory",value:function(){return this._coordinateSequenceFactory}},{key:"createPolygon",value:function(){if(0===arguments.length)return this.createPolygon(null,null);if(1===arguments.length){if(Ot(arguments[0],Xt))return this.createPolygon(this.createLinearRing(arguments[0]));if(arguments[0]instanceof Array)return this.createPolygon(this.createLinearRing(arguments[0]));if(arguments[0]instanceof ur)return this.createPolygon(arguments[0],null)}else if(2===arguments.length)return new Hn(arguments[0],arguments[1],this)}},{key:"getSRID",value:function(){return this._SRID}},{key:"createGeometryCollection",value:function(){return 0===arguments.length?new Fe(null,this):1===arguments.length?new Fe(arguments[0],this):void 0}},{key:"getPrecisionModel",value:function(){return this._precisionModel}},{key:"createLinearRing",value:function(){if(0===arguments.length)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return this.createLinearRing(null!==t?this.getCoordinateSequenceFactory().create(t):null)}if(Ot(arguments[0],Xt))return new ur(arguments[0],this)}}},{key:"createMultiPolygon",value:function(){return 0===arguments.length?new He(null,this):1===arguments.length?new He(arguments[0],this):void 0}},{key:"createMultiPoint",value:function(){if(0===arguments.length)return new Ue(null,this);if(1===arguments.length){if(arguments[0]instanceof Array)return new Ue(arguments[0],this);if(Ot(arguments[0],Xt)){var t=arguments[0];if(null===t)return this.createMultiPoint(new Array(0).fill(null));for(var e=new Array(t.size()).fill(null),n=0;n<t.size();n++){var i=this.getCoordinateSequenceFactory().create(1,t.getDimension(),t.getMeasures());Ze.copy(t,n,i,0,1),e[n]=this.createPoint(i)}return this.createMultiPoint(e)}}}},{key:"interfaces_",get:function(){return[ct]}}],[{key:"constructor_",value:function(){if(this._precisionModel=null,this._coordinateSequenceFactory=null,this._SRID=null,0===arguments.length)r.constructor_.call(this,new Ge,0);else if(1===arguments.length)if(Ot(arguments[0],xr)){var t=arguments[0];r.constructor_.call(this,new Ge,0,t)}else arguments[0]instanceof Ge&&r.constructor_.call(this,arguments[0],0,r.getDefaultCoordinateSequenceFactory());else if(2===arguments.length)r.constructor_.call(this,arguments[0],arguments[1],r.getDefaultCoordinateSequenceFactory());else if(3===arguments.length){var c=arguments[1],f=arguments[2];this._precisionModel=arguments[0],this._coordinateSequenceFactory=f,this._SRID=c}}},{key:"toMultiPolygonArray",value:function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)}},{key:"toGeometryArray",value:function(t){if(null===t)return null;var e=new Array(t.size()).fill(null);return t.toArray(e)}},{key:"getDefaultCoordinateSequenceFactory",value:function(){return An.instance()}},{key:"toMultiLineStringArray",value:function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)}},{key:"toLineStringArray",value:function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)}},{key:"toMultiPointArray",value:function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)}},{key:"toLinearRingArray",value:function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)}},{key:"toPointArray",value:function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)}},{key:"toPolygonArray",value:function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)}},{key:"createPointFromInternalCoord",value:function(t,e){return e.getPrecisionModel().makePrecise(t),e.getFactory().createPoint(t)}}])}(),Ut={POINT:"Point",LINE_STRING:"LineString",LINEAR_RING:"LinearRing",POLYGON:"Polygon",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon",GEOMETRY_COLLECTION:"GeometryCollection",CIRCLE:"Circle"};for(var Or in Ut)Ut[Or].toUpperCase();var ii=x(function r(t){N(this,r),this.wkt=t,this.index_=-1},[{key:"isAlpha_",value:function(r){return r>="a"&&r<="z"||r>="A"&&r<="Z"}},{key:"isNumeric_",value:function(r,t){return r>="0"&&r<="9"||"."==r&&!(void 0!==t&&t)}},{key:"isWhiteSpace_",value:function(r){return" "==r||"\t"==r||"\r"==r||"\n"==r}},{key:"nextChar_",value:function(){return this.wkt.charAt(++this.index_)}},{key:"nextToken",value:function(){var r,t=this.nextChar_(),e=this.index_,n=t;if("("==t)r=2;else if(","==t)r=5;else if(")"==t)r=3;else if(this.isNumeric_(t)||"-"==t)r=4,n=this.readNumber_();else if(this.isAlpha_(t))r=1,n=this.readText_();else{if(this.isWhiteSpace_(t))return this.nextToken();if(""!==t)throw new Error("Unexpected character: "+t);r=6}return{position:e,value:n,type:r}}},{key:"readNumber_",value:function(){var r,t=this.index_,e=!1,n=!1;do{"."==r?e=!0:"e"!=r&&"E"!=r||(n=!0),r=this.nextChar_()}while(this.isNumeric_(r,e)||!n&&("e"==r||"E"==r)||n&&("-"==r||"+"==r));return parseFloat(this.wkt.substring(t,this.index_--))}},{key:"readText_",value:function(){var r,t=this.index_;do{r=this.nextChar_()}while(this.isAlpha_(r));return this.wkt.substring(t,this.index_--).toUpperCase()}}]),mt=x(function r(t,e){N(this,r),this.lexer_=t,this.layout_="XY",this.factory=e},[{key:"consume_",value:function(){this.token_=this.lexer_.nextToken()}},{key:"isTokenType",value:function(r){return this.token_.type==r}},{key:"match",value:function(r){var t=this.isTokenType(r);return t&&this.consume_(),t}},{key:"parse",value:function(){return this.consume_(),this.parseGeometry_()}},{key:"parseGeometryLayout_",value:function(){var r="XY",t=this.token_;if(this.isTokenType(1)){var e=t.value;"Z"===e?r="XYZ":"M"===e?r="XYM":"ZM"===e&&(r="XYZM"),"XY"!==r&&this.consume_()}return r}},{key:"parseGeometryCollectionText_",value:function(){if(this.match(2)){var r=[];do{r.push(this.parseGeometry_())}while(this.match(5));if(this.match(3))return r}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parsePointText_",value:function(){if(this.match(2)){var r=this.parsePoint_();if(this.match(3))return r}else if(this.isEmptyGeometry_())return null;throw new Error(this.formatErrorMessage_())}},{key:"parseLineStringText_",value:function(){if(this.match(2)){var r=this.parsePointList_();if(this.match(3))return r}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parsePolygonText_",value:function(){if(this.match(2)){var r=this.parseLineStringTextList_();if(this.match(3))return r}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parseMultiPointText_",value:function(){var r;if(this.match(2)){if(r=2==this.token_.type?this.parsePointTextList_():this.parsePointList_(),this.match(3))return r}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parseMultiLineStringText_",value:function(){if(this.match(2)){var r=this.parseLineStringTextList_();if(this.match(3))return r}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parseMultiPolygonText_",value:function(){if(this.match(2)){var r=this.parsePolygonTextList_();if(this.match(3))return r}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parsePoint_",value:function(){for(var r=[],t=this.layout_.length,e=0;e<t;++e){var n=this.token_;if(!this.match(4))break;r.push(n.value)}if(r.length==t)return r;throw new Error(this.formatErrorMessage_())}},{key:"parsePointList_",value:function(){for(var r=[this.parsePoint_()];this.match(5);)r.push(this.parsePoint_());return r}},{key:"parsePointTextList_",value:function(){for(var r=[this.parsePointText_()];this.match(5);)r.push(this.parsePointText_());return r}},{key:"parseLineStringTextList_",value:function(){for(var r=[this.parseLineStringText_()];this.match(5);)r.push(this.parseLineStringText_());return r}},{key:"parsePolygonTextList_",value:function(){for(var r=[this.parsePolygonText_()];this.match(5);)r.push(this.parsePolygonText_());return r}},{key:"isEmptyGeometry_",value:function(){var r=this.isTokenType(1)&&"EMPTY"==this.token_.value;return r&&this.consume_(),r}},{key:"formatErrorMessage_",value:function(){return"Unexpected `"+this.token_.value+"` at position "+this.token_.position+" in `"+this.lexer_.wkt+"`"}},{key:"parseGeometry_",value:function(){var r=this.factory,t=function(ht){return J(D,ge(ht))},e=function(ht){var Bt=ht.map(function(Yt){return r.createLinearRing(Yt.map(t))});return Bt.length>1?r.createPolygon(Bt[0],Bt.slice(1)):r.createPolygon(Bt[0])},n=this.token_;if(this.match(1)){var i=n.value;if(this.layout_=this.parseGeometryLayout_(),"GEOMETRYCOLLECTION"==i){var a=this.parseGeometryCollectionText_();return r.createGeometryCollection(a)}switch(i){case"POINT":var c=this.parsePointText_();return c?r.createPoint(J(D,ge(c))):r.createPoint();case"LINESTRING":var f=this.parseLineStringText_().map(t);return r.createLineString(f);case"LINEARRING":var m=this.parseLineStringText_().map(t);return r.createLinearRing(m);case"POLYGON":var E=this.parsePolygonText_();return E&&0!==E.length?e(E):r.createPolygon();case"MULTIPOINT":var O=this.parseMultiPointText_();if(!O||0===O.length)return r.createMultiPoint();var P=O.map(t).map(function(ht){return r.createPoint(ht)});return r.createMultiPoint(P);case"MULTILINESTRING":var z=this.parseMultiLineStringText_().map(function(ht){return r.createLineString(ht.map(t))});return r.createMultiLineString(z);case"MULTIPOLYGON":var tt=this.parseMultiPolygonText_();if(!tt||0===tt.length)return r.createMultiPolygon();var ut=tt.map(e);return r.createMultiPolygon(ut);default:throw new Error("Invalid geometry type: "+i)}}throw new Error(this.formatErrorMessage_())}}]);function Xr(r){if(r.isEmpty())return"";var t=r.getCoordinate(),e=[t.x,t.y];return void 0===t.z||Number.isNaN(t.z)||e.push(t.z),void 0===t.m||Number.isNaN(t.m)||e.push(t.m),e.join(" ")}function xe(r){for(var t=r.getCoordinates().map(function(a){var c=[a.x,a.y];return void 0===a.z||Number.isNaN(a.z)||c.push(a.z),void 0===a.m||Number.isNaN(a.m)||c.push(a.m),c}),e=[],n=0,i=t.length;n<i;++n)e.push(t[n].join(" "));return e.join(", ")}function Rr(r){var t=[];t.push("("+xe(r.getExteriorRing())+")");for(var e=0,n=r.getNumInteriorRing();e<n;++e)t.push("("+xe(r.getInteriorRingN(e))+")");return t.join(", ")}var si={Point:Xr,LineString:xe,LinearRing:xe,Polygon:Rr,MultiPoint:function(r){for(var t=[],e=0,n=r.getNumGeometries();e<n;++e)t.push("("+Xr(r.getGeometryN(e))+")");return t.join(", ")},MultiLineString:function(r){for(var t=[],e=0,n=r.getNumGeometries();e<n;++e)t.push("("+xe(r.getGeometryN(e))+")");return t.join(", ")},MultiPolygon:function(r){for(var t=[],e=0,n=r.getNumGeometries();e<n;++e)t.push("("+Rr(r.getGeometryN(e))+")");return t.join(", ")},GeometryCollection:function(r){for(var t=[],e=0,n=r.getNumGeometries();e<n;++e)t.push(We(r.getGeometryN(e)));return t.join(", ")}};function We(r){var t=r.getGeometryType(),e=si[t];t=t.toUpperCase();var n=function(i){var a="";if(i.isEmpty())return a;var c=i.getCoordinate();return void 0===c.z||Number.isNaN(c.z)||(a+="Z"),void 0===c.m||Number.isNaN(c.m)||(a+="M"),a}(r);return n.length>0&&(t+=" "+n),r.isEmpty()?t+" EMPTY":t+" ("+e(r)+")"}var Ri=x(function r(t){N(this,r),this.geometryFactory=t||new St,this.precisionModel=this.geometryFactory.getPrecisionModel()},[{key:"read",value:function(r){var t=new ii(r);return new mt(t,this.geometryFactory).parse()}},{key:"write",value:function(r){return We(r)}}]),te=x(function r(t){N(this,r),this.parser=new Ri(t)},[{key:"write",value:function(r){return this.parser.write(r)}}],[{key:"toLineString",value:function(r,t){if(2!==arguments.length)throw new Error("Not implemented");return"LINESTRING ( "+r.x+" "+r.y+", "+t.x+" "+t.y+" )"}}]),Wt=function(){function r(){N(this,r),r.constructor_.apply(this,arguments)}return x(r,[{key:"getIndexAlongSegment",value:function(t,e){return this.computeIntLineIndex(),this._intLineIndex[t][e]}},{key:"getTopologySummary",value:function(){var t=new Wn;return this.isEndPoint()&&t.append(" endpoint"),this._isProper&&t.append(" proper"),this.isCollinear()&&t.append(" collinear"),t.toString()}},{key:"computeIntersection",value:function(t,e,n,i){this._inputLines[0][0]=t,this._inputLines[0][1]=e,this._inputLines[1][0]=n,this._inputLines[1][1]=i,this._result=this.computeIntersect(t,e,n,i)}},{key:"getIntersectionNum",value:function(){return this._result}},{key:"computeIntLineIndex",value:function(){if(0===arguments.length)null===this._intLineIndex&&(this._intLineIndex=Array(2).fill().map(function(){return Array(2)}),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(1===arguments.length){var t=arguments[0];this.getEdgeDistance(t,0)>this.getEdgeDistance(t,1)?(this._intLineIndex[t][0]=0,this._intLineIndex[t][1]=1):(this._intLineIndex[t][0]=1,this._intLineIndex[t][1]=0)}}},{key:"isProper",value:function(){return this.hasIntersection()&&this._isProper}},{key:"setPrecisionModel",value:function(t){this._precisionModel=t}},{key:"isInteriorIntersection",value:function(){if(0===arguments.length)return!!this.isInteriorIntersection(0)||!!this.isInteriorIntersection(1);if(1===arguments.length){for(var t=arguments[0],e=0;e<this._result;e++)if(!this._intPt[e].equals2D(this._inputLines[t][0])&&!this._intPt[e].equals2D(this._inputLines[t][1]))return!0;return!1}}},{key:"getIntersection",value:function(t){return this._intPt[t]}},{key:"isEndPoint",value:function(){return this.hasIntersection()&&!this._isProper}},{key:"hasIntersection",value:function(){return this._result!==r.NO_INTERSECTION}},{key:"getEdgeDistance",value:function(t,e){return r.computeEdgeDistance(this._intPt[e],this._inputLines[t][0],this._inputLines[t][1])}},{key:"isCollinear",value:function(){return this._result===r.COLLINEAR_INTERSECTION}},{key:"toString",value:function(){return te.toLineString(this._inputLines[0][0],this._inputLines[0][1])+" - "+te.toLineString(this._inputLines[1][0],this._inputLines[1][1])+this.getTopologySummary()}},{key:"getEndpoint",value:function(t,e){return this._inputLines[t][e]}},{key:"isIntersection",value:function(t){for(var e=0;e<this._result;e++)if(this._intPt[e].equals2D(t))return!0;return!1}},{key:"getIntersectionAlongSegment",value:function(t,e){return this.computeIntLineIndex(),this._intPt[this._intLineIndex[t][e]]}}],[{key:"constructor_",value:function(){this._result=null,this._inputLines=Array(2).fill().map(function(){return Array(2)}),this._intPt=new Array(2).fill(null),this._intLineIndex=null,this._isProper=null,this._pa=null,this._pb=null,this._precisionModel=null,this._intPt[0]=new D,this._intPt[1]=new D,this._pa=this._intPt[0],this._pb=this._intPt[1],this._result=0}},{key:"computeEdgeDistance",value:function(t,e,n){var i=Math.abs(n.x-e.x),a=Math.abs(n.y-e.y),c=-1;if(t.equals(e))c=0;else if(t.equals(n))c=i>a?i:a;else{var f=Math.abs(t.x-e.x),m=Math.abs(t.y-e.y);0!==(c=i>a?f:m)||t.equals(e)||(c=Math.max(f,m))}return Dt.isTrue(!(0===c&&!t.equals(e)),"Bad distance calculation"),c}},{key:"nonRobustComputeEdgeDistance",value:function(t,e,n){var i=t.x-e.x,a=t.y-e.y,c=Math.sqrt(i*i+a*a);return Dt.isTrue(!(0===c&&!t.equals(e)),"Invalid distance calculation"),c}}])}();Wt.DONT_INTERSECT=0,Wt.DO_INTERSECT=1,Wt.COLLINEAR=2,Wt.NO_INTERSECTION=0,Wt.POINT_INTERSECTION=1,Wt.COLLINEAR_INTERSECTION=2;var nn=function(r){function t(){return N(this,t),q(this,t)}return ot(t,r),x(t,[{key:"isInSegmentEnvelopes",value:function(e){var n=new Kt(this._inputLines[0][0],this._inputLines[0][1]),i=new Kt(this._inputLines[1][0],this._inputLines[1][1]);return n.contains(e)&&i.contains(e)}},{key:"computeIntersection",value:function(){if(3!==arguments.length)return Et(t,"computeIntersection",this,1).apply(this,arguments);var e=arguments[0],n=arguments[1],i=arguments[2];if(this._isProper=!1,Kt.intersects(n,i,e)&&0===xt.index(n,i,e)&&0===xt.index(i,n,e))return this._isProper=!0,(e.equals(n)||e.equals(i))&&(this._isProper=!1),this._result=Wt.POINT_INTERSECTION,null;this._result=Wt.NO_INTERSECTION}},{key:"intersection",value:function(e,n,i,a){var c=this.intersectionSafe(e,n,i,a);return this.isInSegmentEnvelopes(c)||(c=new D(t.nearestEndpoint(e,n,i,a))),null!==this._precisionModel&&this._precisionModel.makePrecise(c),c}},{key:"checkDD",value:function(e,n,i,a,c){var f=Rn.intersection(e,n,i,a),m=this.isInSegmentEnvelopes(f);we.out.println("DD in env = "+m+"  --------------------- "+f),c.distance(f)>1e-4&&we.out.println("Distance = "+c.distance(f))}},{key:"intersectionSafe",value:function(e,n,i,a){var c=or.intersection(e,n,i,a);return null===c&&(c=t.nearestEndpoint(e,n,i,a)),c}},{key:"computeCollinearIntersection",value:function(e,n,i,a){var c=Kt.intersects(e,n,i),f=Kt.intersects(e,n,a),m=Kt.intersects(i,a,e),E=Kt.intersects(i,a,n);return c&&f?(this._intPt[0]=i,this._intPt[1]=a,Wt.COLLINEAR_INTERSECTION):m&&E?(this._intPt[0]=e,this._intPt[1]=n,Wt.COLLINEAR_INTERSECTION):c&&m?(this._intPt[0]=i,this._intPt[1]=e,!i.equals(e)||f||E?Wt.COLLINEAR_INTERSECTION:Wt.POINT_INTERSECTION):c&&E?(this._intPt[0]=i,this._intPt[1]=n,!i.equals(n)||f||m?Wt.COLLINEAR_INTERSECTION:Wt.POINT_INTERSECTION):f&&m?(this._intPt[0]=a,this._intPt[1]=e,!a.equals(e)||c||E?Wt.COLLINEAR_INTERSECTION:Wt.POINT_INTERSECTION):f&&E?(this._intPt[0]=a,this._intPt[1]=n,!a.equals(n)||c||m?Wt.COLLINEAR_INTERSECTION:Wt.POINT_INTERSECTION):Wt.NO_INTERSECTION}},{key:"computeIntersect",value:function(e,n,i,a){if(this._isProper=!1,!Kt.intersects(e,n,i,a))return Wt.NO_INTERSECTION;var c=xt.index(e,n,i),f=xt.index(e,n,a);if(c>0&&f>0||c<0&&f<0)return Wt.NO_INTERSECTION;var m=xt.index(i,a,e),E=xt.index(i,a,n);return m>0&&E>0||m<0&&E<0?Wt.NO_INTERSECTION:0===c&&0===f&&0===m&&0===E?this.computeCollinearIntersection(e,n,i,a):(0===c||0===f||0===m||0===E?(this._isProper=!1,e.equals2D(i)||e.equals2D(a)?this._intPt[0]=e:n.equals2D(i)||n.equals2D(a)?this._intPt[0]=n:0===c?this._intPt[0]=new D(i):0===f?this._intPt[0]=new D(a):0===m?this._intPt[0]=new D(e):0===E&&(this._intPt[0]=new D(n))):(this._isProper=!0,this._intPt[0]=this.intersection(e,n,i,a)),Wt.POINT_INTERSECTION)}}],[{key:"nearestEndpoint",value:function(e,n,i,a){var c=e,f=ne.pointToSegment(e,i,a),m=ne.pointToSegment(n,i,a);return m<f&&(f=m,c=n),(m=ne.pointToSegment(i,e,n))<f&&(f=m,c=i),(m=ne.pointToSegment(a,e,n))<f&&(f=m,c=a),c}}])}(Wt),Jn=function(){function r(){N(this,r),r.constructor_.apply(this,arguments)}return x(r,[{key:"countSegment",value:function(t,e){if(t.x<this._p.x&&e.x<this._p.x)return null;if(this._p.x===e.x&&this._p.y===e.y)return this._isPointOnSegment=!0,null;if(t.y===this._p.y&&e.y===this._p.y){var n=t.x,i=e.x;return n>i&&(n=e.x,i=t.x),this._p.x>=n&&this._p.x<=i&&(this._isPointOnSegment=!0),null}if(t.y>this._p.y&&e.y<=this._p.y||e.y>this._p.y&&t.y<=this._p.y){var a=xt.index(t,e,this._p);if(a===xt.COLLINEAR)return this._isPointOnSegment=!0,null;e.y<t.y&&(a=-a),a===xt.LEFT&&this._crossingCount++}}},{key:"isPointInPolygon",value:function(){return this.getLocation()!==I.EXTERIOR}},{key:"getLocation",value:function(){return this._isPointOnSegment?I.BOUNDARY:this._crossingCount%2==1?I.INTERIOR:I.EXTERIOR}},{key:"isOnSegment",value:function(){return this._isPointOnSegment}}],[{key:"constructor_",value:function(){this._p=null,this._crossingCount=0,this._isPointOnSegment=!1,this._p=arguments[0]}},{key:"locatePointInRing",value:function(){if(arguments[0]instanceof D&&Ot(arguments[1],Xt)){for(var t=arguments[1],e=new r(arguments[0]),n=new D,i=new D,a=1;a<t.size();a++)if(t.getCoordinate(a,n),t.getCoordinate(a-1,i),e.countSegment(n,i),e.isOnSegment())return e.getLocation();return e.getLocation()}if(arguments[0]instanceof D&&arguments[1]instanceof Array){for(var c=arguments[1],f=new r(arguments[0]),m=1;m<c.length;m++)if(f.countSegment(c[m],c[m-1]),f.isOnSegment())return f.getLocation();return f.getLocation()}}}])}(),Pn=function(){function r(){N(this,r)}return x(r,null,[{key:"isOnLine",value:function(){if(arguments[0]instanceof D&&Ot(arguments[1],Xt)){for(var t=arguments[0],e=arguments[1],n=new nn,i=new D,a=new D,c=e.size(),f=1;f<c;f++)if(e.getCoordinate(f-1,i),e.getCoordinate(f,a),n.computeIntersection(t,i,a),n.hasIntersection())return!0;return!1}if(arguments[0]instanceof D&&arguments[1]instanceof Array){for(var m=arguments[0],E=arguments[1],O=new nn,P=1;P<E.length;P++)if(O.computeIntersection(m,E[P-1],E[P]),O.hasIntersection())return!0;return!1}}},{key:"locateInRing",value:function(t,e){return Jn.locatePointInRing(t,e)}},{key:"isInRing",value:function(t,e){return r.locateInRing(t,e)!==I.EXTERIOR}}])}(),Ne=function(){function r(){N(this,r),r.constructor_.apply(this,arguments)}return x(r,[{key:"setAllLocations",value:function(t){for(var e=0;e<this.location.length;e++)this.location[e]=t}},{key:"isNull",value:function(){for(var t=0;t<this.location.length;t++)if(this.location[t]!==I.NONE)return!1;return!0}},{key:"setAllLocationsIfNull",value:function(t){for(var e=0;e<this.location.length;e++)this.location[e]===I.NONE&&(this.location[e]=t)}},{key:"isLine",value:function(){return 1===this.location.length}},{key:"merge",value:function(t){if(t.location.length>this.location.length){var e=new Array(3).fill(null);e[Z.ON]=this.location[Z.ON],e[Z.LEFT]=I.NONE,e[Z.RIGHT]=I.NONE,this.location=e}for(var n=0;n<this.location.length;n++)this.location[n]===I.NONE&&n<t.location.length&&(this.location[n]=t.location[n])}},{key:"getLocations",value:function(){return this.location}},{key:"flip",value:function(){if(this.location.length<=1)return null;var t=this.location[Z.LEFT];this.location[Z.LEFT]=this.location[Z.RIGHT],this.location[Z.RIGHT]=t}},{key:"toString",value:function(){var t=new On;return this.location.length>1&&t.append(I.toLocationSymbol(this.location[Z.LEFT])),t.append(I.toLocationSymbol(this.location[Z.ON])),this.location.length>1&&t.append(I.toLocationSymbol(this.location[Z.RIGHT])),t.toString()}},{key:"setLocations",value:function(t,e,n){this.location[Z.ON]=t,this.location[Z.LEFT]=e,this.location[Z.RIGHT]=n}},{key:"get",value:function(t){return t<this.location.length?this.location[t]:I.NONE}},{key:"isArea",value:function(){return this.location.length>1}},{key:"isAnyNull",value:function(){for(var t=0;t<this.location.length;t++)if(this.location[t]===I.NONE)return!0;return!1}},{key:"setLocation",value:function(){1===arguments.length?this.setLocation(Z.ON,arguments[0]):2===arguments.length&&(this.location[arguments[0]]=arguments[1])}},{key:"init",value:function(t){this.location=new Array(t).fill(null),this.setAllLocations(I.NONE)}},{key:"isEqualOnSide",value:function(t,e){return this.location[e]===t.location[e]}},{key:"allPositionsEqual",value:function(t){for(var e=0;e<this.location.length;e++)if(this.location[e]!==t)return!1;return!0}}],[{key:"constructor_",value:function(){if(this.location=null,1===arguments.length){if(arguments[0]instanceof Array)this.init(arguments[0].length);else if(Number.isInteger(arguments[0])){var e=arguments[0];this.init(1),this.location[Z.ON]=e}else if(arguments[0]instanceof r){var n=arguments[0];if(this.init(n.location.length),null!==n)for(var i=0;i<this.location.length;i++)this.location[i]=n.location[i]}}else if(3===arguments.length){var a=arguments[0],c=arguments[1],f=arguments[2];this.init(3),this.location[Z.ON]=a,this.location[Z.LEFT]=c,this.location[Z.RIGHT]=f}}}])}(),Ae=function(){function r(){N(this,r),r.constructor_.apply(this,arguments)}return x(r,[{key:"getGeometryCount",value:function(){var t=0;return this.elt[0].isNull()||t++,this.elt[1].isNull()||t++,t}},{key:"setAllLocations",value:function(t,e){this.elt[t].setAllLocations(e)}},{key:"isNull",value:function(t){return this.elt[t].isNull()}},{key:"setAllLocationsIfNull",value:function(){if(1===arguments.length){var t=arguments[0];this.setAllLocationsIfNull(0,t),this.setAllLocationsIfNull(1,t)}else 2===arguments.length&&this.elt[arguments[0]].setAllLocationsIfNull(arguments[1])}},{key:"isLine",value:function(t){return this.elt[t].isLine()}},{key:"merge",value:function(t){for(var e=0;e<2;e++)null===this.elt[e]&&null!==t.elt[e]?this.elt[e]=new Ne(t.elt[e]):this.elt[e].merge(t.elt[e])}},{key:"flip",value:function(){this.elt[0].flip(),this.elt[1].flip()}},{key:"getLocation",value:function(){return 1===arguments.length?this.elt[arguments[0]].get(Z.ON):2===arguments.length?this.elt[arguments[0]].get(arguments[1]):void 0}},{key:"toString",value:function(){var t=new On;return null!==this.elt[0]&&(t.append("A:"),t.append(this.elt[0].toString())),null!==this.elt[1]&&(t.append(" B:"),t.append(this.elt[1].toString())),t.toString()}},{key:"isArea",value:function(){return 0===arguments.length?this.elt[0].isArea()||this.elt[1].isArea():1===arguments.length?this.elt[arguments[0]].isArea():void 0}},{key:"isAnyNull",value:function(t){return this.elt[t].isAnyNull()}},{key:"setLocation",value:function(){2===arguments.length?this.elt[arguments[0]].setLocation(Z.ON,arguments[1]):3===arguments.length&&this.elt[arguments[0]].setLocation(arguments[1],arguments[2])}},{key:"isEqualOnSide",value:function(t,e){return this.elt[0].isEqualOnSide(t.elt[0],e)&&this.elt[1].isEqualOnSide(t.elt[1],e)}},{key:"allPositionsEqual",value:function(t,e){return this.elt[t].allPositionsEqual(e)}},{key:"toLine",value:function(t){this.elt[t].isArea()&&(this.elt[t]=new Ne(this.elt[t].location[0]))}}],[{key:"constructor_",value:function(){if(this.elt=new Array(2).fill(null),1===arguments.length){if(Number.isInteger(arguments[0])){var t=arguments[0];this.elt[0]=new Ne(t),this.elt[1]=new Ne(t)}else if(arguments[0]instanceof r){var e=arguments[0];this.elt[0]=new Ne(e.elt[0]),this.elt[1]=new Ne(e.elt[1])}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];this.elt[0]=new Ne(I.NONE),this.elt[1]=new Ne(I.NONE),this.elt[n].setLocation(i)}else if(3===arguments.length){var a=arguments[0],c=arguments[1],f=arguments[2];this.elt[0]=new Ne(a,c,f),this.elt[1]=new Ne(a,c,f)}else if(4===arguments.length){var m=arguments[0],E=arguments[1],O=arguments[2],P=arguments[3];this.elt[0]=new Ne(I.NONE,I.NONE,I.NONE),this.elt[1]=new Ne(I.NONE,I.NONE,I.NONE),this.elt[m].setLocations(E,O,P)}}},{key:"toLineLabel",value:function(t){for(var e=new r(I.NONE),n=0;n<2;n++)e.setLocation(n,t.getLocation(n));return e}}])}(),fn=x(function r(){N(this,r),r.constructor_.apply(this,arguments)},[{key:"computeRing",value:function(){if(null!==this._ring)return null;for(var r=new Array(this._pts.size()).fill(null),t=0;t<this._pts.size();t++)r[t]=this._pts.get(t);this._ring=this._geometryFactory.createLinearRing(r),this._isHole=xt.isCCW(this._ring.getCoordinates())}},{key:"isIsolated",value:function(){return 1===this._label.getGeometryCount()}},{key:"computePoints",value:function(r){this._startDe=r;var t=r,e=!0;do{if(null===t)throw new B("Found null DirectedEdge");if(t.getEdgeRing()===this)throw new B("Directed Edge visited twice during ring-building at "+t.getCoordinate());this._edges.add(t);var n=t.getLabel();Dt.isTrue(n.isArea()),this.mergeLabel(n),this.addPoints(t.getEdge(),t.isForward(),e),e=!1,this.setEdgeRing(t,this),t=this.getNext(t)}while(t!==this._startDe)}},{key:"getLinearRing",value:function(){return this._ring}},{key:"getCoordinate",value:function(r){return this._pts.get(r)}},{key:"computeMaxNodeDegree",value:function(){this._maxNodeDegree=0;var r=this._startDe;do{var t=r.getNode().getEdges().getOutgoingDegree(this);t>this._maxNodeDegree&&(this._maxNodeDegree=t),r=this.getNext(r)}while(r!==this._startDe);this._maxNodeDegree*=2}},{key:"addPoints",value:function(r,t,e){var n=r.getCoordinates();if(t){var i=1;e&&(i=0);for(var a=i;a<n.length;a++)this._pts.add(n[a])}else{var c=n.length-2;e&&(c=n.length-1);for(var f=c;f>=0;f--)this._pts.add(n[f])}}},{key:"isHole",value:function(){return this._isHole}},{key:"setInResult",value:function(){var r=this._startDe;do{r.getEdge().setInResult(!0),r=r.getNext()}while(r!==this._startDe)}},{key:"containsPoint",value:function(r){var t=this.getLinearRing();if(!t.getEnvelopeInternal().contains(r)||!Pn.isInRing(r,t.getCoordinates()))return!1;for(var e=this._holes.iterator();e.hasNext();)if(e.next().containsPoint(r))return!1;return!0}},{key:"addHole",value:function(r){this._holes.add(r)}},{key:"isShell",value:function(){return null===this._shell}},{key:"getLabel",value:function(){return this._label}},{key:"getEdges",value:function(){return this._edges}},{key:"getMaxNodeDegree",value:function(){return this._maxNodeDegree<0&&this.computeMaxNodeDegree(),this._maxNodeDegree}},{key:"getShell",value:function(){return this._shell}},{key:"mergeLabel",value:function(){if(1===arguments.length){var r=arguments[0];this.mergeLabel(r,0),this.mergeLabel(r,1)}else if(2===arguments.length){var t=arguments[1],e=arguments[0].getLocation(t,Z.RIGHT);if(e===I.NONE)return null;if(this._label.getLocation(t)===I.NONE)return this._label.setLocation(t,e),null}}},{key:"setShell",value:function(r){this._shell=r,null!==r&&r.addHole(this)}},{key:"toPolygon",value:function(r){for(var t=new Array(this._holes.size()).fill(null),e=0;e<this._holes.size();e++)t[e]=this._holes.get(e).getLinearRing();return r.createPolygon(this.getLinearRing(),t)}}],[{key:"constructor_",value:function(){if(this._startDe=null,this._maxNodeDegree=-1,this._edges=new vt,this._pts=new vt,this._label=new Ae(I.NONE),this._ring=null,this._isHole=null,this._shell=null,this._holes=new vt,this._geometryFactory=null,0!==arguments.length&&2===arguments.length){var r=arguments[0];this._geometryFactory=arguments[1],this.computePoints(r),this.computeRing()}}}]),Dn=function(r){function t(){var e;return N(this,t),e=q(this,t),t.constructor_.apply(e,arguments),e}return ot(t,r),x(t,[{key:"setEdgeRing",value:function(e,n){e.setMinEdgeRing(n)}},{key:"getNext",value:function(e){return e.getNextMin()}}],[{key:"constructor_",value:function(){fn.constructor_.call(this,arguments[0],arguments[1])}}])}(fn),tr=function(r){function t(){var e;return N(this,t),e=q(this,t),t.constructor_.apply(e,arguments),e}return ot(t,r),x(t,[{key:"buildMinimalRings",value:function(){var e=new vt,n=this._startDe;do{if(null===n.getMinEdgeRing()){var i=new Dn(n,this._geometryFactory);e.add(i)}n=n.getNext()}while(n!==this._startDe);return e}},{key:"setEdgeRing",value:function(e,n){e.setEdgeRing(n)}},{key:"linkDirectedEdgesForMinimalEdgeRings",value:function(){var e=this._startDe;do{e.getNode().getEdges().linkMinimalDirectedEdges(this),e=e.getNext()}while(e!==this._startDe)}},{key:"getNext",value:function(e){return e.getNext()}}],[{key:"constructor_",value:function(){fn.constructor_.call(this,arguments[0],arguments[1])}}])}(fn),br=x(function r(){N(this,r),r.constructor_.apply(this,arguments)},[{key:"setVisited",value:function(r){this._isVisited=r}},{key:"setInResult",value:function(r){this._isInResult=r}},{key:"isCovered",value:function(){return this._isCovered}},{key:"isCoveredSet",value:function(){return this._isCoveredSet}},{key:"setLabel",value:function(r){this._label=r}},{key:"getLabel",value:function(){return this._label}},{key:"setCovered",value:function(r){this._isCovered=r,this._isCoveredSet=!0}},{key:"updateIM",value:function(r){Dt.isTrue(this._label.getGeometryCount()>=2,"found partial label"),this.computeIM(r)}},{key:"isInResult",value:function(){return this._isInResult}},{key:"isVisited",value:function(){return this._isVisited}}],[{key:"constructor_",value:function(){this._label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,0!==arguments.length&&1===arguments.length&&(this._label=arguments[0])}}]),Fn=function(r){function t(){var e;return N(this,t),e=q(this,t),t.constructor_.apply(e,arguments),e}return ot(t,r),x(t,[{key:"isIncidentEdgeInResult",value:function(){for(var e=this.getEdges().getEdges().iterator();e.hasNext();)if(e.next().getEdge().isInResult())return!0;return!1}},{key:"isIsolated",value:function(){return 1===this._label.getGeometryCount()}},{key:"getCoordinate",value:function(){return this._coord}},{key:"print",value:function(e){e.println("node "+this._coord+" lbl: "+this._label)}},{key:"computeIM",value:function(e){}},{key:"computeMergedLocation",value:function(e,n){var i=I.NONE;if(i=this._label.getLocation(n),!e.isNull(n)){var a=e.getLocation(n);i!==I.BOUNDARY&&(i=a)}return i}},{key:"setLabel",value:function(){if(2!==arguments.length||!Number.isInteger(arguments[1])||!Number.isInteger(arguments[0]))return Et(t,"setLabel",this,1).apply(this,arguments);var e=arguments[0],n=arguments[1];null===this._label?this._label=new Ae(e,n):this._label.setLocation(e,n)}},{key:"getEdges",value:function(){return this._edges}},{key:"mergeLabel",value:function(){if(arguments[0]instanceof t)this.mergeLabel(arguments[0]._label);else if(arguments[0]instanceof Ae)for(var n=arguments[0],i=0;i<2;i++){var a=this.computeMergedLocation(n,i);this._label.getLocation(i)===I.NONE&&this._label.setLocation(i,a)}}},{key:"add",value:function(e){this._edges.insert(e),e.setNode(this)}},{key:"setLabelBoundary",value:function(e){if(null===this._label)return null;var n=I.NONE;null!==this._label&&(n=this._label.getLocation(e)),this._label.setLocation(e,n===I.BOUNDARY?I.INTERIOR:I.BOUNDARY)}}],[{key:"constructor_",value:function(){this._coord=null,this._edges=null;var n=arguments[1];this._coord=arguments[0],this._edges=n,this._label=new Ae(0,I.NONE)}}])}(br),Mr=function(r){function t(){return N(this,t),q(this,t,arguments)}return ot(t,r),x(t)}(jn);function Un(r){return null==r?0:r.color}function Mt(r){return null==r?null:r.parent}function je(r,t){null!==r&&(r.color=t)}function lr(r){return null==r?null:r.left}function cr(r){return null==r?null:r.right}var Nn=function(r){function t(){var e;return N(this,t),(e=q(this,t)).root_=null,e.size_=0,e}return ot(t,r),x(t,[{key:"get",value:function(e){for(var n=this.root_;null!==n;){var i=e.compareTo(n.key);if(i<0)n=n.left;else{if(!(i>0))return n.value;n=n.right}}return null}},{key:"put",value:function(e,n){if(null===this.root_)return this.root_={key:e,value:n,left:null,right:null,parent:null,color:0,getValue:function(){return this.value},getKey:function(){return this.key}},this.size_=1,null;var i,a,c=this.root_;do{if(i=c,(a=e.compareTo(c.key))<0)c=c.left;else{if(!(a>0)){var f=c.value;return c.value=n,f}c=c.right}}while(null!==c);var m={key:e,left:null,right:null,value:n,parent:i,color:0,getValue:function(){return this.value},getKey:function(){return this.key}};return a<0?i.left=m:i.right=m,this.fixAfterInsertion(m),this.size_++,null}},{key:"fixAfterInsertion",value:function(e){var n;for(e.color=1;null!=e&&e!==this.root_&&1===e.parent.color;)Mt(e)===lr(Mt(Mt(e)))?1===Un(n=cr(Mt(Mt(e))))?(je(Mt(e),0),je(n,0),je(Mt(Mt(e)),1),e=Mt(Mt(e))):(e===cr(Mt(e))&&(e=Mt(e),this.rotateLeft(e)),je(Mt(e),0),je(Mt(Mt(e)),1),this.rotateRight(Mt(Mt(e)))):1===Un(n=lr(Mt(Mt(e))))?(je(Mt(e),0),je(n,0),je(Mt(Mt(e)),1),e=Mt(Mt(e))):(e===lr(Mt(e))&&(e=Mt(e),this.rotateRight(e)),je(Mt(e),0),je(Mt(Mt(e)),1),this.rotateLeft(Mt(Mt(e))));this.root_.color=0}},{key:"values",value:function(){var e=new vt,n=this.getFirstEntry();if(null!==n)for(e.add(n.value);null!==(n=t.successor(n));)e.add(n.value);return e}},{key:"entrySet",value:function(){var e=new vr,n=this.getFirstEntry();if(null!==n)for(e.add(n);null!==(n=t.successor(n));)e.add(n);return e}},{key:"rotateLeft",value:function(e){if(null!=e){var n=e.right;e.right=n.left,null!=n.left&&(n.left.parent=e),n.parent=e.parent,null==e.parent?this.root_=n:e.parent.left===e?e.parent.left=n:e.parent.right=n,n.left=e,e.parent=n}}},{key:"rotateRight",value:function(e){if(null!=e){var n=e.left;e.left=n.right,null!=n.right&&(n.right.parent=e),n.parent=e.parent,null==e.parent?this.root_=n:e.parent.right===e?e.parent.right=n:e.parent.left=n,n.right=e,e.parent=n}}},{key:"getFirstEntry",value:function(){var e=this.root_;if(null!=e)for(;null!=e.left;)e=e.left;return e}},{key:"size",value:function(){return this.size_}},{key:"containsKey",value:function(e){for(var n=this.root_;null!==n;){var i=e.compareTo(n.key);if(i<0)n=n.left;else{if(!(i>0))return!0;n=n.right}}return!1}}],[{key:"successor",value:function(e){var n;if(null===e)return null;if(null!==e.right){for(n=e.right;null!==n.left;)n=n.left;return n}n=e.parent;for(var i=e;null!==n&&i===n.right;)i=n,n=n.parent;return n}}])}(Mr),Vr=x(function r(){N(this,r),r.constructor_.apply(this,arguments)},[{key:"find",value:function(r){return this.nodeMap.get(r)}},{key:"addNode",value:function(){if(arguments[0]instanceof D){var r=arguments[0],t=this.nodeMap.get(r);return null===t&&(t=this.nodeFact.createNode(r),this.nodeMap.put(r,t)),t}if(arguments[0]instanceof Fn){var e=arguments[0],n=this.nodeMap.get(e.getCoordinate());return null===n?(this.nodeMap.put(e.getCoordinate(),e),e):(n.mergeLabel(e),n)}}},{key:"print",value:function(r){for(var t=this.iterator();t.hasNext();)t.next().print(r)}},{key:"iterator",value:function(){return this.nodeMap.values().iterator()}},{key:"values",value:function(){return this.nodeMap.values()}},{key:"getBoundaryNodes",value:function(r){for(var t=new vt,e=this.iterator();e.hasNext();){var n=e.next();n.getLabel().getLocation(r)===I.BOUNDARY&&t.add(n)}return t}},{key:"add",value:function(r){var t=r.getCoordinate();this.addNode(t).add(r)}}],[{key:"constructor_",value:function(){this.nodeMap=new Nn,this.nodeFact=null,this.nodeFact=arguments[0]}}]),fe=function(){function r(){N(this,r)}return x(r,null,[{key:"isNorthern",value:function(t){return t===r.NE||t===r.NW}},{key:"isOpposite",value:function(t,e){return t!==e&&(t-e+4)%4==2}},{key:"commonHalfPlane",value:function(t,e){if(t===e)return t;if((t-e+4)%4==2)return-1;var n=t<e?t:e;return 0===n&&3===(t>e?t:e)?3:n}},{key:"isInHalfPlane",value:function(t,e){return e===r.SE?t===r.SE||t===r.SW:t===e||t===e+1}},{key:"quadrant",value:function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1];if(0===t&&0===e)throw new j("Cannot compute the quadrant for point ( "+t+", "+e+" )");return t>=0?e>=0?r.NE:r.SE:e>=0?r.NW:r.SW}if(arguments[0]instanceof D&&arguments[1]instanceof D){var n=arguments[0],i=arguments[1];if(i.x===n.x&&i.y===n.y)throw new j("Cannot compute the quadrant for two identical points "+n);return i.x>=n.x?i.y>=n.y?r.NE:r.SE:i.y>=n.y?r.NW:r.SW}}}])}();fe.NE=0,fe.NW=1,fe.SW=2,fe.SE=3;var rn=function(){function r(){N(this,r),r.constructor_.apply(this,arguments)}return x(r,[{key:"compareDirection",value:function(t){return this._dx===t._dx&&this._dy===t._dy?0:this._quadrant>t._quadrant?1:this._quadrant<t._quadrant?-1:xt.index(t._p0,t._p1,this._p1)}},{key:"getDy",value:function(){return this._dy}},{key:"getCoordinate",value:function(){return this._p0}},{key:"setNode",value:function(t){this._node=t}},{key:"print",value:function(t){var e=Math.atan2(this._dy,this._dx),n=this.getClass().getName(),i=n.lastIndexOf("."),a=n.substring(i+1);t.print("  "+a+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+e+"   "+this._label)}},{key:"compareTo",value:function(t){return this.compareDirection(t)}},{key:"getDirectedCoordinate",value:function(){return this._p1}},{key:"getDx",value:function(){return this._dx}},{key:"getLabel",value:function(){return this._label}},{key:"getEdge",value:function(){return this._edge}},{key:"getQuadrant",value:function(){return this._quadrant}},{key:"getNode",value:function(){return this._node}},{key:"toString",value:function(){var t=Math.atan2(this._dy,this._dx),e=this.getClass().getName(),n=e.lastIndexOf(".");return"  "+e.substring(n+1)+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+t+"   "+this._label}},{key:"computeLabel",value:function(t){}},{key:"init",value:function(t,e){this._p0=t,this._p1=e,this._dx=e.x-t.x,this._dy=e.y-t.y,this._quadrant=fe.quadrant(this._dx,this._dy),Dt.isTrue(!(0===this._dx&&0===this._dy),"EdgeEnd with identical endpoints found")}},{key:"interfaces_",get:function(){return[L]}}],[{key:"constructor_",value:function(){if(this._edge=null,this._label=null,this._node=null,this._p0=null,this._p1=null,this._dx=null,this._dy=null,this._quadrant=null,1===arguments.length)this._edge=arguments[0];else if(3===arguments.length)r.constructor_.call(this,arguments[0],arguments[1],arguments[2],null);else if(4===arguments.length){var c=arguments[1],f=arguments[2],m=arguments[3];r.constructor_.call(this,arguments[0]),this.init(c,f),this._label=m}}}])}(),Gn=function(r){function t(){var e;return N(this,t),e=q(this,t),t.constructor_.apply(e,arguments),e}return ot(t,r),x(t,[{key:"getNextMin",value:function(){return this._nextMin}},{key:"getDepth",value:function(e){return this._depth[e]}},{key:"setVisited",value:function(e){this._isVisited=e}},{key:"computeDirectedLabel",value:function(){this._label=new Ae(this._edge.getLabel()),this._isForward||this._label.flip()}},{key:"getNext",value:function(){return this._next}},{key:"setDepth",value:function(e,n){if(-999!==this._depth[e]&&this._depth[e]!==n)throw new B("assigned depths do not match",this.getCoordinate());this._depth[e]=n}},{key:"isInteriorAreaEdge",value:function(){for(var e=!0,n=0;n<2;n++)this._label.isArea(n)&&this._label.getLocation(n,Z.LEFT)===I.INTERIOR&&this._label.getLocation(n,Z.RIGHT)===I.INTERIOR||(e=!1);return e}},{key:"setNextMin",value:function(e){this._nextMin=e}},{key:"print",value:function(e){Et(t,"print",this,1).call(this,e),e.print(" "+this._depth[Z.LEFT]+"/"+this._depth[Z.RIGHT]),e.print(" ("+this.getDepthDelta()+")"),this._isInResult&&e.print(" inResult")}},{key:"setMinEdgeRing",value:function(e){this._minEdgeRing=e}},{key:"isLineEdge",value:function(){var e=this._label.isLine(0)||this._label.isLine(1),n=!this._label.isArea(0)||this._label.allPositionsEqual(0,I.EXTERIOR),i=!this._label.isArea(1)||this._label.allPositionsEqual(1,I.EXTERIOR);return e&&n&&i}},{key:"setEdgeRing",value:function(e){this._edgeRing=e}},{key:"getMinEdgeRing",value:function(){return this._minEdgeRing}},{key:"getDepthDelta",value:function(){var e=this._edge.getDepthDelta();return this._isForward||(e=-e),e}},{key:"setInResult",value:function(e){this._isInResult=e}},{key:"getSym",value:function(){return this._sym}},{key:"isForward",value:function(){return this._isForward}},{key:"getEdge",value:function(){return this._edge}},{key:"printEdge",value:function(e){this.print(e),e.print(" "),this._isForward?this._edge.print(e):this._edge.printReverse(e)}},{key:"setSym",value:function(e){this._sym=e}},{key:"setVisitedEdge",value:function(e){this.setVisited(e),this._sym.setVisited(e)}},{key:"setEdgeDepths",value:function(e,n){var i=this.getEdge().getDepthDelta();this._isForward||(i=-i);var a=1;e===Z.LEFT&&(a=-1);var c=Z.opposite(e),f=n+i*a;this.setDepth(e,n),this.setDepth(c,f)}},{key:"getEdgeRing",value:function(){return this._edgeRing}},{key:"isInResult",value:function(){return this._isInResult}},{key:"setNext",value:function(e){this._next=e}},{key:"isVisited",value:function(){return this._isVisited}}],[{key:"constructor_",value:function(){this._isForward=null,this._isInResult=!1,this._isVisited=!1,this._sym=null,this._next=null,this._nextMin=null,this._edgeRing=null,this._minEdgeRing=null,this._depth=[0,-999,-999];var e=arguments[0],n=arguments[1];if(rn.constructor_.call(this,e),this._isForward=n,n)this.init(e.getCoordinate(0),e.getCoordinate(1));else{var i=e.getNumPoints()-1;this.init(e.getCoordinate(i),e.getCoordinate(i-1))}this.computeDirectedLabel()}},{key:"depthFactor",value:function(e,n){return e===I.EXTERIOR&&n===I.INTERIOR?1:e===I.INTERIOR&&n===I.EXTERIOR?-1:0}}])}(rn),sn=x(function r(){N(this,r)},[{key:"createNode",value:function(r){return new Fn(r,null)}}]),Ye=x(function r(){N(this,r),r.constructor_.apply(this,arguments)},[{key:"printEdges",value:function(r){r.println("Edges:");for(var t=0;t<this._edges.size();t++){r.println("edge "+t+":");var e=this._edges.get(t);e.print(r),e.eiList.print(r)}}},{key:"find",value:function(r){return this._nodes.find(r)}},{key:"addNode",value:function(){return arguments[0]instanceof Fn||arguments[0]instanceof D?this._nodes.addNode(arguments[0]):void 0}},{key:"getNodeIterator",value:function(){return this._nodes.iterator()}},{key:"linkResultDirectedEdges",value:function(){for(var r=this._nodes.iterator();r.hasNext();)r.next().getEdges().linkResultDirectedEdges()}},{key:"debugPrintln",value:function(r){we.out.println(r)}},{key:"isBoundaryNode",value:function(r,t){var e=this._nodes.find(t);if(null===e)return!1;var n=e.getLabel();return null!==n&&n.getLocation(r)===I.BOUNDARY}},{key:"linkAllDirectedEdges",value:function(){for(var r=this._nodes.iterator();r.hasNext();)r.next().getEdges().linkAllDirectedEdges()}},{key:"matchInSameDirection",value:function(r,t,e,n){return!!r.equals(e)&&xt.index(r,t,n)===xt.COLLINEAR&&fe.quadrant(r,t)===fe.quadrant(e,n)}},{key:"getEdgeEnds",value:function(){return this._edgeEndList}},{key:"debugPrint",value:function(r){we.out.print(r)}},{key:"getEdgeIterator",value:function(){return this._edges.iterator()}},{key:"findEdgeInSameDirection",value:function(r,t){for(var e=0;e<this._edges.size();e++){var n=this._edges.get(e),i=n.getCoordinates();if(this.matchInSameDirection(r,t,i[0],i[1])||this.matchInSameDirection(r,t,i[i.length-1],i[i.length-2]))return n}return null}},{key:"insertEdge",value:function(r){this._edges.add(r)}},{key:"findEdgeEnd",value:function(r){for(var t=this.getEdgeEnds().iterator();t.hasNext();){var e=t.next();if(e.getEdge()===r)return e}return null}},{key:"addEdges",value:function(r){for(var t=r.iterator();t.hasNext();){var e=t.next();this._edges.add(e);var n=new Gn(e,!0),i=new Gn(e,!1);n.setSym(i),i.setSym(n),this.add(n),this.add(i)}}},{key:"add",value:function(r){this._nodes.add(r),this._edgeEndList.add(r)}},{key:"getNodes",value:function(){return this._nodes.values()}},{key:"findEdge",value:function(r,t){for(var e=0;e<this._edges.size();e++){var n=this._edges.get(e),i=n.getCoordinates();if(r.equals(i[0])&&t.equals(i[1]))return n}return null}}],[{key:"constructor_",value:function(){this._edges=new vt,this._nodes=null,this._edgeEndList=new vt,0===arguments.length?this._nodes=new Vr(new sn):1===arguments.length&&(this._nodes=new Vr(arguments[0]))}},{key:"linkResultDirectedEdges",value:function(r){for(var t=r.iterator();t.hasNext();)t.next().getEdges().linkResultDirectedEdges()}}]),In=function(){function r(){N(this,r),r.constructor_.apply(this,arguments)}return x(r,[{key:"sortShellsAndHoles",value:function(t,e,n){for(var i=t.iterator();i.hasNext();){var a=i.next();a.isHole()?n.add(a):e.add(a)}}},{key:"computePolygons",value:function(t){for(var e=new vt,n=t.iterator();n.hasNext();){var i=n.next().toPolygon(this._geometryFactory);e.add(i)}return e}},{key:"placeFreeHoles",value:function(t,e){for(var n=e.iterator();n.hasNext();){var i=n.next();if(null===i.getShell()){var a=r.findEdgeRingContaining(i,t);if(null===a)throw new B("unable to assign hole to a shell",i.getCoordinate(0));i.setShell(a)}}}},{key:"buildMinimalEdgeRings",value:function(t,e,n){for(var i=new vt,a=t.iterator();a.hasNext();){var c=a.next();if(c.getMaxNodeDegree()>2){c.linkDirectedEdgesForMinimalEdgeRings();var f=c.buildMinimalRings(),m=this.findShell(f);null!==m?(this.placePolygonHoles(m,f),e.add(m)):n.addAll(f)}else i.add(c)}return i}},{key:"buildMaximalEdgeRings",value:function(t){for(var e=new vt,n=t.iterator();n.hasNext();){var i=n.next();if(i.isInResult()&&i.getLabel().isArea()&&null===i.getEdgeRing()){var a=new tr(i,this._geometryFactory);e.add(a),a.setInResult()}}return e}},{key:"placePolygonHoles",value:function(t,e){for(var n=e.iterator();n.hasNext();){var i=n.next();i.isHole()&&i.setShell(t)}}},{key:"getPolygons",value:function(){return this.computePolygons(this._shellList)}},{key:"findShell",value:function(t){for(var e=0,n=null,i=t.iterator();i.hasNext();){var a=i.next();a.isHole()||(n=a,e++)}return Dt.isTrue(e<=1,"found two shells in MinimalEdgeRing list"),n}},{key:"add",value:function(){if(1===arguments.length){var t=arguments[0];this.add(t.getEdgeEnds(),t.getNodes())}else if(2===arguments.length){var e=arguments[0];Ye.linkResultDirectedEdges(arguments[1]);var i=this.buildMaximalEdgeRings(e),a=new vt,c=this.buildMinimalEdgeRings(i,this._shellList,a);this.sortShellsAndHoles(c,this._shellList,a),this.placeFreeHoles(this._shellList,a)}}}],[{key:"constructor_",value:function(){this._geometryFactory=null,this._shellList=new vt,this._geometryFactory=arguments[0]}},{key:"findEdgeRingContaining",value:function(t,e){for(var n=t.getLinearRing(),i=n.getEnvelopeInternal(),a=n.getCoordinateN(0),c=null,f=null,m=e.iterator();m.hasNext();){var E=m.next(),O=E.getLinearRing(),P=O.getEnvelopeInternal();if(!P.equals(i)&&P.contains(i)){a=ce.ptNotInList(n.getCoordinates(),O.getCoordinates());var z=!1;Pn.isInRing(a,O.getCoordinates())&&(z=!0),z&&(null===c||f.contains(P))&&(f=(c=E).getLinearRing().getEnvelopeInternal())}}return c}}])}(),gn=x(function r(){N(this,r)},[{key:"getBounds",value:function(){}}]),Qt=x(function r(){N(this,r),r.constructor_.apply(this,arguments)},[{key:"getItem",value:function(){return this._item}},{key:"getBounds",value:function(){return this._bounds}},{key:"interfaces_",get:function(){return[gn,ct]}}],[{key:"constructor_",value:function(){this._bounds=null,this._item=null;var t=arguments[1];this._bounds=arguments[0],this._item=t}}]),ke=x(function r(){N(this,r),r.constructor_.apply(this,arguments)},[{key:"poll",value:function(){if(this.isEmpty())return null;var r=this._items.get(1);return this._items.set(1,this._items.get(this._size)),this._size-=1,this.reorder(1),r}},{key:"size",value:function(){return this._size}},{key:"reorder",value:function(r){for(var t=null,e=this._items.get(r);2*r<=this._size&&((t=2*r)!==this._size&&this._items.get(t+1).compareTo(this._items.get(t))<0&&t++,this._items.get(t).compareTo(e)<0);r=t)this._items.set(r,this._items.get(t));this._items.set(r,e)}},{key:"clear",value:function(){this._size=0,this._items.clear()}},{key:"peek",value:function(){return this.isEmpty()?null:this._items.get(1)}},{key:"isEmpty",value:function(){return 0===this._size}},{key:"add",value:function(r){this._items.add(null),this._size+=1;var t=this._size;for(this._items.set(0,r);r.compareTo(this._items.get(Math.trunc(t/2)))<0;t/=2)this._items.set(t,this._items.get(Math.trunc(t/2)));this._items.set(t,r)}}],[{key:"constructor_",value:function(){this._size=null,this._items=null,this._size=0,this._items=new vt,this._items.add(null)}}]),ae=x(function r(){N(this,r)},[{key:"insert",value:function(r,t){}},{key:"remove",value:function(r,t){}},{key:"query",value:function(){}}]),re=x(function r(){N(this,r),r.constructor_.apply(this,arguments)},[{key:"getLevel",value:function(){return this._level}},{key:"size",value:function(){return this._childBoundables.size()}},{key:"getChildBoundables",value:function(){return this._childBoundables}},{key:"addChildBoundable",value:function(r){Dt.isTrue(null===this._bounds),this._childBoundables.add(r)}},{key:"isEmpty",value:function(){return this._childBoundables.isEmpty()}},{key:"getBounds",value:function(){return null===this._bounds&&(this._bounds=this.computeBounds()),this._bounds}},{key:"interfaces_",get:function(){return[gn,ct]}}],[{key:"constructor_",value:function(){this._childBoundables=new vt,this._bounds=null,this._level=null,0!==arguments.length&&1===arguments.length&&(this._level=arguments[0])}}]),Ce={reverseOrder:function(){return{compare:function(r,t){return t.compareTo(r)}}},min:function(r){return Ce.sort(r),r.get(0)},sort:function(r,t){var e=r.toArray();t?kn.sort(e,t):kn.sort(e);for(var n=r.iterator(),i=0,a=e.length;i<a;i++)n.next(),n.set(e[i])},singletonList:function(r){var t=new vt;return t.add(r),t}},Qr=function(){function r(){N(this,r)}return x(r,null,[{key:"maxDistance",value:function(t,e,n,i,a,c,f,m){var E=r.distance(t,e,a,c);return E=Math.max(E,r.distance(t,e,f,m)),E=Math.max(E,r.distance(n,i,a,c)),Math.max(E,r.distance(n,i,f,m))}},{key:"distance",value:function(t,e,n,i){var a=n-t,c=i-e;return Math.sqrt(a*a+c*c)}},{key:"maximumDistance",value:function(t,e){var n=Math.min(t.getMinX(),e.getMinX()),i=Math.min(t.getMinY(),e.getMinY()),a=Math.max(t.getMaxX(),e.getMaxX()),c=Math.max(t.getMaxY(),e.getMaxY());return r.distance(n,i,a,c)}},{key:"minMaxDistance",value:function(t,e){var n=t.getMinX(),i=t.getMinY(),a=t.getMaxX(),c=t.getMaxY(),f=e.getMinX(),m=e.getMinY(),E=e.getMaxX(),O=e.getMaxY(),P=r.maxDistance(n,i,n,c,f,m,f,O);return P=Math.min(P,r.maxDistance(n,i,n,c,f,m,E,m)),P=Math.min(P,r.maxDistance(n,i,n,c,E,O,f,O)),P=Math.min(P,r.maxDistance(n,i,n,c,E,O,E,m)),P=Math.min(P,r.maxDistance(n,i,a,i,f,m,f,O)),P=Math.min(P,r.maxDistance(n,i,a,i,f,m,E,m)),P=Math.min(P,r.maxDistance(n,i,a,i,E,O,f,O)),P=Math.min(P,r.maxDistance(n,i,a,i,E,O,E,m)),P=Math.min(P,r.maxDistance(a,c,n,c,f,m,f,O)),P=Math.min(P,r.maxDistance(a,c,n,c,f,m,E,m)),P=Math.min(P,r.maxDistance(a,c,n,c,E,O,f,O)),P=Math.min(P,r.maxDistance(a,c,n,c,E,O,E,m)),P=Math.min(P,r.maxDistance(a,c,a,i,f,m,f,O)),P=Math.min(P,r.maxDistance(a,c,a,i,f,m,E,m)),P=Math.min(P,r.maxDistance(a,c,a,i,E,O,f,O)),Math.min(P,r.maxDistance(a,c,a,i,E,O,E,m))}}])}(),dn=function(){function r(){N(this,r),r.constructor_.apply(this,arguments)}return x(r,[{key:"maximumDistance",value:function(){return Qr.maximumDistance(this._boundable1.getBounds(),this._boundable2.getBounds())}},{key:"expandToQueue",value:function(t,e){var n=r.isComposite(this._boundable1),i=r.isComposite(this._boundable2);if(n&&i)return r.area(this._boundable1)>r.area(this._boundable2)?(this.expand(this._boundable1,this._boundable2,!1,t,e),null):(this.expand(this._boundable2,this._boundable1,!0,t,e),null);if(n)return this.expand(this._boundable1,this._boundable2,!1,t,e),null;if(i)return this.expand(this._boundable2,this._boundable1,!0,t,e),null;throw new j("neither boundable is composite")}},{key:"isLeaves",value:function(){return!(r.isComposite(this._boundable1)||r.isComposite(this._boundable2))}},{key:"compareTo",value:function(t){return this._distance<t._distance?-1:this._distance>t._distance?1:0}},{key:"expand",value:function(t,e,n,i,a){for(var c=t.getChildBoundables().iterator();c.hasNext();){var f=c.next(),m=null;(m=n?new r(e,f,this._itemDistance):new r(f,e,this._itemDistance)).getDistance()<a&&i.add(m)}}},{key:"getBoundable",value:function(t){return 0===t?this._boundable1:this._boundable2}},{key:"getDistance",value:function(){return this._distance}},{key:"distance",value:function(){return this.isLeaves()?this._itemDistance.distance(this._boundable1,this._boundable2):this._boundable1.getBounds().distance(this._boundable2.getBounds())}},{key:"interfaces_",get:function(){return[L]}}],[{key:"constructor_",value:function(){this._boundable1=null,this._boundable2=null,this._distance=null,this._itemDistance=null;var e=arguments[1],n=arguments[2];this._boundable1=arguments[0],this._boundable2=e,this._itemDistance=n,this._distance=this.distance()}},{key:"area",value:function(t){return t.getBounds().getArea()}},{key:"isComposite",value:function(t){return t instanceof re}}])}(),jt=x(function r(){N(this,r)},[{key:"visitItem",value:function(r){}}]),p=function(){function r(){N(this,r),r.constructor_.apply(this,arguments)}return x(r,[{key:"queryInternal",value:function(){if(Ot(arguments[2],jt)&&arguments[0]instanceof Object&&arguments[1]instanceof re)for(var t=arguments[0],e=arguments[2],n=arguments[1].getChildBoundables(),i=0;i<n.size();i++){var a=n.get(i);this.getIntersectsOp().intersects(a.getBounds(),t)&&(a instanceof re?this.queryInternal(t,a,e):a instanceof Qt?e.visitItem(a.getItem()):Dt.shouldNeverReachHere())}else if(Ot(arguments[2],qe)&&arguments[0]instanceof Object&&arguments[1]instanceof re)for(var c=arguments[0],f=arguments[2],m=arguments[1].getChildBoundables(),E=0;E<m.size();E++){var O=m.get(E);this.getIntersectsOp().intersects(O.getBounds(),c)&&(O instanceof re?this.queryInternal(c,O,f):O instanceof Qt?f.add(O.getItem()):Dt.shouldNeverReachHere())}}},{key:"getNodeCapacity",value:function(){return this._nodeCapacity}},{key:"lastNode",value:function(t){return t.get(t.size()-1)}},{key:"size",value:function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.size(this._root));if(1===arguments.length){for(var t=0,e=arguments[0].getChildBoundables().iterator();e.hasNext();){var n=e.next();n instanceof re?t+=this.size(n):n instanceof Qt&&(t+=1)}return t}}},{key:"removeItem",value:function(t,e){for(var n=null,i=t.getChildBoundables().iterator();i.hasNext();){var a=i.next();a instanceof Qt&&a.getItem()===e&&(n=a)}return null!==n&&(t.getChildBoundables().remove(n),!0)}},{key:"itemsTree",value:function(){if(0===arguments.length){this.build();var t=this.itemsTree(this._root);return null===t?new vt:t}if(1===arguments.length){for(var e=arguments[0],n=new vt,i=e.getChildBoundables().iterator();i.hasNext();){var a=i.next();if(a instanceof re){var c=this.itemsTree(a);null!==c&&n.add(c)}else a instanceof Qt?n.add(a.getItem()):Dt.shouldNeverReachHere()}return n.size()<=0?null:n}}},{key:"insert",value:function(t,e){Dt.isTrue(!this._built,"Cannot insert items into an STR packed R-tree after it has been built."),this._itemBoundables.add(new Qt(t,e))}},{key:"boundablesAtLevel",value:function(){if(1===arguments.length){var t=arguments[0],e=new vt;return this.boundablesAtLevel(t,this._root,e),e}if(3===arguments.length){var n=arguments[0],i=arguments[1],a=arguments[2];if(Dt.isTrue(n>-2),i.getLevel()===n)return a.add(i),null;for(var c=i.getChildBoundables().iterator();c.hasNext();){var f=c.next();f instanceof re?this.boundablesAtLevel(n,f,a):(Dt.isTrue(f instanceof Qt),-1===n&&a.add(f))}return null}}},{key:"query",value:function(){if(1===arguments.length){var t=arguments[0];this.build();var e=new vt;return this.isEmpty()||this.getIntersectsOp().intersects(this._root.getBounds(),t)&&this.queryInternal(t,this._root,e),e}if(2===arguments.length){var n=arguments[0],i=arguments[1];if(this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this._root.getBounds(),n)&&this.queryInternal(n,this._root,i)}}},{key:"build",value:function(){if(this._built)return null;this._root=this._itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this._itemBoundables,-1),this._itemBoundables=null,this._built=!0}},{key:"getRoot",value:function(){return this.build(),this._root}},{key:"remove",value:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return this.build(),!!this.getIntersectsOp().intersects(this._root.getBounds(),t)&&this.remove(t,this._root,e)}if(3===arguments.length){var n=arguments[0],i=arguments[1],a=arguments[2],c=this.removeItem(i,a);if(c)return!0;for(var f=null,m=i.getChildBoundables().iterator();m.hasNext();){var E=m.next();if(this.getIntersectsOp().intersects(E.getBounds(),n)&&E instanceof re&&(c=this.remove(n,E,a))){f=E;break}}return null!==f&&f.getChildBoundables().isEmpty()&&i.getChildBoundables().remove(f),c}}},{key:"createHigherLevels",value:function(t,e){Dt.isTrue(!t.isEmpty());var n=this.createParentBoundables(t,e+1);return 1===n.size()?n.get(0):this.createHigherLevels(n,e+1)}},{key:"depth",value:function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.depth(this._root));if(1===arguments.length){for(var t=0,e=arguments[0].getChildBoundables().iterator();e.hasNext();){var n=e.next();if(n instanceof re){var i=this.depth(n);i>t&&(t=i)}}return t+1}}},{key:"createParentBoundables",value:function(t,e){Dt.isTrue(!t.isEmpty());var n=new vt;n.add(this.createNode(e));var i=new vt(t);Ce.sort(i,this.getComparator());for(var a=i.iterator();a.hasNext();){var c=a.next();this.lastNode(n).getChildBoundables().size()===this.getNodeCapacity()&&n.add(this.createNode(e)),this.lastNode(n).addChildBoundable(c)}return n}},{key:"isEmpty",value:function(){return this._built?this._root.isEmpty():this._itemBoundables.isEmpty()}},{key:"interfaces_",get:function(){return[ct]}}],[{key:"constructor_",value:function(){if(this._root=null,this._built=!1,this._itemBoundables=new vt,this._nodeCapacity=null,0===arguments.length)r.constructor_.call(this,r.DEFAULT_NODE_CAPACITY);else if(1===arguments.length){var t=arguments[0];Dt.isTrue(t>1,"Node capacity must be greater than 1"),this._nodeCapacity=t}}},{key:"compareDoubles",value:function(t,e){return t>e?1:t<e?-1:0}}])}();p.IntersectsOp=function(){},p.DEFAULT_NODE_CAPACITY=10;var d=x(function r(){N(this,r)},[{key:"distance",value:function(r,t){}}]),v=function(r){function t(){var e;return N(this,t),e=q(this,t),t.constructor_.apply(e,arguments),e}return ot(t,r),x(t,[{key:"createParentBoundablesFromVerticalSlices",value:function(e,n){Dt.isTrue(e.length>0);for(var i=new vt,a=0;a<e.length;a++)i.addAll(this.createParentBoundablesFromVerticalSlice(e[a],n));return i}},{key:"nearestNeighbourK",value:function(){if(2===arguments.length)return this.nearestNeighbourK(arguments[0],gt.POSITIVE_INFINITY,arguments[1]);if(3===arguments.length){var i=arguments[0],a=arguments[2],c=arguments[1],f=new ke;f.add(i);for(var m=new ke;!f.isEmpty()&&c>=0;){var E=f.poll(),O=E.getDistance();if(O>=c)break;E.isLeaves()?m.size()<a?m.add(E):(m.peek().getDistance()>O&&(m.poll(),m.add(E)),c=m.peek().getDistance()):E.expandToQueue(f,c)}return t.getItems(m)}}},{key:"createNode",value:function(e){return new _(e)}},{key:"size",value:function(){return 0===arguments.length?Et(t,"size",this,1).call(this):Et(t,"size",this,1).apply(this,arguments)}},{key:"insert",value:function(){if(!(2===arguments.length&&arguments[1]instanceof Object&&arguments[0]instanceof Kt))return Et(t,"insert",this,1).apply(this,arguments);var e=arguments[0],n=arguments[1];if(e.isNull())return null;Et(t,"insert",this,1).call(this,e,n)}},{key:"getIntersectsOp",value:function(){return t.intersectsOp}},{key:"verticalSlices",value:function(e,n){for(var i=Math.trunc(Math.ceil(e.size()/n)),a=new Array(n).fill(null),c=e.iterator(),f=0;f<n;f++){a[f]=new vt;for(var m=0;c.hasNext()&&m<i;){var E=c.next();a[f].add(E),m++}}return a}},{key:"query",value:function(){if(1===arguments.length){var e=arguments[0];return Et(t,"query",this,1).call(this,e)}if(2===arguments.length){var n=arguments[0],i=arguments[1];Et(t,"query",this,1).call(this,n,i)}}},{key:"getComparator",value:function(){return t.yComparator}},{key:"createParentBoundablesFromVerticalSlice",value:function(e,n){return Et(t,"createParentBoundables",this,1).call(this,e,n)}},{key:"remove",value:function(){if(2===arguments.length&&arguments[1]instanceof Object&&arguments[0]instanceof Kt){var e=arguments[0],n=arguments[1];return Et(t,"remove",this,1).call(this,e,n)}return Et(t,"remove",this,1).apply(this,arguments)}},{key:"depth",value:function(){return 0===arguments.length?Et(t,"depth",this,1).call(this):Et(t,"depth",this,1).apply(this,arguments)}},{key:"createParentBoundables",value:function(e,n){Dt.isTrue(!e.isEmpty());var i=Math.trunc(Math.ceil(e.size()/this.getNodeCapacity())),a=new vt(e);Ce.sort(a,t.xComparator);var c=this.verticalSlices(a,Math.trunc(Math.ceil(Math.sqrt(i))));return this.createParentBoundablesFromVerticalSlices(c,n)}},{key:"nearestNeighbour",value:function(){if(1===arguments.length){if(Ot(arguments[0],d)){var e=arguments[0];if(this.isEmpty())return null;var n=new dn(this.getRoot(),this.getRoot(),e);return this.nearestNeighbour(n)}if(arguments[0]instanceof dn){var i=arguments[0],a=gt.POSITIVE_INFINITY,c=null,f=new ke;for(f.add(i);!f.isEmpty()&&a>0;){var m=f.poll(),E=m.getDistance();if(E>=a)break;m.isLeaves()?(a=E,c=m):m.expandToQueue(f,a)}return null===c?null:[c.getBoundable(0).getItem(),c.getBoundable(1).getItem()]}}else{if(2===arguments.length){var O=arguments[0],P=arguments[1];if(this.isEmpty()||O.isEmpty())return null;var z=new dn(this.getRoot(),O.getRoot(),P);return this.nearestNeighbour(z)}if(3===arguments.length){var tt=arguments[2],ut=new Qt(arguments[0],arguments[1]),ht=new dn(this.getRoot(),ut,tt);return this.nearestNeighbour(ht)[0]}if(4===arguments.length){var Bt=arguments[2],Yt=arguments[3],ee=new Qt(arguments[0],arguments[1]),ye=new dn(this.getRoot(),ee,Bt);return this.nearestNeighbourK(ye,Yt)}}}},{key:"isWithinDistance",value:function(){if(2===arguments.length){var e=arguments[0],n=arguments[1],i=gt.POSITIVE_INFINITY,a=new ke;for(a.add(e);!a.isEmpty();){var c=a.poll(),f=c.getDistance();if(f>n)return!1;if(c.maximumDistance()<=n)return!0;if(c.isLeaves()){if((i=f)<=n)return!0}else c.expandToQueue(a,i)}return!1}if(3===arguments.length){var m=arguments[0],E=arguments[1],O=arguments[2],P=new dn(this.getRoot(),m.getRoot(),E);return this.isWithinDistance(P,O)}}},{key:"interfaces_",get:function(){return[ae,ct]}}],[{key:"constructor_",value:function(){0===arguments.length?t.constructor_.call(this,t.DEFAULT_NODE_CAPACITY):1===arguments.length&&p.constructor_.call(this,arguments[0])}},{key:"centreX",value:function(e){return t.avg(e.getMinX(),e.getMaxX())}},{key:"avg",value:function(e,n){return(e+n)/2}},{key:"getItems",value:function(e){for(var n=new Array(e.size()).fill(null),i=0;!e.isEmpty();){var a=e.poll();n[i]=a.getBoundable(0).getItem(),i++}return n}},{key:"centreY",value:function(e){return t.avg(e.getMinY(),e.getMaxY())}}])}(p),_=function(r){function t(){var e;return N(this,t),e=q(this,t),t.constructor_.apply(e,arguments),e}return ot(t,r),x(t,[{key:"computeBounds",value:function(){for(var e=null,n=this.getChildBoundables().iterator();n.hasNext();){var i=n.next();null===e?e=new Kt(i.getBounds()):e.expandToInclude(i.getBounds())}return e}}],[{key:"constructor_",value:function(){re.constructor_.call(this,arguments[0])}}])}(re);v.STRtreeNode=_,v.xComparator=new(x(function r(){N(this,r)},[{key:"interfaces_",get:function(){return[Vn]}},{key:"compare",value:function(r,t){return p.compareDoubles(v.centreX(r.getBounds()),v.centreX(t.getBounds()))}}])),v.yComparator=new(x(function r(){N(this,r)},[{key:"interfaces_",get:function(){return[Vn]}},{key:"compare",value:function(r,t){return p.compareDoubles(v.centreY(r.getBounds()),v.centreY(t.getBounds()))}}])),v.intersectsOp=new(x(function r(){N(this,r)},[{key:"interfaces_",get:function(){return[IntersectsOp]}},{key:"intersects",value:function(r,t){return r.intersects(t)}}])),v.DEFAULT_NODE_CAPACITY=10;var S=function(){function r(){N(this,r)}return x(r,null,[{key:"relativeSign",value:function(t,e){return t<e?-1:t>e?1:0}},{key:"compare",value:function(t,e,n){if(e.equals2D(n))return 0;var i=r.relativeSign(e.x,n.x),a=r.relativeSign(e.y,n.y);switch(t){case 0:return r.compareValue(i,a);case 1:return r.compareValue(a,i);case 2:return r.compareValue(a,-i);case 3:return r.compareValue(-i,a);case 4:return r.compareValue(-i,-a);case 5:return r.compareValue(-a,-i);case 6:return r.compareValue(-a,i);case 7:return r.compareValue(i,-a)}return Dt.shouldNeverReachHere("invalid octant value"),0}},{key:"compareValue",value:function(t,e){return t<0?-1:t>0?1:e<0?-1:e>0?1:0}}])}(),M=x(function r(){N(this,r),r.constructor_.apply(this,arguments)},[{key:"getCoordinate",value:function(){return this.coord}},{key:"print",value:function(r){r.print(this.coord),r.print(" seg # = "+this.segmentIndex)}},{key:"compareTo",value:function(r){var t=r;return this.segmentIndex<t.segmentIndex?-1:this.segmentIndex>t.segmentIndex?1:this.coord.equals2D(t.coord)?0:this._isInterior?t._isInterior?S.compare(this._segmentOctant,this.coord,t.coord):1:-1}},{key:"isEndPoint",value:function(r){return 0===this.segmentIndex&&!this._isInterior||this.segmentIndex===r}},{key:"toString",value:function(){return this.segmentIndex+":"+this.coord.toString()}},{key:"isInterior",value:function(){return this._isInterior}},{key:"interfaces_",get:function(){return[L]}}],[{key:"constructor_",value:function(){this._segString=null,this.coord=null,this.segmentIndex=null,this._segmentOctant=null,this._isInterior=null;var r=arguments[0],t=arguments[1],e=arguments[2],n=arguments[3];this._segString=r,this.coord=new D(t),this.segmentIndex=e,this._segmentOctant=n,this._isInterior=!t.equals2D(r.getCoordinate(e))}}]),b=x(function r(){N(this,r)},[{key:"hasNext",value:function(){}},{key:"next",value:function(){}},{key:"remove",value:function(){}}]),Y=x(function r(){N(this,r),r.constructor_.apply(this,arguments)},[{key:"getSplitCoordinates",value:function(){var r=new en;this.addEndpoints();for(var t=this.iterator(),e=t.next();t.hasNext();){var n=t.next();this.addEdgeCoordinates(e,n,r),e=n}return r.toCoordinateArray()}},{key:"addCollapsedNodes",value:function(){var r=new vt;this.findCollapsesFromInsertedNodes(r),this.findCollapsesFromExistingVertices(r);for(var t=r.iterator();t.hasNext();){var e=t.next().intValue();this.add(this._edge.getCoordinate(e),e)}}},{key:"createSplitEdgePts",value:function(r,t){var e=t.segmentIndex-r.segmentIndex+2;if(2===e)return[new D(r.coord),new D(t.coord)];var n=this._edge.getCoordinate(t.segmentIndex),i=t.isInterior()||!t.coord.equals2D(n);i||e--;var a=new Array(e).fill(null),c=0;a[c++]=new D(r.coord);for(var f=r.segmentIndex+1;f<=t.segmentIndex;f++)a[c++]=this._edge.getCoordinate(f);return i&&(a[c]=new D(t.coord)),a}},{key:"print",value:function(r){r.println("Intersections:");for(var t=this.iterator();t.hasNext();)t.next().print(r)}},{key:"findCollapsesFromExistingVertices",value:function(r){for(var t=0;t<this._edge.size()-2;t++){var e=this._edge.getCoordinate(t);this._edge.getCoordinate(t+1);var n=this._edge.getCoordinate(t+2);e.equals2D(n)&&r.add(vn.valueOf(t+1))}}},{key:"addEdgeCoordinates",value:function(r,t,e){var n=this.createSplitEdgePts(r,t);e.add(n,!1)}},{key:"iterator",value:function(){return this._nodeMap.values().iterator()}},{key:"addSplitEdges",value:function(r){this.addEndpoints(),this.addCollapsedNodes();for(var t=this.iterator(),e=t.next();t.hasNext();){var n=t.next(),i=this.createSplitEdge(e,n);r.add(i),e=n}}},{key:"findCollapseIndex",value:function(r,t,e){if(!r.coord.equals2D(t.coord))return!1;var n=t.segmentIndex-r.segmentIndex;return t.isInterior()||n--,1===n&&(e[0]=r.segmentIndex+1,!0)}},{key:"findCollapsesFromInsertedNodes",value:function(r){for(var t=new Array(1).fill(null),e=this.iterator(),n=e.next();e.hasNext();){var i=e.next();this.findCollapseIndex(n,i,t)&&r.add(vn.valueOf(t[0])),n=i}}},{key:"getEdge",value:function(){return this._edge}},{key:"addEndpoints",value:function(){var r=this._edge.size()-1;this.add(this._edge.getCoordinate(0),0),this.add(this._edge.getCoordinate(r),r)}},{key:"createSplitEdge",value:function(r,t){var e=this.createSplitEdgePts(r,t);return new st(e,this._edge.getData())}},{key:"add",value:function(r,t){var e=new M(this._edge,r,t,this._edge.getSegmentOctant(t)),n=this._nodeMap.get(e);return null!==n?(Dt.isTrue(n.coord.equals2D(r),"Found equal nodes with different coordinates"),n):(this._nodeMap.put(e,e),e)}},{key:"checkSplitEdgesCorrectness",value:function(r){var t=this._edge.getCoordinates(),e=r.get(0).getCoordinate(0);if(!e.equals2D(t[0]))throw new At("bad split edge start point at "+e);var n=r.get(r.size()-1).getCoordinates(),i=n[n.length-1];if(!i.equals2D(t[t.length-1]))throw new At("bad split edge end point at "+i)}}],[{key:"constructor_",value:function(){this._nodeMap=new Nn,this._edge=null,this._edge=arguments[0]}}]),nt=function(){function r(){N(this,r)}return x(r,null,[{key:"octant",value:function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1];if(0===t&&0===e)throw new j("Cannot compute the octant for point ( "+t+", "+e+" )");var n=Math.abs(t),i=Math.abs(e);return t>=0?e>=0?n>=i?0:1:n>=i?7:6:e>=0?n>=i?3:2:n>=i?4:5}if(arguments[0]instanceof D&&arguments[1]instanceof D){var a=arguments[0],c=arguments[1],f=c.x-a.x,m=c.y-a.y;if(0===f&&0===m)throw new j("Cannot compute the octant for two identical points "+a);return r.octant(f,m)}}}])}(),rt=x(function r(){N(this,r)},[{key:"getCoordinates",value:function(){}},{key:"size",value:function(){}},{key:"getCoordinate",value:function(r){}},{key:"isClosed",value:function(){}},{key:"setData",value:function(r){}},{key:"getData",value:function(){}}]),X=x(function r(){N(this,r)},[{key:"addIntersection",value:function(r,t){}},{key:"interfaces_",get:function(){return[rt]}}]),st=function(){function r(){N(this,r),r.constructor_.apply(this,arguments)}return x(r,[{key:"getCoordinates",value:function(){return this._pts}},{key:"size",value:function(){return this._pts.length}},{key:"getCoordinate",value:function(t){return this._pts[t]}},{key:"isClosed",value:function(){return this._pts[0].equals(this._pts[this._pts.length-1])}},{key:"getSegmentOctant",value:function(t){return t===this._pts.length-1?-1:this.safeOctant(this.getCoordinate(t),this.getCoordinate(t+1))}},{key:"setData",value:function(t){this._data=t}},{key:"safeOctant",value:function(t,e){return t.equals2D(e)?0:nt.octant(t,e)}},{key:"getData",value:function(){return this._data}},{key:"addIntersection",value:function(){if(2===arguments.length)this.addIntersectionNode(arguments[0],arguments[1]);else if(4===arguments.length){var n=arguments[1],a=new D(arguments[0].getIntersection(arguments[3]));this.addIntersection(a,n)}}},{key:"toString",value:function(){return te.toLineString(new cn(this._pts))}},{key:"getNodeList",value:function(){return this._nodeList}},{key:"addIntersectionNode",value:function(t,e){var n=e,i=n+1;return i<this._pts.length&&t.equals2D(this._pts[i])&&(n=i),this._nodeList.add(t,n)}},{key:"addIntersections",value:function(t,e,n){for(var i=0;i<t.getIntersectionNum();i++)this.addIntersection(t,e,n,i)}},{key:"interfaces_",get:function(){return[X]}}],[{key:"constructor_",value:function(){this._nodeList=new Y(this),this._pts=null,this._data=null;var e=arguments[1];this._pts=arguments[0],this._data=e}},{key:"getNodedSubstrings",value:function(){if(1===arguments.length){var t=arguments[0],e=new vt;return r.getNodedSubstrings(t,e),e}if(2===arguments.length)for(var n=arguments[1],i=arguments[0].iterator();i.hasNext();)i.next().getNodeList().addSplitEdges(n)}}])}(),Gt=function(){function r(){N(this,r),r.constructor_.apply(this,arguments)}return x(r,[{key:"minX",value:function(){return Math.min(this.p0.x,this.p1.x)}},{key:"orientationIndex",value:function(){if(arguments[0]instanceof r){var t=arguments[0],e=xt.index(this.p0,this.p1,t.p0),n=xt.index(this.p0,this.p1,t.p1);return e>=0&&n>=0||e<=0&&n<=0?Math.max(e,n):0}if(arguments[0]instanceof D)return xt.index(this.p0,this.p1,arguments[0])}},{key:"toGeometry",value:function(t){return t.createLineString([this.p0,this.p1])}},{key:"isVertical",value:function(){return this.p0.x===this.p1.x}},{key:"equals",value:function(t){if(!(t instanceof r))return!1;var e=t;return this.p0.equals(e.p0)&&this.p1.equals(e.p1)}},{key:"intersection",value:function(t){var e=new nn;return e.computeIntersection(this.p0,this.p1,t.p0,t.p1),e.hasIntersection()?e.getIntersection(0):null}},{key:"project",value:function(){if(arguments[0]instanceof D){var t=arguments[0];if(t.equals(this.p0)||t.equals(this.p1))return new D(t);var e=this.projectionFactor(t),n=new D;return n.x=this.p0.x+e*(this.p1.x-this.p0.x),n.y=this.p0.y+e*(this.p1.y-this.p0.y),n}if(arguments[0]instanceof r){var i=arguments[0],a=this.projectionFactor(i.p0),c=this.projectionFactor(i.p1);if(a>=1&&c>=1||a<=0&&c<=0)return null;var f=this.project(i.p0);a<0&&(f=this.p0),a>1&&(f=this.p1);var m=this.project(i.p1);return c<0&&(m=this.p0),c>1&&(m=this.p1),new r(f,m)}}},{key:"normalize",value:function(){this.p1.compareTo(this.p0)<0&&this.reverse()}},{key:"angle",value:function(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)}},{key:"getCoordinate",value:function(t){return 0===t?this.p0:this.p1}},{key:"distancePerpendicular",value:function(t){return ne.pointToLinePerpendicular(t,this.p0,this.p1)}},{key:"minY",value:function(){return Math.min(this.p0.y,this.p1.y)}},{key:"midPoint",value:function(){return r.midPoint(this.p0,this.p1)}},{key:"projectionFactor",value:function(t){if(t.equals(this.p0))return 0;if(t.equals(this.p1))return 1;var e=this.p1.x-this.p0.x,n=this.p1.y-this.p0.y,i=e*e+n*n;return i<=0?gt.NaN:((t.x-this.p0.x)*e+(t.y-this.p0.y)*n)/i}},{key:"closestPoints",value:function(t){var e=this.intersection(t);if(null!==e)return[e,e];var n=new Array(2).fill(null),i=gt.MAX_VALUE,a=null,c=this.closestPoint(t.p0);i=c.distance(t.p0),n[0]=c,n[1]=t.p0;var f=this.closestPoint(t.p1);(a=f.distance(t.p1))<i&&(i=a,n[0]=f,n[1]=t.p1);var m=t.closestPoint(this.p0);(a=m.distance(this.p0))<i&&(i=a,n[0]=this.p0,n[1]=m);var E=t.closestPoint(this.p1);return(a=E.distance(this.p1))<i&&(i=a,n[0]=this.p1,n[1]=E),n}},{key:"closestPoint",value:function(t){var e=this.projectionFactor(t);return e>0&&e<1?this.project(t):this.p0.distance(t)<this.p1.distance(t)?this.p0:this.p1}},{key:"maxX",value:function(){return Math.max(this.p0.x,this.p1.x)}},{key:"getLength",value:function(){return this.p0.distance(this.p1)}},{key:"compareTo",value:function(t){var e=t,n=this.p0.compareTo(e.p0);return 0!==n?n:this.p1.compareTo(e.p1)}},{key:"reverse",value:function(){var t=this.p0;this.p0=this.p1,this.p1=t}},{key:"equalsTopo",value:function(t){return this.p0.equals(t.p0)&&this.p1.equals(t.p1)||this.p0.equals(t.p1)&&this.p1.equals(t.p0)}},{key:"lineIntersection",value:function(t){return or.intersection(this.p0,this.p1,t.p0,t.p1)}},{key:"maxY",value:function(){return Math.max(this.p0.y,this.p1.y)}},{key:"pointAlongOffset",value:function(t,e){var n=this.p0.x+t*(this.p1.x-this.p0.x),i=this.p0.y+t*(this.p1.y-this.p0.y),a=this.p1.x-this.p0.x,c=this.p1.y-this.p0.y,f=Math.sqrt(a*a+c*c),m=0,E=0;if(0!==e){if(f<=0)throw new IllegalStateException("Cannot compute offset from zero-length line segment");m=e*a/f,E=e*c/f}return new D(n-E,i+m)}},{key:"setCoordinates",value:function(){if(1===arguments.length){var t=arguments[0];this.setCoordinates(t.p0,t.p1)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.p0.x=e.x,this.p0.y=e.y,this.p1.x=n.x,this.p1.y=n.y}}},{key:"segmentFraction",value:function(t){var e=this.projectionFactor(t);return e<0?e=0:(e>1||gt.isNaN(e))&&(e=1),e}},{key:"toString",value:function(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"}},{key:"isHorizontal",value:function(){return this.p0.y===this.p1.y}},{key:"reflect",value:function(t){var e=this.p1.getY()-this.p0.getY(),n=this.p0.getX()-this.p1.getX(),i=this.p0.getY()*(this.p1.getX()-this.p0.getX())-this.p0.getX()*(this.p1.getY()-this.p0.getY()),a=e*e+n*n,c=e*e-n*n,f=t.getX(),m=t.getY();return new D((-c*f-2*e*n*m-2*e*i)/a,(c*m-2*e*n*f-2*n*i)/a)}},{key:"distance",value:function(){if(arguments[0]instanceof r){var t=arguments[0];return ne.segmentToSegment(this.p0,this.p1,t.p0,t.p1)}if(arguments[0]instanceof D)return ne.pointToSegment(arguments[0],this.p0,this.p1)}},{key:"pointAlong",value:function(t){var e=new D;return e.x=this.p0.x+t*(this.p1.x-this.p0.x),e.y=this.p0.y+t*(this.p1.y-this.p0.y),e}},{key:"hashCode",value:function(){var t=gt.doubleToLongBits(this.p0.x);t^=31*gt.doubleToLongBits(this.p0.y);var e=Math.trunc(t)^Math.trunc(t>>32),n=gt.doubleToLongBits(this.p1.x);return n^=31*gt.doubleToLongBits(this.p1.y),e^Math.trunc(n)^Math.trunc(n>>32)}},{key:"interfaces_",get:function(){return[L,ct]}}],[{key:"constructor_",value:function(){if(this.p0=null,this.p1=null,0===arguments.length)r.constructor_.call(this,new D,new D);else if(1===arguments.length){var t=arguments[0];r.constructor_.call(this,t.p0,t.p1)}else if(2===arguments.length){var n=arguments[1];this.p0=arguments[0],this.p1=n}else if(4===arguments.length){var c=arguments[2],f=arguments[3];r.constructor_.call(this,new D(arguments[0],arguments[1]),new D(c,f))}}},{key:"midPoint",value:function(t,e){return new D((t.x+e.x)/2,(t.y+e.y)/2)}}])}(),ie=x(function r(){N(this,r),r.constructor_.apply(this,arguments)},[{key:"overlap",value:function(){if(2!==arguments.length&&4===arguments.length){var t=arguments[2],e=arguments[3];arguments[0].getLineSegment(arguments[1],this._overlapSeg1),t.getLineSegment(e,this._overlapSeg2),this.overlap(this._overlapSeg1,this._overlapSeg2)}}}],[{key:"constructor_",value:function(){this._overlapSeg1=new Gt,this._overlapSeg2=new Gt}}]),pt=x(function r(){N(this,r),r.constructor_.apply(this,arguments)},[{key:"getLineSegment",value:function(r,t){t.p0=this._pts[r],t.p1=this._pts[r+1]}},{key:"computeSelect",value:function(r,t,e,n){var i=this._pts[t],a=this._pts[e];if(e-t==1)return n.select(this,t),null;if(!r.intersects(i,a))return null;var c=Math.trunc((t+e)/2);t<c&&this.computeSelect(r,t,c,n),c<e&&this.computeSelect(r,c,e,n)}},{key:"getCoordinates",value:function(){for(var r=new Array(this._end-this._start+1).fill(null),t=0,e=this._start;e<=this._end;e++)r[t++]=this._pts[e];return r}},{key:"computeOverlaps",value:function(){if(2===arguments.length){var r=arguments[0];this.computeOverlaps(this._start,this._end,r,r._start,r._end,arguments[1])}else if(6===arguments.length){var e=arguments[0],n=arguments[1],i=arguments[2],a=arguments[3],c=arguments[4],f=arguments[5];if(n-e==1&&c-a==1)return f.overlap(this,e,i,a),null;if(!this.overlaps(e,n,i,a,c))return null;var m=Math.trunc((e+n)/2),E=Math.trunc((a+c)/2);e<m&&(a<E&&this.computeOverlaps(e,m,i,a,E,f),E<c&&this.computeOverlaps(e,m,i,E,c,f)),m<n&&(a<E&&this.computeOverlaps(m,n,i,a,E,f),E<c&&this.computeOverlaps(m,n,i,E,c,f))}}},{key:"setId",value:function(r){this._id=r}},{key:"select",value:function(r,t){this.computeSelect(r,this._start,this._end,t)}},{key:"getEnvelope",value:function(){return null===this._env&&(this._env=new Kt(this._pts[this._start],this._pts[this._end])),this._env}},{key:"overlaps",value:function(r,t,e,n,i){return Kt.intersects(this._pts[r],this._pts[t],e._pts[n],e._pts[i])}},{key:"getEndIndex",value:function(){return this._end}},{key:"getStartIndex",value:function(){return this._start}},{key:"getContext",value:function(){return this._context}},{key:"getId",value:function(){return this._id}}],[{key:"constructor_",value:function(){this._pts=null,this._start=null,this._end=null,this._env=null,this._context=null,this._id=null;var t=arguments[1],e=arguments[2],n=arguments[3];this._pts=arguments[0],this._start=t,this._end=e,this._context=n}}]),Rt=function(){function r(){N(this,r)}return x(r,null,[{key:"findChainEnd",value:function(t,e){for(var n=e;n<t.length-1&&t[n].equals2D(t[n+1]);)n++;if(n>=t.length-1)return t.length-1;for(var i=fe.quadrant(t[n],t[n+1]),a=e+1;a<t.length&&(t[a-1].equals2D(t[a])||fe.quadrant(t[a-1],t[a])===i);)a++;return a-1}},{key:"getChains",value:function(){if(1===arguments.length)return r.getChains(arguments[0],null);if(2===arguments.length){var e=arguments[0],n=arguments[1],i=new vt,a=0;do{var c=r.findChainEnd(e,a),f=new pt(e,a,c,n);i.add(f),a=c}while(a<e.length-1);return i}}}])}(),me=x(function r(){N(this,r)},[{key:"computeNodes",value:function(r){}},{key:"getNodedSubstrings",value:function(){}}]),oe=x(function r(){N(this,r),r.constructor_.apply(this,arguments)},[{key:"setSegmentIntersector",value:function(r){this._segInt=r}},{key:"interfaces_",get:function(){return[me]}}],[{key:"constructor_",value:function(){this._segInt=null,0!==arguments.length&&1===arguments.length&&this.setSegmentIntersector(arguments[0])}}]),Ie=function(r){function t(){var e;return N(this,t),e=q(this,t),t.constructor_.apply(e,arguments),e}return ot(t,r),x(t,[{key:"getMonotoneChains",value:function(){return this._monoChains}},{key:"getNodedSubstrings",value:function(){return st.getNodedSubstrings(this._nodedSegStrings)}},{key:"getIndex",value:function(){return this._index}},{key:"add",value:function(e){for(var n=Rt.getChains(e.getCoordinates(),e).iterator();n.hasNext();){var i=n.next();i.setId(this._idCounter++),this._index.insert(i.getEnvelope(),i),this._monoChains.add(i)}}},{key:"computeNodes",value:function(e){this._nodedSegStrings=e;for(var n=e.iterator();n.hasNext();)this.add(n.next());this.intersectChains()}},{key:"intersectChains",value:function(){for(var e=new ze(this._segInt),n=this._monoChains.iterator();n.hasNext();)for(var i=n.next(),a=this._index.query(i.getEnvelope()).iterator();a.hasNext();){var c=a.next();if(c.getId()>i.getId()&&(i.computeOverlaps(c,e),this._nOverlaps++),this._segInt.isDone())return null}}}],[{key:"constructor_",value:function(){this._monoChains=new vt,this._index=new v,this._idCounter=0,this._nodedSegStrings=null,this._nOverlaps=0,0!==arguments.length&&1===arguments.length&&oe.constructor_.call(this,arguments[0])}}])}(oe),ze=function(r){function t(){var e;return N(this,t),e=q(this,t),t.constructor_.apply(e,arguments),e}return ot(t,r),x(t,[{key:"overlap",value:function(){if(4!==arguments.length)return Et(t,"overlap",this,1).apply(this,arguments);var e=arguments[1],n=arguments[2],i=arguments[3],a=arguments[0].getContext(),c=n.getContext();this._si.processIntersections(a,e,c,i)}}],[{key:"constructor_",value:function(){this._si=null,this._si=arguments[0]}}])}(ie);Ie.SegmentOverlapAction=ze;var Zt=function(){function r(){N(this,r),r.constructor_.apply(this,arguments)}return x(r,[{key:"isDeletable",value:function(t,e,n,i){var a=this._inputLine[t],c=this._inputLine[e],f=this._inputLine[n];return!!this.isConcave(a,c,f)&&!!this.isShallow(a,c,f,i)&&this.isShallowSampled(a,c,t,n,i)}},{key:"deleteShallowConcavities",value:function(){for(var t=1,e=this.findNextNonDeletedIndex(t),n=this.findNextNonDeletedIndex(e),i=!1;n<this._inputLine.length;){var a=!1;this.isDeletable(t,e,n,this._distanceTol)&&(this._isDeleted[e]=r.DELETE,a=!0,i=!0),e=this.findNextNonDeletedIndex(t=a?n:e),n=this.findNextNonDeletedIndex(e)}return i}},{key:"isShallowConcavity",value:function(t,e,n,i){return xt.index(t,e,n)===this._angleOrientation&&ne.pointToSegment(e,t,n)<i}},{key:"isShallowSampled",value:function(t,e,n,i,a){var c=Math.trunc((i-n)/r.NUM_PTS_TO_CHECK);c<=0&&(c=1);for(var f=n;f<i;f+=c)if(!this.isShallow(t,e,this._inputLine[f],a))return!1;return!0}},{key:"isConcave",value:function(t,e,n){return xt.index(t,e,n)===this._angleOrientation}},{key:"simplify",value:function(t){this._distanceTol=Math.abs(t),t<0&&(this._angleOrientation=xt.CLOCKWISE),this._isDeleted=new Array(this._inputLine.length).fill(null);var e=!1;do{e=this.deleteShallowConcavities()}while(e);return this.collapseLine()}},{key:"findNextNonDeletedIndex",value:function(t){for(var e=t+1;e<this._inputLine.length&&this._isDeleted[e]===r.DELETE;)e++;return e}},{key:"isShallow",value:function(t,e,n,i){return ne.pointToSegment(e,t,n)<i}},{key:"collapseLine",value:function(){for(var t=new en,e=0;e<this._inputLine.length;e++)this._isDeleted[e]!==r.DELETE&&t.add(this._inputLine[e]);return t.toCoordinateArray()}}],[{key:"constructor_",value:function(){this._inputLine=null,this._distanceTol=null,this._isDeleted=null,this._angleOrientation=xt.COUNTERCLOCKWISE,this._inputLine=arguments[0]}},{key:"simplify",value:function(t,e){return new r(t).simplify(e)}}])}();Zt.INIT=0,Zt.DELETE=1,Zt.KEEP=1,Zt.NUM_PTS_TO_CHECK=10;var Sn=function(){function r(){N(this,r),r.constructor_.apply(this,arguments)}return x(r,[{key:"getCoordinates",value:function(){return this._ptList.toArray(r.COORDINATE_ARRAY_TYPE)}},{key:"setPrecisionModel",value:function(t){this._precisionModel=t}},{key:"addPt",value:function(t){var e=new D(t);if(this._precisionModel.makePrecise(e),this.isRedundant(e))return null;this._ptList.add(e)}},{key:"reverse",value:function(){}},{key:"addPts",value:function(t,e){if(e)for(var n=0;n<t.length;n++)this.addPt(t[n]);else for(var i=t.length-1;i>=0;i--)this.addPt(t[i])}},{key:"isRedundant",value:function(t){if(this._ptList.size()<1)return!1;var e=this._ptList.get(this._ptList.size()-1);return t.distance(e)<this._minimimVertexDistance}},{key:"toString",value:function(){return(new St).createLineString(this.getCoordinates()).toString()}},{key:"closeRing",value:function(){if(this._ptList.size()<1)return null;var t=new D(this._ptList.get(0)),e=this._ptList.get(this._ptList.size()-1);if(t.equals(e))return null;this._ptList.add(t)}},{key:"setMinimumVertexDistance",value:function(t){this._minimimVertexDistance=t}}],[{key:"constructor_",value:function(){this._ptList=null,this._precisionModel=null,this._minimimVertexDistance=0,this._ptList=new vt}}])}();Sn.COORDINATE_ARRAY_TYPE=new Array(0).fill(null);var Ee=function(){function r(){N(this,r)}return x(r,null,[{key:"toDegrees",value:function(t){return 180*t/Math.PI}},{key:"normalize",value:function(t){for(;t>Math.PI;)t-=r.PI_TIMES_2;for(;t<=-Math.PI;)t+=r.PI_TIMES_2;return t}},{key:"angle",value:function(){if(1===arguments.length){var t=arguments[0];return Math.atan2(t.y,t.x)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return Math.atan2(n.y-e.y,n.x-e.x)}}},{key:"isAcute",value:function(t,e,n){return(t.x-e.x)*(n.x-e.x)+(t.y-e.y)*(n.y-e.y)>0}},{key:"isObtuse",value:function(t,e,n){return(t.x-e.x)*(n.x-e.x)+(t.y-e.y)*(n.y-e.y)<0}},{key:"interiorAngle",value:function(t,e,n){var i=r.angle(e,t),a=r.angle(e,n);return Math.abs(a-i)}},{key:"normalizePositive",value:function(t){if(t<0){for(;t<0;)t+=r.PI_TIMES_2;t>=r.PI_TIMES_2&&(t=0)}else{for(;t>=r.PI_TIMES_2;)t-=r.PI_TIMES_2;t<0&&(t=0)}return t}},{key:"angleBetween",value:function(t,e,n){var i=r.angle(e,t),a=r.angle(e,n);return r.diff(i,a)}},{key:"diff",value:function(t,e){var n=null;return(n=t<e?e-t:t-e)>Math.PI&&(n=2*Math.PI-n),n}},{key:"toRadians",value:function(t){return t*Math.PI/180}},{key:"getTurn",value:function(t,e){var n=Math.sin(e-t);return n>0?r.COUNTERCLOCKWISE:n<0?r.CLOCKWISE:r.NONE}},{key:"angleBetweenOriented",value:function(t,e,n){var i=r.angle(e,t),a=r.angle(e,n)-i;return a<=-Math.PI?a+r.PI_TIMES_2:a>Math.PI?a-r.PI_TIMES_2:a}}])}();Ee.PI_TIMES_2=2*Math.PI,Ee.PI_OVER_2=Math.PI/2,Ee.PI_OVER_4=Math.PI/4,Ee.COUNTERCLOCKWISE=xt.COUNTERCLOCKWISE,Ee.CLOCKWISE=xt.CLOCKWISE,Ee.NONE=xt.COLLINEAR;var Oe=function(){function r(){N(this,r),r.constructor_.apply(this,arguments)}return x(r,[{key:"addNextSegment",value:function(t,e){if(this._s0=this._s1,this._s1=this._s2,this._s2=t,this._seg0.setCoordinates(this._s0,this._s1),this.computeOffsetSegment(this._seg0,this._side,this._distance,this._offset0),this._seg1.setCoordinates(this._s1,this._s2),this.computeOffsetSegment(this._seg1,this._side,this._distance,this._offset1),this._s1.equals(this._s2))return null;var n=xt.index(this._s0,this._s1,this._s2),i=n===xt.CLOCKWISE&&this._side===Z.LEFT||n===xt.COUNTERCLOCKWISE&&this._side===Z.RIGHT;0===n?this.addCollinear(e):i?this.addOutsideTurn(n,e):this.addInsideTurn(n,e)}},{key:"addLineEndCap",value:function(t,e){var n=new Gt(t,e),i=new Gt;this.computeOffsetSegment(n,Z.LEFT,this._distance,i);var a=new Gt;this.computeOffsetSegment(n,Z.RIGHT,this._distance,a);var m=Math.atan2(e.y-t.y,e.x-t.x);switch(this._bufParams.getEndCapStyle()){case W.CAP_ROUND:this._segList.addPt(i.p1),this.addDirectedFillet(e,m+Math.PI/2,m-Math.PI/2,xt.CLOCKWISE,this._distance),this._segList.addPt(a.p1);break;case W.CAP_FLAT:this._segList.addPt(i.p1),this._segList.addPt(a.p1);break;case W.CAP_SQUARE:var E=new D;E.x=Math.abs(this._distance)*Math.cos(m),E.y=Math.abs(this._distance)*Math.sin(m);var O=new D(i.p1.x+E.x,i.p1.y+E.y),P=new D(a.p1.x+E.x,a.p1.y+E.y);this._segList.addPt(O),this._segList.addPt(P)}}},{key:"getCoordinates",value:function(){return this._segList.getCoordinates()}},{key:"addMitreJoin",value:function(t,e,n,i){var a=or.intersection(e.p0,e.p1,n.p0,n.p1);if(null!==a&&(i<=0?1:a.distance(t)/Math.abs(i))<=this._bufParams.getMitreLimit())return this._segList.addPt(a),null;this.addLimitedMitreJoin(e,n,i,this._bufParams.getMitreLimit())}},{key:"addOutsideTurn",value:function(t,e){if(this._offset0.p1.distance(this._offset1.p0)<this._distance*r.OFFSET_SEGMENT_SEPARATION_FACTOR)return this._segList.addPt(this._offset0.p1),null;this._bufParams.getJoinStyle()===W.JOIN_MITRE?this.addMitreJoin(this._s1,this._offset0,this._offset1,this._distance):this._bufParams.getJoinStyle()===W.JOIN_BEVEL?this.addBevelJoin(this._offset0,this._offset1):(e&&this._segList.addPt(this._offset0.p1),this.addCornerFillet(this._s1,this._offset0.p1,this._offset1.p0,t,this._distance),this._segList.addPt(this._offset1.p0))}},{key:"createSquare",value:function(t){this._segList.addPt(new D(t.x+this._distance,t.y+this._distance)),this._segList.addPt(new D(t.x+this._distance,t.y-this._distance)),this._segList.addPt(new D(t.x-this._distance,t.y-this._distance)),this._segList.addPt(new D(t.x-this._distance,t.y+this._distance)),this._segList.closeRing()}},{key:"addSegments",value:function(t,e){this._segList.addPts(t,e)}},{key:"addFirstSegment",value:function(){this._segList.addPt(this._offset1.p0)}},{key:"addCornerFillet",value:function(t,e,n,i,a){var m=Math.atan2(e.y-t.y,e.x-t.x),P=Math.atan2(n.y-t.y,n.x-t.x);i===xt.CLOCKWISE?m<=P&&(m+=2*Math.PI):m>=P&&(m-=2*Math.PI),this._segList.addPt(e),this.addDirectedFillet(t,m,P,i,a),this._segList.addPt(n)}},{key:"addLastSegment",value:function(){this._segList.addPt(this._offset1.p1)}},{key:"initSideSegments",value:function(t,e,n){this._s1=t,this._s2=e,this._side=n,this._seg1.setCoordinates(t,e),this.computeOffsetSegment(this._seg1,n,this._distance,this._offset1)}},{key:"addLimitedMitreJoin",value:function(t,e,n,i){var a=this._seg0.p1,c=Ee.angle(a,this._seg0.p0),f=Ee.angleBetweenOriented(this._seg0.p0,a,this._seg1.p1)/2,m=Ee.normalize(c+f),E=Ee.normalize(m+Math.PI),O=i*n,P=n-O*Math.abs(Math.sin(f)),z=a.x+O*Math.cos(E),tt=a.y+O*Math.sin(E),ut=new D(z,tt),ht=new Gt(a,ut),Bt=ht.pointAlongOffset(1,P),Yt=ht.pointAlongOffset(1,-P);this._side===Z.LEFT?(this._segList.addPt(Bt),this._segList.addPt(Yt)):(this._segList.addPt(Yt),this._segList.addPt(Bt))}},{key:"addDirectedFillet",value:function(t,e,n,i,a){var c=i===xt.CLOCKWISE?-1:1,f=Math.abs(e-n),m=Math.trunc(f/this._filletAngleQuantum+.5);if(m<1)return null;for(var E=f/m,O=new D,P=0;P<m;P++){var z=e+c*P*E;O.x=t.x+a*Math.cos(z),O.y=t.y+a*Math.sin(z),this._segList.addPt(O)}}},{key:"computeOffsetSegment",value:function(t,e,n,i){var a=e===Z.LEFT?1:-1,c=t.p1.x-t.p0.x,f=t.p1.y-t.p0.y,m=Math.sqrt(c*c+f*f),E=a*n*c/m,O=a*n*f/m;i.p0.x=t.p0.x-O,i.p0.y=t.p0.y+E,i.p1.x=t.p1.x-O,i.p1.y=t.p1.y+E}},{key:"addInsideTurn",value:function(t,e){if(this._li.computeIntersection(this._offset0.p0,this._offset0.p1,this._offset1.p0,this._offset1.p1),this._li.hasIntersection())this._segList.addPt(this._li.getIntersection(0));else if(this._hasNarrowConcaveAngle=!0,this._offset0.p1.distance(this._offset1.p0)<this._distance*r.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)this._segList.addPt(this._offset0.p1);else{if(this._segList.addPt(this._offset0.p1),this._closingSegLengthFactor>0){var n=new D((this._closingSegLengthFactor*this._offset0.p1.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset0.p1.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(n);var i=new D((this._closingSegLengthFactor*this._offset1.p0.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset1.p0.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(i)}else this._segList.addPt(this._s1);this._segList.addPt(this._offset1.p0)}}},{key:"createCircle",value:function(t){var e=new D(t.x+this._distance,t.y);this._segList.addPt(e),this.addDirectedFillet(t,0,2*Math.PI,-1,this._distance),this._segList.closeRing()}},{key:"addBevelJoin",value:function(t,e){this._segList.addPt(t.p1),this._segList.addPt(e.p0)}},{key:"init",value:function(t){this._distance=t,this._maxCurveSegmentError=t*(1-Math.cos(this._filletAngleQuantum/2)),this._segList=new Sn,this._segList.setPrecisionModel(this._precisionModel),this._segList.setMinimumVertexDistance(t*r.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)}},{key:"addCollinear",value:function(t){this._li.computeIntersection(this._s0,this._s1,this._s1,this._s2),this._li.getIntersectionNum()>=2&&(this._bufParams.getJoinStyle()===W.JOIN_BEVEL||this._bufParams.getJoinStyle()===W.JOIN_MITRE?(t&&this._segList.addPt(this._offset0.p1),this._segList.addPt(this._offset1.p0)):this.addCornerFillet(this._s1,this._offset0.p1,this._offset1.p0,xt.CLOCKWISE,this._distance))}},{key:"closeRing",value:function(){this._segList.closeRing()}},{key:"hasNarrowConcaveAngle",value:function(){return this._hasNarrowConcaveAngle}}],[{key:"constructor_",value:function(){this._maxCurveSegmentError=0,this._filletAngleQuantum=null,this._closingSegLengthFactor=1,this._segList=null,this._distance=0,this._precisionModel=null,this._bufParams=null,this._li=null,this._s0=null,this._s1=null,this._s2=null,this._seg0=new Gt,this._seg1=new Gt,this._offset0=new Gt,this._offset1=new Gt,this._side=0,this._hasNarrowConcaveAngle=!1;var e=arguments[1],n=arguments[2];this._precisionModel=arguments[0],this._bufParams=e,this._li=new nn,this._filletAngleQuantum=Math.PI/2/e.getQuadrantSegments(),e.getQuadrantSegments()>=8&&e.getJoinStyle()===W.JOIN_ROUND&&(this._closingSegLengthFactor=r.MAX_CLOSING_SEG_LEN_FACTOR),this.init(n)}}])}();Oe.OFFSET_SEGMENT_SEPARATION_FACTOR=.001,Oe.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR=.001,Oe.CURVE_VERTEX_SNAP_DISTANCE_FACTOR=1e-6,Oe.MAX_CLOSING_SEG_LEN_FACTOR=80;var pn=function(){function r(){N(this,r),r.constructor_.apply(this,arguments)}return x(r,[{key:"getOffsetCurve",value:function(t,e){if(this._distance=e,0===e)return null;var n=e<0,i=Math.abs(e),a=this.getSegGen(i);t.length<=1?this.computePointCurve(t[0],a):this.computeOffsetCurve(t,n,a);var c=a.getCoordinates();return n&&ce.reverse(c),c}},{key:"computeSingleSidedBufferCurve",value:function(t,e,n){var i=this.simplifyTolerance(this._distance);if(e){n.addSegments(t,!0);var a=Zt.simplify(t,-i),c=a.length-1;n.initSideSegments(a[c],a[c-1],Z.LEFT),n.addFirstSegment();for(var f=c-2;f>=0;f--)n.addNextSegment(a[f],!0)}else{n.addSegments(t,!1);var m=Zt.simplify(t,i),E=m.length-1;n.initSideSegments(m[0],m[1],Z.LEFT),n.addFirstSegment();for(var O=2;O<=E;O++)n.addNextSegment(m[O],!0)}n.addLastSegment(),n.closeRing()}},{key:"computeRingBufferCurve",value:function(t,e,n){var i=this.simplifyTolerance(this._distance);e===Z.RIGHT&&(i=-i);var a=Zt.simplify(t,i),c=a.length-1;n.initSideSegments(a[c-1],a[0],e);for(var f=1;f<=c;f++)n.addNextSegment(a[f],1!==f);n.closeRing()}},{key:"computeLineBufferCurve",value:function(t,e){var n=this.simplifyTolerance(this._distance),i=Zt.simplify(t,n),a=i.length-1;e.initSideSegments(i[0],i[1],Z.LEFT);for(var c=2;c<=a;c++)e.addNextSegment(i[c],!0);e.addLastSegment(),e.addLineEndCap(i[a-1],i[a]);var f=Zt.simplify(t,-n),m=f.length-1;e.initSideSegments(f[m],f[m-1],Z.LEFT);for(var E=m-2;E>=0;E--)e.addNextSegment(f[E],!0);e.addLastSegment(),e.addLineEndCap(f[1],f[0]),e.closeRing()}},{key:"computePointCurve",value:function(t,e){switch(this._bufParams.getEndCapStyle()){case W.CAP_ROUND:e.createCircle(t);break;case W.CAP_SQUARE:e.createSquare(t)}}},{key:"getLineCurve",value:function(t,e){if(this._distance=e,this.isLineOffsetEmpty(e))return null;var n=Math.abs(e),i=this.getSegGen(n);return t.length<=1?this.computePointCurve(t[0],i):this._bufParams.isSingleSided()?this.computeSingleSidedBufferCurve(t,e<0,i):this.computeLineBufferCurve(t,i),i.getCoordinates()}},{key:"getBufferParameters",value:function(){return this._bufParams}},{key:"simplifyTolerance",value:function(t){return t*this._bufParams.getSimplifyFactor()}},{key:"getRingCurve",value:function(t,e,n){if(this._distance=n,t.length<=2)return this.getLineCurve(t,n);if(0===n)return r.copyCoordinates(t);var i=this.getSegGen(n);return this.computeRingBufferCurve(t,e,i),i.getCoordinates()}},{key:"computeOffsetCurve",value:function(t,e,n){var i=this.simplifyTolerance(this._distance);if(e){var a=Zt.simplify(t,-i),c=a.length-1;n.initSideSegments(a[c],a[c-1],Z.LEFT),n.addFirstSegment();for(var f=c-2;f>=0;f--)n.addNextSegment(a[f],!0)}else{var m=Zt.simplify(t,i),E=m.length-1;n.initSideSegments(m[0],m[1],Z.LEFT),n.addFirstSegment();for(var O=2;O<=E;O++)n.addNextSegment(m[O],!0)}n.addLastSegment()}},{key:"isLineOffsetEmpty",value:function(t){return 0===t||t<0&&!this._bufParams.isSingleSided()}},{key:"getSegGen",value:function(t){return new Oe(this._precisionModel,this._bufParams,t)}}],[{key:"constructor_",value:function(){this._distance=0,this._precisionModel=null,this._bufParams=null;var e=arguments[1];this._precisionModel=arguments[0],this._bufParams=e}},{key:"copyCoordinates",value:function(t){for(var e=new Array(t.length).fill(null),n=0;n<e.length;n++)e[n]=new D(t[n]);return e}}])}(),er=x(function r(){N(this,r),r.constructor_.apply(this,arguments)},[{key:"findStabbedSegments",value:function(){if(1===arguments.length){for(var r=arguments[0],t=new vt,e=this._subgraphs.iterator();e.hasNext();){var n=e.next(),i=n.getEnvelope();r.y<i.getMinY()||r.y>i.getMaxY()||this.findStabbedSegments(r,n.getDirectedEdges(),t)}return t}if(3===arguments.length)if(Ot(arguments[2],qe)&&arguments[0]instanceof D&&arguments[1]instanceof Gn){for(var a=arguments[0],c=arguments[1],f=arguments[2],m=c.getEdge().getCoordinates(),E=0;E<m.length-1;E++)if(this._seg.p0=m[E],this._seg.p1=m[E+1],this._seg.p0.y>this._seg.p1.y&&this._seg.reverse(),!(Math.max(this._seg.p0.x,this._seg.p1.x)<a.x||this._seg.isHorizontal()||a.y<this._seg.p0.y||a.y>this._seg.p1.y||xt.index(this._seg.p0,this._seg.p1,a)===xt.RIGHT)){var O=c.getDepth(Z.LEFT);this._seg.p0.equals(m[E])||(O=c.getDepth(Z.RIGHT));var P=new ai(this._seg,O);f.add(P)}}else if(Ot(arguments[2],qe)&&arguments[0]instanceof D&&Ot(arguments[1],qe))for(var z=arguments[0],tt=arguments[2],ut=arguments[1].iterator();ut.hasNext();){var ht=ut.next();ht.isForward()&&this.findStabbedSegments(z,ht,tt)}}},{key:"getDepth",value:function(r){var t=this.findStabbedSegments(r);return 0===t.size()?0:Ce.min(t)._leftDepth}}],[{key:"constructor_",value:function(){this._subgraphs=null,this._seg=new Gt,this._subgraphs=arguments[0]}}]),ai=x(function r(){N(this,r),r.constructor_.apply(this,arguments)},[{key:"compareTo",value:function(r){var t=r;if(this._upwardSeg.minX()>=t._upwardSeg.maxX())return 1;if(this._upwardSeg.maxX()<=t._upwardSeg.minX())return-1;var e=this._upwardSeg.orientationIndex(t._upwardSeg);return 0!==e||0!=(e=-1*t._upwardSeg.orientationIndex(this._upwardSeg))?e:this._upwardSeg.compareTo(t._upwardSeg)}},{key:"compareX",value:function(r,t){var e=r.p0.compareTo(t.p0);return 0!==e?e:r.p1.compareTo(t.p1)}},{key:"toString",value:function(){return this._upwardSeg.toString()}},{key:"interfaces_",get:function(){return[L]}}],[{key:"constructor_",value:function(){this._upwardSeg=null,this._leftDepth=null;var t=arguments[1];this._upwardSeg=new Gt(arguments[0]),this._leftDepth=t}}]);er.DepthSegment=ai;var oi=function(r){function t(){var e;return N(this,t),e=q(this,t),t.constructor_.apply(e,arguments),e}return ot(t,r),x(t,null,[{key:"constructor_",value:function(){Ve.constructor_.call(this,"Projective point not representable on the Cartesian plane.")}}])}(Ve),Se=function(){function r(){N(this,r),r.constructor_.apply(this,arguments)}return x(r,[{key:"getY",value:function(){var t=this.y/this.w;if(gt.isNaN(t)||gt.isInfinite(t))throw new oi;return t}},{key:"getX",value:function(){var t=this.x/this.w;if(gt.isNaN(t)||gt.isInfinite(t))throw new oi;return t}},{key:"getCoordinate",value:function(){var t=new D;return t.x=this.getX(),t.y=this.getY(),t}}],[{key:"constructor_",value:function(){if(this.x=null,this.y=null,this.w=null,0===arguments.length)this.x=0,this.y=0,this.w=1;else if(1===arguments.length){var t=arguments[0];this.x=t.x,this.y=t.y,this.w=1}else if(2===arguments.length){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var n=arguments[1];this.x=arguments[0],this.y=n,this.w=1}else if(arguments[0]instanceof r&&arguments[1]instanceof r){var i=arguments[0],a=arguments[1];this.x=i.y*a.w-a.y*i.w,this.y=a.x*i.w-i.x*a.w,this.w=i.x*a.y-a.x*i.y}else if(arguments[0]instanceof D&&arguments[1]instanceof D){var c=arguments[0],f=arguments[1];this.x=c.y-f.y,this.y=f.x-c.x,this.w=c.x*f.y-f.x*c.y}}else if(3===arguments.length){var E=arguments[1],O=arguments[2];this.x=arguments[0],this.y=E,this.w=O}else if(4===arguments.length){var P=arguments[0],z=arguments[1],tt=arguments[2],ut=arguments[3],ht=P.y-z.y,Bt=z.x-P.x,Yt=P.x*z.y-z.x*P.y,ee=tt.y-ut.y,ye=ut.x-tt.x,Te=tt.x*ut.y-ut.x*tt.y;this.x=Bt*Te-ye*Yt,this.y=ee*Yt-ht*Te,this.w=ht*ye-ee*Bt}}}])}(),Le=function(){function r(){N(this,r),r.constructor_.apply(this,arguments)}return x(r,[{key:"area",value:function(){return r.area(this.p0,this.p1,this.p2)}},{key:"signedArea",value:function(){return r.signedArea(this.p0,this.p1,this.p2)}},{key:"interpolateZ",value:function(t){if(null===t)throw new j("Supplied point is null.");return r.interpolateZ(t,this.p0,this.p1,this.p2)}},{key:"longestSideLength",value:function(){return r.longestSideLength(this.p0,this.p1,this.p2)}},{key:"isAcute",value:function(){return r.isAcute(this.p0,this.p1,this.p2)}},{key:"circumcentre",value:function(){return r.circumcentre(this.p0,this.p1,this.p2)}},{key:"area3D",value:function(){return r.area3D(this.p0,this.p1,this.p2)}},{key:"centroid",value:function(){return r.centroid(this.p0,this.p1,this.p2)}},{key:"inCentre",value:function(){return r.inCentre(this.p0,this.p1,this.p2)}}],[{key:"constructor_",value:function(){this.p0=null,this.p1=null,this.p2=null;var e=arguments[1],n=arguments[2];this.p0=arguments[0],this.p1=e,this.p2=n}},{key:"area",value:function(t,e,n){return Math.abs(((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2)}},{key:"signedArea",value:function(t,e,n){return((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2}},{key:"det",value:function(t,e,n,i){return t*i-e*n}},{key:"interpolateZ",value:function(t,e,n,i){var a=e.x,c=e.y,f=n.x-a,m=i.x-a,E=n.y-c,O=i.y-c,P=f*O-m*E,z=t.x-a,tt=t.y-c,ut=(O*z-m*tt)/P,ht=(-E*z+f*tt)/P;return e.getZ()+ut*(n.getZ()-e.getZ())+ht*(i.getZ()-e.getZ())}},{key:"longestSideLength",value:function(t,e,n){var i=t.distance(e),a=e.distance(n),c=n.distance(t),f=i;return a>f&&(f=a),c>f&&(f=c),f}},{key:"circumcentreDD",value:function(t,e,n){var i=It.valueOf(t.x).subtract(n.x),a=It.valueOf(t.y).subtract(n.y),c=It.valueOf(e.x).subtract(n.x),f=It.valueOf(e.y).subtract(n.y),m=It.determinant(i,a,c,f).multiply(2),E=i.sqr().add(a.sqr()),O=c.sqr().add(f.sqr()),P=It.determinant(a,E,f,O),z=It.determinant(i,E,c,O),tt=It.valueOf(n.x).subtract(P.divide(m)).doubleValue(),ut=It.valueOf(n.y).add(z.divide(m)).doubleValue();return new D(tt,ut)}},{key:"isAcute",value:function(t,e,n){return!!Ee.isAcute(t,e,n)&&!!Ee.isAcute(e,n,t)&&!!Ee.isAcute(n,t,e)}},{key:"circumcentre",value:function(t,e,n){var i=n.x,a=n.y,c=t.x-i,f=t.y-a,m=e.x-i,E=e.y-a,O=2*r.det(c,f,m,E),P=r.det(f,c*c+f*f,E,m*m+E*E),z=r.det(c,c*c+f*f,m,m*m+E*E);return new D(i-P/O,a+z/O)}},{key:"perpendicularBisector",value:function(t,e){var n=e.x-t.x,i=e.y-t.y,a=new Se(t.x+n/2,t.y+i/2,1),c=new Se(t.x-i+n/2,t.y+n+i/2,1);return new Se(a,c)}},{key:"angleBisector",value:function(t,e,n){var i=e.distance(t),a=i/(i+e.distance(n));return new D(t.x+a*(n.x-t.x),t.y+a*(n.y-t.y))}},{key:"area3D",value:function(t,e,n){var i=e.x-t.x,a=e.y-t.y,c=e.getZ()-t.getZ(),f=n.x-t.x,m=n.y-t.y,E=n.getZ()-t.getZ(),O=a*E-c*m,P=c*f-i*E,z=i*m-a*f;return Math.sqrt(O*O+P*P+z*z)/2}},{key:"centroid",value:function(t,e,n){return new D((t.x+e.x+n.x)/3,(t.y+e.y+n.y)/3)}},{key:"inCentre",value:function(t,e,n){var i=e.distance(n),a=t.distance(n),c=t.distance(e),f=i+a+c;return new D((i*t.x+a*e.x+c*n.x)/f,(i*t.y+a*e.y+c*n.y)/f)}}])}(),Pe=x(function r(){N(this,r),r.constructor_.apply(this,arguments)},[{key:"addRingSide",value:function(r,t,e,n,i){if(0===t&&r.length<ur.MINIMUM_VALID_SIZE)return null;var a=n,c=i;r.length>=ur.MINIMUM_VALID_SIZE&&xt.isCCW(r)&&(a=i,c=n,e=Z.opposite(e));var f=this._curveBuilder.getRingCurve(r,e,t);this.addCurve(f,a,c)}},{key:"addRingBothSides",value:function(r,t){this.addRingSide(r,t,Z.LEFT,I.EXTERIOR,I.INTERIOR),this.addRingSide(r,t,Z.RIGHT,I.INTERIOR,I.EXTERIOR)}},{key:"addPoint",value:function(r){if(this._distance<=0)return null;var t=r.getCoordinates(),e=this._curveBuilder.getLineCurve(t,this._distance);this.addCurve(e,I.EXTERIOR,I.INTERIOR)}},{key:"addPolygon",value:function(r){var t=this._distance,e=Z.LEFT;this._distance<0&&(t=-this._distance,e=Z.RIGHT);var n=r.getExteriorRing(),i=ce.removeRepeatedPoints(n.getCoordinates());if(this._distance<0&&this.isErodedCompletely(n,this._distance)||this._distance<=0&&i.length<3)return null;this.addRingSide(i,t,e,I.EXTERIOR,I.INTERIOR);for(var a=0;a<r.getNumInteriorRing();a++){var c=r.getInteriorRingN(a),f=ce.removeRepeatedPoints(c.getCoordinates());this._distance>0&&this.isErodedCompletely(c,-this._distance)||this.addRingSide(f,t,Z.opposite(e),I.INTERIOR,I.EXTERIOR)}}},{key:"isTriangleErodedCompletely",value:function(r,t){var e=new Le(r[0],r[1],r[2]),n=e.inCentre();return ne.pointToSegment(n,e.p0,e.p1)<Math.abs(t)}},{key:"addLineString",value:function(r){if(this._curveBuilder.isLineOffsetEmpty(this._distance))return null;var t=ce.removeRepeatedPoints(r.getCoordinates());if(ce.isRing(t)&&!this._curveBuilder.getBufferParameters().isSingleSided())this.addRingBothSides(t,this._distance);else{var e=this._curveBuilder.getLineCurve(t,this._distance);this.addCurve(e,I.EXTERIOR,I.INTERIOR)}}},{key:"addCurve",value:function(r,t,e){if(null===r||r.length<2)return null;var n=new st(r,new Ae(0,I.BOUNDARY,t,e));this._curveList.add(n)}},{key:"getCurves",value:function(){return this.add(this._inputGeom),this._curveList}},{key:"add",value:function(r){if(r.isEmpty())return null;if(r instanceof Hn)this.addPolygon(r);else if(r instanceof _n)this.addLineString(r);else if(r instanceof ln)this.addPoint(r);else if(r instanceof Ue)this.addCollection(r);else if(r instanceof $n)this.addCollection(r);else if(r instanceof He)this.addCollection(r);else{if(!(r instanceof Fe))throw new Je(r.getGeometryType());this.addCollection(r)}}},{key:"isErodedCompletely",value:function(r,t){var e=r.getCoordinates();if(e.length<4)return t<0;if(4===e.length)return this.isTriangleErodedCompletely(e,t);var n=r.getEnvelopeInternal(),i=Math.min(n.getHeight(),n.getWidth());return t<0&&2*Math.abs(t)>i}},{key:"addCollection",value:function(r){for(var t=0;t<r.getNumGeometries();t++){var e=r.getGeometryN(t);this.add(e)}}}],[{key:"constructor_",value:function(){this._inputGeom=null,this._distance=null,this._curveBuilder=null,this._curveList=new vt;var t=arguments[1],e=arguments[2];this._inputGeom=arguments[0],this._distance=t,this._curveBuilder=e}}]),an=x(function r(){N(this,r)},[{key:"locate",value:function(r){}}]),ui=function(){function r(){N(this,r),r.constructor_.apply(this,arguments)}return x(r,[{key:"next",value:function(){if(this._atStart)return this._atStart=!1,r.isAtomic(this._parent)&&this._index++,this._parent;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return this._subcollectionIterator.next();this._subcollectionIterator=null}if(this._index>=this._max)throw new Me;var t=this._parent.getGeometryN(this._index++);return t instanceof Fe?(this._subcollectionIterator=new r(t),this._subcollectionIterator.next()):t}},{key:"remove",value:function(){throw new Je(this.getClass().getName())}},{key:"hasNext",value:function(){if(this._atStart)return!0;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return!0;this._subcollectionIterator=null}return!(this._index>=this._max)}},{key:"interfaces_",get:function(){return[b]}}],[{key:"constructor_",value:function(){this._parent=null,this._atStart=null,this._max=null,this._index=null,this._subcollectionIterator=null;var t=arguments[0];this._parent=t,this._atStart=!0,this._index=0,this._max=t.getNumGeometries()}},{key:"isAtomic",value:function(t){return!(t instanceof Fe)}}])}(),Ar=function(){function r(){N(this,r),r.constructor_.apply(this,arguments)}return x(r,[{key:"locate",value:function(t){return r.locate(t,this._geom)}},{key:"interfaces_",get:function(){return[an]}}],[{key:"constructor_",value:function(){this._geom=null,this._geom=arguments[0]}},{key:"locatePointInPolygon",value:function(t,e){if(e.isEmpty())return I.EXTERIOR;var n=e.getExteriorRing(),i=r.locatePointInRing(t,n);if(i!==I.INTERIOR)return i;for(var a=0;a<e.getNumInteriorRing();a++){var c=e.getInteriorRingN(a),f=r.locatePointInRing(t,c);if(f===I.BOUNDARY)return I.BOUNDARY;if(f===I.INTERIOR)return I.EXTERIOR}return I.INTERIOR}},{key:"locatePointInRing",value:function(t,e){return e.getEnvelopeInternal().intersects(t)?Pn.locateInRing(t,e.getCoordinates()):I.EXTERIOR}},{key:"containsPointInPolygon",value:function(t,e){return I.EXTERIOR!==r.locatePointInPolygon(t,e)}},{key:"locateInGeometry",value:function(t,e){if(e instanceof Hn)return r.locatePointInPolygon(t,e);if(e instanceof Fe)for(var n=new ui(e);n.hasNext();){var i=n.next();if(i!==e){var a=r.locateInGeometry(t,i);if(a!==I.EXTERIOR)return a}}return I.EXTERIOR}},{key:"isContained",value:function(t,e){return I.EXTERIOR!==r.locate(t,e)}},{key:"locate",value:function(t,e){return e.isEmpty()?I.EXTERIOR:e.getEnvelopeInternal().intersects(t)?r.locateInGeometry(t,e):I.EXTERIOR}}])}(),bi=x(function r(){N(this,r),r.constructor_.apply(this,arguments)},[{key:"getNextCW",value:function(r){this.getEdges();var t=this._edgeList.indexOf(r),e=t-1;return 0===t&&(e=this._edgeList.size()-1),this._edgeList.get(e)}},{key:"propagateSideLabels",value:function(r){for(var t=I.NONE,e=this.iterator();e.hasNext();){var n=e.next().getLabel();n.isArea(r)&&n.getLocation(r,Z.LEFT)!==I.NONE&&(t=n.getLocation(r,Z.LEFT))}if(t===I.NONE)return null;for(var i=t,a=this.iterator();a.hasNext();){var c=a.next(),f=c.getLabel();if(f.getLocation(r,Z.ON)===I.NONE&&f.setLocation(r,Z.ON,i),f.isArea(r)){var m=f.getLocation(r,Z.LEFT),E=f.getLocation(r,Z.RIGHT);if(E!==I.NONE){if(E!==i)throw new B("side location conflict",c.getCoordinate());m===I.NONE&&Dt.shouldNeverReachHere("found single null side (at "+c.getCoordinate()+")"),i=m}else Dt.isTrue(f.getLocation(r,Z.LEFT)===I.NONE,"found single null side"),f.setLocation(r,Z.RIGHT,i),f.setLocation(r,Z.LEFT,i)}}}},{key:"getCoordinate",value:function(){var r=this.iterator();return r.hasNext()?r.next().getCoordinate():null}},{key:"print",value:function(r){we.out.println("EdgeEndStar:   "+this.getCoordinate());for(var t=this.iterator();t.hasNext();)t.next().print(r)}},{key:"isAreaLabelsConsistent",value:function(r){return this.computeEdgeEndLabels(r.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)}},{key:"checkAreaLabelsConsistent",value:function(r){var t=this.getEdges();if(t.size()<=0)return!0;var e=t.size()-1,n=t.get(e).getLabel().getLocation(r,Z.LEFT);Dt.isTrue(n!==I.NONE,"Found unlabelled area edge");for(var i=n,a=this.iterator();a.hasNext();){var c=a.next().getLabel();Dt.isTrue(c.isArea(r),"Found non-area edge");var f=c.getLocation(r,Z.LEFT),m=c.getLocation(r,Z.RIGHT);if(f===m||m!==i)return!1;i=f}return!0}},{key:"findIndex",value:function(r){this.iterator();for(var t=0;t<this._edgeList.size();t++)if(this._edgeList.get(t)===r)return t;return-1}},{key:"iterator",value:function(){return this.getEdges().iterator()}},{key:"getEdges",value:function(){return null===this._edgeList&&(this._edgeList=new vt(this._edgeMap.values())),this._edgeList}},{key:"getLocation",value:function(r,t,e){return this._ptInAreaLocation[r]===I.NONE&&(this._ptInAreaLocation[r]=Ar.locate(t,e[r].getGeometry())),this._ptInAreaLocation[r]}},{key:"toString",value:function(){var r=new On;r.append("EdgeEndStar:   "+this.getCoordinate()),r.append("\n");for(var t=this.iterator();t.hasNext();){var e=t.next();r.append(e),r.append("\n")}return r.toString()}},{key:"computeEdgeEndLabels",value:function(r){for(var t=this.iterator();t.hasNext();)t.next().computeLabel(r)}},{key:"computeLabelling",value:function(r){this.computeEdgeEndLabels(r[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var t=[!1,!1],e=this.iterator();e.hasNext();)for(var n=e.next().getLabel(),i=0;i<2;i++)n.isLine(i)&&n.getLocation(i)===I.BOUNDARY&&(t[i]=!0);for(var a=this.iterator();a.hasNext();)for(var c=a.next(),f=c.getLabel(),m=0;m<2;m++)if(f.isAnyNull(m)){var E=I.NONE;if(t[m])E=I.EXTERIOR;else{var O=c.getCoordinate();E=this.getLocation(m,O,r)}f.setAllLocationsIfNull(m,E)}}},{key:"getDegree",value:function(){return this._edgeMap.size()}},{key:"insertEdgeEnd",value:function(r,t){this._edgeMap.put(r,t),this._edgeList=null}}],[{key:"constructor_",value:function(){this._edgeMap=new Nn,this._edgeList=null,this._ptInAreaLocation=[I.NONE,I.NONE]}}]),ss=function(r){function t(){var e;return N(this,t),e=q(this,t),t.constructor_.apply(e,arguments),e}return ot(t,r),x(t,[{key:"linkResultDirectedEdges",value:function(){this.getResultAreaEdges();for(var e=null,n=null,i=this._SCANNING_FOR_INCOMING,a=0;a<this._resultAreaEdgeList.size();a++){var c=this._resultAreaEdgeList.get(a),f=c.getSym();if(c.getLabel().isArea())switch(null===e&&c.isInResult()&&(e=c),i){case this._SCANNING_FOR_INCOMING:if(!f.isInResult())continue;n=f,i=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(!c.isInResult())continue;n.setNext(c),i=this._SCANNING_FOR_INCOMING}}if(i===this._LINKING_TO_OUTGOING){if(null===e)throw new B("no outgoing dirEdge found",this.getCoordinate());Dt.isTrue(e.isInResult(),"unable to link last incoming dirEdge"),n.setNext(e)}}},{key:"insert",value:function(e){this.insertEdgeEnd(e,e)}},{key:"getRightmostEdge",value:function(){var e=this.getEdges(),n=e.size();if(n<1)return null;var i=e.get(0);if(1===n)return i;var a=e.get(n-1),c=i.getQuadrant(),f=a.getQuadrant();return fe.isNorthern(c)&&fe.isNorthern(f)?i:fe.isNorthern(c)||fe.isNorthern(f)?0!==i.getDy()?i:0!==a.getDy()?a:(Dt.shouldNeverReachHere("found two horizontal edges incident on node"),null):a}},{key:"print",value:function(e){we.out.println("DirectedEdgeStar: "+this.getCoordinate());for(var n=this.iterator();n.hasNext();){var i=n.next();e.print("out "),i.print(e),e.println(),e.print("in "),i.getSym().print(e),e.println()}}},{key:"getResultAreaEdges",value:function(){if(null!==this._resultAreaEdgeList)return this._resultAreaEdgeList;this._resultAreaEdgeList=new vt;for(var e=this.iterator();e.hasNext();){var n=e.next();(n.isInResult()||n.getSym().isInResult())&&this._resultAreaEdgeList.add(n)}return this._resultAreaEdgeList}},{key:"updateLabelling",value:function(e){for(var n=this.iterator();n.hasNext();){var i=n.next().getLabel();i.setAllLocationsIfNull(0,e.getLocation(0)),i.setAllLocationsIfNull(1,e.getLocation(1))}}},{key:"linkAllDirectedEdges",value:function(){this.getEdges();for(var e=null,n=null,i=this._edgeList.size()-1;i>=0;i--){var a=this._edgeList.get(i),c=a.getSym();null===n&&(n=c),null!==e&&c.setNext(e),e=a}n.setNext(e)}},{key:"computeDepths",value:function(){if(1===arguments.length){var e=arguments[0],n=this.findIndex(e),i=e.getDepth(Z.LEFT),a=e.getDepth(Z.RIGHT),c=this.computeDepths(n+1,this._edgeList.size(),i);if(this.computeDepths(0,n,c)!==a)throw new B("depth mismatch at "+e.getCoordinate())}else if(3===arguments.length){for(var f=arguments[1],m=arguments[2],E=arguments[0];E<f;E++){var O=this._edgeList.get(E);O.setEdgeDepths(Z.RIGHT,m),m=O.getDepth(Z.LEFT)}return m}}},{key:"mergeSymLabels",value:function(){for(var e=this.iterator();e.hasNext();){var n=e.next();n.getLabel().merge(n.getSym().getLabel())}}},{key:"linkMinimalDirectedEdges",value:function(e){for(var n=null,i=null,a=this._SCANNING_FOR_INCOMING,c=this._resultAreaEdgeList.size()-1;c>=0;c--){var f=this._resultAreaEdgeList.get(c),m=f.getSym();switch(null===n&&f.getEdgeRing()===e&&(n=f),a){case this._SCANNING_FOR_INCOMING:if(m.getEdgeRing()!==e)continue;i=m,a=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(f.getEdgeRing()!==e)continue;i.setNextMin(f),a=this._SCANNING_FOR_INCOMING}}a===this._LINKING_TO_OUTGOING&&(Dt.isTrue(null!==n,"found null for first outgoing dirEdge"),Dt.isTrue(n.getEdgeRing()===e,"unable to link last incoming dirEdge"),i.setNextMin(n))}},{key:"getOutgoingDegree",value:function(){if(0===arguments.length){for(var e=0,n=this.iterator();n.hasNext();)n.next().isInResult()&&e++;return e}if(1===arguments.length){for(var i=arguments[0],a=0,c=this.iterator();c.hasNext();)c.next().getEdgeRing()===i&&a++;return a}}},{key:"getLabel",value:function(){return this._label}},{key:"findCoveredLineEdges",value:function(){for(var e=I.NONE,n=this.iterator();n.hasNext();){var i=n.next(),a=i.getSym();if(!i.isLineEdge()){if(i.isInResult()){e=I.INTERIOR;break}if(a.isInResult()){e=I.EXTERIOR;break}}}if(e===I.NONE)return null;for(var c=e,f=this.iterator();f.hasNext();){var m=f.next(),E=m.getSym();m.isLineEdge()?m.getEdge().setCovered(c===I.INTERIOR):(m.isInResult()&&(c=I.EXTERIOR),E.isInResult()&&(c=I.INTERIOR))}}},{key:"computeLabelling",value:function(e){Et(t,"computeLabelling",this,1).call(this,e),this._label=new Ae(I.NONE);for(var n=this.iterator();n.hasNext();)for(var i=n.next().getEdge().getLabel(),a=0;a<2;a++){var c=i.getLocation(a);c!==I.INTERIOR&&c!==I.BOUNDARY||this._label.setLocation(a,I.INTERIOR)}}}],[{key:"constructor_",value:function(){this._resultAreaEdgeList=null,this._label=null,this._SCANNING_FOR_INCOMING=1,this._LINKING_TO_OUTGOING=2}}])}(bi),as=function(r){function t(){return N(this,t),q(this,t)}return ot(t,r),x(t,[{key:"createNode",value:function(e){return new Fn(e,new ss)}}])}(sn),li=function(){function r(){N(this,r),r.constructor_.apply(this,arguments)}return x(r,[{key:"compareTo",value:function(t){return r.compareOriented(this._pts,this._orientation,t._pts,t._orientation)}},{key:"interfaces_",get:function(){return[L]}}],[{key:"constructor_",value:function(){this._pts=null,this._orientation=null;var t=arguments[0];this._pts=t,this._orientation=r.orientation(t)}},{key:"orientation",value:function(t){return 1===ce.increasingDirection(t)}},{key:"compareOriented",value:function(t,e,n,i){for(var a=e?1:-1,c=i?1:-1,f=e?t.length:-1,m=i?n.length:-1,E=e?0:t.length-1,O=i?0:n.length-1;;){var P=t[E].compareTo(n[O]);if(0!==P)return P;var z=(E+=a)===f,tt=(O+=c)===m;if(z&&!tt)return-1;if(!z&&tt)return 1;if(z&&tt)return 0}}}])}(),os=x(function r(){N(this,r),r.constructor_.apply(this,arguments)},[{key:"print",value:function(r){r.print("MULTILINESTRING ( ");for(var t=0;t<this._edges.size();t++){var e=this._edges.get(t);t>0&&r.print(","),r.print("(");for(var n=e.getCoordinates(),i=0;i<n.length;i++)i>0&&r.print(","),r.print(n[i].x+" "+n[i].y);r.println(")")}r.print(")  ")}},{key:"addAll",value:function(r){for(var t=r.iterator();t.hasNext();)this.add(t.next())}},{key:"findEdgeIndex",value:function(r){for(var t=0;t<this._edges.size();t++)if(this._edges.get(t).equals(r))return t;return-1}},{key:"iterator",value:function(){return this._edges.iterator()}},{key:"getEdges",value:function(){return this._edges}},{key:"get",value:function(r){return this._edges.get(r)}},{key:"findEqualEdge",value:function(r){var t=new li(r.getCoordinates());return this._ocaMap.get(t)}},{key:"add",value:function(r){this._edges.add(r);var t=new li(r.getCoordinates());this._ocaMap.put(t,r)}}],[{key:"constructor_",value:function(){this._edges=new vt,this._ocaMap=new Nn}}]),Mi=x(function r(){N(this,r)},[{key:"processIntersections",value:function(r,t,e,n){}},{key:"isDone",value:function(){}}]),us=function(){function r(){N(this,r),r.constructor_.apply(this,arguments)}return x(r,[{key:"isTrivialIntersection",value:function(t,e,n,i){if(t===n&&1===this._li.getIntersectionNum()){if(r.isAdjacentSegments(e,i))return!0;if(t.isClosed()){var a=t.size()-1;if(0===e&&i===a||0===i&&e===a)return!0}}return!1}},{key:"getProperIntersectionPoint",value:function(){return this._properIntersectionPoint}},{key:"hasProperInteriorIntersection",value:function(){return this._hasProperInterior}},{key:"getLineIntersector",value:function(){return this._li}},{key:"hasProperIntersection",value:function(){return this._hasProper}},{key:"processIntersections",value:function(t,e,n,i){if(t===n&&e===i)return null;this.numTests++;var a=t.getCoordinates()[e],c=t.getCoordinates()[e+1],f=n.getCoordinates()[i],m=n.getCoordinates()[i+1];this._li.computeIntersection(a,c,f,m),this._li.hasIntersection()&&(this.numIntersections++,this._li.isInteriorIntersection()&&(this.numInteriorIntersections++,this._hasInterior=!0),this.isTrivialIntersection(t,e,n,i)||(this._hasIntersection=!0,t.addIntersections(this._li,e,0),n.addIntersections(this._li,i,1),this._li.isProper()&&(this.numProperIntersections++,this._hasProper=!0,this._hasProperInterior=!0)))}},{key:"hasIntersection",value:function(){return this._hasIntersection}},{key:"isDone",value:function(){return!1}},{key:"hasInteriorIntersection",value:function(){return this._hasInterior}},{key:"interfaces_",get:function(){return[Mi]}}],[{key:"constructor_",value:function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._hasInterior=!1,this._properIntersectionPoint=null,this._li=null,this._isSelfIntersection=null,this.numIntersections=0,this.numInteriorIntersections=0,this.numProperIntersections=0,this.numTests=0,this._li=arguments[0]}},{key:"isAdjacentSegments",value:function(t,e){return 1===Math.abs(t-e)}}])}(),Ai=x(function r(){N(this,r),r.constructor_.apply(this,arguments)},[{key:"getSegmentIndex",value:function(){return this.segmentIndex}},{key:"getCoordinate",value:function(){return this.coord}},{key:"print",value:function(r){r.print(this.coord),r.print(" seg # = "+this.segmentIndex),r.println(" dist = "+this.dist)}},{key:"compareTo",value:function(r){return this.compare(r.segmentIndex,r.dist)}},{key:"isEndPoint",value:function(r){return 0===this.segmentIndex&&0===this.dist||this.segmentIndex===r}},{key:"toString",value:function(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist}},{key:"getDistance",value:function(){return this.dist}},{key:"compare",value:function(r,t){return this.segmentIndex<r?-1:this.segmentIndex>r?1:this.dist<t?-1:this.dist>t?1:0}},{key:"interfaces_",get:function(){return[L]}}],[{key:"constructor_",value:function(){this.coord=null,this.segmentIndex=null,this.dist=null;var t=arguments[1],e=arguments[2];this.coord=new D(arguments[0]),this.segmentIndex=t,this.dist=e}}]),Ts=x(function r(){N(this,r),r.constructor_.apply(this,arguments)},[{key:"print",value:function(r){r.println("Intersections:");for(var t=this.iterator();t.hasNext();)t.next().print(r)}},{key:"iterator",value:function(){return this._nodeMap.values().iterator()}},{key:"addSplitEdges",value:function(r){this.addEndpoints();for(var t=this.iterator(),e=t.next();t.hasNext();){var n=t.next(),i=this.createSplitEdge(e,n);r.add(i),e=n}}},{key:"addEndpoints",value:function(){var r=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[r],r,0)}},{key:"createSplitEdge",value:function(r,t){var e=t.segmentIndex-r.segmentIndex+2,i=t.dist>0||!t.coord.equals2D(this.edge.pts[t.segmentIndex]);i||e--;var a=new Array(e).fill(null),c=0;a[c++]=new D(r.coord);for(var f=r.segmentIndex+1;f<=t.segmentIndex;f++)a[c++]=this.edge.pts[f];return i&&(a[c]=t.coord),new fi(a,new Ae(this.edge._label))}},{key:"add",value:function(r,t,e){var n=new Ai(r,t,e),i=this._nodeMap.get(n);return null!==i?i:(this._nodeMap.put(n,n),n)}},{key:"isIntersection",value:function(r){for(var t=this.iterator();t.hasNext();)if(t.next().coord.equals(r))return!0;return!1}}],[{key:"constructor_",value:function(){this._nodeMap=new Nn,this.edge=null,this.edge=arguments[0]}}]),Li=function(){function r(){N(this,r),r.constructor_.apply(this,arguments)}return x(r,[{key:"isIntersects",value:function(){return!this.isDisjoint()}},{key:"isCovers",value:function(){return(r.isTrue(this._matrix[I.INTERIOR][I.INTERIOR])||r.isTrue(this._matrix[I.INTERIOR][I.BOUNDARY])||r.isTrue(this._matrix[I.BOUNDARY][I.INTERIOR])||r.isTrue(this._matrix[I.BOUNDARY][I.BOUNDARY]))&&this._matrix[I.EXTERIOR][I.INTERIOR]===$.FALSE&&this._matrix[I.EXTERIOR][I.BOUNDARY]===$.FALSE}},{key:"isCoveredBy",value:function(){return(r.isTrue(this._matrix[I.INTERIOR][I.INTERIOR])||r.isTrue(this._matrix[I.INTERIOR][I.BOUNDARY])||r.isTrue(this._matrix[I.BOUNDARY][I.INTERIOR])||r.isTrue(this._matrix[I.BOUNDARY][I.BOUNDARY]))&&this._matrix[I.INTERIOR][I.EXTERIOR]===$.FALSE&&this._matrix[I.BOUNDARY][I.EXTERIOR]===$.FALSE}},{key:"set",value:function(){if(1===arguments.length)for(var t=arguments[0],e=0;e<t.length;e++){var n=Math.trunc(e/3);this._matrix[n][e%3]=$.toDimensionValue(t.charAt(e))}else 3===arguments.length&&(this._matrix[arguments[0]][arguments[1]]=arguments[2])}},{key:"isContains",value:function(){return r.isTrue(this._matrix[I.INTERIOR][I.INTERIOR])&&this._matrix[I.EXTERIOR][I.INTERIOR]===$.FALSE&&this._matrix[I.EXTERIOR][I.BOUNDARY]===$.FALSE}},{key:"setAtLeast",value:function(){if(1===arguments.length)for(var t=arguments[0],e=0;e<t.length;e++){var n=Math.trunc(e/3);this.setAtLeast(n,e%3,$.toDimensionValue(t.charAt(e)))}else if(3===arguments.length){var a=arguments[0],c=arguments[1],f=arguments[2];this._matrix[a][c]<f&&(this._matrix[a][c]=f)}}},{key:"setAtLeastIfValid",value:function(t,e,n){t>=0&&e>=0&&this.setAtLeast(t,e,n)}},{key:"isWithin",value:function(){return r.isTrue(this._matrix[I.INTERIOR][I.INTERIOR])&&this._matrix[I.INTERIOR][I.EXTERIOR]===$.FALSE&&this._matrix[I.BOUNDARY][I.EXTERIOR]===$.FALSE}},{key:"isTouches",value:function(t,e){return t>e?this.isTouches(e,t):(t===$.A&&e===$.A||t===$.L&&e===$.L||t===$.L&&e===$.A||t===$.P&&e===$.A||t===$.P&&e===$.L)&&this._matrix[I.INTERIOR][I.INTERIOR]===$.FALSE&&(r.isTrue(this._matrix[I.INTERIOR][I.BOUNDARY])||r.isTrue(this._matrix[I.BOUNDARY][I.INTERIOR])||r.isTrue(this._matrix[I.BOUNDARY][I.BOUNDARY]))}},{key:"isOverlaps",value:function(t,e){return t===$.P&&e===$.P||t===$.A&&e===$.A?r.isTrue(this._matrix[I.INTERIOR][I.INTERIOR])&&r.isTrue(this._matrix[I.INTERIOR][I.EXTERIOR])&&r.isTrue(this._matrix[I.EXTERIOR][I.INTERIOR]):t===$.L&&e===$.L&&1===this._matrix[I.INTERIOR][I.INTERIOR]&&r.isTrue(this._matrix[I.INTERIOR][I.EXTERIOR])&&r.isTrue(this._matrix[I.EXTERIOR][I.INTERIOR])}},{key:"isEquals",value:function(t,e){return t===e&&r.isTrue(this._matrix[I.INTERIOR][I.INTERIOR])&&this._matrix[I.INTERIOR][I.EXTERIOR]===$.FALSE&&this._matrix[I.BOUNDARY][I.EXTERIOR]===$.FALSE&&this._matrix[I.EXTERIOR][I.INTERIOR]===$.FALSE&&this._matrix[I.EXTERIOR][I.BOUNDARY]===$.FALSE}},{key:"toString",value:function(){for(var t=new Wn("123456789"),e=0;e<3;e++)for(var n=0;n<3;n++)t.setCharAt(3*e+n,$.toDimensionSymbol(this._matrix[e][n]));return t.toString()}},{key:"setAll",value:function(t){for(var e=0;e<3;e++)for(var n=0;n<3;n++)this._matrix[e][n]=t}},{key:"get",value:function(t,e){return this._matrix[t][e]}},{key:"transpose",value:function(){var t=this._matrix[1][0];return this._matrix[1][0]=this._matrix[0][1],this._matrix[0][1]=t,t=this._matrix[2][0],this._matrix[2][0]=this._matrix[0][2],this._matrix[0][2]=t,t=this._matrix[2][1],this._matrix[2][1]=this._matrix[1][2],this._matrix[1][2]=t,this}},{key:"matches",value:function(t){if(9!==t.length)throw new j("Should be length 9: "+t);for(var e=0;e<3;e++)for(var n=0;n<3;n++)if(!r.matches(this._matrix[e][n],t.charAt(3*e+n)))return!1;return!0}},{key:"add",value:function(t){for(var e=0;e<3;e++)for(var n=0;n<3;n++)this.setAtLeast(e,n,t.get(e,n))}},{key:"isDisjoint",value:function(){return this._matrix[I.INTERIOR][I.INTERIOR]===$.FALSE&&this._matrix[I.INTERIOR][I.BOUNDARY]===$.FALSE&&this._matrix[I.BOUNDARY][I.INTERIOR]===$.FALSE&&this._matrix[I.BOUNDARY][I.BOUNDARY]===$.FALSE}},{key:"isCrosses",value:function(t,e){return t===$.P&&e===$.L||t===$.P&&e===$.A||t===$.L&&e===$.A?r.isTrue(this._matrix[I.INTERIOR][I.INTERIOR])&&r.isTrue(this._matrix[I.INTERIOR][I.EXTERIOR]):t===$.L&&e===$.P||t===$.A&&e===$.P||t===$.A&&e===$.L?r.isTrue(this._matrix[I.INTERIOR][I.INTERIOR])&&r.isTrue(this._matrix[I.EXTERIOR][I.INTERIOR]):t===$.L&&e===$.L&&0===this._matrix[I.INTERIOR][I.INTERIOR]}},{key:"interfaces_",get:function(){return[kt]}}],[{key:"constructor_",value:function(){if(this._matrix=null,0===arguments.length)this._matrix=Array(3).fill().map(function(){return Array(3)}),this.setAll($.FALSE);else if(1===arguments.length)if("string"==typeof arguments[0]){var t=arguments[0];r.constructor_.call(this),this.set(t)}else if(arguments[0]instanceof r){var e=arguments[0];r.constructor_.call(this),this._matrix[I.INTERIOR][I.INTERIOR]=e._matrix[I.INTERIOR][I.INTERIOR],this._matrix[I.INTERIOR][I.BOUNDARY]=e._matrix[I.INTERIOR][I.BOUNDARY],this._matrix[I.INTERIOR][I.EXTERIOR]=e._matrix[I.INTERIOR][I.EXTERIOR],this._matrix[I.BOUNDARY][I.INTERIOR]=e._matrix[I.BOUNDARY][I.INTERIOR],this._matrix[I.BOUNDARY][I.BOUNDARY]=e._matrix[I.BOUNDARY][I.BOUNDARY],this._matrix[I.BOUNDARY][I.EXTERIOR]=e._matrix[I.BOUNDARY][I.EXTERIOR],this._matrix[I.EXTERIOR][I.INTERIOR]=e._matrix[I.EXTERIOR][I.INTERIOR],this._matrix[I.EXTERIOR][I.BOUNDARY]=e._matrix[I.EXTERIOR][I.BOUNDARY],this._matrix[I.EXTERIOR][I.EXTERIOR]=e._matrix[I.EXTERIOR][I.EXTERIOR]}}},{key:"matches",value:function(){if(Number.isInteger(arguments[0])&&"string"==typeof arguments[1]){var t=arguments[0],e=arguments[1];return e===$.SYM_DONTCARE||e===$.SYM_TRUE&&(t>=0||t===$.TRUE)||e===$.SYM_FALSE&&t===$.FALSE||e===$.SYM_P&&t===$.P||e===$.SYM_L&&t===$.L||e===$.SYM_A&&t===$.A}if("string"==typeof arguments[0]&&"string"==typeof arguments[1]){var n=arguments[1];return new r(arguments[0]).matches(n)}}},{key:"isTrue",value:function(t){return t>=0||t===$.TRUE}}])}(),ci=function(){function r(){N(this,r),r.constructor_.apply(this,arguments)}return x(r,[{key:"size",value:function(){return this._size}},{key:"addAll",value:function(t){return null===t||0===t.length?null:(this.ensureCapacity(this._size+t.length),we.arraycopy(t,0,this._data,this._size,t.length),void(this._size+=t.length))}},{key:"ensureCapacity",value:function(t){if(t<=this._data.length)return null;var e=Math.max(t,2*this._data.length);this._data=kn.copyOf(this._data,e)}},{key:"toArray",value:function(){var t=new Array(this._size).fill(null);return we.arraycopy(this._data,0,t,0,this._size),t}},{key:"add",value:function(t){this.ensureCapacity(this._size+1),this._data[this._size]=t,++this._size}}],[{key:"constructor_",value:function(){this._data=null,this._size=0,0===arguments.length?r.constructor_.call(this,10):1===arguments.length&&(this._data=new Array(arguments[0]).fill(null))}}])}(),Pi=function(){function r(){N(this,r)}return x(r,[{key:"getChainStartIndices",value:function(t){var e=0,n=new ci(Math.trunc(t.length/2));n.add(e);do{var i=this.findChainEnd(t,e);n.add(i),e=i}while(e<t.length-1);return n.toArray()}},{key:"findChainEnd",value:function(t,e){for(var n=fe.quadrant(t[e],t[e+1]),i=e+1;i<t.length&&fe.quadrant(t[i-1],t[i])===n;)i++;return i-1}},{key:"OLDgetChainStartIndices",value:function(t){var e=0,n=new vt;n.add(e);do{var i=this.findChainEnd(t,e);n.add(i),e=i}while(e<t.length-1);return r.toIntArray(n)}}],[{key:"toIntArray",value:function(t){for(var e=new Array(t.size()).fill(null),n=0;n<e.length;n++)e[n]=t.get(n).intValue();return e}}])}(),Di=x(function r(){N(this,r),r.constructor_.apply(this,arguments)},[{key:"getCoordinates",value:function(){return this.pts}},{key:"getMaxX",value:function(r){var t=this.pts[this.startIndex[r]].x,e=this.pts[this.startIndex[r+1]].x;return t>e?t:e}},{key:"getMinX",value:function(r){var t=this.pts[this.startIndex[r]].x,e=this.pts[this.startIndex[r+1]].x;return t<e?t:e}},{key:"computeIntersectsForChain",value:function(){if(4===arguments.length){var r=arguments[0],t=arguments[1],e=arguments[2];this.computeIntersectsForChain(this.startIndex[r],this.startIndex[r+1],t,t.startIndex[e],t.startIndex[e+1],arguments[3])}else if(6===arguments.length){var i=arguments[0],a=arguments[1],c=arguments[2],f=arguments[3],m=arguments[4],E=arguments[5];if(a-i==1&&m-f==1)return E.addIntersections(this.e,i,c.e,f),null;if(!this.overlaps(i,a,c,f,m))return null;var O=Math.trunc((i+a)/2),P=Math.trunc((f+m)/2);i<O&&(f<P&&this.computeIntersectsForChain(i,O,c,f,P,E),P<m&&this.computeIntersectsForChain(i,O,c,P,m,E)),O<a&&(f<P&&this.computeIntersectsForChain(O,a,c,f,P,E),P<m&&this.computeIntersectsForChain(O,a,c,P,m,E))}}},{key:"overlaps",value:function(r,t,e,n,i){return Kt.intersects(this.pts[r],this.pts[t],e.pts[n],e.pts[i])}},{key:"getStartIndexes",value:function(){return this.startIndex}},{key:"computeIntersects",value:function(r,t){for(var e=0;e<this.startIndex.length-1;e++)for(var n=0;n<r.startIndex.length-1;n++)this.computeIntersectsForChain(e,r,n,t)}}],[{key:"constructor_",value:function(){this.e=null,this.pts=null,this.startIndex=null;var r=arguments[0];this.e=r,this.pts=r.getCoordinates();var t=new Pi;this.startIndex=t.getChainStartIndices(this.pts)}}]),hi=function(){function r(){N(this,r),r.constructor_.apply(this,arguments)}return x(r,[{key:"getDepth",value:function(t,e){return this._depth[t][e]}},{key:"setDepth",value:function(t,e,n){this._depth[t][e]=n}},{key:"isNull",value:function(){if(0===arguments.length){for(var t=0;t<2;t++)for(var e=0;e<3;e++)if(this._depth[t][e]!==r.NULL_VALUE)return!1;return!0}return 1===arguments.length?this._depth[arguments[0]][1]===r.NULL_VALUE:2===arguments.length?this._depth[arguments[0]][arguments[1]]===r.NULL_VALUE:void 0}},{key:"normalize",value:function(){for(var t=0;t<2;t++)if(!this.isNull(t)){var e=this._depth[t][1];this._depth[t][2]<e&&(e=this._depth[t][2]),e<0&&(e=0);for(var n=1;n<3;n++){var i=0;this._depth[t][n]>e&&(i=1),this._depth[t][n]=i}}}},{key:"getDelta",value:function(t){return this._depth[t][Z.RIGHT]-this._depth[t][Z.LEFT]}},{key:"getLocation",value:function(t,e){return this._depth[t][e]<=0?I.EXTERIOR:I.INTERIOR}},{key:"toString",value:function(){return"A: "+this._depth[0][1]+","+this._depth[0][2]+" B: "+this._depth[1][1]+","+this._depth[1][2]}},{key:"add",value:function(){if(1===arguments.length)for(var t=arguments[0],e=0;e<2;e++)for(var n=1;n<3;n++){var i=t.getLocation(e,n);i!==I.EXTERIOR&&i!==I.INTERIOR||(this.isNull(e,n)?this._depth[e][n]=r.depthAtLocation(i):this._depth[e][n]+=r.depthAtLocation(i))}else 3===arguments.length&&arguments[2]===I.INTERIOR&&this._depth[arguments[0]][arguments[1]]++}}],[{key:"constructor_",value:function(){this._depth=Array(2).fill().map(function(){return Array(3)});for(var t=0;t<2;t++)for(var e=0;e<3;e++)this._depth[t][e]=r.NULL_VALUE}},{key:"depthAtLocation",value:function(t){return t===I.EXTERIOR?0:t===I.INTERIOR?1:r.NULL_VALUE}}])}();hi.NULL_VALUE=-1;var fi=function(r){function t(){var e;return N(this,t),e=q(this,t),t.constructor_.apply(e,arguments),e}return ot(t,r),x(t,[{key:"getDepth",value:function(){return this._depth}},{key:"getCollapsedEdge",value:function(){var e=new Array(2).fill(null);return e[0]=this.pts[0],e[1]=this.pts[1],new t(e,Ae.toLineLabel(this._label))}},{key:"isIsolated",value:function(){return this._isIsolated}},{key:"getCoordinates",value:function(){return this.pts}},{key:"setIsolated",value:function(e){this._isIsolated=e}},{key:"setName",value:function(e){this._name=e}},{key:"equals",value:function(e){if(!(e instanceof t))return!1;var n=e;if(this.pts.length!==n.pts.length)return!1;for(var i=!0,a=!0,c=this.pts.length,f=0;f<this.pts.length;f++)if(this.pts[f].equals2D(n.pts[f])||(i=!1),this.pts[f].equals2D(n.pts[--c])||(a=!1),!i&&!a)return!1;return!0}},{key:"getCoordinate",value:function(){return 0===arguments.length?this.pts.length>0?this.pts[0]:null:1===arguments.length?this.pts[arguments[0]]:void 0}},{key:"print",value:function(e){e.print("edge "+this._name+": "),e.print("LINESTRING (");for(var n=0;n<this.pts.length;n++)n>0&&e.print(","),e.print(this.pts[n].x+" "+this.pts[n].y);e.print(")  "+this._label+" "+this._depthDelta)}},{key:"computeIM",value:function(e){t.updateIM(this._label,e)}},{key:"isCollapsed",value:function(){return!!this._label.isArea()&&3===this.pts.length&&!!this.pts[0].equals(this.pts[2])}},{key:"isClosed",value:function(){return this.pts[0].equals(this.pts[this.pts.length-1])}},{key:"getMaximumSegmentIndex",value:function(){return this.pts.length-1}},{key:"getDepthDelta",value:function(){return this._depthDelta}},{key:"getNumPoints",value:function(){return this.pts.length}},{key:"printReverse",value:function(e){e.print("edge "+this._name+": ");for(var n=this.pts.length-1;n>=0;n--)e.print(this.pts[n]+" ");e.println("")}},{key:"getMonotoneChainEdge",value:function(){return null===this._mce&&(this._mce=new Di(this)),this._mce}},{key:"getEnvelope",value:function(){if(null===this._env){this._env=new Kt;for(var e=0;e<this.pts.length;e++)this._env.expandToInclude(this.pts[e])}return this._env}},{key:"addIntersection",value:function(e,n,i,a){var c=new D(e.getIntersection(a)),f=n,m=e.getEdgeDistance(i,a),E=f+1;E<this.pts.length&&c.equals2D(this.pts[E])&&(f=E,m=0),this.eiList.add(c,f,m)}},{key:"toString",value:function(){var e=new Wn;e.append("edge "+this._name+": "),e.append("LINESTRING (");for(var n=0;n<this.pts.length;n++)n>0&&e.append(","),e.append(this.pts[n].x+" "+this.pts[n].y);return e.append(")  "+this._label+" "+this._depthDelta),e.toString()}},{key:"isPointwiseEqual",value:function(e){if(this.pts.length!==e.pts.length)return!1;for(var n=0;n<this.pts.length;n++)if(!this.pts[n].equals2D(e.pts[n]))return!1;return!0}},{key:"setDepthDelta",value:function(e){this._depthDelta=e}},{key:"getEdgeIntersectionList",value:function(){return this.eiList}},{key:"addIntersections",value:function(e,n,i){for(var a=0;a<e.getIntersectionNum();a++)this.addIntersection(e,n,i,a)}}],[{key:"constructor_",value:function(){if(this.pts=null,this._env=null,this.eiList=new Ts(this),this._name=null,this._mce=null,this._isIsolated=!0,this._depth=new hi,this._depthDelta=0,1===arguments.length)t.constructor_.call(this,arguments[0],null);else if(2===arguments.length){var i=arguments[1];this.pts=arguments[0],this._label=i}}},{key:"updateIM",value:function(){if(!(2===arguments.length&&arguments[1]instanceof Li&&arguments[0]instanceof Ae))return Et(t,"updateIM",this).apply(this,arguments);var e=arguments[0],n=arguments[1];n.setAtLeastIfValid(e.getLocation(0,Z.ON),e.getLocation(1,Z.ON),1),e.isArea()&&(n.setAtLeastIfValid(e.getLocation(0,Z.LEFT),e.getLocation(1,Z.LEFT),2),n.setAtLeastIfValid(e.getLocation(0,Z.RIGHT),e.getLocation(1,Z.RIGHT),2))}}])}(br),ls=function(){function r(){N(this,r),r.constructor_.apply(this,arguments)}return x(r,[{key:"setWorkingPrecisionModel",value:function(t){this._workingPrecisionModel=t}},{key:"insertUniqueEdge",value:function(t){var e=this._edgeList.findEqualEdge(t);if(null!==e){var n=e.getLabel(),i=t.getLabel();e.isPointwiseEqual(t)||(i=new Ae(t.getLabel())).flip(),n.merge(i);var a=r.depthDelta(i),c=e.getDepthDelta()+a;e.setDepthDelta(c)}else this._edgeList.add(t),t.setDepthDelta(r.depthDelta(t.getLabel()))}},{key:"buildSubgraphs",value:function(t,e){for(var n=new vt,i=t.iterator();i.hasNext();){var a=i.next(),c=a.getRightmostCoordinate(),f=new er(n).getDepth(c);a.computeDepth(f),a.findResultEdges(),n.add(a),e.add(a.getDirectedEdges(),a.getNodes())}}},{key:"createSubgraphs",value:function(t){for(var e=new vt,n=t.getNodes().iterator();n.hasNext();){var i=n.next();if(!i.isVisited()){var a=new Si;a.create(i),e.add(a)}}return Ce.sort(e,Ce.reverseOrder()),e}},{key:"createEmptyResultGeometry",value:function(){return this._geomFact.createPolygon()}},{key:"getNoder",value:function(t){if(null!==this._workingNoder)return this._workingNoder;var e=new Ie,n=new nn;return n.setPrecisionModel(t),e.setSegmentIntersector(new us(n)),e}},{key:"buffer",value:function(t,e){var n=this._workingPrecisionModel;null===n&&(n=t.getPrecisionModel()),this._geomFact=t.getFactory();var i=new pn(n,this._bufParams),a=new Pe(t,e,i).getCurves();if(a.size()<=0)return this.createEmptyResultGeometry();this.computeNodedEdges(a,n),this._graph=new Ye(new as),this._graph.addEdges(this._edgeList.getEdges());var c=this.createSubgraphs(this._graph),f=new In(this._geomFact);this.buildSubgraphs(c,f);var m=f.getPolygons();return m.size()<=0?this.createEmptyResultGeometry():this._geomFact.buildGeometry(m)}},{key:"computeNodedEdges",value:function(t,e){var n=this.getNoder(e);n.computeNodes(t);for(var i=n.getNodedSubstrings().iterator();i.hasNext();){var a=i.next(),c=a.getCoordinates();if(2!==c.length||!c[0].equals2D(c[1])){var f=a.getData(),m=new fi(a.getCoordinates(),new Ae(f));this.insertUniqueEdge(m)}}}},{key:"setNoder",value:function(t){this._workingNoder=t}}],[{key:"constructor_",value:function(){this._bufParams=null,this._workingPrecisionModel=null,this._workingNoder=null,this._geomFact=null,this._graph=null,this._edgeList=new os,this._bufParams=arguments[0]}},{key:"depthDelta",value:function(t){var e=t.getLocation(0,Z.LEFT),n=t.getLocation(0,Z.RIGHT);return e===I.INTERIOR&&n===I.EXTERIOR?1:e===I.EXTERIOR&&n===I.INTERIOR?-1:0}},{key:"convertSegStrings",value:function(t){for(var e=new St,n=new vt;t.hasNext();){var i=t.next(),a=e.createLineString(i.getCoordinates());n.add(a)}return e.buildGeometry(n)}}])}(),Fi=function(){function r(){N(this,r),r.constructor_.apply(this,arguments)}return x(r,[{key:"rescale",value:function(){if(Ot(arguments[0],Qe))for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.rescale(e.getCoordinates())}else if(arguments[0]instanceof Array){for(var n=arguments[0],i=0;i<n.length;i++)n[i].x=n[i].x/this._scaleFactor+this._offsetX,n[i].y=n[i].y/this._scaleFactor+this._offsetY;2===n.length&&n[0].equals2D(n[1])&&we.out.println(n)}}},{key:"scale",value:function(){if(Ot(arguments[0],Qe)){for(var t=arguments[0],e=new vt(t.size()),n=t.iterator();n.hasNext();){var i=n.next();e.add(new st(this.scale(i.getCoordinates()),i.getData()))}return e}if(arguments[0]instanceof Array){for(var a=arguments[0],c=new Array(a.length).fill(null),f=0;f<a.length;f++)c[f]=new D(Math.round((a[f].x-this._offsetX)*this._scaleFactor),Math.round((a[f].y-this._offsetY)*this._scaleFactor),a[f].getZ());return ce.removeRepeatedPoints(c)}}},{key:"isIntegerPrecision",value:function(){return 1===this._scaleFactor}},{key:"getNodedSubstrings",value:function(){var t=this._noder.getNodedSubstrings();return this._isScaled&&this.rescale(t),t}},{key:"computeNodes",value:function(t){var e=t;this._isScaled&&(e=this.scale(t)),this._noder.computeNodes(e)}},{key:"interfaces_",get:function(){return[me]}}],[{key:"constructor_",value:function(){if(this._noder=null,this._scaleFactor=null,this._offsetX=null,this._offsetY=null,this._isScaled=!1,2===arguments.length)r.constructor_.call(this,arguments[0],arguments[1],0,0);else if(4===arguments.length){var i=arguments[1];this._noder=arguments[0],this._scaleFactor=i,this._isScaled=!this.isIntegerPrecision()}}}])}(),gi=function(){function r(){N(this,r),r.constructor_.apply(this,arguments)}return x(r,[{key:"checkEndPtVertexIntersections",value:function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();){var e=t.next().getCoordinates();this.checkEndPtVertexIntersections(e[0],this._segStrings),this.checkEndPtVertexIntersections(e[e.length-1],this._segStrings)}else if(2===arguments.length)for(var n=arguments[0],i=arguments[1].iterator();i.hasNext();)for(var a=i.next().getCoordinates(),c=1;c<a.length-1;c++)if(a[c].equals(n))throw new At("found endpt/interior pt intersection at index "+c+" :pt "+n)}},{key:"checkInteriorIntersections",value:function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();)for(var e=t.next(),n=this._segStrings.iterator();n.hasNext();){var i=n.next();this.checkInteriorIntersections(e,i)}else if(2===arguments.length)for(var a=arguments[0],c=arguments[1],f=a.getCoordinates(),m=c.getCoordinates(),E=0;E<f.length-1;E++)for(var O=0;O<m.length-1;O++)this.checkInteriorIntersections(a,E,c,O);else if(4===arguments.length){var P=arguments[0],z=arguments[1],tt=arguments[2],ut=arguments[3];if(P===tt&&z===ut)return null;var ht=P.getCoordinates()[z],Bt=P.getCoordinates()[z+1],Yt=tt.getCoordinates()[ut],ee=tt.getCoordinates()[ut+1];if(this._li.computeIntersection(ht,Bt,Yt,ee),this._li.hasIntersection()&&(this._li.isProper()||this.hasInteriorIntersection(this._li,ht,Bt)||this.hasInteriorIntersection(this._li,Yt,ee)))throw new At("found non-noded intersection at "+ht+"-"+Bt+" and "+Yt+"-"+ee)}}},{key:"checkValid",value:function(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses()}},{key:"checkCollapses",value:function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();){var e=t.next();this.checkCollapses(e)}else if(1===arguments.length)for(var n=arguments[0].getCoordinates(),i=0;i<n.length-2;i++)this.checkCollapse(n[i],n[i+1],n[i+2])}},{key:"hasInteriorIntersection",value:function(t,e,n){for(var i=0;i<t.getIntersectionNum();i++){var a=t.getIntersection(i);if(!a.equals(e)&&!a.equals(n))return!0}return!1}},{key:"checkCollapse",value:function(t,e,n){if(t.equals(n))throw new At("found non-noded collapse at "+r.fact.createLineString([t,e,n]))}}],[{key:"constructor_",value:function(){this._li=new nn,this._segStrings=null,this._segStrings=arguments[0]}}])}();gi.fact=new St;var Ui=function(){function r(){N(this,r),r.constructor_.apply(this,arguments)}return x(r,[{key:"intersectsScaled",value:function(t,e){var n=Math.min(t.x,e.x),i=Math.max(t.x,e.x),a=Math.min(t.y,e.y),c=Math.max(t.y,e.y),f=this._maxx<n||this._minx>i||this._maxy<a||this._miny>c;if(f)return!1;var m=this.intersectsToleranceSquare(t,e);return Dt.isTrue(!(f&&m),"Found bad envelope test"),m}},{key:"initCorners",value:function(t){var e=.5;this._minx=t.x-e,this._maxx=t.x+e,this._miny=t.y-e,this._maxy=t.y+e,this._corner[0]=new D(this._maxx,this._maxy),this._corner[1]=new D(this._minx,this._maxy),this._corner[2]=new D(this._minx,this._miny),this._corner[3]=new D(this._maxx,this._miny)}},{key:"intersects",value:function(t,e){return 1===this._scaleFactor?this.intersectsScaled(t,e):(this.copyScaled(t,this._p0Scaled),this.copyScaled(e,this._p1Scaled),this.intersectsScaled(this._p0Scaled,this._p1Scaled))}},{key:"scale",value:function(t){return Math.round(t*this._scaleFactor)}},{key:"getCoordinate",value:function(){return this._originalPt}},{key:"copyScaled",value:function(t,e){e.x=this.scale(t.x),e.y=this.scale(t.y)}},{key:"getSafeEnvelope",value:function(){if(null===this._safeEnv){var t=r.SAFE_ENV_EXPANSION_FACTOR/this._scaleFactor;this._safeEnv=new Kt(this._originalPt.x-t,this._originalPt.x+t,this._originalPt.y-t,this._originalPt.y+t)}return this._safeEnv}},{key:"intersectsPixelClosure",value:function(t,e){return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!(this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),this._li.hasIntersection()))))}},{key:"intersectsToleranceSquare",value:function(t,e){var n=!1,i=!1;return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!(this._li.isProper()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),this._li.isProper()||(this._li.hasIntersection()&&(n=!0),this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),this._li.isProper()||(this._li.hasIntersection()&&(i=!0),this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),this._li.isProper()||n&&i||t.equals(this._pt)||e.equals(this._pt)))))}},{key:"addSnappedNode",value:function(t,e){var n=t.getCoordinate(e),i=t.getCoordinate(e+1);return!!this.intersects(n,i)&&(t.addIntersection(this.getCoordinate(),e),!0)}}],[{key:"constructor_",value:function(){this._li=null,this._pt=null,this._originalPt=null,this._ptScaled=null,this._p0Scaled=null,this._p1Scaled=null,this._scaleFactor=null,this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,this._corner=new Array(4).fill(null),this._safeEnv=null;var t=arguments[0],e=arguments[1],n=arguments[2];if(this._originalPt=t,this._pt=t,this._scaleFactor=e,this._li=n,e<=0)throw new j("Scale factor must be non-zero");1!==e&&(this._pt=new D(this.scale(t.x),this.scale(t.y)),this._p0Scaled=new D,this._p1Scaled=new D),this.initCorners(this._pt)}}])}();Ui.SAFE_ENV_EXPANSION_FACTOR=.75;var Gi=x(function r(){N(this,r),r.constructor_.apply(this,arguments)},[{key:"select",value:function(){1!==arguments.length&&2===arguments.length&&(arguments[0].getLineSegment(arguments[1],this.selectedSegment),this.select(this.selectedSegment))}}],[{key:"constructor_",value:function(){this.selectedSegment=new Gt}}]),Bi=x(function r(){N(this,r),r.constructor_.apply(this,arguments)},[{key:"snap",value:function(){if(1===arguments.length)return this.snap(arguments[0],null,-1);if(3===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2],i=t.getSafeEnvelope(),a=new Lr(t,e,n);return this._index.query(i,new(x(function c(){N(this,c)},[{key:"interfaces_",get:function(){return[jt]}},{key:"visitItem",value:function(c){c.select(i,a)}}]))),a.isNodeAdded()}}}],[{key:"constructor_",value:function(){this._index=null,this._index=arguments[0]}}]),Lr=function(r){function t(){var e;return N(this,t),e=q(this,t),t.constructor_.apply(e,arguments),e}return ot(t,r),x(t,[{key:"isNodeAdded",value:function(){return this._isNodeAdded}},{key:"select",value:function(){if(!(2===arguments.length&&Number.isInteger(arguments[1])&&arguments[0]instanceof pt))return Et(t,"select",this,1).apply(this,arguments);var e=arguments[1],n=arguments[0].getContext();if(this._parentEdge===n&&(e===this._hotPixelVertexIndex||e+1===this._hotPixelVertexIndex))return null;this._isNodeAdded|=this._hotPixel.addSnappedNode(n,e)}}],[{key:"constructor_",value:function(){this._hotPixel=null,this._parentEdge=null,this._hotPixelVertexIndex=null,this._isNodeAdded=!1;var n=arguments[1],i=arguments[2];this._hotPixel=arguments[0],this._parentEdge=n,this._hotPixelVertexIndex=i}}])}(Gi);Bi.HotPixelSnapAction=Lr;var Zr=x(function r(){N(this,r),r.constructor_.apply(this,arguments)},[{key:"processIntersections",value:function(r,t,e,n){if(r===e&&t===n)return null;var i=r.getCoordinates()[t],a=r.getCoordinates()[t+1],c=e.getCoordinates()[n],f=e.getCoordinates()[n+1];if(this._li.computeIntersection(i,a,c,f),this._li.hasIntersection()&&this._li.isInteriorIntersection()){for(var m=0;m<this._li.getIntersectionNum();m++)this._interiorIntersections.add(this._li.getIntersection(m));r.addIntersections(this._li,t,0),e.addIntersections(this._li,n,1)}}},{key:"isDone",value:function(){return!1}},{key:"getInteriorIntersections",value:function(){return this._interiorIntersections}},{key:"interfaces_",get:function(){return[Mi]}}],[{key:"constructor_",value:function(){this._li=null,this._interiorIntersections=null,this._li=arguments[0],this._interiorIntersections=new vt}}]),qi=x(function r(){N(this,r),r.constructor_.apply(this,arguments)},[{key:"checkCorrectness",value:function(r){var t=st.getNodedSubstrings(r),e=new gi(t);try{e.checkValid()}catch(n){if(!(n instanceof Ve))throw n;n.printStackTrace()}}},{key:"getNodedSubstrings",value:function(){return st.getNodedSubstrings(this._nodedSegStrings)}},{key:"snapRound",value:function(r,t){var e=this.findInteriorIntersections(r,t);this.computeIntersectionSnaps(e),this.computeVertexSnaps(r)}},{key:"findInteriorIntersections",value:function(r,t){var e=new Zr(t);return this._noder.setSegmentIntersector(e),this._noder.computeNodes(r),e.getInteriorIntersections()}},{key:"computeVertexSnaps",value:function(){if(Ot(arguments[0],Qe))for(var r=arguments[0].iterator();r.hasNext();){var t=r.next();this.computeVertexSnaps(t)}else if(arguments[0]instanceof st)for(var e=arguments[0],n=e.getCoordinates(),i=0;i<n.length;i++){var a=new Ui(n[i],this._scaleFactor,this._li);this._pointSnapper.snap(a,e,i)&&e.addIntersection(n[i],i)}}},{key:"computeNodes",value:function(r){this._nodedSegStrings=r,this._noder=new Ie,this._pointSnapper=new Bi(this._noder.getIndex()),this.snapRound(r,this._li)}},{key:"computeIntersectionSnaps",value:function(r){for(var t=r.iterator();t.hasNext();){var e=t.next(),n=new Ui(e,this._scaleFactor,this._li);this._pointSnapper.snap(n)}}},{key:"interfaces_",get:function(){return[me]}}],[{key:"constructor_",value:function(){this._pm=null,this._li=null,this._scaleFactor=null,this._noder=null,this._pointSnapper=null,this._nodedSegStrings=null;var r=arguments[0];this._pm=r,this._li=new nn,this._li.setPrecisionModel(r),this._scaleFactor=r.getScale()}}]),nr=function(){function r(){N(this,r),r.constructor_.apply(this,arguments)}return x(r,[{key:"bufferFixedPrecision",value:function(t){var e=new Fi(new qi(new Ge(1)),t.getScale()),n=new ls(this._bufParams);n.setWorkingPrecisionModel(t),n.setNoder(e),this._resultGeometry=n.buffer(this._argGeom,this._distance)}},{key:"bufferReducedPrecision",value:function(){if(0===arguments.length){for(var t=r.MAX_PRECISION_DIGITS;t>=0;t--){try{this.bufferReducedPrecision(t)}catch(a){if(!(a instanceof B))throw a;this._saveException=a}if(null!==this._resultGeometry)return null}throw this._saveException}if(1===arguments.length){var n=r.precisionScaleFactor(this._argGeom,this._distance,arguments[0]),i=new Ge(n);this.bufferFixedPrecision(i)}}},{key:"computeGeometry",value:function(){if(this.bufferOriginalPrecision(),null!==this._resultGeometry)return null;var t=this._argGeom.getFactory().getPrecisionModel();t.getType()===Ge.FIXED?this.bufferFixedPrecision(t):this.bufferReducedPrecision()}},{key:"setQuadrantSegments",value:function(t){this._bufParams.setQuadrantSegments(t)}},{key:"bufferOriginalPrecision",value:function(){try{var t=new ls(this._bufParams);this._resultGeometry=t.buffer(this._argGeom,this._distance)}catch(e){if(!(e instanceof At))throw e;this._saveException=e}}},{key:"getResultGeometry",value:function(t){return this._distance=t,this.computeGeometry(),this._resultGeometry}},{key:"setEndCapStyle",value:function(t){this._bufParams.setEndCapStyle(t)}}],[{key:"constructor_",value:function(){if(this._argGeom=null,this._distance=null,this._bufParams=new W,this._resultGeometry=null,this._saveException=null,1===arguments.length)this._argGeom=arguments[0];else if(2===arguments.length){var n=arguments[1];this._argGeom=arguments[0],this._bufParams=n}}},{key:"bufferOp",value:function(){if(2===arguments.length){var t=arguments[1];return new r(arguments[0]).getResultGeometry(t)}if(3===arguments.length){if(Number.isInteger(arguments[2])&&arguments[0]instanceof dt&&"number"==typeof arguments[1]){var e=arguments[1],n=arguments[2],i=new r(arguments[0]);return i.setQuadrantSegments(n),i.getResultGeometry(e)}if(arguments[2]instanceof W&&arguments[0]instanceof dt&&"number"==typeof arguments[1]){var a=arguments[1];return new r(arguments[0],arguments[2]).getResultGeometry(a)}}else if(4===arguments.length){var c=arguments[1],f=arguments[2],m=arguments[3],E=new r(arguments[0]);return E.setQuadrantSegments(f),E.setEndCapStyle(m),E.getResultGeometry(c)}}},{key:"precisionScaleFactor",value:function(t,e,n){var i=t.getEnvelopeInternal(),a=Zn.max(Math.abs(i.getMaxX()),Math.abs(i.getMaxY()),Math.abs(i.getMinX()),Math.abs(i.getMinY()))+2*(e>0?e:0),c=n-Math.trunc(Math.log(a)/Math.log(10)+1);return Math.pow(10,c)}}])}();nr.CAP_ROUND=W.CAP_ROUND,nr.CAP_BUTT=W.CAP_FLAT,nr.CAP_FLAT=W.CAP_FLAT,nr.CAP_SQUARE=W.CAP_SQUARE,nr.MAX_PRECISION_DIGITS=12;var Yi=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],zi=x(function r(t){N(this,r),this.geometryFactory=t||new St},[{key:"read",value:function(r){var t,e=(t="string"==typeof r?JSON.parse(r):r).type;if(!$e[e])throw new Error("Unknown GeoJSON type: "+t.type);return-1!==Yi.indexOf(e)?$e[e].call(this,t.coordinates):$e[e].call(this,"GeometryCollection"===e?t.geometries:t)}},{key:"write",value:function(r){var t=r.getGeometryType();if(!on[t])throw new Error("Geometry is not supported");return on[t].call(this,r)}}]),$e={Feature:function(r){var t={};for(var e in r)t[e]=r[e];if(r.geometry){if(!$e[r.geometry.type])throw new Error("Unknown GeoJSON type: "+r.type);t.geometry=this.read(r.geometry)}return r.bbox&&(t.bbox=$e.bbox.call(this,r.bbox)),t},FeatureCollection:function(r){var t={};if(r.features){t.features=[];for(var e=0;e<r.features.length;++e)t.features.push(this.read(r.features[e]))}return r.bbox&&(t.bbox=this.parse.bbox.call(this,r.bbox)),t},coordinates:function(r){for(var t=[],e=0;e<r.length;++e)t.push(J(D,ge(r[e])));return t},bbox:function(r){return this.geometryFactory.createLinearRing([new D(r[0],r[1]),new D(r[2],r[1]),new D(r[2],r[3]),new D(r[0],r[3]),new D(r[0],r[1])])},Point:function(r){var t=J(D,ge(r));return this.geometryFactory.createPoint(t)},MultiPoint:function(r){for(var t=[],e=0;e<r.length;++e)t.push($e.Point.call(this,r[e]));return this.geometryFactory.createMultiPoint(t)},LineString:function(r){var t=$e.coordinates.call(this,r);return this.geometryFactory.createLineString(t)},MultiLineString:function(r){for(var t=[],e=0;e<r.length;++e)t.push($e.LineString.call(this,r[e]));return this.geometryFactory.createMultiLineString(t)},Polygon:function(r){for(var t=$e.coordinates.call(this,r[0]),e=this.geometryFactory.createLinearRing(t),n=[],i=1;i<r.length;++i){var c=$e.coordinates.call(this,r[i]),f=this.geometryFactory.createLinearRing(c);n.push(f)}return this.geometryFactory.createPolygon(e,n)},MultiPolygon:function(r){for(var t=[],e=0;e<r.length;++e)t.push($e.Polygon.call(this,r[e]));return this.geometryFactory.createMultiPolygon(t)},GeometryCollection:function(r){for(var t=[],e=0;e<r.length;++e)t.push(this.read(r[e]));return this.geometryFactory.createGeometryCollection(t)}},on={coordinate:function(r){var t=[r.x,r.y];return r.z&&t.push(r.z),r.m&&t.push(r.m),t},Point:function(r){return{type:"Point",coordinates:on.coordinate.call(this,r.getCoordinate())}},MultiPoint:function(r){for(var t=[],e=0;e<r._geometries.length;++e){var i=on.Point.call(this,r._geometries[e]);t.push(i.coordinates)}return{type:"MultiPoint",coordinates:t}},LineString:function(r){for(var t=[],e=r.getCoordinates(),n=0;n<e.length;++n)t.push(on.coordinate.call(this,e[n]));return{type:"LineString",coordinates:t}},MultiLineString:function(r){for(var t=[],e=0;e<r._geometries.length;++e){var i=on.LineString.call(this,r._geometries[e]);t.push(i.coordinates)}return{type:"MultiLineString",coordinates:t}},Polygon:function(r){var t=[],e=on.LineString.call(this,r._shell);t.push(e.coordinates);for(var n=0;n<r._holes.length;++n){var a=on.LineString.call(this,r._holes[n]);t.push(a.coordinates)}return{type:"Polygon",coordinates:t}},MultiPolygon:function(r){for(var t=[],e=0;e<r._geometries.length;++e){var i=on.Polygon.call(this,r._geometries[e]);t.push(i.coordinates)}return{type:"MultiPolygon",coordinates:t}},GeometryCollection:function(r){for(var t=[],e=0;e<r._geometries.length;++e){var n=r._geometries[e],i=n.getGeometryType();t.push(on[i].call(this,n))}return{type:"GeometryCollection",geometries:t}}};return{BufferOp:nr,GeoJSONReader:x(function r(t){N(this,r),this.parser=new zi(t||new St)},[{key:"read",value:function(r){return this.parser.read(r)}}]),GeoJSONWriter:x(function r(){N(this,r),this.parser=new zi(this.geometryFactory)},[{key:"write",value:function(r){return this.parser.write(r)}}])}}()},2274:(wt,et,q)=>{var N=q(9341);function J(Q){var x,K;function _t($t,Vt){try{var Et=Q[$t](Vt),ge=Et.value,be=ge instanceof N;Promise.resolve(be?ge.wrapped:ge).then(function(De){be?_t("return"===$t?"return":"next",De):ot(Et.done?"return":"normal",De)},function(De){_t("throw",De)})}catch(De){ot("throw",De)}}function ot($t,Vt){switch($t){case"return":x.resolve({value:Vt,done:!0});break;case"throw":x.reject(Vt);break;default:x.resolve({value:Vt,done:!1})}(x=x.next)?_t(x.key,x.arg):K=null}this._invoke=function Ct($t,Vt){return new Promise(function(Et,ge){var be={key:$t,arg:Vt,resolve:Et,reject:ge,next:null};K?K=K.next=be:(x=K=be,_t($t,Vt))})},"function"!=typeof Q.return&&(this.return=void 0)}J.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},J.prototype.next=function(Q){return this._invoke("next",Q)},J.prototype.throw=function(Q){return this._invoke("throw",Q)},J.prototype.return=function(Q){return this._invoke("return",Q)},wt.exports=J,wt.exports.__esModule=!0,wt.exports.default=wt.exports},9341:wt=>{wt.exports=function et(q){this.wrapped=q},wt.exports.__esModule=!0,wt.exports.default=wt.exports},803:wt=>{wt.exports=function et(q,N){var J={},Q=!1;function x(K,Ct){return Q=!0,Ct=new Promise(function(_t){_t(q[K](Ct))}),{done:!1,value:N(Ct)}}return J[typeof Symbol<"u"&&Symbol.iterator||"@@iterator"]=function(){return this},J.next=function(K){return Q?(Q=!1,K):x("next",K)},"function"==typeof q.throw&&(J.throw=function(K){if(Q)throw Q=!1,K;return x("throw",K)}),"function"==typeof q.return&&(J.return=function(K){return Q?(Q=!1,K):x("return",K)}),J},wt.exports.__esModule=!0,wt.exports.default=wt.exports},1535:wt=>{function q(N){function J(Q){if(Object(Q)!==Q)return Promise.reject(new TypeError(Q+" is not an object."));var x=Q.done;return Promise.resolve(Q.value).then(function(K){return{value:K,done:x}})}return(q=function(x){this.s=x,this.n=x.next}).prototype={s:null,n:null,next:function(){return J(this.n.apply(this.s,arguments))},return:function(x){var K=this.s.return;return void 0===K?Promise.resolve({value:x,done:!0}):J(K.apply(this.s,arguments))},throw:function(x){var K=this.s.return;return void 0===K?Promise.reject(x):J(K.apply(this.s,arguments))}},new q(N)}wt.exports=function et(N){var J,Q,x,K=2;for(typeof Symbol<"u"&&(Q=Symbol.asyncIterator,x=Symbol.iterator);K--;){if(Q&&null!=(J=N[Q]))return J.call(N);if(x&&null!=(J=N[x]))return new q(J.call(N));Q="@@asyncIterator",x="@@iterator"}throw new TypeError("Object is not async iterable")},wt.exports.__esModule=!0,wt.exports.default=wt.exports},9344:wt=>{function et(N,J,Q,x,K,Ct,_t){try{var ot=N[Ct](_t),$t=ot.value}catch(Vt){return void Q(Vt)}ot.done?J($t):Promise.resolve($t).then(x,K)}wt.exports=function q(N){return function(){var J=this,Q=arguments;return new Promise(function(x,K){var Ct=N.apply(J,Q);function _t($t){et(Ct,x,K,_t,ot,"next",$t)}function ot($t){et(Ct,x,K,_t,ot,"throw",$t)}_t(void 0)})}},wt.exports.__esModule=!0,wt.exports.default=wt.exports},6938:(wt,et,q)=>{var N=q(9341);wt.exports=function J(Q){return new N(Q)},wt.exports.__esModule=!0,wt.exports.default=wt.exports},9973:(wt,et,q)=>{var N=q(2274);wt.exports=function J(Q){return function(){return new N(Q.apply(this,arguments))}},wt.exports.__esModule=!0,wt.exports.default=wt.exports},7362:(wt,et,q)=>{"use strict";var N=q(9344).default,J=q(9973).default,Q=q(6938).default,x=q(803).default,K=q(1535).default;function Ct(p,d){return function(){return p.apply(d,arguments)}}const{toString:_t}=Object.prototype,{getPrototypeOf:ot}=Object,$t=(p=Object.create(null),d=>{const v=_t.call(d);return p[v]||(p[v]=v.slice(8,-1).toLowerCase())}),Vt=p=>(p=p.toLowerCase(),d=>$t(d)===p),Et=p=>d=>typeof d===p,{isArray:ge}=Array,be=Et("undefined");var p;const wn=Vt("ArrayBuffer"),Ve=Et("string"),j=Et("function"),se=Et("number"),L=p=>null!==p&&"object"==typeof p,ct=p=>{if("object"!==$t(p))return!1;const d=ot(p);return!(null!==d&&d!==Object.prototype&&null!==Object.getPrototypeOf(d)||Symbol.toStringTag in p||Symbol.iterator in p)},hr=Vt("Date"),fr=Vt("File"),Cn=Vt("Blob"),yn=Vt("FileList"),gr=Vt("URLSearchParams"),[zn,dr,Xn,gt]=["ReadableStream","Request","Response","Headers"].map(Vt);function At(p,d,{allOwnKeys:v=!1}={}){if(null===p||typeof p>"u")return;let _,S;if("object"!=typeof p&&(p=[p]),ge(p))for(_=0,S=p.length;_<S;_++)d.call(null,p[_],_,p);else{const M=v?Object.getOwnPropertyNames(p):Object.keys(p),b=M.length;let Y;for(_=0;_<b;_++)Y=M[_],d.call(null,p[Y],Y,p)}}function Qn(p,d){d=d.toLowerCase();const v=Object.keys(p);let S,_=v.length;for(;_-- >0;)if(S=v[_],d===S.toLowerCase())return S;return null}const Dt=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,pr=p=>!be(p)&&p!==Dt,Qe=(p=>d=>p&&d instanceof p)(typeof Uint8Array<"u"&&ot(Uint8Array)),yr=Vt("HTMLFormElement"),ei=(({hasOwnProperty:p})=>(d,v)=>p.call(d,v))(Object.prototype),Z=Vt("RegExp"),_r=(p,d)=>{const v=Object.getOwnPropertyDescriptors(p),_={};At(v,(S,M)=>{let b;!1!==(b=d(S,M,p))&&(_[M]=b||S)}),Object.defineProperties(p,_)},On="abcdefghijklmnopqrstuvwxyz",vn="0123456789",Er={DIGIT:vn,ALPHA:On,ALPHA_DIGIT:On+On.toUpperCase()+vn},xt=Vt("AsyncFunction");var B={isArray:ge,isArrayBuffer:wn,isBuffer:function De(p){return null!==p&&!be(p)&&null!==p.constructor&&!be(p.constructor)&&j(p.constructor.isBuffer)&&p.constructor.isBuffer(p)},isFormData:p=>{let d;return p&&("function"==typeof FormData&&p instanceof FormData||j(p.append)&&("formdata"===(d=$t(p))||"object"===d&&j(p.toString)&&"[object FormData]"===p.toString()))},isArrayBufferView:function W(p){let d;return d=typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView(p):p&&p.buffer&&wn(p.buffer),d},isString:Ve,isNumber:se,isBoolean:p=>!0===p||!1===p,isObject:L,isPlainObject:ct,isReadableStream:zn,isRequest:dr,isResponse:Xn,isHeaders:gt,isUndefined:be,isDate:hr,isFile:fr,isBlob:Cn,isRegExp:Z,isFunction:j,isStream:p=>L(p)&&j(p.pipe),isURLSearchParams:gr,isTypedArray:Qe,isFileList:yn,forEach:At,merge:function mr(){const{caseless:p}=pr(this)&&this||{},d={},v=(_,S)=>{const M=p&&Qn(d,S)||S;d[M]=ct(d[M])&&ct(_)?mr(d[M],_):ct(_)?mr({},_):ge(_)?_.slice():_};for(let _=0,S=arguments.length;_<S;_++)arguments[_]&&At(arguments[_],v);return d},extend:(p,d,v,{allOwnKeys:_}={})=>(At(d,(S,M)=>{p[M]=v&&j(S)?Ct(S,v):S},{allOwnKeys:_}),p),trim:p=>p.trim?p.trim():p.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:p=>(65279===p.charCodeAt(0)&&(p=p.slice(1)),p),inherits:(p,d,v,_)=>{p.prototype=Object.create(d.prototype,_),p.prototype.constructor=p,Object.defineProperty(p,"super",{value:d.prototype}),v&&Object.assign(p.prototype,v)},toFlatObject:(p,d,v,_)=>{let S,M,b;const Y={};if(d=d||{},null==p)return d;do{for(S=Object.getOwnPropertyNames(p),M=S.length;M-- >0;)b=S[M],(!_||_(b,p,d))&&!Y[b]&&(d[b]=p[b],Y[b]=!0);p=!1!==v&&ot(p)}while(p&&(!v||v(p,d))&&p!==Object.prototype);return d},kindOf:$t,kindOfTest:Vt,endsWith:(p,d,v)=>{p=String(p),(void 0===v||v>p.length)&&(v=p.length);const _=p.indexOf(d,v-=d.length);return-1!==_&&_===v},toArray:p=>{if(!p)return null;if(ge(p))return p;let d=p.length;if(!se(d))return null;const v=new Array(d);for(;d-- >0;)v[d]=p[d];return v},forEachEntry:(p,d)=>{const _=(p&&p[Symbol.iterator]).call(p);let S;for(;(S=_.next())&&!S.done;){const M=S.value;d.call(p,M[0],M[1])}},matchAll:(p,d)=>{let v;const _=[];for(;null!==(v=p.exec(d));)_.push(v);return _},isHTMLForm:yr,hasOwnProperty:ei,hasOwnProp:ei,reduceDescriptors:_r,freezeMethods:p=>{_r(p,(d,v)=>{if(j(p)&&-1!==["arguments","caller","callee"].indexOf(v))return!1;if(j(p[v])){if(d.enumerable=!1,"writable"in d)return void(d.writable=!1);d.set||(d.set=()=>{throw Error("Can not rewrite read-only method '"+v+"'")})}})},toObjectSet:(p,d)=>{const v={},_=S=>{S.forEach(M=>{v[M]=!0})};return ge(p)?_(p):_(String(p).split(d)),v},toCamelCase:p=>p.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(v,_,S){return _.toUpperCase()+S}),noop:()=>{},toFiniteNumber:(p,d)=>null!=p&&Number.isFinite(p=+p)?p:d,findKey:Qn,global:Dt,isContextDefined:pr,ALPHABET:Er,generateString:(p=16,d=Er.ALPHA_DIGIT)=>{let v="";const{length:_}=d;for(;p--;)v+=d[Math.random()*_|0];return v},isSpecCompliantForm:function Rn(p){return!!(p&&j(p.append)&&"FormData"===p[Symbol.toStringTag]&&p[Symbol.iterator])},toJSONObject:p=>{const d=new Array(10),v=(_,S)=>{if(L(_)){if(d.indexOf(_)>=0)return;if(!("toJSON"in _)){d[S]=_;const M=ge(_)?[]:{};return At(_,(b,Y)=>{const nt=v(b,S+1);!be(nt)&&(M[Y]=nt)}),d[S]=void 0,M}}return _};return v(p,0)},isAsyncFn:xt,isThenable:p=>p&&(L(p)||j(p))&&j(p.then)&&j(p.catch)};function bt(p,d,v,_,S){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=p,this.name="AxiosError",d&&(this.code=d),v&&(this.config=v),_&&(this.request=_),S&&(this.response=S)}B.inherits(bt,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:B.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const vt=bt.prototype,ni={};function or(p){return B.isPlainObject(p)||B.isArray(p)}function we(p){return B.endsWith(p,"[]")?p.slice(0,-2):p}function Zn(p,d,v){return p?p.concat(d).map(function(S,M){return S=we(S),!v&&M?"["+S+"]":S}).join(v?".":""):d}["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(p=>{ni[p]={value:p}}),Object.defineProperties(bt,ni),Object.defineProperty(vt,"isAxiosError",{value:!0}),bt.from=(p,d,v,_,S,M)=>{const b=Object.create(vt);return B.toFlatObject(p,b,function(nt){return nt!==Error.prototype},Y=>"isAxiosError"!==Y),bt.call(b,p.message,d,v,_,S),b.cause=p,b.name=p.name,M&&Object.assign(b,M),b};const xr=B.toFlatObject(B,{},null,function(d){return/^is[A-Z]/.test(d)});function un(p,d,v){if(!B.isObject(p))throw new TypeError("target must be an object");d=d||new FormData;const _=(v=B.toFlatObject(v,{metaTokens:!0,dots:!1,indexes:!1},!1,function(Rt,me){return!B.isUndefined(me[Rt])})).metaTokens,S=v.visitor||X,M=v.dots,b=v.indexes,nt=(v.Blob||typeof Blob<"u"&&Blob)&&B.isSpecCompliantForm(d);if(!B.isFunction(S))throw new TypeError("visitor must be a function");function rt(pt){if(null===pt)return"";if(B.isDate(pt))return pt.toISOString();if(!nt&&B.isBlob(pt))throw new bt("Blob is not supported. Use a Buffer instead.");return B.isArrayBuffer(pt)||B.isTypedArray(pt)?nt&&"function"==typeof Blob?new Blob([pt]):Buffer.from(pt):pt}function X(pt,Rt,me){let oe=pt;if(pt&&!me&&"object"==typeof pt)if(B.endsWith(Rt,"{}"))Rt=_?Rt:Rt.slice(0,-2),pt=JSON.stringify(pt);else if(B.isArray(pt)&&function ne(p){return B.isArray(p)&&!p.some(or)}(pt)||(B.isFileList(pt)||B.endsWith(Rt,"[]"))&&(oe=B.toArray(pt)))return Rt=we(Rt),oe.forEach(function(ze,Zt){!B.isUndefined(ze)&&null!==ze&&d.append(!0===b?Zn([Rt],Zt,M):null===b?Rt:Rt+"[]",rt(ze))}),!1;return!!or(pt)||(d.append(Zn(me,Rt,M),rt(pt)),!1)}const st=[],Gt=Object.assign(xr,{defaultVisitor:X,convertValue:rt,isVisitable:or});if(!B.isObject(p))throw new TypeError("data must be an object");return function ie(pt,Rt){if(!B.isUndefined(pt)){if(-1!==st.indexOf(pt))throw Error("Circular reference detected in "+Rt.join("."));st.push(pt),B.forEach(pt,function(oe,Ie){!0===(!(B.isUndefined(oe)||null===oe)&&S.call(d,oe,B.isString(Ie)?Ie.trim():Ie,Rt,Gt))&&ie(oe,Rt?Rt.concat(Ie):[Ie])}),st.pop()}}(p),d}function tn(p){const d={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(p).replace(/[!'()~]|%20|%00/g,function(_){return d[_]})}function Nr(p,d){this._pairs=[],p&&un(p,this,d)}const Ze=Nr.prototype;function $(p){return encodeURIComponent(p).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function bn(p,d,v){if(!d)return p;const _=v&&v.encode||$,S=v&&v.serialize;let M;if(M=S?S(d,v):B.isURLSearchParams(d)?d.toString():new Nr(d,v).toString(_),M){const b=p.indexOf("#");-1!==b&&(p=p.slice(0,b)),p+=(-1===p.indexOf("?")?"?":"&")+M}return p}Ze.append=function(d,v){this._pairs.push([d,v])},Ze.toString=function(d){const v=d?function(_){return d.call(this,_,tn)}:tn;return this._pairs.map(function(S){return v(S[0])+"="+v(S[1])},"").join("&")};var _n=class Ir{constructor(){this.handlers=[]}use(d,v,_){return this.handlers.push({fulfilled:d,rejected:v,synchronous:!!_&&_.synchronous,runWhen:_?_.runWhen:null}),this.handlers.length-1}eject(d){this.handlers[d]&&(this.handlers[d]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(d){B.forEach(this.handlers,function(_){null!==_&&d(_)})}},qr={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},zr={isBrowser:!0,classes:{URLSearchParams:typeof URLSearchParams<"u"?URLSearchParams:Nr,FormData:typeof FormData<"u"?FormData:null,Blob:typeof Blob<"u"?Blob:null},protocols:["http","https","file","blob","url","data"]};const Hn=typeof window<"u"&&typeof document<"u",Ti=(p=>Hn&&["ReactNative","NativeScript","NS"].indexOf(p)<0)(typeof navigator<"u"&&navigator.product),Sr=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&"function"==typeof self.importScripts,Tr=Hn&&window.location.href||"http://localhost";var Ue={...Object.freeze({__proto__:null,hasBrowserEnv:Hn,hasStandardBrowserWebWorkerEnv:Sr,hasStandardBrowserEnv:Ti,origin:Tr}),...zr};function wr(p){function d(v,_,S,M){let b=v[M++];if("__proto__"===b)return!0;const Y=Number.isFinite(+b),nt=M>=v.length;return b=!b&&B.isArray(S)?S.length:b,nt?(S[b]=B.hasOwnProp(S,b)?[S[b],_]:_,!Y):((!S[b]||!B.isObject(S[b]))&&(S[b]=[]),d(v,_,S[b],M)&&B.isArray(S[b])&&(S[b]=function Mn(p){const d={},v=Object.keys(p);let _;const S=v.length;let M;for(_=0;_<S;_++)M=v[_],d[M]=p[M];return d}(S[b])),!Y)}if(B.isFormData(p)&&B.isFunction(p.entries)){const v={};return B.forEachEntry(p,(_,S)=>{d(function En(p){return B.matchAll(/\w+|\[(\w*)]/g,p).map(d=>"[]"===d[0]?"":d[1]||d[0])}(_),S,v,0)}),v}return null}const en={transitional:qr,adapter:["xhr","http","fetch"],transformRequest:[function(d,v){const _=v.getContentType()||"",S=_.indexOf("application/json")>-1,M=B.isObject(d);if(M&&B.isHTMLForm(d)&&(d=new FormData(d)),B.isFormData(d))return S?JSON.stringify(wr(d)):d;if(B.isArrayBuffer(d)||B.isBuffer(d)||B.isStream(d)||B.isFile(d)||B.isBlob(d)||B.isReadableStream(d))return d;if(B.isArrayBufferView(d))return d.buffer;if(B.isURLSearchParams(d))return v.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),d.toString();let Y;if(M){if(_.indexOf("application/x-www-form-urlencoded")>-1)return function ur(p,d){return un(p,new Ue.classes.URLSearchParams,Object.assign({visitor:function(v,_,S,M){return Ue.isNode&&B.isBuffer(v)?(this.append(_,v.toString("base64")),!1):M.defaultVisitor.apply(this,arguments)}},d))}(d,this.formSerializer).toString();if((Y=B.isFileList(d))||_.indexOf("multipart/form-data")>-1){const nt=this.env&&this.env.FormData;return un(Y?{"files[]":d}:d,nt&&new nt,this.formSerializer)}}return M||S?(v.setContentType("application/json",!1),function Cr(p,d,v){if(B.isString(p))try{return(d||JSON.parse)(p),B.trim(p)}catch(_){if("SyntaxError"!==_.name)throw _}return(v||JSON.stringify)(p)}(d)):d}],transformResponse:[function(d){const v=this.transitional||en.transitional,_=v&&v.forcedJSONParsing,S="json"===this.responseType;if(B.isResponse(d)||B.isReadableStream(d))return d;if(d&&B.isString(d)&&(_&&!this.responseType||S)){const b=!(v&&v.silentJSONParsing)&&S;try{return JSON.parse(d)}catch(Y){if(b)throw"SyntaxError"===Y.name?bt.from(Y,bt.ERR_BAD_RESPONSE,this,null,this.response):Y}}return d}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Ue.classes.FormData,Blob:Ue.classes.Blob},validateStatus:function(d){return d>=200&&d<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};B.forEach(["delete","get","head","post","put","patch"],p=>{en.headers[p]={}});var ce=en;const wi=B.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Wn=Symbol("internals");function cn(p){return p&&String(p).trim().toLowerCase()}function An(p){return!1===p||null==p?p:B.isArray(p)?p.map(An):String(p)}function Ln(p,d,v,_,S){if(B.isFunction(_))return _.call(this,d,v);if(S&&(d=v),B.isString(d)){if(B.isString(_))return-1!==d.indexOf(_);if(B.isRegExp(_))return _.test(d)}}class $n{constructor(d){d&&this.set(d)}set(d,v,_){const S=this;function M(Y,nt,rt){const X=cn(nt);if(!X)throw new Error("header name must be a non-empty string");const st=B.findKey(S,X);(!st||void 0===S[st]||!0===rt||void 0===rt&&!1!==S[st])&&(S[st||nt]=An(Y))}const b=(Y,nt)=>B.forEach(Y,(rt,X)=>M(rt,X,nt));if(B.isPlainObject(d)||d instanceof this.constructor)b(d,v);else if(B.isString(d)&&(d=d.trim())&&!(p=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(p.trim()))(d))b((p=>{const d={};let v,_,S;return p&&p.split("\n").forEach(function(b){S=b.indexOf(":"),v=b.substring(0,S).trim().toLowerCase(),_=b.substring(S+1).trim(),!(!v||d[v]&&wi[v])&&("set-cookie"===v?d[v]?d[v].push(_):d[v]=[_]:d[v]=d[v]?d[v]+", "+_:_)}),d})(d),v);else if(B.isHeaders(d))for(const[Y,nt]of d.entries())M(nt,Y,_);else null!=d&&M(v,d,_);return this}get(d,v){if(d=cn(d)){const _=B.findKey(this,d);if(_){const S=this[_];if(!v)return S;if(!0===v)return function He(p){const d=Object.create(null),v=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let _;for(;_=v.exec(p);)d[_[1]]=_[2];return d}(S);if(B.isFunction(v))return v.call(this,S,_);if(B.isRegExp(v))return v.exec(S);throw new TypeError("parser must be boolean|regexp|function")}}}has(d,v){if(d=cn(d)){const _=B.findKey(this,d);return!(!_||void 0===this[_]||v&&!Ln(0,this[_],_,v))}return!1}delete(d,v){const _=this;let S=!1;function M(b){if(b=cn(b)){const Y=B.findKey(_,b);Y&&(!v||Ln(0,_[Y],Y,v))&&(delete _[Y],S=!0)}}return B.isArray(d)?d.forEach(M):M(d),S}clear(d){const v=Object.keys(this);let _=v.length,S=!1;for(;_--;){const M=v[_];(!d||Ln(0,this[M],M,d,!0))&&(delete this[M],S=!0)}return S}normalize(d){const v=this,_={};return B.forEach(this,(S,M)=>{const b=B.findKey(_,M);if(b)return v[b]=An(S),void delete v[M];const Y=d?function Ge(p){return p.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(d,v,_)=>v.toUpperCase()+_)}(M):String(M).trim();Y!==M&&delete v[M],v[Y]=An(S),_[Y]=!0}),this}concat(...d){return this.constructor.concat(this,...d)}toJSON(d){const v=Object.create(null);return B.forEach(this,(_,S)=>{null!=_&&!1!==_&&(v[S]=d&&B.isArray(_)?_.join(", "):_)}),v}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([d,v])=>d+": "+v).join("\n")}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(d){return d instanceof this?d:new this(d)}static concat(d,...v){const _=new this(d);return v.forEach(S=>_.set(S)),_}static accessor(d){const _=(this[Wn]=this[Wn]={accessors:{}}).accessors,S=this.prototype;function M(b){const Y=cn(b);_[Y]||(function Ft(p,d){const v=B.toCamelCase(" "+d);["get","set","has"].forEach(_=>{Object.defineProperty(p,_+v,{value:function(S,M,b){return this[_].call(this,d,S,M,b)},configurable:!0})})}(S,b),_[Y]=!0)}return B.isArray(d)?d.forEach(M):M(d),this}}$n.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),B.reduceDescriptors($n.prototype,({value:p},d)=>{let v=d[0].toUpperCase()+d.slice(1);return{get:()=>p,set(_){this[v]=_}}}),B.freezeMethods($n);var St=$n;function de(p,d){const v=this||ce,_=d||v,S=St.from(_.headers);let M=_.data;return B.forEach(p,function(Y){M=Y.call(v,M,S.normalize(),d?d.status:void 0)}),S.normalize(),M}function Kn(p){return!(!p||!p.__CANCEL__)}function pe(p,d,v){bt.call(this,p??"canceled",bt.ERR_CANCELED,d,v),this.name="CanceledError"}function Be(p,d,v){const _=v.config.validateStatus;v.status&&_&&!_(v.status)?d(new bt("Request failed with status code "+v.status,[bt.ERR_BAD_REQUEST,bt.ERR_BAD_RESPONSE][Math.floor(v.status/100)-4],v.config,v.request,v)):p(v)}B.inherits(pe,bt,{__CANCEL__:!0});var he=(p,d,v=3)=>{let _=0;const S=function Jt(p,d){p=p||10;const v=new Array(p),_=new Array(p);let b,S=0,M=0;return d=void 0!==d?d:1e3,function(nt){const rt=Date.now(),X=_[M];b||(b=rt),v[S]=nt,_[S]=rt;let st=M,Gt=0;for(;st!==S;)Gt+=v[st++],st%=p;if(S=(S+1)%p,S===M&&(M=(M+1)%p),rt-b<d)return;const ie=X&&rt-X;return ie?Math.round(1e3*Gt/ie):void 0}}(50,250);return function hn(p,d){let v=0;const _=1e3/d;let S=null;return function(){const b=!0===this,Y=Date.now();if(b||Y-v>_)return S&&(clearTimeout(S),S=null),v=Y,p.apply(null,arguments);S||(S=setTimeout(()=>(S=null,v=Date.now(),p.apply(null,arguments)),_-(Y-v)))}}(M=>{const b=M.loaded,Y=M.lengthComputable?M.total:void 0,nt=b-_,rt=S(nt);_=b;const st={loaded:b,total:Y,progress:Y?b/Y:void 0,bytes:nt,rate:rt||void 0,estimated:rt&&Y&&b<=Y?(Y-b)/rt:void 0,event:M,lengthComputable:null!=Y};st[d?"download":"upload"]=!0,p(st)},v)},yt=Ue.hasStandardBrowserEnv?function(){const d=/(msie|trident)/i.test(navigator.userAgent),v=document.createElement("a");let _;function S(M){let b=M;return d&&(v.setAttribute("href",b),b=v.href),v.setAttribute("href",b),{href:v.href,protocol:v.protocol?v.protocol.replace(/:$/,""):"",host:v.host,search:v.search?v.search.replace(/^\?/,""):"",hash:v.hash?v.hash.replace(/^#/,""):"",hostname:v.hostname,port:v.port,pathname:"/"===v.pathname.charAt(0)?v.pathname:"/"+v.pathname}}return _=S(window.location.href),function(b){const Y=B.isString(b)?S(b):b;return Y.protocol===_.protocol&&Y.host===_.host}}():function(){return!0},ri=Ue.hasStandardBrowserEnv?{write(p,d,v,_,S,M){const b=[p+"="+encodeURIComponent(d)];B.isNumber(v)&&b.push("expires="+new Date(v).toGMTString()),B.isString(_)&&b.push("path="+_),B.isString(S)&&b.push("domain="+S),!0===M&&b.push("secure"),document.cookie=b.join("; ")},read(p){const d=document.cookie.match(new RegExp("(^|;\\s*)("+p+")=([^;]*)"));return d?decodeURIComponent(d[3]):null},remove(p){this.write(p,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function Or(p,d){return p&&!function xn(p){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(p)}(d)?function Oi(p,d){return d?p.replace(/\/?\/$/,"")+"/"+d.replace(/^\/+/,""):p}(p,d):d}const ii=p=>p instanceof St?{...p}:p;function mt(p,d){d=d||{};const v={};function _(rt,X,st){return B.isPlainObject(rt)&&B.isPlainObject(X)?B.merge.call({caseless:st},rt,X):B.isPlainObject(X)?B.merge({},X):B.isArray(X)?X.slice():X}function S(rt,X,st){return B.isUndefined(X)?B.isUndefined(rt)?void 0:_(void 0,rt,st):_(rt,X,st)}function M(rt,X){if(!B.isUndefined(X))return _(void 0,X)}function b(rt,X){return B.isUndefined(X)?B.isUndefined(rt)?void 0:_(void 0,rt):_(void 0,X)}function Y(rt,X,st){return st in d?_(rt,X):st in p?_(void 0,rt):void 0}const nt={url:M,method:M,data:M,baseURL:b,transformRequest:b,transformResponse:b,paramsSerializer:b,timeout:b,timeoutMessage:b,withCredentials:b,withXSRFToken:b,adapter:b,responseType:b,xsrfCookieName:b,xsrfHeaderName:b,onUploadProgress:b,onDownloadProgress:b,decompress:b,maxContentLength:b,maxBodyLength:b,beforeRedirect:b,transport:b,httpAgent:b,httpsAgent:b,cancelToken:b,socketPath:b,responseEncoding:b,validateStatus:Y,headers:(rt,X)=>S(ii(rt),ii(X),!0)};return B.forEach(Object.keys(Object.assign({},p,d)),function(X){const st=nt[X]||S,Gt=st(p[X],d[X],X);B.isUndefined(Gt)&&st!==Y||(v[X]=Gt)}),v}var Xr=p=>{const d=mt({},p);let nt,{data:v,withXSRFToken:_,xsrfHeaderName:S,xsrfCookieName:M,headers:b,auth:Y}=d;if(d.headers=b=St.from(b),d.url=bn(Or(d.baseURL,d.url),p.params,p.paramsSerializer),Y&&b.set("Authorization","Basic "+btoa((Y.username||"")+":"+(Y.password?unescape(encodeURIComponent(Y.password)):""))),B.isFormData(v))if(Ue.hasStandardBrowserEnv||Ue.hasStandardBrowserWebWorkerEnv)b.setContentType(void 0);else if(!1!==(nt=b.getContentType())){const[rt,...X]=nt?nt.split(";").map(st=>st.trim()).filter(Boolean):[];b.setContentType([rt||"multipart/form-data",...X].join("; "))}if(Ue.hasStandardBrowserEnv&&(_&&B.isFunction(_)&&(_=_(d)),_||!1!==_&&yt(d.url))){const rt=S&&M&&ri.read(M);rt&&b.set(S,rt)}return d},Rr=typeof XMLHttpRequest<"u"&&function(p){return new Promise(function(v,_){const S=Xr(p);let M=S.data;const b=St.from(S.headers).normalize();let nt,{responseType:Y}=S;function rt(){S.cancelToken&&S.cancelToken.unsubscribe(nt),S.signal&&S.signal.removeEventListener("abort",nt)}let X=new XMLHttpRequest;function st(){if(!X)return;const ie=St.from("getAllResponseHeaders"in X&&X.getAllResponseHeaders());Be(function(oe){v(oe),rt()},function(oe){_(oe),rt()},{data:Y&&"text"!==Y&&"json"!==Y?X.response:X.responseText,status:X.status,statusText:X.statusText,headers:ie,config:p,request:X}),X=null}X.open(S.method.toUpperCase(),S.url,!0),X.timeout=S.timeout,"onloadend"in X?X.onloadend=st:X.onreadystatechange=function(){!X||4!==X.readyState||0===X.status&&(!X.responseURL||0!==X.responseURL.indexOf("file:"))||setTimeout(st)},X.onabort=function(){!X||(_(new bt("Request aborted",bt.ECONNABORTED,S,X)),X=null)},X.onerror=function(){_(new bt("Network Error",bt.ERR_NETWORK,S,X)),X=null},X.ontimeout=function(){let pt=S.timeout?"timeout of "+S.timeout+"ms exceeded":"timeout exceeded";S.timeoutErrorMessage&&(pt=S.timeoutErrorMessage),_(new bt(pt,(S.transitional||qr).clarifyTimeoutError?bt.ETIMEDOUT:bt.ECONNABORTED,S,X)),X=null},void 0===M&&b.setContentType(null),"setRequestHeader"in X&&B.forEach(b.toJSON(),function(pt,Rt){X.setRequestHeader(Rt,pt)}),B.isUndefined(S.withCredentials)||(X.withCredentials=!!S.withCredentials),Y&&"json"!==Y&&(X.responseType=S.responseType),"function"==typeof S.onDownloadProgress&&X.addEventListener("progress",he(S.onDownloadProgress,!0)),"function"==typeof S.onUploadProgress&&X.upload&&X.upload.addEventListener("progress",he(S.onUploadProgress)),(S.cancelToken||S.signal)&&(nt=ie=>{!X||(_(!ie||ie.type?new pe(null,p,X):ie),X.abort(),X=null)},S.cancelToken&&S.cancelToken.subscribe(nt),S.signal&&(S.signal.aborted?nt():S.signal.addEventListener("abort",nt)));const Gt=function Ut(p){const d=/^([-+\w]{1,25})(:?\/\/|:)/.exec(p);return d&&d[1]||""}(S.url);Gt&&-1===Ue.protocols.indexOf(Gt)?_(new bt("Unsupported protocol "+Gt+":",bt.ERR_BAD_REQUEST,p)):X.send(M||null)})},We=(p,d)=>{let _,v=new AbortController;const S=function(nt){if(!_){_=!0,b();const rt=nt instanceof Error?nt:this.reason;v.abort(rt instanceof bt?rt:new pe(rt instanceof Error?rt.message:rt))}};let M=d&&setTimeout(()=>{S(new bt(`timeout ${d} of ms exceeded`,bt.ETIMEDOUT))},d);const b=()=>{p&&(M&&clearTimeout(M),M=null,p.forEach(nt=>{nt&&(nt.removeEventListener?nt.removeEventListener("abort",S):nt.unsubscribe(S))}),p=null)};p.forEach(nt=>nt&&nt.addEventListener&&nt.addEventListener("abort",S));const{signal:Y}=v;return Y.unsubscribe=b,[Y,()=>{M&&clearTimeout(M),M=null}]};const Ri=function*(p,d){let v=p.byteLength;if(!d||v<d)return void(yield p);let S,_=0;for(;_<v;)S=_+d,yield p.slice(_,S),_=S},te=function(){var p=J(function*(d,v,_){var b,S=!1,M=!1;try{for(var nt,Y=K(d);S=!(nt=yield Q(Y.next())).done;S=!1){const rt=nt.value;yield*x(K(Ri(ArrayBuffer.isView(rt)?rt:yield Q(_(String(rt))),v)),Q)}}catch(rt){M=!0,b=rt}finally{try{S&&null!=Y.return&&(yield Q(Y.return()))}finally{if(M)throw b}}});return function(v,_,S){return p.apply(this,arguments)}}(),Wt=(p,d,v,_,S)=>{const M=te(p,d,S);let b=0;return new ReadableStream({type:"bytes",pull:Y=>N(function*(){const{done:nt,value:rt}=yield M.next();if(nt)return Y.close(),void _();v&&v(b+=rt.byteLength),Y.enqueue(new Uint8Array(rt))})(),cancel:Y=>(_(Y),M.return())},{highWaterMark:2})},nn=(p,d)=>{const v=null!=p;return _=>setTimeout(()=>d({lengthComputable:v,total:p,loaded:_}))},Jn="function"==typeof fetch&&"function"==typeof Request&&"function"==typeof Response,Pn=Jn&&"function"==typeof ReadableStream,Ne=Jn&&("function"==typeof TextEncoder?(p=>d=>p.encode(d))(new TextEncoder):function(){var p=N(function*(d){return new Uint8Array(yield new Response(d).arrayBuffer())});return function(d){return p.apply(this,arguments)}}()),Ae=Pn&&(()=>{let p=!1;const d=new Request(Ue.origin,{body:new ReadableStream,method:"POST",get duplex(){return p=!0,"half"}}).headers.has("Content-Type");return p&&!d})(),Dn=Pn&&!!(()=>{try{return B.isReadableStream(new Response("").body)}catch{}})(),tr={stream:Dn&&(p=>p.body)};Jn&&(p=>{["text","arrayBuffer","blob","formData","stream"].forEach(d=>{!tr[d]&&(tr[d]=B.isFunction(p[d])?v=>v[d]():(v,_)=>{throw new bt(`Response type '${d}' is not supported`,bt.ERR_NOT_SUPPORT,_)})})})(new Response);const br=function(){var p=N(function*(d){return null==d?0:B.isBlob(d)?d.size:B.isSpecCompliantForm(d)?(yield new Request(d).arrayBuffer()).byteLength:B.isArrayBufferView(d)?d.byteLength:(B.isURLSearchParams(d)&&(d+=""),B.isString(d)?(yield Ne(d)).byteLength:void 0)});return function(v){return p.apply(this,arguments)}}(),Fn=function(){var p=N(function*(d,v){return B.toFiniteNumber(d.getContentLength())??br(v)});return function(v,_){return p.apply(this,arguments)}}();var Mr=Jn&&function(){var p=N(function*(d){let{url:v,method:_,data:S,signal:M,cancelToken:b,timeout:Y,onDownloadProgress:nt,onUploadProgress:rt,responseType:X,headers:st,withCredentials:Gt="same-origin",fetchOptions:ie}=Xr(d);X=X?(X+"").toLowerCase():"text";let me,oe,[pt,Rt]=M||b||Y?We([M,b],Y):[];const Ie=()=>{!me&&setTimeout(()=>{pt&&pt.unsubscribe()}),me=!0};let ze;try{if(rt&&Ae&&"get"!==_&&"head"!==_&&0!==(ze=yield Fn(st,S))){let pn,Oe=new Request(v,{method:"POST",body:S,duplex:"half"});B.isFormData(S)&&(pn=Oe.headers.get("content-type"))&&st.setContentType(pn),Oe.body&&(S=Wt(Oe.body,65536,nn(ze,he(rt)),null,Ne))}B.isString(Gt)||(Gt=Gt?"cors":"omit"),oe=new Request(v,{...ie,signal:pt,method:_.toUpperCase(),headers:st.normalize().toJSON(),body:S,duplex:"half",withCredentials:Gt});let Zt=yield fetch(oe);const Sn=Dn&&("stream"===X||"response"===X);if(Dn&&(nt||Sn)){const Oe={};["status","statusText","headers"].forEach(er=>{Oe[er]=Zt[er]});const pn=B.toFiniteNumber(Zt.headers.get("content-length"));Zt=new Response(Wt(Zt.body,65536,nt&&nn(pn,he(nt,!0)),Sn&&Ie,Ne),Oe)}X=X||"text";let Ee=yield tr[B.findKey(tr,X)||"text"](Zt,d);return!Sn&&Ie(),Rt&&Rt(),yield new Promise((Oe,pn)=>{Be(Oe,pn,{data:Ee,headers:St.from(Zt.headers),status:Zt.status,statusText:Zt.statusText,config:d,request:oe})})}catch(Zt){throw Ie(),Zt&&"TypeError"===Zt.name&&/fetch/i.test(Zt.message)?Object.assign(new bt("Network Error",bt.ERR_NETWORK,d,oe),{cause:Zt.cause||Zt}):bt.from(Zt,Zt&&Zt.code,d,oe)}});return function(d){return p.apply(this,arguments)}}();const Un={http:null,xhr:Rr,fetch:Mr};B.forEach(Un,(p,d)=>{if(p){try{Object.defineProperty(p,"name",{value:d})}catch{}Object.defineProperty(p,"adapterName",{value:d})}});const Mt=p=>`- ${p}`,je=p=>B.isFunction(p)||null===p||!1===p;var lr_getAdapter=p=>{p=B.isArray(p)?p:[p];const{length:d}=p;let v,_;const S={};for(let M=0;M<d;M++){let b;if(v=p[M],_=v,!je(v)&&(_=Un[(b=String(v)).toLowerCase()],void 0===_))throw new bt(`Unknown adapter '${b}'`);if(_)break;S[b||"#"+M]=_}if(!_){const M=Object.entries(S).map(([Y,nt])=>`adapter ${Y} `+(!1===nt?"is not supported by the environment":"is not available in the build"));throw new bt("There is no suitable adapter to dispatch the request "+(d?M.length>1?"since :\n"+M.map(Mt).join("\n"):" "+Mt(M[0]):"as no adapter specified"),"ERR_NOT_SUPPORT")}return _};function cr(p){if(p.cancelToken&&p.cancelToken.throwIfRequested(),p.signal&&p.signal.aborted)throw new pe(null,p)}function Nn(p){return cr(p),p.headers=St.from(p.headers),p.data=de.call(p,p.transformRequest),-1!==["post","put","patch"].indexOf(p.method)&&p.headers.setContentType("application/x-www-form-urlencoded",!1),lr_getAdapter(p.adapter||ce.adapter)(p).then(function(_){return cr(p),_.data=de.call(p,p.transformResponse,_),_.headers=St.from(_.headers),_},function(_){return Kn(_)||(cr(p),_&&_.response&&(_.response.data=de.call(p,p.transformResponse,_.response),_.response.headers=St.from(_.response.headers))),Promise.reject(_)})}const fe={};["object","boolean","number","function","string","symbol"].forEach((p,d)=>{fe[p]=function(_){return typeof _===p||"a"+(d<1?"n ":" ")+p}});const rn={};fe.transitional=function(d,v,_){function S(M,b){return"[Axios v1.7.2] Transitional option '"+M+"'"+b+(_?". "+_:"")}return(M,b,Y)=>{if(!1===d)throw new bt(S(b," has been removed"+(v?" in "+v:"")),bt.ERR_DEPRECATED);return v&&!rn[b]&&(rn[b]=!0,console.warn(S(b," has been deprecated since v"+v+" and will be removed in the near future"))),!d||d(M,b,Y)}};var sn={assertOptions:function Gn(p,d,v){if("object"!=typeof p)throw new bt("options must be an object",bt.ERR_BAD_OPTION_VALUE);const _=Object.keys(p);let S=_.length;for(;S-- >0;){const M=_[S],b=d[M];if(b){const Y=p[M],nt=void 0===Y||b(Y,M,p);if(!0!==nt)throw new bt("option "+M+" must be "+nt,bt.ERR_BAD_OPTION_VALUE)}else if(!0!==v)throw new bt("Unknown option "+M,bt.ERR_BAD_OPTION)}},validators:fe};const Ye=sn.validators;class In{constructor(d){this.defaults=d,this.interceptors={request:new _n,response:new _n}}request(d,v){var _=this;return N(function*(){try{return yield _._request(d,v)}catch(S){if(S instanceof Error){let M;Error.captureStackTrace?Error.captureStackTrace(M={}):M=new Error;const b=M.stack?M.stack.replace(/^.+\n/,""):"";try{S.stack?b&&!String(S.stack).endsWith(b.replace(/^.+\n.+\n/,""))&&(S.stack+="\n"+b):S.stack=b}catch{}}throw S}})()}_request(d,v){"string"==typeof d?(v=v||{}).url=d:v=d||{},v=mt(this.defaults,v);const{transitional:_,paramsSerializer:S,headers:M}=v;void 0!==_&&sn.assertOptions(_,{silentJSONParsing:Ye.transitional(Ye.boolean),forcedJSONParsing:Ye.transitional(Ye.boolean),clarifyTimeoutError:Ye.transitional(Ye.boolean)},!1),null!=S&&(B.isFunction(S)?v.paramsSerializer={serialize:S}:sn.assertOptions(S,{encode:Ye.function,serialize:Ye.function},!0)),v.method=(v.method||this.defaults.method||"get").toLowerCase();let b=M&&B.merge(M.common,M[v.method]);M&&B.forEach(["delete","get","head","post","put","patch","common"],pt=>{delete M[pt]}),v.headers=St.concat(b,M);const Y=[];let nt=!0;this.interceptors.request.forEach(function(Rt){"function"==typeof Rt.runWhen&&!1===Rt.runWhen(v)||(nt=nt&&Rt.synchronous,Y.unshift(Rt.fulfilled,Rt.rejected))});const rt=[];this.interceptors.response.forEach(function(Rt){rt.push(Rt.fulfilled,Rt.rejected)});let X,Gt,st=0;if(!nt){const pt=[Nn.bind(this),void 0];for(pt.unshift.apply(pt,Y),pt.push.apply(pt,rt),Gt=pt.length,X=Promise.resolve(v);st<Gt;)X=X.then(pt[st++],pt[st++]);return X}Gt=Y.length;let ie=v;for(st=0;st<Gt;){const pt=Y[st++],Rt=Y[st++];try{ie=pt(ie)}catch(me){Rt.call(this,me);break}}try{X=Nn.call(this,ie)}catch(pt){return Promise.reject(pt)}for(st=0,Gt=rt.length;st<Gt;)X=X.then(rt[st++],rt[st++]);return X}getUri(d){return bn(Or((d=mt(this.defaults,d)).baseURL,d.url),d.params,d.paramsSerializer)}}B.forEach(["delete","get","head","options"],function(d){In.prototype[d]=function(v,_){return this.request(mt(_||{},{method:d,url:v,data:(_||{}).data}))}}),B.forEach(["post","put","patch"],function(d){function v(_){return function(M,b,Y){return this.request(mt(Y||{},{method:d,headers:_?{"Content-Type":"multipart/form-data"}:{},url:M,data:b}))}}In.prototype[d]=v(),In.prototype[d+"Form"]=v(!0)});var gn=In;class Qt{constructor(d){if("function"!=typeof d)throw new TypeError("executor must be a function.");let v;this.promise=new Promise(function(M){v=M});const _=this;this.promise.then(S=>{if(!_._listeners)return;let M=_._listeners.length;for(;M-- >0;)_._listeners[M](S);_._listeners=null}),this.promise.then=S=>{let M;const b=new Promise(Y=>{_.subscribe(Y),M=Y}).then(S);return b.cancel=function(){_.unsubscribe(M)},b},d(function(M,b,Y){_.reason||(_.reason=new pe(M,b,Y),v(_.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(d){this.reason?d(this.reason):this._listeners?this._listeners.push(d):this._listeners=[d]}unsubscribe(d){if(!this._listeners)return;const v=this._listeners.indexOf(d);-1!==v&&this._listeners.splice(v,1)}static source(){let d;return{token:new Qt(function(S){d=S}),cancel:d}}}var ke=Qt;const Ce={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Ce).forEach(([p,d])=>{Ce[d]=p});var Qr=Ce;const jt=function dn(p){const d=new gn(p),v=Ct(gn.prototype.request,d);return B.extend(v,gn.prototype,d,{allOwnKeys:!0}),B.extend(v,d,null,{allOwnKeys:!0}),v.create=function(S){return dn(mt(p,S))},v}(ce);jt.Axios=gn,jt.CanceledError=pe,jt.CancelToken=ke,jt.isCancel=Kn,jt.VERSION="1.7.2",jt.toFormData=un,jt.AxiosError=bt,jt.Cancel=jt.CanceledError,jt.all=function(d){return Promise.all(d)},jt.spread=function ae(p){return function(v){return p.apply(null,v)}},jt.isAxiosError=function re(p){return B.isObject(p)&&!0===p.isAxiosError},jt.mergeConfig=mt,jt.AxiosHeaders=St,jt.formToJSON=p=>wr(B.isHTMLForm(p)?new FormData(p):p),jt.getAdapter=lr_getAdapter,jt.HttpStatusCode=Qr,jt.default=jt,wt.exports=jt}}]);